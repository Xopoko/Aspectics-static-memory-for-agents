{
    "sections": [
        {
            "id": "section-cli-runtime",
            "slug": "cli-runtime",
            "title": "CLI Runtime",
            "entries": [
                {
                    "id": "aspect-cli-sandbox-lifecycle",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-sandbox-lifecycle",
                    "name": "CLI entry re-launches into sandboxed runtime",
                    "description": "`projects/qwen-code/packages/cli/index.ts` delegates all startup to `main()` from `src/gemini.tsx` and normalizes fatal exits so CLI-specific error codes surface cleanly. `projects/qwen-code/packages/cli/src/gemini.tsx` loads layered settings, parses arguments, instantiates `Config`, patches console output, and sets DNS ordering before deciding whether to list extensions, relaunch Node with a larger `--max-old-space-size`, or hop into the sandbox (pre-validating OAuth, capturing stdin, and re-invoking via `start_sandbox`). The sandbox helper in `projects/qwen-code/packages/cli/src/utils/sandbox.ts` rebuilds PATH/PYTHONPATH, mirrors UID/GID for Linux, forwards ports, and re-execs the CLI so that once control returns to the core runtime the shared `ShellExecutionService` sees a consistent environment whether commands run on the host or inside the container.",
                    "tags": [
                        "cli-runtime",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/index.ts",
                            "sha256": "c5411eede3800027f55818d8c5f7d22b758fe22bb37b27afa7a87ea0824d0ac4"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/gemini.tsx",
                            "sha256": "601ae6f7bd4cddbf171c32ece16570c1a107c943f9a595d6c92fda765ea6500e"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox.ts",
                            "sha256": "147c5f8dbb426740876630857069cfd4630f3423349d36aef1bcfb534d7a8807"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.86
                },
                {
                    "id": "aspect-cli-sandbox-config",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-sandbox-config",
                    "name": "SandboxConfig selects container command and image before hop",
                    "description": "`projects/qwen-code/packages/cli/src/config/sandboxConfig.ts` inspects CLI flags, layered settings, and `GEMINI_SANDBOX*` env vars to resolve a `SandboxConfig`, preferring `sandbox-exec` on macOS seatbelt but falling back to docker/podman only when explicitly requested and installed; invalid choices raise `FatalSandboxError` up front. When a sandbox is needed, `projects/qwen-code/packages/cli/src/utils/sandbox.ts` rehydrates PATH/PYTHONPATH for container mounts, forwards user-defined ports via socat, injects stdin into `--prompt`, and re-executes the CLI entry (or debug/inspect variants) inside the container while mirroring UID/GID on Debian/Ubuntu if `SANDBOX_SET_UID_GID` is true. Together they guarantee the CLI's relaunch inherits the right image and privileges before handing control back to `main()`.",
                    "tags": [
                        "cli-runtime",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/sandboxConfig.ts",
                            "sha256": "1e7c321e3de5c36574721759a63b36f2cc8c43dd3d84aa73996c7ee16e633aae"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox.ts",
                            "sha256": "147c5f8dbb426740876630857069cfd4630f3423349d36aef1bcfb534d7a8807"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.8
                },
                {
                    "id": "aspect-cli-noninteractive-loop",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-noninteractive-loop",
                    "name": "Non-interactive CLI streams Gemini output and delegates tool calls",
                    "description": "`projects/qwen-code/packages/cli/src/nonInteractiveCli.ts` patches stdout, runs @include expansion via `handleAtCommand`, and then loops on `GeminiClient.sendMessageStream` responses from the core SDK, writing `GeminiEventType.Content` chunks directly to the terminal while capturing `ToolCallRequest` events. Each request is passed to `executeToolCall` from `projects/qwen-code/packages/core/src/core/nonInteractiveToolExecutor.ts`, which spins up a `CoreToolScheduler` to run declared tools and feed responses back into the message loop. Abort signals, turn limits, and telemetry shutdown are all wired through the shared `Config` assembled by `loadCliConfig` (`projects/qwen-code/packages/cli/src/config/config.ts`), so the same infrastructure the interactive UI uses is reused for scripted prompts, keeping CLI batch mode consistent with core chat and tool orchestration.",
                    "tags": [
                        "cli-runtime",
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/nonInteractiveCli.ts",
                            "sha256": "dfe171d946ac7f19096c17c562d773ddcd36454aec7c166c46ee226e7616387b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/nonInteractiveToolExecutor.ts",
                            "sha256": "928abe631c6ba46a870b5a3080ff092c493b86a6116868f6e2f611dc17b2026c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/client.ts",
                            "sha256": "0b1c97a0c9074624a9a5728b28b82f87662e67fb6510f6997beb88b640f105bc"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/config.ts",
                            "sha256": "813ef758a979bc75536ebbe52855d650a55c73b7f7de32918c35d45c5836a64c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.83
                },
                {
                    "id": "aspect-cli-config-bridges-core",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-config-bridges-core",
                    "name": "loadCliConfig composes core Config and memory before launch",
                    "description": "`projects/qwen-code/packages/cli/src/config/config.ts` merges settings scopes and CLI flags to assemble include directories, file filtering, MCP allowlists, and extension context files, then calls `loadHierarchicalGeminiMemory` to pull global/home/workspace memory (delegating to the core loader) before finally constructing `Config` from `projects/qwen-code/packages/core/src/config/config.ts`. The resulting `Config` instance is passed straight into `runNonInteractive` (`projects/qwen-code/packages/cli/src/nonInteractiveCli.ts`), so sandbox, approval-mode excludes, and preloaded memory all carry through without a second bootstrap path.",
                    "tags": [
                        "cli-runtime",
                        "core-config",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/config.ts",
                            "sha256": "813ef758a979bc75536ebbe52855d650a55c73b7f7de32918c35d45c5836a64c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/config/config.ts",
                            "sha256": "72dee5a1c45608eaae088f1282a380579b50ab86ef48e0629062865f604a6b48"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/nonInteractiveCli.ts",
                            "sha256": "dfe171d946ac7f19096c17c562d773ddcd36454aec7c166c46ee226e7616387b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.82
                },
                {
                    "id": "aspect-cli-command-service",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-command-service",
                    "name": "CommandService merges slash command loaders with conflict resolution",
                    "description": "`projects/qwen-code/packages/cli/src/services/CommandService.ts` runs each `ICommandLoader` in parallel, keeps successful results, and renames extension commands on collision (`extensionName.command` with numeric suffixes) while later non-extension loaders override earlier ones. The factory returns an immutable list consumed by the TUI and non-interactive CLI so built-ins, user TOML commands, and MCP prompts coexist without name clashes.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/CommandService.ts",
                            "sha256": "38345f3b78dfbff1ddc357b5c20a6353bc00eceb7857ed09cfc56251e68c3471"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.73
                },
                {
                    "id": "aspect-cli-builtin-command-loader",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-builtin-command-loader",
                    "name": "BuiltinCommandLoader enumerates core slash commands with config-aware handlers",
                    "description": "`projects/qwen-code/packages/cli/src/services/BuiltinCommandLoader.ts` wires 30+ hard-coded commands (auth, agents, model, tools, theme, etc.), injecting Config where needed (e.g., `ideCommand`, `restoreCommand`) and filtering out null definitions. This keeps the TUI's `/` palette stable regardless of user extensions, while allowing future growth by registering new handlers in one place.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/BuiltinCommandLoader.ts",
                            "sha256": "08615cf085dc55bac4e1695fdcb08470dfc06abc702d600b79451808172ccada"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-file-command-loader",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-file-command-loader",
                    "name": "FileCommandLoader parses TOML commands from user, project, and extension scopes",
                    "description": "`projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts` scans `~/.qwen/commands`, project `.qwen/commands`, and active extension directories for `.toml` definitions. It validates them with Zod, feeds prompts through processors like `AtFileProcessor` and `ShellProcessor` (reusing `SHORTHAND_ARGS_PLACEHOLDER`), and preserves loader ordering so user commands override extension aliases before CommandService deduplicates the surface.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts",
                            "sha256": "a915b671fa0a8d4a8dafb75ea3bfdb197f78c5a19efbd38e93a3b76a34c4af7f"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/atFileProcessor.ts",
                            "sha256": "0d3c2bc66f51e7540b1a933d13042153d724327331c63bb60081a1e0577bf234"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.74
                },
                {
                    "id": "aspect-cli-mcp-prompt-loader",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-mcp-prompt-loader",
                    "name": "McpPromptLoader exposes MCP prompts as slash commands with argument help",
                    "description": "`projects/qwen-code/packages/cli/src/services/McpPromptLoader.ts` iterates over Config-registered MCP servers, pulls prompt metadata via `getMCPServerPrompts()`, and constructs commands that support `help` subcommands, argument parsing (name/position), completions, and direct invocation returning `submit_prompt` actions. Errors propagate as friendly markdown messages so remote MCP prompts feel native inside the CLI.",
                    "tags": [
                        "cli-runtime",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/McpPromptLoader.ts",
                            "sha256": "cdcee14a1ecf2e5053e651124682b571a2cc73419acc64a1976901467925b9b8"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.76
                },
                {
                    "id": "aspect-cli-validate-noninteractive-auth",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-validate-noninteractive-auth",
                    "name": "validateNonInteractiveAuth enforces auth env vars before batch runs",
                    "description": "`projects/qwen-code/packages/cli/src/validateNonInterActiveAuth.ts` resolves the effective `AuthType` from CLI flags or env vars (`GEMINI_API_KEY`, `GOOGLE_GENAI_USE_VERTEXAI`, etc.), validates it with `validateAuthMethod()`, and exits with guidance if nothing is configured. When credentials are present it forces `Config.refreshAuth()` up front so non-interactive scripts fail fast if tokens are invalid instead of deep inside the chat loop.",
                    "tags": [
                        "cli-runtime",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/validateNonInterActiveAuth.ts",
                            "sha256": "f40845a4f13e10b8bce8dd15ed1a94f14db55ba2dc6c292a593aa1031ec2e2aa"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.7
                },
                {
                    "id": "aspect-cli-extensions-command",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-extensions-command",
                    "name": "`qwen extensions` orchestrates install/list/update lifecycle",
                    "description": "`projects/qwen-code/packages/cli/src/commands/extensions.tsx` binds subcommands for install, uninstall, list, update, enable, and disable, each implemented under `commands/extensions/`. Install resolves package metadata, writes manifests into `.qwen/extensions`, and triggers rebuilds, while list enumerates active entries with version and status so operators can manage extension fleets without opening the TUI.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/extensions.tsx",
                            "sha256": "3bba7075ce6574b81f45a2fceea606e4e0aeadc0fad8d5e10ffc2f09f6139448"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/extensions/install.ts",
                            "sha256": "2779da2ede7e55ddf3e11c4c763c67bf1b3ed7f257ce2903ae25ef7677d58ddd"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/extensions/list.ts",
                            "sha256": "47a3133291a87bed6c4d8048ae752a57fc8ac3ade6ad0d3945b2a108406fa4d4"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.66
                },
                {
                    "id": "aspect-cli-mcp-command",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-mcp-command",
                    "name": "`qwen mcp` manages local MCP server registry",
                    "description": "`projects/qwen-code/packages/cli/src/commands/mcp.ts` wires `add`, `remove`, and `list` subcommands that edit the Config-stored MCP server catalog. `add` writes entries with transport options, `remove` prunes by name, and `list` prints friendly tables summarizing status, letting operators manage remote prompt providers without editing JSON by hand.",
                    "tags": [
                        "cli-runtime",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/mcp.ts",
                            "sha256": "c6299203a1c38ce1ace9b552b7ae0d3447e7abdb31d19bdd28b7bfd747014363"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/mcp/add.ts",
                            "sha256": "d853421c0c2744355f96384ce44bd6f3fdca77ac49a855d8615c68695d29fa67"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/mcp/list.ts",
                            "sha256": "cf8643d0abeaac28c4af6fb61dad53dd01851ca9081b3f93140e91fbdabc2acd"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.64
                },
                {
                    "id": "aspect-cli-settings-loader",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-settings-loader",
                    "name": "Settings loader merges system, user, and workspace scopes",
                    "description": "`packages/cli/src/config/settings.ts` locates system defaults, user ~/.qwen settings, workspace overrides, and env files, migrates legacy flat configs to v2, and hydrates UI themes plus include directories before producing the merged `LoadedSettings`. It also exposes helpers for checkpointing, auth defaults, and excluded env vars consumed by CLI startup.",
                    "tags": [
                        "cli-runtime",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/settings.ts",
                            "sha256": "9a5d476d7690cb4a1bb768989d353c78f039d02cf4db665649d17a68da316c2f"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.69
                },
                {
                    "id": "aspect-cli-settings-schema",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-settings-schema",
                    "name": "Schema catalog defines settings metadata and defaults",
                    "description": "`packages/cli/src/config/settingsSchema.ts` enumerates every configurable key with labels, categories, restart requirements, defaults, and nested object structure. UI dialogs and validation routines read it to render grouped settings and to know which values can be toggled live.",
                    "tags": [
                        "cli-runtime",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/settingsSchema.ts",
                            "sha256": "f2d91df63785ddc325991bfc56d53b5deaa7fce4865a48a73be9be79e98b29f8"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-trusted-folders",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-trusted-folders",
                    "name": "Trusted folders API persists workspace trust decisions",
                    "description": "`packages/cli/src/config/trustedFolders.ts` loads and saves `.qwen/trustedFolders.json`, supports TRUST_FOLDER/TRUST_PARENT/DO_NOT_TRUST rules, and checks whether the current workspace sits within trusted roots. It underpins folder trust prompts and ensures tools stay disabled until users approve a directory.",
                    "tags": [
                        "cli-runtime",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/trustedFolders.ts",
                            "sha256": "23f8cc21b9a37fd9866f222c9ba213f27ae81c8bba93e753fda93f267c578571"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-key-bindings",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-key-bindings",
                    "name": "Data-driven key bindings mirror legacy shortcuts",
                    "description": "`packages/cli/src/config/keyBindings.ts` replaces hard-coded key handling with structured `Command` enums and default binding arrays, covering submission, history, vim-like navigation, shell reverse search, and IDE toggles. The schema feeds configuration UIs and keeps shortcuts consistent across platforms.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/keyBindings.ts",
                            "sha256": "2e0b56ea736056fc0b52b9fc8eb89b6462ba2d55e6340b456186088c9f3b24f7"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-settings-utils",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-settings-utils",
                    "name": "Settings utils flatten schema and compute effective values",
                    "description": "`packages/cli/src/utils/settingsUtils.ts` flattens the nested schema for quick lookups, reports restart-requiring keys, validates dialog visibility, and resolves effective values across scope inheritance. CLI dialogs rely on it to show correct defaults and categories when editing settings live.",
                    "tags": [
                        "cli-runtime",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/settingsUtils.ts",
                            "sha256": "3c42bbe1f069d511d799e0c6f00bb18587a10b475c6def0ada18d72d19e6fcb0"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-extension-management",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-extension-loader",
                    "name": "Extension loader hydrates MCP servers and context files",
                    "description": "`packages/cli/src/config/extension.ts` scans user and workspace extension directories, migrates legacy configs, hydrates JSON with install variables, and merges extension-provided MCP servers/context files while respecting disabled lists. It powers `/extensions` commands and the config bridge into core Config.",
                    "tags": [
                        "cli-runtime",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/extension.ts",
                            "sha256": "41ed1c00b999748b9adcfd3f4badfcddc1974e642dd1035e8e0ac3c3d19c6cca"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-app-shell",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-app-shell",
                    "name": "Ink App orchestrates streaming UI, commands, and dialogs",
                    "description": "`packages/cli/src/ui/App.tsx` wires dozens of hooks\u2014Gemini streaming, slash command processor, model/agent selectors, folder trust, Qwen OAuth status\u2014and renders the header/footer, diff prompts, IDE nudge, and subagent dialogs. It coordinates cleanup, update notifications, and message history rendering for the entire terminal experience.",
                    "tags": [
                        "cli-runtime",
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/App.tsx",
                            "sha256": "da9ab515c6cf9e5bd0594528a525ebd237435cc1b546590c78cd7e30e940d80c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.76
                },
                {
                    "id": "aspect-cli-command-service-loader-resilience",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-command-service-loader-resilience",
                    "name": "CommandService keeps partial command sets when loaders fail",
                    "description": "`projects/qwen-code/packages/cli/src/services/CommandService.ts` runs each loader via `Promise.allSettled`, logging rejections with `console.debug` so one bad provider does not abort the entire slash-command surface. Fulfilled loaders still contribute their results, ensuring the CLI boots with the available commands instead of crashing on a single extension or file error.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/CommandService.ts",
                            "sha256": "38345f3b78dfbff1ddc357b5c20a6353bc00eceb7857ed09cfc56251e68c3471"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                },
                {
                    "id": "aspect-cli-command-service-abort-signal",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-command-service-abort-signal",
                    "name": "CommandService propagates AbortSignal to command loaders",
                    "description": "`projects/qwen-code/packages/cli/src/services/CommandService.ts` requires an `AbortSignal` for `create()` and forwards it to every `ICommandLoader.loadCommands`, allowing long-running glob or extension queries to cancel when the CLI session shuts down. This keeps loader lifecycles aligned with the calling context so aborted startups do not leak pending filesystem work.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/CommandService.ts",
                            "sha256": "38345f3b78dfbff1ddc357b5c20a6353bc00eceb7857ed09cfc56251e68c3471"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "id": "aspect-cli-file-command-loader-deterministic-order",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-file-command-loader-deterministic-order",
                    "name": "FileCommandLoader sorts extension command directories",
                    "description": "`projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts` gathers active extensions from `Config`, filters to `isActive`, and sorts them with `localeCompare` before appending their `commands/` folders. That alphabetical order makes cross-extension TOML imports deterministic, so CommandService renames conflicts the same way across runs and machines.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts",
                            "sha256": "a915b671fa0a8d4a8dafb75ea3bfdb197f78c5a19efbd38e93a3b76a34c4af7f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-cli-file-command-loader-colon-sanitization",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-file-command-loader-colon-sanitization",
                    "name": "File commands replace colon path segments to keep namespaces clean",
                    "description": "`projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts` builds command names from TOML relative paths and replaces any literal `:` in path segments with underscores before joining with `:`. This avoids colliding with the namespace separator used by slash commands, so nested files like `foo:bar.toml` do not produce ambiguous names.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts",
                            "sha256": "a915b671fa0a8d4a8dafb75ea3bfdb197f78c5a19efbd38e93a3b76a34c4af7f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-file-command-loader-processor-order",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-file-command-loader-processor-order",
                    "name": "File command pipeline runs @file expansion before shell injection",
                    "description": "`projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts` constructs processors in a fixed order: `AtFileProcessor` executes first, then `ShellProcessor` when `!{}` or `{{args}}` appear, followed by `DefaultArgumentProcessor` if shorthand arguments were absent. Processing @file blocks before shell commands prevents malicious shells from fabricating new file placeholders, keeping custom prompts safe while still adding raw arguments at the end.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts",
                            "sha256": "a915b671fa0a8d4a8dafb75ea3bfdb197f78c5a19efbd38e93a3b76a34c4af7f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-file-command-loader-confirmation-fallback",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-file-command-loader-confirmation-fallback",
                    "name": "File command actions fall back gracefully and request shell confirmation",
                    "description": "`projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts` guards command execution with `context.invocation`; when missing it logs an error and submits the raw prompt so commands still run. During processing, catching `ConfirmationRequiredError` returns a `confirm_shell_commands` payload with the collected commands, letting the UI pause for approval before shelling out while other errors bubble to the global handler.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/FileCommandLoader.ts",
                            "sha256": "a915b671fa0a8d4a8dafb75ea3bfdb197f78c5a19efbd38e93a3b76a34c4af7f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-runtime-macos-seatbelt-profiles",
                    "sectionId": "section-cli-runtime",
                    "slug": "cli-runtime-macos-seatbelt-profiles",
                    "name": "macOS seatbelt \u043f\u0440\u043e\u0444\u0438\u043b\u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442 \u0441\u0435\u0442\u0435\u0432\u044b\u043c\u0438 \u0438 \u0444\u0430\u0439\u043b\u043e\u0432\u044b\u043c\u0438 \u043f\u0440\u0430\u0432\u0430\u043c\u0438 sandbox-exec",
                    "description": "`sandbox-macos-*.sb` \u043d\u0430\u0431\u043e\u0440\u044b \u0434\u043b\u044f `sandbox-exec` \u0434\u0430\u044e\u0442 \u0448\u0435\u0441\u0442\u044c \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u043f\u0440\u043e\u0444\u0438\u043b\u0435\u0439: `permissive-*` \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u044e\u0442 \u0447\u0442\u0435\u043d\u0438\u0435 \u0432\u0441\u0435\u0433\u043e \u0434\u0438\u0441\u043a\u0430 (deny \u0442\u043e\u043b\u044c\u043a\u043e \u0437\u0430\u043f\u0438\u0441\u0438 \u0432\u043d\u0435 whitelists), `restrictive-*` \u0437\u0430\u043f\u0440\u0435\u0449\u0430\u044e\u0442 \u0432\u0441\u0451 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438 \u0442\u043e\u0447\u0435\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0442 sysctl, mach-lookup \u0438 tty ioctl. \u0421\u0443\u0444\u0444\u0438\u043a\u0441\u044b `open`/`closed` \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u044e\u0442 \u0441\u0435\u0442\u044c\u044e (open \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 outbound, closed \u0440\u0435\u0436\u0435\u0442 \u0432\u0435\u0441\u044c \u0442\u0440\u0430\u0444\u0438\u043a \u043a\u0440\u043e\u043c\u0435 \u043f\u043e\u0440\u0442\u0430 \u0434\u0435\u0431\u0430\u0433\u0433\u0435\u0440\u0430), `proxied` \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442 \u0442\u043e\u043b\u044c\u043a\u043e localhost:8877 \u043f\u043e\u0434 \u043f\u0440\u043e\u043a\u0441\u0438-\u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0438 \u0440\u0430\u0437\u0440\u0435\u0448\u0430\u044e\u0442 bind \u0432\u0441\u0435\u0445 \u043f\u043e\u0440\u0442\u043e\u0432. `sandbox.ts` \u0432\u0441\u0435\u0433\u0434\u0430 \u043f\u0440\u043e\u043a\u0438\u0434\u044b\u0432\u0430\u0435\u0442 TARGET/TMP/CACHE/.qwen \u0438 \u0434\u043e \u043f\u044f\u0442\u0438 INCLUDE_DIR_* \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u043e\u0432, \u043f\u043e\u044d\u0442\u043e\u043c\u0443 seatbelt \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0437\u0430\u043f\u0438\u0441\u044c \u0438 \u043f\u043e\u0442\u043e\u043a \u0442\u0440\u0430\u0444\u0438\u043a\u0430 \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u043c\u0443 `SEATBELT_PROFILE`.",
                    "tags": [
                        "cli-runtime",
                        "sandboxing",
                        "security",
                        "macos"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox-macos-permissive-open.sb",
                            "sha256": "44cf821905e958e8cb63b7f21bf2dbaf7826e81bf3095090052305517fe3c3fb"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox-macos-permissive-closed.sb",
                            "sha256": "ab80ec01c4fcd95e2711f1463938e728091a577ce8a547fb7052b99e9d16cde8"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox-macos-permissive-proxied.sb",
                            "sha256": "c3acad375ff905f267e87d2b4b23a9bd4db9adc908fe15ffa1b4c2ae9d0ff838"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox-macos-restrictive-open.sb",
                            "sha256": "b648c189c014df6e541157c582f9ba982a60ad56a29be8a5894edbb05d04d58e"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox-macos-restrictive-closed.sb",
                            "sha256": "d58b81f0029305e59bb8779b2969b7366c5fd5f21e91862da6be8ca36c026cfe"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox-macos-restrictive-proxied.sb",
                            "sha256": "c0fec2fd307acc4162447911ffa5cc5b22aebc4b3a9d4d3ea29bf684ac7526b5"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox.ts",
                            "sha256": "147c5f8dbb426740876630857069cfd4630f3423349d36aef1bcfb534d7a8807"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.67
                }
            ]
        },
        {
            "id": "section-core-engine",
            "slug": "core-engine",
            "title": "Core Engine",
            "entries": [
                {
                    "id": "aspect-core-config-orchestrator",
                    "sectionId": "section-core-engine",
                    "slug": "core-config-orchestrator",
                    "name": "Config orchestrates workspace services and tool registry",
                    "description": "`projects/qwen-code/packages/core/src/config/config.ts` centralizes every runtime parameter: the constructor captures session metadata, sandbox and proxy settings, tool allow/deny lists, telemetry targets, checkpointing flags, and workspace folders, then builds `WorkspaceContext`, `Storage`, `FileExclusions`, and an async `Logger` while kicking off telemetry when enabled. `initialize()` is intentionally single-shot\u2014on first call it binds the shared `FileDiscoveryService`, optional `GitService` for checkpointing, `PromptRegistry`, `SubagentManager`, and a populated `ToolRegistry`, logging the resulting configuration for observability. Helpers such as `refreshAuth()` rebuild the `GeminiClient` with preserved history (stripping incompatible `thoughtSignature`s when swapping providers), keep approval modes and fallback flags in sync, and expose the choke point for anyone extending tool discovery or auth flows.",
                    "tags": [
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/config/config.ts",
                            "sha256": "72dee5a1c45608eaae088f1282a380579b50ab86ef48e0629062865f604a6b48"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-registry.ts",
                            "sha256": "f4940d6fe67c3721e3289cdcb798507c0558fc4acd798dcdd83fe1de8ebb0299"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/client.ts",
                            "sha256": "0b1c97a0c9074624a9a5728b28b82f87662e67fb6510f6997beb88b640f105bc"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.84
                },
                {
                    "id": "aspect-core-gemini-client",
                    "sectionId": "section-core-engine",
                    "slug": "core-gemini-client",
                    "name": "GeminiClient governs chat lifecycle, compression, and tool hooks",
                    "description": "`projects/qwen-code/packages/core/src/core/client.ts` instantiates the content generator through `createContentGenerator`, respects proxy settings, and tracks embedding models plus loop detection while maintaining IDE context. The client seeds chats with environment context and tool declarations, supports reinitialization with history preservation (stripping `thoughtSignature` metadata when crossing from GenAI to Vertex), and enforces guardrails such as `MAX_TURNS`, `COMPRESSION_TOKEN_THRESHOLD` 0.7, and `COMPRESSION_PRESERVE_THRESHOLD` 0.3 before triggering compression. It injects directory and IDE context deltas, coordinates next-speaker checks and retry-with-backoff loops, logs compression/turn events, and surfaces tool scheduling (`TaskTool`, `toolRegistry`)\u2014making it the focal point for adjusting conversation flow or adding new tool behaviors.",
                    "tags": [
                        "chat-engine",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/client.ts",
                            "sha256": "0b1c97a0c9074624a9a5728b28b82f87662e67fb6510f6997beb88b640f105bc"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.85
                },
                {
                    "id": "aspect-core-tool-registry",
                    "sectionId": "section-core-engine",
                    "slug": "core-tool-registry",
                    "name": "ToolRegistry discovers and brokers project + MCP tools",
                    "description": "`projects/qwen-code/packages/core/src/tools/tool-registry.ts` is constructed with the active `Config`, giving it prompt registries, MCP server definitions, and discovery/dispatch commands. `discoverAllTools()` clears prior registrations, rebuilds prompts, runs the configurable discovery command with 10\u202fMB stdout/stderr guards, parses the JSON payload into `DiscoveredTool`s that wrap `toolCallCommand`, and then asks `McpClientManager` to connect to each server for additional tools. Registrations deduplicate by name (upgrading to fully-qualified MCP IDs when needed), while helpers prune per-server entries, restart MCP servers, and expose lists of available declarations for `GeminiClient` to advertise. Because Config injects allow/deny lists and workspace context, the registry is the choke point for aligning new tools with CLI/runtime policy.",
                    "tags": [
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-registry.ts",
                            "sha256": "f4940d6fe67c3721e3289cdcb798507c0558fc4acd798dcdd83fe1de8ebb0299"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.79
                },
                {
                    "id": "aspect-core-shell-execution-service",
                    "sectionId": "section-core-engine",
                    "slug": "core-shell-execution-service",
                    "name": "ShellExecutionService standardizes CLI command runs across sandbox modes",
                    "description": "`projects/qwen-code/packages/core/src/services/shellExecutionService.ts` exposes a static `execute()` that prefers `node-pty` backends (including the @lydell shims) but falls back to `child_process.spawn` with a bash shell, shared env (`QWEN_CODE`, `TERM`, `PAGER`) and detached processes on Unix. It streams output via structured events, auto-detects binary data, decodes text with the cached workspace encoding, and enforces a SIGKILL timeout when abort signals fire. The shell declarative tool (`projects/qwen-code/packages/core/src/tools/shell.ts`) routes every invocation through this service, and `CoreToolScheduler` (`projects/qwen-code/packages/core/src/core/coreToolScheduler.ts`) uses the resulting handles while it tracks approvals and live output\u2014so command execution behaves identically whether triggered interactively or from the non-interactive loop.",
                    "tags": [
                        "cli-runtime",
                        "sandboxing",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/services/shellExecutionService.ts",
                            "sha256": "837ac5f0fbc332494f42e18a09fc942c0ebfd9722a226d97ca9aaa7ec8c42211"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/shell.ts",
                            "sha256": "fe887251041320bac2bbee16250fa01f7c3a7c5519d194405479c9dbb62072e8"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/coreToolScheduler.ts",
                            "sha256": "f7367cff69584092b8d9690f56e99c94144ca042fd66a22eab91c342de5ee0cb"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.74
                },
                {
                    "id": "aspect-core-tooling-bridge",
                    "sectionId": "section-core-engine",
                    "slug": "core-tooling-bridge",
                    "name": "ToolRegistry feeds GeminiClient planner and scheduler",
                    "description": "`projects/qwen-code/packages/core/src/core/client.ts` calls `toolRegistry.getFunctionDeclarations()` before opening a chat and pushes later `ToolCallRequest` events through `CoreToolScheduler`. The registry in `projects/qwen-code/packages/core/src/tools/tool-registry.ts` is the single source that registers built-in, discovered, and MCP tools, so any tool made available there is automatically surfaced to Gemini and executed via the same scheduler without extra wiring.",
                    "tags": [
                        "core-config",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/client.ts",
                            "sha256": "0b1c97a0c9074624a9a5728b28b82f87662e67fb6510f6997beb88b640f105bc"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-registry.ts",
                            "sha256": "f4940d6fe67c3721e3289cdcb798507c0558fc4acd798dcdd83fe1de8ebb0299"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.8
                },
                {
                    "id": "aspect-core-folder-structure-context",
                    "sectionId": "section-core-engine",
                    "slug": "core-folder-structure-context",
                    "name": "getFolderStructure shares FileDiscovery filters with environment context",
                    "description": "`projects/qwen-code/packages/core/src/utils/getFolderStructure.ts` walks each workspace directory, reusing `FileDiscoveryService` ignore checks and the default file filtering options so only allowed files/folders appear in the summarized tree. `projects/qwen-code/packages/core/src/utils/environmentContext.ts` calls it for every path in `WorkspaceContext`, stitching the results into the environment preamble (and, when `fullContext` is enabled, pairing it with the read_many_files tool). This keeps the directory snapshot, memory ingestion, and tool filtering aligned on the same ignore rules before prompting Gemini.",
                    "tags": [
                        "core-config",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/getFolderStructure.ts",
                            "sha256": "4bdeed18619935faee26e4bfdd1371e7afd003f58a7ce01e12cf52c3dc6105a9"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/environmentContext.ts",
                            "sha256": "020d07ae59dcefa0f23ea5d9ab699ecb51cb266f382facfd5a2c7defaf356a80"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/fileDiscoveryService.ts",
                            "sha256": "d22e0f14279446430e74f779f7f6da24f8762caa04c3f71a2be350669c079133"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.78
                },
                {
                    "id": "aspect-core-workspace-context",
                    "sectionId": "section-core-engine",
                    "slug": "core-workspace-context",
                    "name": "WorkspaceContext tracks multi-root session boundaries",
                    "description": "`projects/qwen-code/packages/core/src/utils/workspaceContext.ts` wraps the CLI's working tree set: the constructor records the initial cwd plus any include directories, canonicalises them via `realpathSync`, and emits change notifications to subscribers when directories are added or reset. Helpers such as `isPathWithinWorkspace()` and `fullyResolvedPath()` guard tool calls against escaped paths\u2014even resolving symlinks and tolerating missing files so editors can create new buffers\u2014while Config injects this context into `ToolRegistry`, `ShellExecutionService`, and MCP discovery. The result is that sandbox launches and tool executions share the same vetted workspace roots across CLI and IDE modes.",
                    "tags": [
                        "core-config",
                        "context-management",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/workspaceContext.ts",
                            "sha256": "446d45f70034e2882cb091c357e92da1c90edbac5155a97e2aa987b70f416686"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.78
                },
                {
                    "id": "aspect-core-file-discovery-service",
                    "sectionId": "section-core-engine",
                    "slug": "core-file-discovery-service",
                    "name": "FileDiscoveryService enforces git and .qwenignore filters",
                    "description": "`projects/qwen-code/packages/core/src/services/fileDiscoveryService.ts` seeds git-aware and `.qwenignore` parsers when Config initializes, caching ignore filters so `filterFiles()` and `shouldIgnoreFile()` can reject files for memory ingestion, tool previews, and sandbox context. It checks repository state via `isGitRepository`, loads ignore patterns once, and honours per-call options to respect git or Gemini-specific ignores. By surfacing `getGeminiIgnorePatterns()` it lets CLI surfaces explain exclusions, keeping the same filtering logic alive whether the agent pulls files via shell execution, sandbox tarball, or IDE integrations. The same service is reused by memory discovery, folder structure utilities, and file-reading tools so ignore rules stay consistent across every path.",
                    "tags": [
                        "core-config",
                        "context-management",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/services/fileDiscoveryService.ts",
                            "sha256": "d22e0f14279446430e74f779f7f6da24f8762caa04c3f71a2be350669c079133"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.73
                },
                {
                    "id": "aspect-core-memory-discovery",
                    "sectionId": "section-core-engine",
                    "slug": "core-memory-discovery",
                    "name": "Memory discovery stitches global, workspace, and extension context",
                    "description": "`projects/qwen-code/packages/core/src/utils/memoryDiscovery.ts` hydrates the agent's memory file set by combining global `~/.qwen/GEMINI_*.md` docs, home-level notes, configured include directories, and extension-provided context roots. It walks directory batches with a BFS search (bounded by `maxDirs`), respects `FileDiscoveryService` filters to honour git and `.qwenignore`, and reuses `DEFAULT_MEMORY_FILE_FILTERING_OPTIONS` so memory reads stay consistent with Config. Import processing handles `#import` edges via `processImports`, and the helper `findProjectRoot()` climbs to `.git` boundaries to scope searches. This same pipeline feeds both CLI non-interactive runs and sandbox/IDE contexts, ensuring memory attachments stay within vetted workspace directories.",
                    "tags": [
                        "context-management",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/memoryDiscovery.ts",
                            "sha256": "2f9bb5a2e67121817edf545834a4892f8215c16d784d003ad0af1ad708643418"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/workspaceContext.ts",
                            "sha256": "446d45f70034e2882cb091c357e92da1c90edbac5155a97e2aa987b70f416686"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/environmentContext.ts",
                            "sha256": "020d07ae59dcefa0f23ea5d9ab699ecb51cb266f382facfd5a2c7defaf356a80"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.76
                },
                {
                    "id": "aspect-core-file-system-service",
                    "sectionId": "section-core-engine",
                    "slug": "core-file-system-service",
                    "name": "FileSystemService interface wraps fs/promises for text IO",
                    "description": "`projects/qwen-code/packages/core/src/services/fileSystemService.ts` defines the `FileSystemService` abstraction and the default `StandardFileSystemService`, exposing just `readTextFile()` and `writeTextFile()` to concentrate all on-disk UTF-8 reads/writes behind an injectable seam. Tools like `write-file` and memory ingestion pull through this contract during Config initialization, so swapping in fakes in tests or future remote file adapters only requires implementing the same two async methods.",
                    "tags": [
                        "core-services",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/services/fileSystemService.ts",
                            "sha256": "8a84799898c0141536dec651ab311771fcfb8d189b33f8c6830f5738487f505e"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.52
                },
                {
                    "id": "aspect-core-git-service",
                    "sectionId": "section-core-engine",
                    "slug": "core-git-service",
                    "name": "GitService provisions shadow repo for checkpoint snapshots",
                    "description": "`projects/qwen-code/packages/core/src/services/gitService.ts` verifies `git --version`, mirrors the project root into a hidden history directory via `Storage.getHistoryDir()`, and seeds a dedicated `.gitconfig` so checkpoint commits never inherit user identity or signing. `initialize()` creates the repo (with `main` as initial branch) and copies the workspace `.gitignore`, while `createFileSnapshot()` stages+commits all files and `restoreProjectFromSnapshot()` restores and cleans untracked files. The shadow repository under `.qwen/history/<hash>` lets the agent roll back work without touching the user's main VCS state.",
                    "tags": [
                        "core-services",
                        "git"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/services/gitService.ts",
                            "sha256": "49dfbc2b4342263e087306623fedf0be6df6358941d769f15889f6eec5854a65"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.78
                },
                {
                    "id": "aspect-core-loop-detection-service",
                    "sectionId": "section-core-engine",
                    "slug": "core-loop-detection-service",
                    "name": "LoopDetectionService watches tool repetition and streaming loops",
                    "description": "`projects/qwen-code/packages/core/src/services/loopDetectionService.ts` hashes tool call payloads and streaming content chunks to flag infinite loops: five identical tool invocations or repeated 50-character windows trigger telemetry via `logLoopDetected()`. It also paginates streamed text, ignores code fences, headings, and tables to cut false positives, and escalates to LLM-based loop checks after 30 turns using `DEFAULT_QWEN_FLASH_MODEL`, dynamically tightening the interval when confidence stays high. The service resets counters between tool events and preserves state per prompt via `promptId`, letting the chat client abort runaway conversations early.",
                    "tags": [
                        "core-services",
                        "loop-detection",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/services/loopDetectionService.ts",
                            "sha256": "18e24f66f1b88bad35bfb4b7d474cbae44b3876ca2e69d5260ee287db8c94846"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.77
                },
                {
                    "id": "aspect-core-chat-recording-service",
                    "sectionId": "section-core-engine",
                    "slug": "core-chat-recording-service",
                    "name": "ChatRecordingService persists sessions with token and tool traces",
                    "description": "`projects/qwen-code/packages/core/src/services/chatRecordingService.ts` hashes the project path with `getProjectHash()`, creates per-session JSON files under `~/.qwen/tmp/<hash>/chats/`, and records every user/assistant message plus queued tool calls, token usage, and thought summaries. `initialize()` can resume an existing file, `recordMessage()` coalesces streamed assistant content, and `attachToolCall()`/`finalizeToolCall()` append tool execution metadata for UI playback. By snapshotting `TokensSummary` and model IDs alongside arbitrary attachments, the service feeds both telemetry exports and session resume flows without leaking partial state between runs.",
                    "tags": [
                        "core-services",
                        "chat-logging",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/services/chatRecordingService.ts",
                            "sha256": "c1365b4e053ff8c5287daef8668a7cde9b5c926a0c047545ee0409902239f26f"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.74
                },
                {
                    "id": "aspect-core-storage-layout",
                    "sectionId": "section-core-engine",
                    "slug": "core-storage-layout",
                    "name": "Storage maps ~/.qwen directories for per-project state",
                    "description": "`projects/qwen-code/packages/core/src/config/storage.ts` centralizes filesystem layout: static helpers resolve global paths like `Storage.getGlobalGeminiDir()`, OAuth creds, memory files, and command catalogs, while instance methods hash the workspace path to derive project-specific temp, history, and checkpoints directories. `ensureProjectTempDirExists()` creates hashed dirs, and getters expose IDE settings (`settings.json`), extension config, and shell history files. Config and services consume this class to keep sandbox caches, token stores, and checkpoint repos consistent across CLI, IDE companion, and sandboxed subprocesses.",
                    "tags": [
                        "core-services",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/config/storage.ts",
                            "sha256": "92b32888a70b82eb72ccbe4ce34175c49a3d13d17b253db876c396c55fe8fc5b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.7
                },
                {
                    "id": "aspect-core-gemini-chat",
                    "sectionId": "section-core-engine",
                    "slug": "core-gemini-chat",
                    "name": "GeminiChat retries invalid chunks and curates history",
                    "description": "`projects/qwen-code/packages/core/src/core/geminiChat.ts` forks the Google GenAI chat helper to work around invalid function-response chunks: it validates each streamed response, retries up to two times with linear backoff, and emits `StreamEventType.RETRY` so UIs drop partial content. Helpers like `extractCuratedHistory()` strip empty model turns, `validateHistory()` forces alternating roles, and telemetry hooks log retry attempts\u2014ensuring dashscope quirks don\u2019t corrupt conversation state.",
                    "tags": [
                        "chat-engine",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/geminiChat.ts",
                            "sha256": "67a7fef412d12e4f22c8d89af1b7c6d22adccc85d6b7f6e246f8e904677c6bee"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.82
                },
                {
                    "id": "aspect-core-gemini-request",
                    "sectionId": "section-core-engine",
                    "slug": "core-gemini-request",
                    "name": "GeminiRequest builds request payloads with tool schema inspection",
                    "description": "`projects/qwen-code/packages/core/src/core/geminiRequest.ts` composes `SendMessageParameters` by merging curated history, IDE context, and tool declarations while stripping cyclic schemas via `hasCycleInSchema()`. It normalizes top-level metadata (safety settings, system instructions), injects cached conversation IDs, and logs the final payload shape when debug is enabled\u2014centralizing request assembly regardless of provider.",
                    "tags": [
                        "chat-engine",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/geminiRequest.ts",
                            "sha256": "3f6269450fa36c031fd1b98df6b9fa23022f8ee48c25a0315dc30bc265c5f96f"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.79
                },
                {
                    "id": "aspect-core-token-limits",
                    "sectionId": "section-core-engine",
                    "slug": "core-token-limits",
                    "name": "TokenLimits enforces request budgets and computes compression thresholds",
                    "description": "`projects/qwen-code/packages/core/src/core/tokenLimits.ts` tracks model-specific token caps, subtracts tool suggestions and pending prompts, and decides when to trigger history compression or fallback models. It exposes helpers for remaining budget, minimum truncation ratios, and special-case allowances (e.g., Vertex vs Gemini) so the scheduler never exceeds provider quotas.",
                    "tags": [
                        "chat-engine",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/tokenLimits.ts",
                            "sha256": "6d414d239c77df33549117a978c289320f894726aaa410f263ee74f43429f48b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.76
                },
                {
                    "id": "aspect-core-prompts",
                    "sectionId": "section-core-engine",
                    "slug": "core-prompts",
                    "name": "Prompts registry loads system instructions per provider and mode",
                    "description": "`projects/qwen-code/packages/core/src/core/prompts.ts` catalogs base, approval, sandbox, and planner prompts, selecting variants based on Config (auth type, sandbox mode, approval policy). It stitches IDE context, workspace summaries, and extension metadata into the final system prompt, giving each provider consistent framing before chat requests.",
                    "tags": [
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/prompts.ts",
                            "sha256": "0178ebf8fc0213519918561acc7eb81fa371ccdedb95bbcbd932f0112c60523e"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.74
                },
                {
                    "id": "aspect-core-turn-events",
                    "sectionId": "section-core-engine",
                    "slug": "core-turn-events",
                    "name": "Turn model defines stream events, tool results, and structured errors",
                    "description": "`projects/qwen-code/packages/core/src/core/turn.ts` codifies `ServerGeminiStreamEvent` unions (content, tool call requests/responses, retries), wraps structured errors, and tracks thought summaries. Core clients and telemetry rely on these enums to pipe structured updates into CLI/IDE views and loop detection.",
                    "tags": [
                        "chat-engine",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/turn.ts",
                            "sha256": "2e6568d2c004085ebdda4fd9c572f41008f051018bc9700a49bbabd4da410c36"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.71
                },
                {
                    "id": "aspect-core-content-generator",
                    "sectionId": "section-core-engine",
                    "slug": "core-content-generator",
                    "name": "ContentGenerator abstracts shared chat transport and retries",
                    "description": "`projects/qwen-code/packages/core/src/core/contentGenerator.ts` defines the base generator contract, unifying streaming vs unary calls, handling auth refresh callbacks, and wrapping retry/backoff semantics for provider subclasses (OpenAI-compatible, Qwen). It centralizes error normalization so higher layers can react uniformly.",
                    "tags": [
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/contentGenerator.ts",
                            "sha256": "d00879877f97af2737cc4b7bb870e0503abb311ec2fa7bf2290de2915d119b04"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.73
                },
                {
                    "id": "aspect-core-logging-content-generator",
                    "sectionId": "section-core-engine",
                    "slug": "core-logging-content-generator",
                    "name": "LoggingContentGenerator mirrors requests/responses for debugging",
                    "description": "`projects/qwen-code/packages/core/src/core/loggingContentGenerator.ts` wraps another generator and logs sanitized request/response payloads (with truncation) when debug logging is enabled. It preserves streaming semantics by teeing events, giving developers visibility into provider traffic without mutating business logic.",
                    "tags": [
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/loggingContentGenerator.ts",
                            "sha256": "cb84792a60e140a6856ba2301a30192cf76f2491fe1351eb58080e09b63972de"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.61
                },
                {
                    "id": "aspect-core-logger",
                    "sectionId": "section-core-engine",
                    "slug": "core-logger",
                    "name": "Session Logger persists chat transcripts with corruption recovery",
                    "description": "`core/logger.ts` encodes tag names for filesystem safety, lazily creates `logs.json` in the project temp dir, and reads + filters each entry before appending. It backs up malformed files, keeps per-session message counters, mirrors new entries into memory, and exposes `_updateLogFile` so callers always write consistent `messageId`s even when multiple processes append.",
                    "tags": [
                        "chat-logging",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/logger.ts",
                            "sha256": "4c9fdc48900a740bbd2a67b2eb50cdf478ade53fc4cfe9c0e8820b7e0049318a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.67
                },
                {
                    "id": "aspect-core-default-models",
                    "sectionId": "section-core-engine",
                    "slug": "core-default-models",
                    "name": "Default model constants centralize provider baselines",
                    "description": "`config/models.ts` defines the default Qwen model along with Gemini chat, flash, flash-lite, and embedding SKUs. Config pulls these constants when hydrating settings so provider defaults live in one place.",
                    "tags": [
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/config/models.ts",
                            "sha256": "9fe1b19dac6c4a7c20e6b2ee16dc03f9bcf1f5ec138d0d776659948836b53e06"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.58
                }
            ]
        },
        {
            "id": "section-context-pipelines",
            "slug": "context-pipelines",
            "title": "Context Pipelines",
            "entries": [
                {
                    "id": "aspect-context-include-directories",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-include-directories",
                    "name": "Include directories feed workspace boundaries and memory scans",
                    "description": "`projects/qwen-code/packages/cli/src/config/config.ts` merges context.includeDirectories from all scopes with CLI flags, resolves them, and hands the list to both `loadHierarchicalGeminiMemory` and the core `Config` constructor. Inside the core runtime, `projects/qwen-code/packages/core/src/services/fileDiscoveryService.ts` applies git/`.qwenignore` filters before `projects/qwen-code/packages/core/src/utils/memoryDiscovery.ts` seeds breadth-first searches for GEMINI_*.md files, and `projects/qwen-code/packages/core/src/utils/workspaceContext.ts` registers the same paths to fence tool execution. This keeps memory ingestion, sandboxed shells, and tool scheduling aligned on the exact user-approved roots.",
                    "tags": [
                        "context-management",
                        "cli-runtime",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/config.ts",
                            "sha256": "813ef758a979bc75536ebbe52855d650a55c73b7f7de32918c35d45c5836a64c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/fileDiscoveryService.ts",
                            "sha256": "d22e0f14279446430e74f779f7f6da24f8762caa04c3f71a2be350669c079133"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/memoryDiscovery.ts",
                            "sha256": "2f9bb5a2e67121817edf545834a4892f8215c16d784d003ad0af1ad708643418"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/workspaceContext.ts",
                            "sha256": "446d45f70034e2882cb091c357e92da1c90edbac5155a97e2aa987b70f416686"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.8
                },
                {
                    "id": "aspect-context-sandbox-shell",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-sandbox-shell",
                    "name": "Sandbox launcher reuses ShellExecutionService guarantees",
                    "description": "`projects/qwen-code/packages/cli/src/utils/sandbox.ts` prepares relaunch arguments, rewrites PATH/PYTHONPATH, and sets up socat port forwarding before exec'ing the CLI inside Docker/Podman/sandbox-exec; once inside, shell commands still flow through `ShellExecutionService.execute()` from `projects/qwen-code/packages/core/src/services/shellExecutionService.ts`, which standardizes env vars, TTY handling, and binary detection whether node-pty is available or not. The shared environment injection (`QWEN_CODE`, `TERM`, UID/GID overrides) means sandboxed tasks observe the same stream semantics and timeout handling as host-mode execution, so tool invocations behave consistently across both layers.",
                    "tags": [
                        "sandboxing",
                        "cli-runtime",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/sandbox.ts",
                            "sha256": "147c5f8dbb426740876630857069cfd4630f3423349d36aef1bcfb534d7a8807"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/shellExecutionService.ts",
                            "sha256": "837ac5f0fbc332494f42e18a09fc942c0ebfd9722a226d97ca9aaa7ec8c42211"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/nonInteractiveToolExecutor.ts",
                            "sha256": "928abe631c6ba46a870b5a3080ff092c493b86a6116868f6e2f611dc17b2026c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.78
                },
                {
                    "id": "aspect-context-mcp-discovery-chain",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-mcp-discovery-chain",
                    "name": "MCP configuration flows from CLI settings to core discovery",
                    "description": "`projects/qwen-code/packages/cli/src/config/config.ts` consolidates `settings.mcp` allow/exclude lists with CLI `--allowed-mcp-server-names`, populates extension-provided servers, and passes the filtered map and optional `mcpServerCommand` into the core `Config`. Inside core, `projects/qwen-code/packages/core/src/tools/tool-registry.ts` instantiates `McpClientManager` from `projects/qwen-code/packages/core/src/tools/mcp-client-manager.ts`, which restarts clients, connects to each configured server, and registers discovered tools with the shared `ToolRegistry`/PromptRegistry. That pipeline keeps CLI policy decisions, extension defaults, and runtime tool availability aligned without duplicating discovery logic.",
                    "tags": [
                        "cli-runtime",
                        "core-config",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/config.ts",
                            "sha256": "813ef758a979bc75536ebbe52855d650a55c73b7f7de32918c35d45c5836a64c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-registry.ts",
                            "sha256": "f4940d6fe67c3721e3289cdcb798507c0558fc4acd798dcdd83fe1de8ebb0299"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client-manager.ts",
                            "sha256": "df586fd3f52308b0c8f120fd7cf0eb240fdbe48ecc5be7cf7822bfe35c9a78e9"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.81
                },
                {
                    "id": "aspect-context-noninteractive-config",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-noninteractive-config",
                    "name": "Non-interactive loop reuses preloaded CLI Config state",
                    "description": "`projects/qwen-code/packages/cli/src/config/config.ts` accumulates CLI flags and settings into a hydrated `Config` (including memory content, sandbox options, tool allow/deny lists, and extension context). The same instance flows into `projects/qwen-code/packages/cli/src/nonInteractiveCli.ts`, where `runNonInteractive` hands `Config.getGeminiClient()` to the streaming loop and delegates tool invocations via `executeToolCall`. Because `loadCliConfig` already filtered tools, resolved include directories, and injected memory, the batch loop operates with the identical allowances as interactive mode\u2014no separate bootstrap path.",
                    "tags": [
                        "cli-runtime",
                        "context-management",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/config.ts",
                            "sha256": "813ef758a979bc75536ebbe52855d650a55c73b7f7de32918c35d45c5836a64c"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/nonInteractiveCli.ts",
                            "sha256": "dfe171d946ac7f19096c17c562d773ddcd36454aec7c166c46ee226e7616387b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.8
                },
                {
                    "id": "aspect-context-memory-imports",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-memory-imports",
                    "name": "Memory imports enforce safe include tree",
                    "description": "`packages/core/src/utils/memoryImportProcessor.ts` walks @imports with a marked-based parser that skips code fences, resolves relative paths against the nearest git root, and tracks depth to prevent cycles or directory escapes. When imports resolve it emits a tree alongside the stitched content so Config can surface provenance while keeping memory reads inside approved workspaces.",
                    "tags": [
                        "context-management",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/memoryImportProcessor.ts",
                            "sha256": "cc4e26873d414da25333aad3ea7ed632a2eea4fb41c55b906f899ce6fbd5ea7a"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.68
                },
                {
                    "id": "aspect-context-bfs-file-search",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-bfs-file-search",
                    "name": "BFS file search caps directory fan-out",
                    "description": "`packages/core/src/utils/bfsFileSearch.ts` performs a batch breadth-first walk with queue pointers, honouring `maxDirs`, glob ignore lists, and `FileDiscoveryService.shouldIgnoreFile()` before enqueueing folders. The parallel batches keep sandbox scans fast while guaranteeing we never traverse beyond the directories the CLI vetted for memory/context ingestion.",
                    "tags": [
                        "context-management",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/bfsFileSearch.ts",
                            "sha256": "1e9ed9f0c1681e17603ffa88ce4c3b0fd901846e124229261a1bc27e921349d0"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.58
                },
                {
                    "id": "aspect-context-ignore-patterns",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-ignore-patterns",
                    "name": "FileExclusions centralises ignore pattern policy",
                    "description": "`packages/core/src/utils/ignorePatterns.ts` defines `FileExclusions`, layering common binary/media ignores, `.qwenignore` additions, dynamic GEMINI memory filenames, and per-tool overrides so context discovery, glob, and read-many-files share a single source of truth. Helpers surface core vs read-many exclusions and expose extension-configurable additions without duplicating glob logic.",
                    "tags": [
                        "context-management",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/ignorePatterns.ts",
                            "sha256": "6d97b3711d5bdb870d701d3642f8655a5f85317ed6ea884e013b902eef011ac1"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.62
                },
                {
                    "id": "aspect-context-project-summary",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-project-summary",
                    "name": "Project summary parser surfaces plan telemetry",
                    "description": "`packages/core/src/utils/projectSummary.ts` reads `.qwen/PROJECT_SUMMARY.md`, extracts goal/plan sections, totals DONE/IN PROGRESS/TODO counters, and computes a human time-ago string. The resulting struct feeds prompt preambles so the agent can explain recent progress without re-reading the markdown each turn.",
                    "tags": [
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/projectSummary.ts",
                            "sha256": "0db5beb47b4090f023cfcd6f77ac752400e1a770ab8f505eaa937f9773c7500d"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.55
                },
                {
                    "id": "aspect-context-tool-summarizer",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-tool-summarizer",
                    "name": "LLM summarizer trims verbose tool output",
                    "description": "`packages/core/src/utils/summarizer.ts` wraps tool results with `Summarizer` functions: a JSON passthrough default and `llmSummarizer` that calls `GeminiClient.generateContent` on the flash-lite model with a templated prompt. Length checks and error fallbacks ensure summarisation only fires when outputs exceed the configured budget, keeping history compact without dropping stderr details.",
                    "tags": [
                        "context-management",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/summarizer.ts",
                            "sha256": "e372187520e778cd674c9035b5372743af9492e51169104e4add77d8259351bd"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.64
                },
                {
                    "id": "aspect-context-next-speaker",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-next-speaker-checker",
                    "name": "Next-speaker checker guards runaway conversations",
                    "description": "`packages/core/src/utils/nextSpeakerChecker.ts` inspects curated chat history, short-circuits on tool responses, and otherwise asks the Qwen flash model (via JSON schema) whether the assistant or user should speak next. It rewrites empty-part model turns, respects abort signals, and stops the loop when the last response already queued a tool call, preventing duplicate prompts after IDE diffs or function responses.",
                    "tags": [
                        "context-management",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/nextSpeakerChecker.ts",
                            "sha256": "e3b7f5267d96855fca20716c45d1c38107f1f56a4557055230b86ea8d56ce49f"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.63
                },
                {
                    "id": "aspect-context-message-inspectors",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-message-inspectors",
                    "name": "Message inspectors tag tool calls vs responses",
                    "description": "`packages/core/src/utils/messageInspectors.ts` provides tiny helpers that classify @google/genai `Content` structs as pure function calls or function responses. Core scheduling code uses them to decide when to auto-continue or reroute history, so even though they are small they gate the loop detection and next-speaker heuristics.",
                    "tags": [
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/messageInspectors.ts",
                            "sha256": "945a42d931006001d5ae50da8c0a58cf64636a5a4feb858bce5b6bf8cef893cb"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.42
                },
                {
                    "id": "aspect-context-quota-guard",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-quota-guard",
                    "name": "Quota guard distinguishes retryable throttles",
                    "description": "`packages/core/src/utils/quotaErrorDetection.ts` normalises Gemini and Qwen API errors, spotting pro-level quotas, generic quota exhaustion, and DashScope throttling (429) cues. Clients use it to decide whether to retry, surface guidance, or ask users to clear credentials, keeping context pipelines from retrying irrecoverable auth failures.",
                    "tags": [
                        "context-management",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/quotaErrorDetection.ts",
                            "sha256": "d35d66d4d97780a70163e439de3dc9ef8f581c856cff89198c07736c431a7dbf"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.52
                },
                {
                    "id": "aspect-context-request-tokenizer",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-request-tokenizer",
                    "name": "Default request tokenizer breaks down multimodal cost",
                    "description": "`packages/core/src/utils/request-tokenizer/requestTokenizer.ts` groups request parts into text, image, audio, and other buckets, runs them through `TextTokenizer` (tiktoken-backed) or `ImageTokenizer`, and returns a structured breakdown with fallbacks when encoders fail. The CLI uses it for proactive budgeting before dispatching large context bundles or tool outputs.",
                    "tags": [
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/requestTokenizer.ts",
                            "sha256": "839315eedb0dc0397153036c363b0c472f82be2fc1f424fb95a98de3be68a707"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/textTokenizer.ts",
                            "sha256": "bfd797b6860761a861083c665dca92e8a27274272ea028c9ed53e6c7825f7179"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.6
                },
                {
                    "id": "aspect-context-image-tokenizer",
                    "sectionId": "section-context-pipelines",
                    "slug": "context-image-tokenizer",
                    "name": "Image tokenizer estimates vision token usage",
                    "description": "`packages/core/src/utils/request-tokenizer/imageTokenizer.ts` parses PNG/JPEG/WebP/GIF/BMP/TIFF/HEIC headers to derive dimensions, clamps token counts between four and 16k, and adds special BOS/EOS markers. `supportedImageFormats.ts` exposes the allowed MIME list and helper warnings so IDE uploads and web-search results know which formats the vision stack can afford.",
                    "tags": [
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/imageTokenizer.ts",
                            "sha256": "bd95c370cca3500891569f1609e75f8d7ccaec07726e55480fcee10112d30beb"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/supportedImageFormats.ts",
                            "sha256": "f386881dda3ab1d47dc187291b5c9e1b5f8c367c47c50f9cd5c5af737dc2c93e"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.5
                }
            ]
        },
        {
            "id": "section-ide-integration",
            "slug": "ide-integration",
            "title": "IDE Integration",
            "entries": [
                {
                    "id": "aspect-ide-extension-activation",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-extension-activation",
                    "name": "VSCode companion activation wires diff commands and CLI launcher",
                    "description": "`projects/qwen-code/packages/vscode-ide-companion/src/extension.ts` opens the \"Qwen Code Companion\" output channel, seeds logging, and instantiates `DiffManager` with a content provider before registering `qwen.diff.accept`/`qwen.diff.cancel` so diffs opened by tools can be approved or dismissed from VSCode. It boots an `IDEServer` to expose the MCP transport, keeps it in sync with workspace folder changes, and shows a first-run toast only once via global state. The `qwen-code.runQwenCode` command spawns a terminal rooted at the selected workspace folder and runs `qwen`, bridging the IDE button to the CLI entry point, while `qwen-code.showNotices` surfaces bundled notices\u2014tying the companion's lifecycle, diff UX, and CLI launchpad together.",
                    "tags": [
                        "ide-integration",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/src/extension.ts",
                            "sha256": "816cc0ce1831ff85e4395162e735fc6e645fa9f0e444869b6aa05cc372a8466b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.8
                },
                {
                    "id": "aspect-ide-server-mcp-bridge",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-server-mcp-bridge",
                    "name": "IDE server exposes MCP transport and streams IDE context",
                    "description": "`projects/qwen-code/packages/vscode-ide-companion/src/ide-server.ts` spins up an Express listener that upgrades `/mcp` initialize requests into `StreamableHTTPServerTransport`s, keeps sessions alive with ping timers, and relays every diff notification from `DiffManager`. It writes the picked port plus active workspace roots to both environment variables (`QWEN_CODE_IDE_SERVER_PORT`, `QWEN_CODE_IDE_WORKSPACE_PATH`) and a temp JSON file, so the CLI sandbox or daemon can discover the IDE bridge. `OpenFilesManager` (`projects/qwen-code/packages/vscode-ide-companion/src/open-files-manager.ts`) debounces file activation, selection, rename, and delete events to maintain the `IdeContext` payload; whenever it changes, the server pushes `ide/contextUpdate` notifications to all transports, ensuring the agent receives current open-file state alongside MCP tool calls.",
                    "tags": [
                        "ide-integration",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/src/ide-server.ts",
                            "sha256": "f31d1771a8767800f016ad72df5ab96bb63a2fa0be86eb2e7cb28215203c08fd"
                        },
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/src/open-files-manager.ts",
                            "sha256": "582f050bccb6d7b3434d7878b4a8a01767662ea91b4c9de51829cd6cc154f734"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.82
                },
                {
                    "id": "aspect-ide-diff-manager",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-diff-manager",
                    "name": "DiffManager drives diff lifecycle and MCP notifications",
                    "description": "`projects/qwen-code/packages/vscode-ide-companion/src/diff-manager.ts` pairs a `DiffContentProvider` backed by the `qwen-diff` scheme with VSCode commands to show non-preview diff tabs for tool-proposed edits, falling back to an untitled left pane when files do not exist yet. Accepting a diff fires `ide/diffAccepted` notifications via the MCP schema while canceling or closing emits `ide/diffClosed`, each carrying the latest buffer content so the agent can apply or discard changes. It tracks active diff tabs to keep the `qwen.diff.isVisible` context up to date, trims subscriptions on dispose, and ensures editors close cleanly when diffs are accepted or canceled, giving tools a deterministic negotiation loop for IDE-assisted edits.",
                    "tags": [
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/src/diff-manager.ts",
                            "sha256": "becfc92301942b97a2675b29d1cb8b50e8f0792fd99f52b4d18622ba56d8475d"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.78
                },
                {
                    "id": "aspect-ide-detect-runtime",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-detect-runtime",
                    "name": "Env heuristics detect supported IDE shells",
                    "description": "`packages/core/src/ide/detect-ide.ts` inspects VS Code `TERM_PROGRAM`, provider-specific env vars (Devin, Replit, Cursor, Codespaces, Trae, Firebase Studio), and parent process commands to categorise the running shell. The classification feeds IdeClient so we only enable IDE features for environments we know how to connect to and render friendly names in prompts.",
                    "tags": [
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/detect-ide.ts",
                            "sha256": "7a209bae95e38a4db41fab132ed753fbe9537a8ce1c63572e708e01e71b75435"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.58
                },
                {
                    "id": "aspect-ide-process-tracker",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-process-tracker",
                    "name": "Process utilities walk ancestry to find IDE host",
                    "description": "`packages/core/src/ide/process-utils.ts` traverses parent processes differently on Unix and Windows, punching through login shells and VS Code `ptyhost` shims to return the actual IDE PID/command. IdeClient relies on it to validate workspace roots and to surface friendly diagnostics when the CLI launches outside a supported terminal.",
                    "tags": [
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/process-utils.ts",
                            "sha256": "398f5e3d20991f67bd635d53a935f5629a213c48b799bcd1b2fde4cfb56c6f86"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.56
                },
                {
                    "id": "aspect-ide-context-store",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-context-store",
                    "name": "IDE context store validates MCP notifications",
                    "description": "`packages/core/src/ide/ideContext.ts` codifies Zod schemas for `ide/contextUpdate`, `ide/diffAccepted`, and `ide/diffClosed`, then exposes a pub-sub store that broadcasts open-file snapshots. The CLI subscribes to keep environment context and diff acceptances in sync with the VS Code companion without trusting arbitrary payloads.",
                    "tags": [
                        "ide-integration",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/ideContext.ts",
                            "sha256": "0dd8c401c2e148a8c29288d50cac2246e8fb195195d32cfa1e333a5e6cef2805"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.62
                },
                {
                    "id": "aspect-ide-connection-manager",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-connection-manager",
                    "name": "IdeClient prioritises port discovery and diff callbacks",
                    "description": "`packages/core/src/ide/ide-client.ts` caches a singleton that reads temp port files, env overrides, or stdio fallbacks to connect to the MCP bridge via HTTP or pipes, while validating workspace trust against `isSubpath`. It tracks diff callbacks so CLI accepts/ rejects mirror IDE actions and exposes status listeners for UI prompts.",
                    "tags": [
                        "ide-integration",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/ide-client.ts",
                            "sha256": "2d0b6166503601d0cb6b86b28a436cfc23ad65aa75e9bc13bb0771c739979e73"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.7
                },
                {
                    "id": "aspect-ide-extension-installer",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-extension-installer",
                    "name": "VS Code installer locates command line across OSes",
                    "description": "`packages/core/src/ide/ide-installer.ts` searches PATH and platform-specific locations for the `code` CLI, then runs `--install-extension qwenlm.qwen-code-vscode-ide-companion`, surfacing actionable errors when the binary is missing. It supports fallback messaging per IDE so `/ide install` guides users even when automation fails.",
                    "tags": [
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/ide-installer.ts",
                            "sha256": "4c2b6ec9895a19ca6f517f75826162335c152716f3cb7678b8c1504bf83d8d30"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.54
                },
                {
                    "id": "aspect-ide-open-files-manager",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-open-files-manager",
                    "name": "OpenFilesManager debounces editor activity into context",
                    "description": "`packages/vscode-ide-companion/src/open-files-manager.ts` watches active editors, selections, renames, and deletes, maintaining a queue of up to ten files with cursor positions and truncated selections. It debounces events before notifying the MCP transport so the CLI sees stable IDE context even during rapid tab switches.",
                    "tags": [
                        "ide-integration",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/src/open-files-manager.ts",
                            "sha256": "582f050bccb6d7b3434d7878b4a8a01767662ea91b4c9de51829cd6cc154f734"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.59
                },
                {
                    "id": "aspect-ide-transport-logger",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-transport-logger",
                    "name": "Companion logger only emits during dev sessions",
                    "description": "`packages/vscode-ide-companion/src/utils/logger.ts` wraps the extension output channel so debug log spam only appears when the companion runs in `ExtensionMode.Development`. Production installs stay quiet, but developers still get transport traces by toggling `MCP_DEBUG`.",
                    "tags": [
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/src/utils/logger.ts",
                            "sha256": "bbaa9015f730081f5cdc875f3271eb584e0e40de7739d1971f2a75fa6db54f0e"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.36
                },
                {
                    "id": "aspect-ide-connection-regression",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-connection-regression-test",
                    "name": "IDE client tests cover port-file/env fallbacks",
                    "description": "`integration-tests/ide-client.test.ts` spins up a stub MCP server, writes fake port files, and sets env overrides to assert that `IdeClient.connect()` prefers port files, falls back to env vars, and respects proxy envs. Skipped suites document pending coverage for VS Code process detection.",
                    "tags": [
                        "ide-integration",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/ide-client.test.ts",
                            "sha256": "8b0750c6cbd2401448fd5f56477482da83dbcf18a7a384f716e7e39521ac6288"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.48
                },
                {
                    "id": "aspect-ide-extension-name-constant",
                    "sectionId": "section-ide-integration",
                    "slug": "ide-extension-name-constant",
                    "name": "IDE constants export Qwen companion display name",
                    "description": "`constants.ts` exposes `QWEN_CODE_COMPANION_EXTENSION_NAME`, giving core services a single source of truth when logging or prompting for the VS Code companion install.",
                    "tags": [
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/constants.ts",
                            "sha256": "347cd504fa650755df16100f5cfb24baa370057a5c969904fbf9fd7d74fce696"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.31
                }
            ]
        },
        {
            "id": "section-qwen-integration",
            "slug": "qwen-integration",
            "title": "Qwen Integration",
            "entries": [
                {
                    "id": "aspect-qwen-oauth-device-flow",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-oauth-device-flow",
                    "name": "Qwen device flow drives PKCE auth, UI events, and credential caching",
                    "description": "`projects/qwen-code/packages/core/src/qwen/qwenOAuth2.ts` wires `getQwenOAuthClient()` to attempt a shared-token refresh first, then falls back to `authWithQwenDeviceFlow()` which generates a PKCE pair, hits `/api/v1/oauth2/device/code`, emits `AuthUri`/`AuthProgress` events, and opens `verification_uri_complete` (or prints a fallback) before polling `/oauth2/token`. Pending responses stretch the interval (respecting `slow_down`), while 401/429 status codes surface retry guidance and 400 clears credentials via `CredentialsClearRequiredError`. Successful polls map payloads into `QwenCredentials`, persist them to `~/.qwen/oauth_creds.json`, and notify listeners so `/auth` and the CLI sandbox reuse a single OAuth handshake.",
                    "tags": [
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/qwen/qwenOAuth2.ts",
                            "sha256": "5c850500858869e1909b49256b53e638aead1199a9e44b716957d2f741b9e816"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.84
                },
                {
                    "id": "aspect-qwen-shared-token-manager",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-shared-token-manager",
                    "name": "SharedTokenManager synchronizes refreshes across processes",
                    "description": "`projects/qwen-code/packages/core/src/qwen/sharedTokenManager.ts` keeps a singleton cache of `QwenCredentials`, reloading `~/.qwen/oauth_creds.json` when `mtime` advances and guarding disk checks with throttled `checkPromise`s. `getValidCredentials()` short-circuits if the in-memory token is still fresh, otherwise it funnels callers through `performTokenRefresh()`, which acquires an `oauth_creds.lock` file (pruning stale locks), double-checks for external updates, invokes `refreshAccessToken()`, then atomically writes the new JSON via a temp file, updating `memoryCache` and the caller's client. Errors are normalized into `TokenManagerError` variants (including lock timeouts, file access and network failures), and 400 refresh responses bubble through `CredentialsClearRequiredError` to reset cached state\u2014ensuring sandboxed shells, CLI, and IDE companion all share the same token lifecycle without race conditions.",
                    "tags": [
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/qwen/sharedTokenManager.ts",
                            "sha256": "c402246dd05c86ef1f0335e852dd87a2e2391bcb741bf72462090f83db63866a"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.83
                },
                {
                    "id": "aspect-qwen-content-generator",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-content-generator",
                    "name": "QwenContentGenerator injects dashscope provider with shared token retries",
                    "description": "`projects/qwen-code/packages/core/src/qwen/qwenContentGenerator.ts` subclasses the OpenAI pipeline with a `DashScopeOpenAICompatibleProvider`, but defers request wiring to `executeWithCredentialManagement()`: every streaming or batch call asks `SharedTokenManager.getValidCredentials()` for an access token plus resource URL, rewrites the underlying client's `apiKey`/`baseURL`, then forwards into the OpenAI-compatible stack. Auth failures trigger a forced refresh through the manager so newly persisted credentials immediately flow back into subsequent attempts, while `shouldSuppressErrorLogging()` mutes expected 401/403 noise during retries. That placement makes dashscope/Qwen endpoints pluggable without forking the chat scheduler\u2014GeminiClient, CLI batch mode, and subagents all reuse the same content generator once Config picks Qwen as the provider.",
                    "tags": [
                        "chat-engine",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/qwen/qwenContentGenerator.ts",
                            "sha256": "6716e2134419aa5c50ab6f4e374337c89e68ee89ea573a83bc55b8454d1b781a"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.82
                },
                {
                    "id": "aspect-qwen-code-assist-server",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-code-assist-server",
                    "name": "CodeAssistServer speaks Google Code Assist APIs",
                    "description": "`packages/core/src/code_assist/server.ts` implements the `ContentGenerator` interface by translating Qwen requests into Code Assist REST endpoints (`generateContent`, `streamGenerateContent`, `countTokens`, onboarding). It attaches OAuth headers, streams SSE responses into async generators, and exposes helpers for global user settings so Qwen OAuth accounts behave like Gemini sessions.",
                    "tags": [
                        "qwen-auth",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/server.ts",
                            "sha256": "5ff9e5b2972c2c3e57c83554c4b61ff2c2e3c637a8dfbb1c3e91d84522b3931d"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.72
                },
                {
                    "id": "aspect-qwen-code-assist-conversion",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-code-assist-converter",
                    "name": "Converter maps Code Assist protobufs to GenAI shapes",
                    "description": "`packages/core/src/code_assist/converter.ts` converts between Code Assist JSON payloads and @google/genai request/response objects, filtering null parts and preserving routing config, usage metadata, and tool configs. The bridge lets Qwen reuse the existing Gemini client without rewriting downstream schedulers.",
                    "tags": [
                        "qwen-auth",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/converter.ts",
                            "sha256": "d30307fec9e74855d6f14b0fe3b5fc81e0aeb57f41d1f90ee2b790ab4282b009"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.66
                },
                {
                    "id": "aspect-qwen-code-assist-setup",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-code-assist-setup",
                    "name": "Setup negotiates user tier and project binding",
                    "description": "`packages/core/src/code_assist/setup.ts` calls `loadCodeAssist`, selects default tiers, and reissues onboarding requests until the long-running operation completes, throwing a targeted error when Google Cloud project IDs are required. It returns the effective project and tier so instrumentation and quota decisions stay in sync with OAuth credentials.",
                    "tags": [
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/setup.ts",
                            "sha256": "ed738a6106bf4cf3dfb332344d36e97947d22583aab52d645a5acbdfa461bb71"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.61
                },
                {
                    "id": "aspect-qwen-code-assist-oauth",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-code-assist-oauth",
                    "name": "OAuth helper handles browser and device code flows",
                    "description": "`packages/core/src/code_assist/oauth2.ts` builds OAuth2 clients with proxy-aware transport, reuses cached creds, supports Cloud Shell ADC, and falls back to user-code prompts when browsers are disabled. It caches Google account metadata and watches for rate limits so both CLI and sandbox reuse a single token store.",
                    "tags": [
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/oauth2.ts",
                            "sha256": "d2e048b7494e31a8ad9b6e703032937a7751881d2ec2afa575b0ef199b743a19"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.73
                },
                {
                    "id": "aspect-qwen-code-assist-types",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-code-assist-types",
                    "name": "Code Assist types track tiers and eligibility",
                    "description": "`packages/core/src/code_assist/types.ts` mirrors Cloud Code protobuf shapes for tier metadata, onboarding responses, and client labels. The enums and interfaces back tier selection logic and the CLI settings UI, avoiding magic strings when reasoning about legacy vs free/standard entitlement.",
                    "tags": [
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/types.ts",
                            "sha256": "67c3a62ee7bc9e84a9bdddb0e3afd55957a38b84297f38c3d242b7fe9e81422e"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.48
                },
                {
                    "id": "aspect-qwen-auth-validation",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-auth-validation",
                    "name": "CLI auth validator gates provider-specific envs",
                    "description": "`packages/cli/src/config/auth.ts` normalises CLI-selected auth types, ensures Gemini, Vertex, OpenAI, and Qwen OAuth prerequisites are present, and exposes setters for OpenAI credentials supplied through the interactive dialog. Non-interactive scripts reuse the same checks to fail fast before entering the chat loop.",
                    "tags": [
                        "qwen-auth",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/auth.ts",
                            "sha256": "0f99837e4d0978bb70d51160700ced23ac4869437925df339ef286edfd9941a9"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.57
                },
                {
                    "id": "aspect-qwen-auth-ui",
                    "sectionId": "section-qwen-integration",
                    "slug": "qwen-auth-ui",
                    "name": "Auth dialog and hook surface Qwen device flow",
                    "description": "`packages/cli/src/ui/components/AuthDialog.tsx` renders the onboarding dialog, enforcing auth selection before exiting and launching the OpenAI key prompt when needed, while `packages/cli/src/ui/hooks/useQwenAuth.ts` subscribes to `qwenOAuth2Events` to display device codes, polling statuses, and cancellation controls. Together they keep terminal UX aligned with the shared OAuth state machine.",
                    "tags": [
                        "qwen-auth",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/AuthDialog.tsx",
                            "sha256": "0e95dcd11034172d421d8942bada5c5d02f012f257e7afa2f9e4c61a04e95605"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useQwenAuth.ts",
                            "sha256": "d9ae6feaea0fdd5111b90e6f450bbb860d9658000ed2abab9b797bbd3621a5d7"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.62
                }
            ]
        },
        {
            "id": "section-core-tools",
            "slug": "core-tools",
            "title": "Core Tools",
            "entries": [
                {
                    "id": "aspect-core-tools-shell-tool",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-shell-tool",
                    "name": "Shell tool confirms risky commands and surfaces background PIDs",
                    "description": "`projects/qwen-code/packages/core/src/tools/shell.ts` wraps command execution in `ShellToolInvocation`, stripping wrappers, tracking allowlisted root commands, and prompting for confirmation whenever `isCommandNeedsPermission()` flags non-allowlisted binaries. It rewrites git commits to append Config-driven co-author lines, upgrades explicit background runs by appending `&`, and on Unix shells records process-group PIDs via temporary `pgrep` output so the UI can report background jobs separately. Streaming updates debounce at 1s, binary streams trigger progress events, and summaries are optionally generated through `summarizeToolOutput()` when the Config enables tool-output condensation.",
                    "tags": [
                        "core-tools",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/shell.ts",
                            "sha256": "fe887251041320bac2bbee16250fa01f7c3a7c5519d194405479c9dbb62072e8"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.78
                },
                {
                    "id": "aspect-core-tools-write-file",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-write-file",
                    "name": "WriteFile tool diffs proposed content and logs telemetry",
                    "description": "`projects/qwen-code/packages/core/src/tools/write-file.ts` reads existing content through the injected `FileSystemService`, generates a unified diff using `Diff.createPatch`, and builds a `ToolEditConfirmationDetails` payload so the user can approve edits unless `ApprovalMode.AUTO_EDIT` is active. It normalizes MIME metadata via `getSpecificMimeType()`, emits `FileOperationEvent` telemetry with language heuristics, and cooperates with IDE companions by deferring write when the IDE reports unsaved buffers. Error states (unreadable files, diff mismatches) are surfaced through `ToolErrorType` codes, ensuring CLI, IDE, and sandbox share the same safeguard when mutating files.",
                    "tags": [
                        "core-tools",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/write-file.ts",
                            "sha256": "b2d116fecb2e266390117f436e396a4249521297facc4132e24d65e3474ad119"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.79
                },
                {
                    "id": "aspect-core-tools-read-file",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-read-file",
                    "name": "ReadFile tool enforces absolute workspace paths and pagination",
                    "description": "`projects/qwen-code/packages/core/src/tools/read-file.ts` validates absolute paths against `WorkspaceContext`, rejects `.qwenignore` matches, and supports paginated reads with `offset`/`limit` while warning when returning truncated content. It leverages `processSingleFileContent()` to normalize multi-format payloads (including binary stubs) and records telemetry with mimetype plus inferred language. The paired `ReadManyFiles` implementation in `read-many-files.ts` reuses the same helpers to batch multiple absolute paths, so LLM plans can safely page through large files without ever leaving workspace boundaries.",
                    "tags": [
                        "core-tools",
                        "file-io",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/read-file.ts",
                            "sha256": "6b8da37cbe1ced04565a5b23ed747cf301f727162dc4aa1d49539b1cde642ebc"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/read-many-files.ts",
                            "sha256": "a7a6045589c178efabceeb186b6657415b5c99e471ea747a1fdbc8c72a9e38f6"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.76
                },
                {
                    "id": "aspect-core-tools-edit",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-edit",
                    "name": "Edit tool counts replacements and blocks stale diffs",
                    "description": "`projects/qwen-code/packages/core/src/tools/edit.ts` computes a prospective edit by loading the target file, normalizing newlines, and counting replacements to enforce `expected_replacements`. It auto-creates files when `old_string` is empty, but refuses edits if the file vanished mid-run or the IDE reports unsaved buffers. Confirmation payloads include diff stats built from `DEFAULT_DIFF_OPTIONS`, and telemetry logs the operation with programming-language hints, giving both CLI and subagents a safe primitive for targeted patching.",
                    "tags": [
                        "core-tools",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/edit.ts",
                            "sha256": "753a45304e36430c8330f19d0f68c042d16a03471720645e82f3859fdaf0c615"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.75
                },
                {
                    "id": "aspect-core-tools-glob",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-glob",
                    "name": "Glob tool ranks recent files and honors workspace ignores",
                    "description": "`projects/qwen-code/packages/core/src/tools/glob.ts` resolves the search root against `WorkspaceContext`, then performs globbing with `glob()` while injecting Config-driven excludes and `.gitignore` respect flags. Results are run through `sortFileEntries()` which prioritizes files touched within the recency threshold before alphabetizing the rest, and relative paths are shortened via `makeRelative()` for calmer LLM output. By streaming through all workspace roots when no `path` is specified, it gives the agent a fast index of likely files without bypassing ignore policies.",
                    "tags": [
                        "core-tools",
                        "search",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/glob.ts",
                            "sha256": "a15d1ac6679c7bbaff045513578629acd728082807b07be9bcbca6d4b4082ed6"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.73
                },
                {
                    "id": "aspect-core-tools-ripgrep",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-ripgrep",
                    "name": "RipGrep tool streams rg output with workspace validation",
                    "description": "`projects/qwen-code/packages/core/src/tools/ripGrep.ts` lazy-loads the bundled `@lvce-editor/ripgrep` binary, validates directory scopes via `WorkspaceContext`, and spawns `rg` with include filters, returning up to 20k matches grouped per file. It rewrites paths when multiple workspace roots are searched, appends truncation warnings, and guards against user-supplied directories outside the project, throwing a descriptive error tied to `ToolErrorType`. This provides a high-volume search primitive that stays sandbox-aware and respects abort signals.",
                    "tags": [
                        "core-tools",
                        "search"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/ripGrep.ts",
                            "sha256": "15d1c5a0e663c63a373e9d17388b170da82f6d5eeb4f179be3b8f6f20f83f805"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.78
                },
                {
                    "id": "aspect-core-tools-task",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-task",
                    "name": "Task tool spins up subagents with live progress updates",
                    "description": "`projects/qwen-code/packages/core/src/tools/task.ts` initializes with a minimal schema, asynchronously loads available subagents from `SubagentManager.listSubagents()`, and rewrites both description and schema to embed the live catalog. It enables streaming output (`canUpdateOutput`) so agent events propagate to the primary chat, listens for approval requests via `SubAgentEventEmitter`, and refreshes the Gemini tool list whenever subagents change. The tool enforces `description/prompt/subagent_type` parameters and communicates best practices directly to the model, making delegated work predictable.",
                    "tags": [
                        "core-tools",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/task.ts",
                            "sha256": "047d7f0e78367c7d9b57a9609a56984020aed89ae12ffd055c340861e5f891e6"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.82
                },
                {
                    "id": "aspect-core-tools-memory",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-memory",
                    "name": "Memory tool appends facts to QWEN.md with diff previews",
                    "description": "`projects/qwen-code/packages/core/src/tools/memoryTool.ts` exposes a `save_memory` function that normalizes facts, ensures a `## Qwen Added Memories` header, and appends bullet entries to either the global `~/.qwen/QWEN.md` or project-local file based on `scope`. It generates patch previews via `Diff.createPatch`, requests confirmation unless auto-edit is enabled, and respects IDE dirty states before writing. Helpers like `setGeminiMdFilename()` allow multi-file contexts, enabling user-configurable memory stores shared across CLI sessions.",
                    "tags": [
                        "core-tools",
                        "context-management",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/memoryTool.ts",
                            "sha256": "760082ccb3459b86db13d9372785832b7546b2580911db33b18c306cf3295e8c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.74
                },
                {
                    "id": "aspect-core-tools-web-fetch",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-web-fetch",
                    "name": "WebFetch tool normalizes HTTP requests and redacts secrets",
                    "description": "`projects/qwen-code/packages/core/src/tools/web-fetch.ts` builds fetch requests with configurable method, headers, timeout, and body encoding, while scrubbing sensitive authorization headers before echoing them back to the model. It enforces Config-driven timeouts, limits binary payload size, and streams chunked responses into markdown-formatted blocks annotated with status codes. Errors bubble through `ToolErrorType`, ensuring the model sees clear failure reasons when remote services reject calls.",
                    "tags": [
                        "core-tools",
                        "web"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/web-fetch.ts",
                            "sha256": "9a2726a827fa5bebe97a19ba956f59e8d02fd9ca4855683ccc1dc03fe141bdfd"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.69
                },
                {
                    "id": "aspect-core-tools-web-search",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-web-search",
                    "name": "WebSearch tool multiplexes providers with throttled retries",
                    "description": "`projects/qwen-code/packages/core/src/tools/web-search.ts` abstracts search providers behind Config, dispatching concurrent queries with capped concurrency and de-duplicating URLs. It normalizes results into snippets with source ranking, obeys provider-specific quotas, and logs errors without leaking API keys. By collapsing results into a deterministic markdown summary, it gives the agent a safe fallback when the dedicated Qwen search APIs are unavailable.",
                    "tags": [
                        "core-tools",
                        "web"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/web-search.ts",
                            "sha256": "42f243168972744ac56f99a47f22510f29cbdb5f2047ad3dc109e9a7277a0616"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.72
                },
                {
                    "id": "aspect-core-tools-mcp-client-manager",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-mcp-client-manager",
                    "name": "MCP client manager caches connections and propagates tool schemas",
                    "description": "`projects/qwen-code/packages/core/src/tools/mcp-client-manager.ts` keeps a pool of `McpClient` instances keyed by server id, lazily starts transports, and updates ToolRegistry entries whenever remote tool schemas change. It serializes concurrent connection attempts, injects OAuth tokens via Config when providers require them, and supports JSON-RPC notifications for dynamic capability updates. This abstraction lets the agent treat remote MCP tools the same as local declarative tools, even when credentials expire mid-session.",
                    "tags": [
                        "core-tools",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client-manager.ts",
                            "sha256": "df586fd3f52308b0c8f120fd7cf0eb240fdbe48ecc5be7cf7822bfe35c9a78e9"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.81
                },
                {
                    "id": "aspect-core-tools-tool-registry",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-tool-registry",
                    "name": "ToolRegistry assembles declarative tools and modifiable proxies",
                    "description": "`projects/qwen-code/packages/core/src/tools/tool-registry.ts` registers built-in declarative tools alongside MCP adapters, wraps mutating tools with `ModifiableDeclarativeTool` so user edits can flow back, and exposes `getToolsForGemini()` for the chat client. It respects Config toggles for shell, sandbox, web, and subagent features, merging tool allow/deny lists derived from workspace settings. By centralizing instantiation it keeps CLI, IDE, and Task subagents in sync about the currently enabled tool surface.",
                    "tags": [
                        "core-tools",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-registry.ts",
                            "sha256": "f4940d6fe67c3721e3289cdcb798507c0558fc4acd798dcdd83fe1de8ebb0299"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.8
                },
                {
                    "id": "aspect-core-tools-tools-base",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-tools-base",
                    "name": "BaseDeclarativeTool standardizes confirmation and telemetry hooks",
                    "description": "`projects/qwen-code/packages/core/src/tools/tools.ts` defines `BaseDeclarativeTool` and `BaseToolInvocation`, implementing shared schema validation, approval prompts, location reporting, and live output plumbing used across every declarative tool. It exposes enums for `ToolConfirmationOutcome`, centralizes markdown rendering flags, and normalizes result payloads (`llmContent`, `returnDisplay`, errors) so the Gemini client can stream updates consistently. Tool authors extend this base to integrate seamlessly with Config, telemetry, and user approvals.",
                    "tags": [
                        "core-tools",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tools.ts",
                            "sha256": "d1cef570780b6068a9616fd9142bc4a7130f748bd4a60d646b847929fb1d206c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.77
                },
                {
                    "id": "aspect-core-tools-ls",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-ls",
                    "name": "`ls` tool lists directories with glob and paging",
                    "description": "`packages/core/src/tools/ls.ts` wraps Node fs with glob-aware listings, honours `FileExclusions`, formats results with column widths, and emits telemetry events. It backs the `list_directory` command exposed to agents.",
                    "tags": [
                        "core-tools",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/ls.ts",
                            "sha256": "dc0e463469629b0047dd0bd0cb1aee90dec03beb7df6fd0e2e7492323bdad28b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.53
                },
                {
                    "id": "aspect-core-tools-grep",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-grep",
                    "name": "`grep` tool streams ripgrep matches with context",
                    "description": "`packages/core/src/tools/grep.ts` shells out to ripgrep when available (falling back to JS scanning), supports include/exclude patterns, and caps match counts to protect the context window. Results include file path, line, and snippet, aligning with the CLI renderers.",
                    "tags": [
                        "core-tools",
                        "search"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/grep.ts",
                            "sha256": "4fabcde2fa161234143a8cd13ce2989555309c3c74a853f2c2c708b1128ff3ed"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.55
                },
                {
                    "id": "aspect-core-tools-read-many-files",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-read-many-files",
                    "name": "Read-many-files batches globbed reads with telemetry",
                    "description": "`packages/core/src/tools/read-many-files.ts` expands include patterns, merges default excludes, respects `.qwenignore`, and streams file content through `processSingleFileContent` with language detection. It logs `FileOperationEvent` metrics and returns structured parts so large contexts stay chunked.",
                    "tags": [
                        "core-tools",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/read-many-files.ts",
                            "sha256": "a7a6045589c178efabceeb186b6657415b5c99e471ea747a1fdbc8c72a9e38f6"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.67
                },
                {
                    "id": "aspect-core-tools-todo-write",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-todo-write",
                    "name": "TodoWrite tool manages structured task lists",
                    "description": "`packages/core/src/tools/todoWrite.ts` enforces a schema of todo items with ids, content, and status, deduplicates by id, and writes JSON to `.qwen/todo.json` while logging telemetry. It gives the agent a declarative way to track plans without re-parsing markdown.",
                    "tags": [
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/todoWrite.ts",
                            "sha256": "9b8b4b8ca116c4f2de19da163838b50b5e3417e58a6d17d670b4a6c1620aa30d"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.5
                },
                {
                    "id": "aspect-core-tools-modifiable",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-modifiable",
                    "name": "Modifiable tool base enforces approval policies",
                    "description": "`packages/core/src/tools/modifiable-tool.ts` wraps tools that mutate the workspace, recording pending approvals, wiring telemetry, and providing helpers for diffs vs direct writes. Edit/write/todo tools subclass it to inherit consistent prompts and audit logging.",
                    "tags": [
                        "core-tools",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/modifiable-tool.ts",
                            "sha256": "b82c2f31547b400ecdab94587e045444b88fd3f22ea5ca70e22fd7d3c5ab257c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.58
                },
                {
                    "id": "aspect-core-tools-error",
                    "sectionId": "section-core-tools",
                    "slug": "core-tools-error",
                    "name": "Tool error helpers classify failure modes",
                    "description": "`packages/core/src/tools/tool-error.ts` defines typed error payloads (`ToolErrorType`) and utility factories so tools can signal not-found, validation, or execution failures consistently. The CLI and telemetry pipelines rely on it to render actionable error messages.",
                    "tags": [
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-error.ts",
                            "sha256": "f2bee0b703fb4337f88c81672bf29dcc247fdcb80a73ebe1c8341e401f0ef0f2"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.49
                },
                {
                    "id": "aspect-core-tool-names",
                    "sectionId": "section-core-tools",
                    "slug": "core-tool-names",
                    "name": "ToolNames constants avoid circular registry imports",
                    "description": "`tools/tool-names.ts` exports canonical strings for edit/write/read/glob/shell/memory/task/todo tools plus `exit_plan_mode`. Registries, telemetry, and allowlists use the constants to avoid depending on class names directly.",
                    "tags": [
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-names.ts",
                            "sha256": "792b89091d0b7a1239ddb891426bd9a88a166885e89588fddb56b067d93b6ece"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.54
                },
                {
                    "id": "aspect-core-exit-plan-mode",
                    "sectionId": "section-core-tools",
                    "slug": "core-exit-plan-mode",
                    "name": "ExitPlanMode tool enforces plan approval state",
                    "description": "`tools/exitPlanMode.ts` declares the `exit_plan_mode` JSON schema, shows a plan confirmation dialog, flips `Config` approval mode depending on outcome, and returns either a plan summary display or a rejection payload. It\u2019s the enforcement point for leaving plan mode only after user consent.",
                    "tags": [
                        "core-tools",
                        "prompting"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/exitPlanMode.ts",
                            "sha256": "f6d88cc881ecb70909a283ee2ce53741be6788be3b78848cb7710e4d516aaf67"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.72
                },
                {
                    "id": "aspect-core-mcp-tool",
                    "sectionId": "section-core-tools",
                    "slug": "core-mcp-tool",
                    "name": "DiscoveredMCPTool bridges remote MCP callable tools",
                    "description": "`tools/mcp-tool.ts` wraps `CallableTool` instances with `DiscoveredMCPTool`/`DiscoveredMCPToolInvocation`, building confirmation prompts with allowlists, executing `callTool`, detecting error payloads, mapping MCP content blocks to GenAI parts, and returning markdown-friendly displays while persisting trust decisions. It lets remote MCP servers behave like first-party declarative tools.",
                    "tags": [
                        "core-tools",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-tool.ts",
                            "sha256": "c38c9e2b806936bd0ceb30bac78fa502282c2ca88da9aea9be49e019b622c4ec"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.78
                },
                {
                    "id": "aspect-core-diff-stats",
                    "sectionId": "section-core-tools",
                    "slug": "core-diff-stats",
                    "name": "DiffOptions helper computes AI vs user edit stats",
                    "description": "`tools/diffOptions.ts` configures patching with 3-line context and whitespace ignoring, then `getDiffStat()` runs `Diff.structuredPatch` to count AI-added/removed lines versus user edits. Shell/edit tooling uses the counts for telemetry and UI badges.",
                    "tags": [
                        "core-tools",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/diffOptions.ts",
                            "sha256": "cd614ab0f9de4a95305b1b2669d91151f47dee22d44c4ec1654e0b4a0754aad6"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.57
                },
                {
                    "id": "aspect-core-codeassist-content-generator",
                    "sectionId": "section-core-tools",
                    "slug": "core-codeassist-content-generator",
                    "name": "createCodeAssistContentGenerator wraps Code Assist OAuth setup",
                    "description": "`codeAssist.ts` handles the PKCE OAuth flow for Code Assist auth types, calling `getOauthClient()` and `setupUser()` before instantiating `CodeAssistServer` with project ID, tier, HTTP options, and session id. Unsupported auth types throw immediately, positioning the function as the only entry point that elevates CLI credentials into the Code Assist runtime.",
                    "tags": [
                        "core-tools",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/codeAssist.ts",
                            "sha256": "b8e34b8b9481d2058dfc5bec8f562c0dd9fb79b0c60fd5fc83abba86a1fd83b7"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.65
                }
            ]
        },
        {
            "id": "section-subagents",
            "slug": "subagents",
            "title": "Subagents",
            "entries": [
                {
                    "id": "aspect-subagents-manager",
                    "sectionId": "section-subagents",
                    "slug": "subagents-manager",
                    "name": "SubagentManager loads YAML frontmatter configs across scopes",
                    "description": "`projects/qwen-code/packages/core/src/subagents/subagent-manager.ts` stores agent definitions as Markdown with YAML frontmatter under `.qwen/agents/`, validates them via `SubagentValidator`, and caches project, user, and built-in levels. `createSubagent()` writes serialized configs (respecting overwrite flags), `listSubagents()` merges and annotates level precedence, and change listeners notify tools like the Task tool to refresh. The manager auto-falls back from project \u2192 user \u2192 built-in when resolving names, letting teams seed shared agents while allowing local overrides.",
                    "tags": [
                        "subagents",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent-manager.ts",
                            "sha256": "1f93c954b1571b6fcd49db88fa018656d117dc40788b36c2b3fb4c2f2bd1db60"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.8
                },
                {
                    "id": "aspect-subagents-builtin-registry",
                    "sectionId": "section-subagents",
                    "slug": "subagents-builtin-registry",
                    "name": "BuiltinAgentRegistry seeds default agent prompts and toolsets",
                    "description": "`projects/qwen-code/packages/core/src/subagents/builtin-agents.ts` packages curated agent definitions (code-reviewer, greeter, etc.) with default prompts, allowed tools, and model hints, exposing them through `BuiltinAgentRegistry.getBuiltinAgent()` and `listBuiltinAgents()`. Each entry includes rationale, recommended termination behavior, and telemetry metadata, so new workspaces have productive subagents before custom configs are written.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/builtin-agents.ts",
                            "sha256": "9a0209848a683b2da99096ad45613441915b4e18ea7a3a7507de682dcc1f8efd"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.68
                },
                {
                    "id": "aspect-subagents-validation",
                    "sectionId": "section-subagents",
                    "slug": "subagents-validation",
                    "name": "SubagentValidator enforces schema, permissions, and tool availability",
                    "description": "`projects/qwen-code/packages/core/src/subagents/validation.ts` parses YAML fronts into `SubagentConfig`, checks required fields (name, description, prompt), validates tool allowlists against known ToolNames, and confirms termination settings plus model identifiers. It raises `SubagentError` codes for duplicate tools, missing prompts, or invalid levels, preventing malformed agents from being created or loaded into the scheduler.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/validation.ts",
                            "sha256": "58ceb4060e232c371d88a79876624d6de6fd8551df877f82eb7b140408d9d154"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.72
                },
                {
                    "id": "aspect-subagents-statistics",
                    "sectionId": "section-subagents",
                    "slug": "subagents-statistics",
                    "name": "SubagentStatistics tracks successes, failures, and average run time",
                    "description": "`projects/qwen-code/packages/core/src/subagents/subagent-statistics.ts` aggregates counts per agent id, updating success/failure totals and computing running averages for duration as Task tool invocations complete. It exposes snapshot objects for telemetry and UI, and can merge persisted stats when reloaded, giving operators visibility into agent quality without scraping logs.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent-statistics.ts",
                            "sha256": "c7f152a1619c137fbf33b168fccd5446f3d0ea35563d2b6e2edd198bad2a4c95"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.65
                },
                {
                    "id": "aspect-subagents-events-hooks",
                    "sectionId": "section-subagents",
                    "slug": "subagents-events-hooks",
                    "name": "Subagent events and hooks expose lifecycle callbacks",
                    "description": "`projects/qwen-code/packages/core/src/subagents/subagent-events.ts` defines typed events for tool calls, approvals, completions, and errors, while `subagent-hooks.ts` offers optional `preToolUse`/`postToolUse`/`onStop` callbacks consumers can register. Together they let telemetry, UI, or analytics layers observe agent behavior without tightly coupling to the Task tool implementation.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent-events.ts",
                            "sha256": "4f3a8f6c4494032b6d942c8366b145efc8750ba3c35cdc5fc355e3335719cf3c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent-hooks.ts",
                            "sha256": "0a6021f422033d5475fb86308330172fd5baddf66c992395b7dd726aacf99aab"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.62
                },
                {
                    "id": "aspect-subagent-run-loop",
                    "sectionId": "section-subagents",
                    "slug": "subagent-run-loop",
                    "name": "`SubAgentScope.runNonInteractive` orchestrates turn limits, aborts, and final answers",
                    "description": "`projects/qwen-code/packages/core/src/subagents/subagent.ts` drives each subagent through `runNonInteractive()`: it builds a `GeminiChat`, enforces `max_turns`/`max_time_minutes`, seeds the initial task text, and tracks `GenerateContentResponseUsageMetadata` to accumulate token costs. The method emits lifecycle events (`ROUND_START`, `STREAM_TEXT`, `FINISH`), logs telemetry via `SubagentExecutionEvent`, and nudges the model with a fallback prompt when no tool calls or final text arrive, guaranteeing deterministic shutdown states.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent.ts",
                            "sha256": "ccd7424ef72eb7f099461eb6175522bc9c1fdbbfeca125c9c0404f4a2c8a3b54"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.7
                },
                {
                    "id": "aspect-subagent-tool-scheduler",
                    "sectionId": "section-subagents",
                    "slug": "subagent-tool-scheduler",
                    "name": "`processFunctionCalls` batches CoreToolScheduler runs with approval hooks",
                    "description": "Inside `subagent.ts`, `processFunctionCalls()` wraps `CoreToolScheduler` to emit `TOOL_CALL`, `TOOL_RESULT`, and `TOOL_WAITING_APPROVAL` events while tracking per-tool success rates and durations. It wires optional `SubagentHooks` (`preToolUse`/`postToolUse`), deduplicates approval responses, and appends tool responses back into the conversation\u2014falling back to a guidance message when every tool fails so the model can recover.",
                    "tags": [
                        "subagents",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent.ts",
                            "sha256": "ccd7424ef72eb7f099461eb6175522bc9c1fdbbfeca125c9c0404f4a2c8a3b54"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-subagent-context-templating",
                    "sectionId": "section-subagents",
                    "slug": "subagent-context-templating",
                    "name": "ContextState and `templateString` enforce prompt placeholders",
                    "description": "`subagent.ts` defines a `ContextState` map with typed getters/setters and a `templateString()` helper that validates every `${key}` has a value before interpolating system prompts. Missing variables raise errors, preventing half-baked prompts from reaching Gemini; the same state object exposes `get_keys()` for diagnostics.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent.ts",
                            "sha256": "ccd7424ef72eb7f099461eb6175522bc9c1fdbbfeca125c9c0404f4a2c8a3b54"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-subagent-chat-bootstrap",
                    "sectionId": "section-subagents",
                    "slug": "subagent-chat-bootstrap",
                    "name": "`createChatObject` layers environment context and system instructions",
                    "description": "`subagent.ts` `createChatObject()` fetches IDE/workspace context via `getEnvironmentContext()`, stitches it into the conversation history, and builds a `GeminiChat` with generation config from `ModelConfig`. When `systemPrompt` is supplied it augments it with non-interactive rules via `buildChatSystemPrompt()`, and falls back to logging/reporting errors through `reportError()` if initialization fails.",
                    "tags": [
                        "subagents",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent.ts",
                            "sha256": "ccd7424ef72eb7f099461eb6175522bc9c1fdbbfeca125c9c0404f4a2c8a3b54"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.65
                },
                {
                    "id": "aspect-subagent-execution-metrics",
                    "sectionId": "section-subagents",
                    "slug": "subagent-execution-metrics",
                    "name": "Subagent execution stats mirror telemetry and summary reporting",
                    "description": "`subagent.ts` keeps `executionStats` and a `SubagentStatistics` instance in sync, updating token counts, tool success rates, and estimated costs each turn. `getStatistics()` returns success percentages plus per-tool aggregates, while `getExecutionSummary()` exposes the compact telemetry payload used by CLI UI and logs, ensuring downstream consumers see consistent metrics.",
                    "tags": [
                        "subagents",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent.ts",
                            "sha256": "ccd7424ef72eb7f099461eb6175522bc9c1fdbbfeca125c9c0404f4a2c8a3b54"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-subagent-tool-selection",
                    "sectionId": "section-subagents",
                    "slug": "subagent-tool-selection",
                    "name": "Tool whitelist logic handles wildcards and inline declarations",
                    "description": "Within `runNonInteractive()`, `subagent.ts` builds `toolsList` by honoring `toolConfig.tools`: it expands wildcards to every registered tool except `TaskTool`, merges inline `FunctionDeclaration`s, and falls back to inheriting the entire registry when unspecified. This ensures subagents only see approved capabilities while still supporting custom JSON schemas in config.",
                    "tags": [
                        "subagents",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent.ts",
                            "sha256": "ccd7424ef72eb7f099461eb6175522bc9c1fdbbfeca125c9c0404f4a2c8a3b54"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-subagent-config-interfaces",
                    "sectionId": "section-subagents",
                    "slug": "subagent-config-interfaces",
                    "name": "`SubagentConfig` maps Markdown front matter into runtime settings",
                    "description": "`projects/qwen-code/packages/core/src/subagents/types.ts` defines `SubagentConfig` fields (name, description, tool list, model/run overrides, storage level, color) and the derived `SubagentRuntimeConfig` shape consumed by `SubAgentScope`. It underpins the manager's YAML parser by describing which properties flow into prompt, model, and run configuration blocks.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.59
                },
                {
                    "id": "aspect-subagent-error-codes",
                    "sectionId": "section-subagents",
                    "slug": "subagent-error-codes",
                    "name": "`SubagentError` standardizes validation and IO failures",
                    "description": "`types.ts` introduces `SubagentError` with string codes such as `NOT_FOUND`, `INVALID_CONFIG`, and `TOOL_NOT_FOUND`, plus the `SubagentErrorCode` union. Manager and CLI surfaces rely on these codes to distinguish missing files from schema issues, enabling targeted error messaging when users create or override agents.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-subagent-level-options",
                    "sectionId": "section-subagents",
                    "slug": "subagent-level-options",
                    "name": "Levels and list/create options control precedence and tooling",
                    "description": "`types.ts` also defines `SubagentLevel` (project, user, builtin), `ListSubagentsOptions` (filter by level, tool, sort order), and `CreateSubagentOptions` (overwrite flags, custom paths). These types drive `SubagentManager` APIs so callers can target specific storage scopes and maintain deterministic override behavior.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                },
                {
                    "id": "aspect-subagent-generator",
                    "sectionId": "section-subagents",
                    "slug": "subagent-generator",
                    "name": "`subagentGenerator` prompts Gemini to draft new agent definitions",
                    "description": "`projects/qwen-code/packages/core/src/utils/subagentGenerator.ts` supplies an LLM prompt that extracts user intent, crafts system instructions, and returns `{name, description, systemPrompt}` adhering to `SubagentGeneratedContent`. It enforces non-empty input, calls `GeminiClient.generateJson()` with a schema requiring all fields, and throws if the response omits mandatory data\u2014powering the CLI agent creation wizard.",
                    "tags": [
                        "subagents",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/subagentGenerator.ts",
                            "sha256": "8113481575ce5b1e23e6dc115534b0b145e42f26502250b360991582514a6f3a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-subagents-api-exports",
                    "sectionId": "section-subagents",
                    "slug": "subagents-api-exports",
                    "name": "Subagents index re-exports configuration, runtime, and events",
                    "description": "`subagents/index.ts` centralizes the Phase\u00a01 file-backed subagent stack by re-exporting typed configs, the validator, manager, builtin registry, runtime scope, and event emitter/statistics surfaces. Consumers import from this barrel instead of reaching into individual files, keeping the CLI and core SDK aligned on the same subagent types.",
                    "tags": [
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/index.ts",
                            "sha256": "b357791bcccc1fdfd75218139bd1cd24ce1d516e01c16e433817dc6284fb9ac3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                }
            ]
        },
        {
            "id": "section-telemetry",
            "slug": "telemetry",
            "title": "Telemetry",
            "entries": [
                {
                    "id": "aspect-telemetry-sdk",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-sdk",
                    "name": "Telemetry SDK buffers events and rotates session ids",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/sdk.ts` exposes a singleton that assigns session IDs, queues events until loggers attach, and flushes batches with backoff when transports fail. It tags every payload with Config metadata (workspace hash, provider, sandbox mode) and exposes `withScopedSession()` so CLI invocations, Task subagents, and IDE commands can emit correlated traces.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/sdk.ts",
                            "sha256": "d20c8c399718521dd8eaa5d440106986712295de93c8ab16d47d672eb448a6a9"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.74
                },
                {
                    "id": "aspect-telemetry-loggers",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-loggers",
                    "name": "Telemetry loggers fan out to Clearcut and in-memory exporters",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/loggers.ts` assembles loggers based on Config flags, wiring Clearcut, local file exporters, and console sinks while deduplicating events. It ensures tool calls, file ops, auth flows, and sandbox transitions flow through a single `log*` API, while rate limiting noisy signals so cloud pipelines stay affordable.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/loggers.ts",
                            "sha256": "5874c59fb6c330a5ad5fff0f9c33a0d8958e0a096d053d96047961eec15a0997"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.7
                },
                {
                    "id": "aspect-telemetry-metrics",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-metrics",
                    "name": "Metrics catalog standardizes tool, file, and auth counters",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/metrics.ts` enumerates strongly typed events like `FileOperation`, `SandboxLaunch`, and `TokenRefresh`, providing builders that attach durations and sizes. When tools emit these metrics, loggers format consistent payloads for analytics backends and guard against missing dimensions.",
                    "tags": [
                        "telemetry",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/metrics.ts",
                            "sha256": "79002a348b79c75ecc08756cb08a46dc4331bb6b86bc67de257f8d28fc30c3c3"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.68
                },
                {
                    "id": "aspect-telemetry-ui",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-ui",
                    "name": "UITelemetry streams CLI UX events with throttled batching",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/uiTelemetry.ts` exposes helper methods for CLI start, spinner updates, prompt approvals, and error banners, coalescing repeated events and attaching rich context (duration, sandbox choice, tool counts). This keeps UX analytics consistent between interactive CLI and VS Code companion surfaces.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/uiTelemetry.ts",
                            "sha256": "20389c1f114ae7978b80ec8d85e327ab313f689c587b22d6cb241bd1aaf2f1c5"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.6
                },
                {
                    "id": "aspect-telemetry-tool-call-decision",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-tool-call-decision",
                    "name": "ToolCallDecision telemetry captures planner choices and outcomes",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/tool-call-decision.ts` emits structured events detailing which tool the planner selected, whether it was approved, latency, and any rejection reason. It links decisions to conversation IDs, letting analysts understand why the agent chose a given tool and how often fallback strategies triggered.",
                    "tags": [
                        "telemetry",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/tool-call-decision.ts",
                            "sha256": "5998e6c2ab2667e9d863c5774556072b1b7c2f88216f98753f3582ea75917318"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.64
                },
                {
                    "id": "aspect-telemetry-clearcut",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-clearcut",
                    "name": "Clearcut logger batches proto payloads with retry and jitter",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/clearcut-logger/clearcut-logger.ts` serializes events into Clearcut request protos, applies jittered retry windows, and truncates oversized payloads while preserving key-value metadata. It respects opt-in flags and automatically falls back to local logging when network errors persist.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/clearcut-logger/clearcut-logger.ts",
                            "sha256": "63c2cc3a581d11b7edf015eb14179ed9229a2473cf389e41e117cad4ccf5200f"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.58
                },
                {
                    "id": "aspect-telemetry-event-constants",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-event-constants",
                    "name": "Telemetry constants define canonical event and metric names",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/constants.ts` centralizes every `qwen-code.*` event and metric identifier\u2014user prompts, tool calls, chat retries, IDE connections, subagent execution, and latency counters. The constants prevent typos across loggers and metrics exporters while making it easy to audit coverage when new signals are introduced.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/constants.ts",
                            "sha256": "98153b9a2921f4449676b9924e1002d3997e1aac7a8d269cfc4ce94ea7dd4a3f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-telemetry-file-exporters",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-file-exporters",
                    "name": "File exporters mirror OpenTelemetry spans, logs, and metrics to disk",
                    "description": "`telemetry/file-exporters.ts` provides `FileSpanExporter`, `FileLogExporter`, and `FileMetricExporter` implementations that append JSON payloads to local files while reporting `ExportResultCode` back to OpenTelemetry. Metric export uses cumulative temporality and a no-op `forceFlush`, making debugging instrumentation easy even when remote backends are misconfigured.",
                    "tags": [
                        "telemetry",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/file-exporters.ts",
                            "sha256": "81337d046c60c14ff97b97e452a1409ad4229352944f259ef79865d4490f4b8f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-telemetry-language-helper",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-language-helper",
                    "name": "Telemetry utils infer programming language from tool args",
                    "description": "`telemetry/telemetry-utils.ts` exposes `getProgrammingLanguage()` which inspects tool arguments (`file_path`, `path`, `absolute_path`) and passes them through `getLanguageFromFilePath()`. File operation telemetry uses this helper to tag events with language names, enabling language-specific dashboards without duplicating detection logic.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/telemetry-utils.ts",
                            "sha256": "04dd2a4208fe1869ddd84a43bcd538801311f269b55cbea328d63fdbf4db0529"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-telemetry-cli-config-event",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-cli-config-event",
                    "name": "Session start/end events capture configuration and auth surface",
                    "description": "`telemetry/types.ts` implements `StartSessionEvent` and `EndSessionEvent`, pulling model selection, sandbox flags, core tool lists, approval mode, telemetry opt-ins, and MCP inventory from `Config` (optionally counting discovered MCP tools via `ToolRegistry`). The events timestamp themselves and mirror session IDs, giving analytics a canonical snapshot of CLI posture at launch.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-telemetry-tool-call-event",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-tool-call-event",
                    "name": "ToolCallEvent enriches telemetry with decisions, errors, and diff stats",
                    "description": "`telemetry/types.ts` `ToolCallEvent` serializes each completed tool run: it records duration, outcome status, decision classification via `getDecisionFromOutcome()`, and whether the tool originated from MCP. When diff data is present it attaches AI/user line deltas, giving dashboards granular insight into tool effectiveness.",
                    "tags": [
                        "telemetry",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.64
                },
                {
                    "id": "aspect-telemetry-api-events",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-api-events",
                    "name": "API request/response/error events track token usage and failures",
                    "description": "`telemetry/types.ts` defines `ApiRequestEvent`, `ApiResponseEvent`, `ApiErrorEvent`, and `ApiCancelEvent`. Responses capture token counts (prompt, candidate, cached, thoughts, tool) from `GenerateContentResponseUsageMetadata`, store status codes and auth type, while errors log http status and error types. Cancel events record manual aborts, giving observability across the entire request lifecycle.",
                    "tags": [
                        "telemetry",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-telemetry-loop-retry-events",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-loop-retry-events",
                    "name": "Loop and retry telemetry flag LLM oscillations and fallback timing",
                    "description": "`telemetry/types.ts` includes `LoopDetectedEvent`, `ContentRetryEvent`, and `ContentRetryFailureEvent` to capture consecutive tool loops, streaming retries, and final exhaustion. Each event stamps the attempt number or loop type plus delay metadata, enabling operators to spot runaway conversations and adjust safeguards.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-telemetry-file-operation-event",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-file-operation-event",
                    "name": "FileOperationEvent records tool-side edits with language hints",
                    "description": "`telemetry/types.ts` `FileOperationEvent` attaches tool name, operation type, affected line counts, mime types, diff stats, and programming language (often derived via `getProgrammingLanguage`). This powers file-level dashboards showing how agents interact with the workspace.",
                    "tags": [
                        "telemetry",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/types.ts",
                            "sha256": "2557030545155d32433352fbb4a1f47e85578287592cb6f1f34e4006fd9b7dd8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-telemetry-qwen-logger",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-qwen-logger",
                    "name": "QwenLogger batches RUM payloads with proxy and retry support",
                    "description": "`telemetry/qwen-logger/qwen-logger.ts` manages a bounded deque of RUM events, builds payloads with CLI metadata, and periodically flushes them to Alibaba RUM using `https` (with proxy support via `HttpsProxyAgent`). Flushes go through `retryWithBackoff`, requeue failed events up to `MAX_RETRY_EVENTS`, and auto-register shutdown hooks so usage telemetry is delivered reliably when enabled.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/qwen-logger/qwen-logger.ts",
                            "sha256": "71ef7e6dd1a4a7dec8951e5906b3d2f11bf13369e6cc9fad4033288b51800a19"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.61
                },
                {
                    "id": "aspect-telemetry-qwen-rum",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-qwen-rum",
                    "name": "Qwen RUM event types document view/action schemas",
                    "description": "`telemetry/qwen-logger/event-types.ts` defines the app/user/session/view metadata plus view/action/exception/resource event shapes used by the Qwen logger, including optional timings, trace IDs, and payload snapshots. Serializers rely on these interfaces before shipping telemetry to Qwen\u2019s backend.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/qwen-logger/event-types.ts",
                            "sha256": "599cf8cb70fe2d5b4a45eff3ee44a1ba7d5da6bc8531b55fb0d95932b39190eb"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.5
                },
                {
                    "id": "aspect-telemetry-event-metadata-keys",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-event-metadata-keys",
                    "name": "EventMetadataKey enumerates every Clearcut field emitted by the CLI",
                    "description": "`telemetry/clearcut-logger/event-metadata-key.ts` lists the numeric ids used when emitting Clearcut events, covering session starts, prompts, tool calls, API requests, slash commands, loop detection, and shared metadata like session id or OS. Centralizing the enum prevents collisions when telemetry payloads evolve.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/clearcut-logger/event-metadata-key.ts",
                            "sha256": "2f505e934ed3dd0c1e54dbaaefff8cce8e8717d3614149a2c83c87f625d717ed"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.59
                },
                {
                    "id": "aspect-telemetry-target-entrypoint",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-target-entrypoint",
                    "name": "Telemetry index exports targets, defaults, and logger helpers",
                    "description": "`telemetry/index.ts` defines the supported `TelemetryTarget` values (local OTLP, GCP, Qwen), publishes default endpoint/target constants, and re-exports the OTEL status enums plus logging helpers like `logApiRequest`, `logChatCompression`, and `makeSlashCommandEvent`. It also surfaces SDK lifecycle helpers (`initializeTelemetry`, `shutdownTelemetry`) and the `QwenLogger`, making this the single barrel import for telemetry clients.",
                    "tags": [
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/index.ts",
                            "sha256": "48bf1f5336ab94a0fbdd766dcd9b159e1b5744a1dfbed3b1fe4de4816e050a2a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-telemetry-test-sdk-lifecycle",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-test-sdk-lifecycle",
                    "name": "Telemetry SDK test verifies NodeSDK init and shutdown",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/telemetry.test.ts` stubs `NodeSDK` and `Config` to ensure `initializeTelemetry` spins up the OTEL SDK when telemetry is enabled and that `shutdownTelemetry` awaits `sdk.shutdown()` and clears the singleton. It guards against regressions where CLI sessions leak collectors or skip initialisation despite enabled settings.",
                    "tags": [
                        "telemetry",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/telemetry.test.ts",
                            "sha256": "151164e2dcf9ee52093bc9c4b51d8d8d3be0497bd0627310507272952c1e89bf"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-telemetry-test-clearcut-logger",
                    "sectionId": "section-telemetry",
                    "slug": "telemetry-test-clearcut-logger",
                    "name": "ClearcutLogger tests requeue batches and enforce metadata",
                    "description": "`projects/qwen-code/packages/core/src/telemetry/clearcut-logger/clearcut-logger.test.ts` boots an MSW server to confirm usage stats toggle instantiation, every log entry carries commit, install, and account metadata, failed uploads are re-queued, and chat compression/tool events emit the right enum names. It also verifies the exponential backoff hint from Clearcut responses is honoured, so production logging remains lossless.",
                    "tags": [
                        "telemetry",
                        "testing",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/clearcut-logger/clearcut-logger.test.ts",
                            "sha256": "e0f5ff3b4516e10d767858101d7be97d27f61d837cd92aac7ad86abe6065225a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                }
            ]
        },
        {
            "id": "section-build-pipeline",
            "slug": "build-pipeline",
            "title": "Build & Release",
            "entries": [
                {
                    "id": "aspect-build-script",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script",
                    "name": "scripts/build.js orchestrates workspace builds and optional sandbox image",
                    "description": "`projects/qwen-code/scripts/build.js` reinstalls dependencies if `node_modules` is missing, runs `npm run generate` plus `npm run build --workspaces`, and invokes `sandbox_command.js` to detect docker/podman. When `BUILD_SANDBOX` is set it calls `build_sandbox.js -s` so CI can package the container image after local builds complete.",
                    "tags": [
                        "build-system"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/build.js",
                            "sha256": "70524f121d754e0d9db49267597c74a0ac71c88f09ccb0dedb056c354a7c11fb"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.63
                },
                {
                    "id": "aspect-build-sandbox",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-sandbox",
                    "name": "build_sandbox.js packs workspaces and builds docker/podman images",
                    "description": "`projects/qwen-code/scripts/build_sandbox.js` parses CLI flags to skip rebuilds or override Dockerfiles, packs `@qwen-code/qwen-code` and `@qwen-code/qwen-code-core` into `.tgz` artifacts, and builds the sandbox image with docker or podman (setting auth files on Windows). It writes the resulting tag to `--output-file` for CI and respects `GEMINI_SANDBOX_IMAGE_TAG` overrides, keeping CLI and core tarballs in sync with the image.",
                    "tags": [
                        "build-system",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/build_sandbox.js",
                            "sha256": "a6f90927ea2de46f9e1a959627b34dc1828ad1219e44cf2c8313e94c5f4726dd"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.7
                },
                {
                    "id": "aspect-build-prepare-package",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-prepare-package",
                    "name": "prepare-package copies shared artifacts into workspace packages",
                    "description": "`projects/qwen-code/scripts/prepare-package.js` copies root `README.md`, `LICENSE`, and `.npmrc` into the `core` and `cli` workspace folders prior to publishing, ensuring both packages ship consistent legal docs and npm config. It fails fast if a package directory is missing, catching misconfigured release steps before publish.",
                    "tags": [
                        "build-system",
                        "packaging"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/prepare-package.js",
                            "sha256": "5e3027800cc4b0b5ac7a770315f2f80a6b627d7636728033e4e451cb7f1f1f36"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.55
                },
                {
                    "id": "aspect-build-start-script",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-start-script",
                    "name": "scripts/start.js launches CLI bundle with env guardrails",
                    "description": "`projects/qwen-code/scripts/start.js` ensures the bundle exists, runs `node bundle/gemini.js` with inherited stdio, and prints friendly guidance when the bundle is missing, pointing users to `npm run build`. It centralizes entrypoint logic for local development and packaging.",
                    "tags": [
                        "build-system"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/start.js",
                            "sha256": "ad4ac578600551dad148478d75c8d5c63fdc1713c491ffecb836351f09d6469c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.5
                },
                {
                    "id": "aspect-build-dockerfile",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-dockerfile",
                    "name": "Dockerfile builds sandbox image with workspace tarballs",
                    "description": "`projects/qwen-code/Dockerfile` starts from `node:20-bookworm`, installs build essentials plus python3, copies CLI and core tarballs produced by `build_sandbox.js`, and installs the CLI globally under `/usr/local/bin/qwen`. It sets up an unprivileged `sandbox` user, preinstalls ripgrep/node-pty deps, and configures entrypoints used by the container sandbox runtime.",
                    "tags": [
                        "build-system",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/Dockerfile",
                            "sha256": "145d0a47befb3871ae876b375e268986a8a9524c1a0917242b3be9ab1d239f6c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.67
                },
                {
                    "id": "aspect-build-makefile-workflows",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-makefile-workflows",
                    "name": "Makefile fronts npm scripts for common CLI workflows",
                    "description": "`projects/qwen-code/Makefile` maps developer-friendly `make` targets (`install`, `build`, `build-all`, `test`, `lint`, `format`, `preflight`, `clean`, `start`, `debug`) directly onto the corresponding npm scripts, so contributors can run the full build, lint, and launch sequence without memorising npm incantations. It also exposes `run-npx` to smoke-test the published package and `create-alias` to call `scripts/create_alias.sh`, providing a single entry point for local CLI setup across shells.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/Makefile",
                            "sha256": "87e3827e7c1310cec92aa36c2a302b9f592f74f85ae77a01c9c0b40a4fe63f81"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                },
                {
                    "id": "aspect-build-docker-multistage",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-docker-multistage",
                    "name": "Dockerfile builds and packages CLI/core workspaces into sandbox image",
                    "description": "`projects/qwen-code/Dockerfile` performs a Node 20 slim multi-stage build: the builder stage installs toolchains, runs `npm ci`, builds all workspaces, and `npm pack`s both `@qwen-code/qwen-code` and `@qwen-code/qwen-code-core` into `dist`. The runtime stage installs the sandbox toolchain (ripgrep, socat, gh, etc.), copies the packed tarballs, installs them globally, and injects `CLI_VERSION` via build arg before defaulting to `qwen`, giving CI a reproducible sandbox binary that matches the packaged CLI.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/Dockerfile",
                            "sha256": "145d0a47befb3871ae876b375e268986a8a9524c1a0917242b3be9ab1d239f6c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-build-script-build-js",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-build-js",
                    "name": "`scripts/build.js` enforces install, generate, and workspace builds",
                    "description": "`projects/qwen-code/scripts/build.js` ensures `node_modules` exists (running `npm install` if clean), executes `npm run generate` followed by `npm run build --workspaces`, and then probes `scripts/sandbox_command.js` to decide if container sandbox artifacts should be built. When `BUILD_SANDBOX` toggles are set it shells into `build_sandbox.js -s`, letting CI reuse one entrypoint for both CLI and sandbox artifacts.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/build.js",
                            "sha256": "70524f121d754e0d9db49267597c74a0ac71c88f09ccb0dedb056c354a7c11fb"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-build-script-build-sandbox",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-build-sandbox",
                    "name": "`build_sandbox.js` packages workspaces and builds container images",
                    "description": "`projects/qwen-code/scripts/build_sandbox.js` resolves the active sandbox command (docker/podman/sandbox-exec) via `sandbox_command.js`, repacks both CLI and core workspaces with `npm pack`, chmods the tarballs, then shells out to build the base sandbox image (and optional custom Dockerfile/image) while respecting `GEMINI_SANDBOX_IMAGE_TAG`, `BUILD_SANDBOX_FLAGS`, and CI output file hints. It safeguards Windows podman auth by creating a temporary auth file and cleans it up, giving pipelines deterministic image pushes.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/build_sandbox.js",
                            "sha256": "a6f90927ea2de46f9e1a959627b34dc1828ad1219e44cf2c8313e94c5f4726dd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-build-script-build-package",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-build-package",
                    "name": "`build_package.js` drives per-package TypeScript builds and assets",
                    "description": "`projects/qwen-code/scripts/build_package.js` is invoked from individual workspace roots; it asserts the cwd contains `packages`, runs `tsc --build`, calls `scripts/copy_files.js` to mirror markdown/JSON artifacts into `dist/src`, and finally touches `dist/.last_build` so `check-build-status.js` can validate freshness. This ensures each published workspace includes documentation and metadata alongside compiled JS.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/build_package.js",
                            "sha256": "588f5e5b5c68b4c978d5e94aef841918832800cb9b8cab9cf01265665ba4b0d7"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-build-script-prepare-package",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-prepare-package",
                    "name": "`prepare-package.js` copies shared top-level artifacts into workspaces",
                    "description": "`projects/qwen-code/scripts/prepare-package.js` resolves the repo root, then copies `README.md`, `LICENSE`, and `.npmrc` into `packages/core` and `packages/cli` so the published packages carry legal text and docs. It fails fast if a package directory is missing, letting release pipelines verify packaging prerequisites before invoking `npm pack`.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/prepare-package.js",
                            "sha256": "5e3027800cc4b0b5ac7a770315f2f80a6b627d7636728033e4e451cb7f1f1f36"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.51
                },
                {
                    "id": "aspect-build-script-check-build-status",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-check-build-status",
                    "name": "`check-build-status.js` warns when CLI dist lags source edits",
                    "description": "`projects/qwen-code/scripts/check-build-status.js` scans `packages/cli/src`, `package.json`, and `tsconfig.json`, comparing mtimes against `dist/.last_build`. When newer sources exist it writes human-readable warnings to the OS temp file `qwen-code-warnings.txt` and exits 0 so the CLI can surface outdated-build prompts; otherwise it removes stale warnings. Missing build artifacts yields a targeted message instructing `npm run build`.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/check-build-status.js",
                            "sha256": "1921ef983be474947ed90ea56a0c5576f75c57ce1366d28e8ef89862c909542e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-build-script-start-js",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-start-js",
                    "name": "`scripts/start.js` bootstraps local CLI with build checks and debug flow",
                    "description": "`projects/qwen-code/scripts/start.js` runs `check-build-status.js`, fetches sandbox command metadata, adds `--inspect-brk` variants when `DEBUG` is set (handling host vs in-sandbox debugging), and forwards `CLI_VERSION` plus env overrides before spawning `node packages/cli ...`. It sets `GEMINI_CLI_NO_RELAUNCH` when debugging to prevent double attaches and surfaces the child exit code, making it the default Dev entrypoint.",
                    "tags": [
                        "build-system",
                        "automation",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/start.js",
                            "sha256": "ad4ac578600551dad148478d75c8d5c63fdc1713c491ffecb836351f09d6469c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-build-script-generate-git-info",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-generate-git-info",
                    "name": "`generate-git-commit-info.js` emits version metadata for CLI and core",
                    "description": "`projects/qwen-code/scripts/generate-git-commit-info.js` ensures `packages/cli/src/generated` and `packages/core/src/generated` exist, then captures the short git hash and package version (via `read-package-up`) into `git-commit.ts` modules shared by both packages. If git metadata is unavailable it falls back to `N/A`, guaranteeing builds embed traceability without manual edits.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/generate-git-commit-info.js",
                            "sha256": "0a25aad15ff2b569d047df9329af2ae8899b5358455692c95785042649ca9d34"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-build-script-get-release-version",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-script-get-release-version",
                    "name": "`get-release-version.js` calculates release tags for stable, preview, and nightly",
                    "description": "`projects/qwen-code/scripts/get-release-version.js` derives npm/gh release metadata: it parses `package.json` for current version, computes the next nightly counter, and uses `git tag --list` plus `gh release list` to determine the prior stable tag. Depending on `IS_NIGHTLY`, `IS_PREVIEW`, or `MANUAL_VERSION`, it validates the resulting semver (enforcing `v` prefix, no build metadata) and returns the release tag, version, npm tag, and comparison base for pipelines.",
                    "tags": [
                        "build-system",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/get-release-version.js",
                            "sha256": "748f399c68191cb9a5847461b162585ebdf5a27fbd49fd1682b43205ec07806a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.59
                },
                {
                    "id": "aspect-build-esbuild-cli-bundle",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-esbuild-cli-bundle",
                    "name": "Esbuild config bundles CLI and injects CLI_VERSION",
                    "description": "`projects/qwen-code/esbuild.config.js` bundles `packages/cli/index.ts` to `bundle/gemini.js`, inlines a Node-compatible `__dirname`, aliases the CI detection patch, and defines `process.env.CLI_VERSION` from package.json. It leaves native PTY modules external so postinstall scripts can download per-platform binaries.",
                    "tags": [
                        "build-system"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/esbuild.config.js",
                            "sha256": "d5fb4e97205fc601aba207eb5eed9899f13d1fcadd5e0bdc46cfcb708cfad663"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-build-clean-script",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-clean-script",
                    "name": "`clean.js` removes workspace artifacts before fresh installs",
                    "description": "`projects/qwen-code/scripts/clean.js` deletes root node_modules, bundle output, generated sources, all workspace `dist/` directories discovered via glob, and stale `.vsix` files. The script powers `npm run clean`/`make clean`, ensuring release builds start from an empty tree.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/clean.js",
                            "sha256": "c8d2b1ce70fad586716aa7995632166d1e5745c1efd727835ea409d4482d1995"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-build-create-alias-script",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-create-alias-script",
                    "name": "`create_alias.sh` wires qwen shortcut into shell rc",
                    "description": "`projects/qwen-code/scripts/create_alias.sh` resolves the repo root, constructs an alias that runs `node scripts/start.js`, detects bash vs zsh rc files, and appends the alias after user confirmation (skipping if already present). It gives local contributors a persistent `qwen` command without globally installing the package.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/create_alias.sh",
                            "sha256": "0e63d8cb7f6fc1dcaa62c31b5ebc73f2b044a66ca1758f8c675f4f15cebe433e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "id": "aspect-build-aoneci-ci-workflow",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-aoneci-ci-workflow",
                    "name": "AOne CI workflow gates build, lint, and tests before merge",
                    "description": "`projects/qwen-code/.aoneci/workflows/ci.yml` defines a two-job pipeline: `build` installs dependencies, runs formatter, lint, build, and type-check, then uploads workspace dist artifacts; `test` downloads those artifacts, runs `npm run test:ci`, and uploads coverage. It keeps branches `main`, `dev`, and `integration` green before packaging.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/.aoneci/workflows/ci.yml",
                            "sha256": "b2d9e2dcc70bcd6a3469397b26fb36829257b1adbb22e891f8d8d842260b950b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-build-gcp-release-docker",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-gcp-release-docker",
                    "name": "Cloud Build recipe builds and publishes sandbox images",
                    "description": "`projects/qwen-code/.gcp/release-docker.yml` runs inside a custom builder image to install dependencies, authenticate to Artifact Registry, build workspaces, compute image tags from release refs, and execute `npm run build:sandbox` with injected container tool. It writes the final tag to disk and pushes the sandbox image, powering nightly and manual container releases.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/.gcp/release-docker.yml",
                            "sha256": "b87040737ed305c2235eb0ced5916ca6837be8f5f60e25635db512ef6c003c4b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.65
                },
                {
                    "id": "aspect-build-vscode-companion-esbuild",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-vscode-companion-esbuild",
                    "name": "VSCode companion esbuild bundler toggles watch and production flags",
                    "description": "`packages/vscode-ide-companion/esbuild.js` drives the extension build with `esbuild.context`, wiring a problem-matcher plugin so `--watch` emits start/finish markers and surfaces file/line diagnostics. It bundles `src/extension.ts` to `dist/extension.cjs`, honours `--production` by turning on minify and disabling sourcemaps, keeps `vscode` external, and falls back to a one-shot rebuild + dispose when watch mode is absent.",
                    "tags": [
                        "build-system",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/esbuild.js",
                            "sha256": "c12669febbb2b8ec17031d02935e1163d0c6be91b8349dee9781d8bed48bd3e6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-build-vscode-companion-notices",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-vscode-companion-notices",
                    "name": "generate-notices.js harvests dependency licenses for the VSCode companion",
                    "description": "`packages/vscode-ide-companion/scripts/generate-notices.js` walks the companion's transitive deps via `package-lock.json`, falls back between workspace and package-local `node_modules`, and reads each LICENSE file (or logs warnings) before writing an aggregated `NOTICES.txt`. It records repository URLs when available, ensuring published VSIX artifacts ship the required third-party attributions.",
                    "tags": [
                        "automation",
                        "build-system"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/scripts/generate-notices.js",
                            "sha256": "af12f023dd0223688f62f079ead30023a1626f614c41c05cab6f2b295544c27f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-build-release-version-tests",
                    "sectionId": "section-build-pipeline",
                    "slug": "build-release-version-tests",
                    "name": "Release version tests lock down nightly, manual, and prerelease tagging",
                    "description": "`scripts/tests/get-release-version.test.js` mocks `child_process.execSync`, `fs.readFileSync`, and env flags to assert that `getReleaseVersion()` bumps nightly builds, preserves prerelease tags, rejects invalid semver (missing `v` prefix, build metadata, underspecified versions), and surfaces the previous GH release. The suite guards automation against regressions before CI publishes npm or GitHub releases.",
                    "tags": [
                        "build-system",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/tests/get-release-version.test.js",
                            "sha256": "d68ae9c50fc65e0b1178137609056cf1cbf394ca486b8b7a188b6b1823a593ef"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                }
            ]
        },
        {
            "id": "section-linting",
            "slug": "linting",
            "title": "Linting & Static Analysis",
            "entries": [
                {
                    "id": "aspect-linting-flat-config",
                    "sectionId": "section-linting",
                    "slug": "linting-flat-config",
                    "name": "Flat ESLint config layers TypeScript, React, Vitest, and scripts",
                    "description": "`projects/qwen-code/eslint.config.js` composes the repository flat config: it layers `@eslint/js`, `typescript-eslint` presets, React hook/runtime recommendations, and Prettier while adding Node/ES2021 globals. Targeted overrides enable `eslint-plugin-import` to apply `no-relative-packages`/`no-internal-modules` across `packages/*/src`, register the Vitest plugin for test files, and relax `no-restricted-syntax` for Node build scripts and the VSCode companion\u2019s legacy bundler. The ignore list keeps `dist/`, bundle outputs, and generated artifacts out of lint runs, so the config powers `npm run lint*` in CI without flagging build products.",
                    "tags": [
                        "linting"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/eslint.config.js",
                            "sha256": "8fa5c80874e520b6a4e9c9fe21db93b0aff9a69303feb1660e393d25308e986e"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.55
                },
                {
                    "id": "aspect-linting-no-relative-cross-package-imports",
                    "sectionId": "section-linting",
                    "slug": "linting-no-relative-cross-package-imports",
                    "name": "Custom rule blocks cross-package relative imports",
                    "description": "`projects/qwen-code/eslint-rules/no-relative-cross-package-imports.js` implements an ESLint rule that walks up from both the current file and the import target to locate their nearest `package.json` under the configured monorepo root. When a relative path crosses into a different package it reports an error and auto-fixes the specifier to the target package name; if no package is found it surfaces a dedicated message so stray folders can be cleaned up. The helper throttles lint-on-text invocations and skips files outside workspaces, giving teams a reusable guardrail against bypassing published package entry points.",
                    "tags": [
                        "linting"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/eslint-rules/no-relative-cross-package-imports.js",
                            "sha256": "d3acd1183d5906979930a5e3ea4e2251e0adde1ddbf01301b06bd0716064150e"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.42
                },
                {
                    "id": "aspect-linting-npm-scripts",
                    "sectionId": "section-linting",
                    "slug": "linting-npm-scripts",
                    "name": "npm lint scripts gate warnings locally and in CI",
                    "description": "`projects/qwen-code/package.json` wires `npm run lint` to execute ESLint over the repo\u2019s TypeScript/TSX sources plus the integration-test harness, while `lint:fix` runs the same commands with `--fix` so contributors can auto-resolve style issues. `lint:ci` repeats the run with `--max-warnings 0`, ensuring the AOne workflow fails fast on new lint warnings. Keeping these scripts co-located with the flat config makes it easy to invoke consistent linting locally, in CI, and from the Makefile.",
                    "tags": [
                        "linting",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/package.json",
                            "sha256": "1c5eab421f3387054ca819540247ee7f5500e8a66b2ed0e833f657f618feacfd"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.45
                },
                {
                    "id": "aspect-linting-prettier-config",
                    "sectionId": "section-linting",
                    "slug": "linting-prettier-config",
                    "name": "Prettier config centralizes 80-column formatting defaults",
                    "description": "`projects/qwen-code/.prettierrc.json` pins Prettier to 80-character `printWidth`, two-space `tabWidth`, `singleQuote` strings, required semicolons, and `trailingComma: \"all\"` so format runs keep CLI, core, and extension sources consistent. `projects/qwen-code/.prettierignore` excludes bundles, coverage, dist artifacts, VSIX packages, generated folders, secrets, and `node_modules`, preventing automated formatting from touching build outputs or cached credentials.",
                    "tags": [
                        "linting"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/.prettierrc.json",
                            "sha256": "4c2e6f41d934b1e24d03dd729838e1a5b300027e2ede5b94d83a76f5a141f945"
                        },
                        {
                            "path": "projects/qwen-code/.prettierignore",
                            "sha256": "79fbcb2729f8fd6e9817db9afe99004c196901e5ee949b19185cf999ea194f32"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.41
                },
                {
                    "id": "aspect-linting-yamllint-config",
                    "sectionId": "section-linting",
                    "slug": "linting-yamllint-config",
                    "name": "yamllint profile guards workflow anchors and quoting",
                    "description": "`projects/qwen-code/.yamllint.yml` enables yamllint rules that forbid duplicate anchors, enforce single-quoted scalars, cap empty lines, and require two-space indentation while allowing GitHub Actions `on` syntax through the `truthy` allowlist. The ignore block skips vendor-style directories so YAML linting stays focused on repo-owned workflows and manifests.",
                    "tags": [
                        "linting"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/.yamllint.yml",
                            "sha256": "f9defc9957330b2cd0136d5bb2e343a7c9eca4fbe6938c64a3b8eb682dbb11db"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.36
                },
                {
                    "id": "aspect-linting-vscode-eslint",
                    "sectionId": "section-linting",
                    "slug": "linting-vscode-eslint-config",
                    "name": "VS Code companion ESLint preset enforces TypeScript hygiene",
                    "description": "`projects/qwen-code/packages/vscode-ide-companion/eslint.config.mjs` scopes linting to TypeScript files, loads `@typescript-eslint`'s parser/plugin, warns on import `naming-convention`, and turns on `curly`, `eqeqeq`, `no-throw-literal`, and `semi` so the extension keeps its command palette and MCP client code consistent without pulling in the monorepo flat config.",
                    "tags": [
                        "linting",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/eslint.config.mjs",
                            "sha256": "9cf66899e0f3270c14cf830928200e8ec666776333ff35b1b38d0782fd3f0e5b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.37
                }
            ]
        },
        {
            "id": "section-testing",
            "slug": "testing",
            "title": "Testing",
            "entries": [
                {
                    "id": "aspect-testing-integration-config",
                    "sectionId": "section-testing",
                    "slug": "testing-integration-config",
                    "name": "Integration vitest config spins up sandbox-aware suites",
                    "description": "`projects/qwen-code/integration-tests/vitest.config.ts` configures Vitest to run under Node, wires `globalSetup.ts` to provision tmp workspaces and environment variables, and tags slow suites for a separate terminal benchmark config. It respects `GEMINI_SANDBOX` env to reuse the same tests across host, docker, and podman modes.",
                    "tags": [
                        "testing",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/vitest.config.ts",
                            "sha256": "6e19273b2a4eda89e62bb5b040a0f23c6deb8a9d6d2f649fe1bee05135354cb5"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.58
                },
                {
                    "id": "aspect-testing-global-setup",
                    "sectionId": "section-testing",
                    "slug": "testing-global-setup",
                    "name": "globalSetup seeds isolated project fixtures and cleans after runs",
                    "description": "`projects/qwen-code/integration-tests/globalSetup.ts` generates per-test temp dirs, copies fixture projects, installs mock MCP servers, and registers cleanup hooks so each integration case runs in a fresh workspace. Helpers in `test-helper.ts` expose path resolvers, sandbox toggles, and CLI spawn wrappers used throughout the Vitest suites.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/globalSetup.ts",
                            "sha256": "d60a4cf139779561ed92c50b549e814c99222ee7f804fe50016051ce61b6a711"
                        },
                        {
                            "path": "projects/qwen-code/integration-tests/test-helper.ts",
                            "sha256": "383018e1097da79d63bec3ed20ab9c4f7675352c1e1373316708bbc10959d4ed"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.6
                },
                {
                    "id": "aspect-testing-terminal-bench",
                    "sectionId": "section-testing",
                    "slug": "testing-terminal-bench",
                    "name": "Terminal bench suite validates prompt latency across providers",
                    "description": "`projects/qwen-code/integration-tests/terminal-bench/terminal-bench.test.ts` measures response latency with fixture prompts, comparing oracle vs Qwen runs and honoring `VERBOSE`/`KEEP_OUTPUT` flags for manual inspection. It reuses terminal bench config to run under multiple providers, guarding regressions in CLI rendering speed.",
                    "tags": [
                        "testing",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/terminal-bench.test.ts",
                            "sha256": "3b0914185eaf295c9ff5b5e420b6ca5302869176a3c49ef9e2db4981afa2fa92"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.52
                },
                {
                    "id": "aspect-testing-edit-tool",
                    "sectionId": "section-testing",
                    "slug": "testing-edit-tool",
                    "name": "Edit integration checks tool selection and file write",
                    "description": "`integration-tests/edit.test.ts` seeds a fixture file, asks for an edit, and asserts that either the `edit` tool fires or debug info is printed, then confirms the file contents were rewritten. It validates the end-to-end loop from prompt \u2192 tool call \u2192 local FS mutation.",
                    "tags": [
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/edit.test.ts",
                            "sha256": "dc251d16af9f5a800e697e4a94bdb72b96b143ece7583dd2fd5fa37f82639286"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.45
                },
                {
                    "id": "aspect-testing-file-system",
                    "sectionId": "section-testing",
                    "slug": "testing-file-system",
                    "name": "File system suite covers read and write flows",
                    "description": "`integration-tests/file-system.test.ts` drives the agent to read then rewrite a file, accepting either `write_file` or `edit` invocations and inspecting tool logs when expectations fail. It ensures generated output reflects file mutations so regressions in tool wiring are caught.",
                    "tags": [
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/file-system.test.ts",
                            "sha256": "7e430bfa9b2ef24c69f89e1a49f8e92c5ec6dad81c6990b9861d12d27fb94970"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.44
                },
                {
                    "id": "aspect-testing-list-directory",
                    "sectionId": "section-testing",
                    "slug": "testing-list-directory",
                    "name": "Directory listing test waits for sandbox sync",
                    "description": "`integration-tests/list_directory.test.ts` creates files, polls until they appear in container mounts, then demands the `list_directory` tool and output containing both names. It guards against race conditions introduced by slower sandbox filesystems.",
                    "tags": [
                        "testing",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/list_directory.test.ts",
                            "sha256": "5c5b57f45816bc6d69e0bdcecb5d98554f3a127d34356263e8343cf1e7af998e"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.43
                },
                {
                    "id": "aspect-testing-read-many-files",
                    "sectionId": "section-testing",
                    "slug": "testing-read-many-files",
                    "name": "Read-many regression test documents fallback behaviour",
                    "description": "`integration-tests/read_many_files.test.ts` (currently skipped) expects either a single `read_many_files` call or multiple `read_file` fallbacks and verifies both file contents appear. The skip documents known sandbox flakiness while keeping expected behaviour encoded for future fixes.",
                    "tags": [
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/read_many_files.test.ts",
                            "sha256": "770ffbfa5a835e1e82fc7a997488f5ecd4c2d20d826b64b8ae92a4a3887a3ae2"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.32
                },
                {
                    "id": "aspect-testing-run-shell",
                    "sectionId": "section-testing",
                    "slug": "testing-run-shell",
                    "name": "Shell command tests cover prompt and stdin entrypoints",
                    "description": "`integration-tests/run_shell_command.test.ts` runs `echo` requests via prompt and stdin, waiting for `run_shell_command` and asserting output plus exit codes. It ensures the CLI streams command results regardless of how users supply prompts.",
                    "tags": [
                        "testing",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/run_shell_command.test.ts",
                            "sha256": "8f3e1c4c7f970a8542d31900250c9cea6a80f67310cda4133c7e5f8ae1e5cc64"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.47
                },
                {
                    "id": "aspect-testing-save-memory",
                    "sectionId": "section-testing",
                    "slug": "testing-save-memory",
                    "name": "Save-memory test verifies persisted context recall",
                    "description": "`integration-tests/save_memory.test.ts` prompts the agent to remember a fact, expects a `save_memory` invocation, and then checks the response includes the saved value. It exercises the memory tool wiring and replay surfaced to the chat loop.",
                    "tags": [
                        "testing",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/save_memory.test.ts",
                            "sha256": "7b86fee761756b97d5affb9e49b2e4c39cbcd81ccc4cd5755eddba1dcedd8a4b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.46
                },
                {
                    "id": "aspect-testing-shell-service",
                    "sectionId": "section-testing",
                    "slug": "testing-shell-service",
                    "name": "ShellExecutionService suite covers aborts and env propagation",
                    "description": "`integration-tests/shell-service.test.ts` invokes `ShellExecutionService.execute` directly across platforms, checking simple commands, OS-specific listings, abort handling, and environment variable inheritance. It guards the lower-level service that powers the shell tool and CLI runner.",
                    "tags": [
                        "testing",
                        "sandboxing",
                        "core-services"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/shell-service.test.ts",
                            "sha256": "6d46f22d79f7581cf4edbdf3b3cc2c6d582c949ccef381e3b2524c810db3ffe7"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.55
                },
                {
                    "id": "aspect-testing-simple-mcp",
                    "sectionId": "section-testing",
                    "slug": "testing-simple-mcp-server",
                    "name": "Simple MCP server test validates tool registration",
                    "description": "`integration-tests/simple-mcp-server.test.ts` writes an inline MCP JSON-RPC server that exposes an `add` tool, configures it via settings, and asserts the agent calls it. The test proves MCP discovery works without external binaries, even inside Docker.",
                    "tags": [
                        "testing",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/simple-mcp-server.test.ts",
                            "sha256": "3bc1885fce6606edc91dfe346ad3c6b55cb9fded0114f6f8abe6b384eb6a410c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.5
                },
                {
                    "id": "aspect-testing-mcp-cyclic",
                    "sectionId": "section-testing",
                    "slug": "testing-mcp-cyclic-schema",
                    "name": "Cyclic schema test asserts graceful tool disabling",
                    "description": "`integration-tests/mcp_server_cyclic_schema.test.ts` hosts an MCP server whose tool schema references itself, then checks the CLI logs the skip message produced by `isSchemaDepthError`. It ensures bad third-party schemas don't crash the agent loop.",
                    "tags": [
                        "testing",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/mcp_server_cyclic_schema.test.ts",
                            "sha256": "91028b955586839ae6537a644774f0e200add1affd9a5032976681e831b96e2b"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.41
                },
                {
                    "id": "aspect-testing-todo-write",
                    "sectionId": "section-testing",
                    "slug": "testing-todo-write",
                    "name": "Todo tool test checks creation and updates",
                    "description": "`integration-tests/todo_write.test.ts` first creates a todo list and then updates statuses, deserialising tool args to confirm IDs, content, and status transitions match expectations. It validates the declarative todo tool\u2019s schema and statefulness.",
                    "tags": [
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/todo_write.test.ts",
                            "sha256": "0075147ec73cad9c3a4b1b59f8f34349feb8d2fdec204db82add2fb0263a026c"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.45
                },
                {
                    "id": "aspect-testing-web-search",
                    "sectionId": "section-testing",
                    "slug": "testing-web-search",
                    "name": "Web search test tolerates network flakiness",
                    "description": "`integration-tests/web_search.test.ts` runs only when `TAVILY_API_KEY` is present, catching tool failures due to network errors or missing credentials and skipping gracefully. When successful it asserts the `web_search` tool fires and the response mentions the query context.",
                    "tags": [
                        "testing",
                        "web"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/web_search.test.ts",
                            "sha256": "9d2259a910c4c44c8ab5240ed4a25ddd23eec9da73a53e2599df8bfe11fbed37"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.38
                },
                {
                    "id": "aspect-testing-write-file",
                    "sectionId": "section-testing",
                    "slug": "testing-write-file",
                    "name": "Write-file test verifies tool args and output",
                    "description": "`integration-tests/write_file.test.ts` requests a dad joke in `dad.txt`, asserts `write_file` fires, and dumps tool names when expectations fail. It confirms the agent writes non-empty content and surfaces the created filename back to the user.",
                    "tags": [
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/write_file.test.ts",
                            "sha256": "3c8e5e3f02caf03a846b4813e7fa6202c4c5913bc6d1d2076960a77294ac8bc6"
                        }
                    ],
                    "lastUpdated": "2025-10-18",
                    "importance": 0.44
                },
                {
                    "id": "aspect-testing-root-vitest-projects",
                    "sectionId": "section-testing",
                    "slug": "testing-root-vitest-projects",
                    "name": "Root Vitest config fans out to workspace projects",
                    "description": "`projects/qwen-code/vitest.config.ts` defines a multi-project Vitest run that points at the CLI, core, VS Code companion, integration tests, and scripts packages. CI invokes it to execute each workspace\u2019s own config under a single command, keeping test orchestration consistent across environments.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/vitest.config.ts",
                            "sha256": "917ae1332a38495c7fd9b78a7355ee80da1cef3437f41b433053cd34e6e62d55"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-testing-core-vitest-config",
                    "sectionId": "section-testing",
                    "slug": "testing-core-vitest-config",
                    "name": "Core Vitest config enables coverage and JUnit exports",
                    "description": "`projects/qwen-code/packages/core/vitest.config.ts` adds JUnit reporters, silences console noise, wires in `./test-setup.ts`, and emits multiple coverage formats (text, HTML, JSON, Cobertura, LCOV). This lets CI publish coverage artifacts while local runs still get readable summaries.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/vitest.config.ts",
                            "sha256": "da26ca6b56857ba7865693e2e2314534b40ad24403addea6ec854ccbd7e6bebf"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-testing-core-test-setup",
                    "sectionId": "section-testing",
                    "slug": "testing-core-test-setup",
                    "name": "Core test setup normalizes NO_COLOR and File globals",
                    "description": "`projects/qwen-code/packages/core/test-setup.ts` deletes `NO_COLOR` for consistent theme snapshots, disables simulated 429 throttling via `setSimulate429(false)`, and polyfills the global `File` constructor that undici-based code expects. Without it, many Node tests would fail outside browsers.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/test-setup.ts",
                            "sha256": "a20ed8b35be62ef96f0ddb094d9c5d6884ff49923a016b19093098ef0e9763e8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-testing-scripts-vitest-config",
                    "sectionId": "section-testing",
                    "slug": "testing-scripts-vitest-config",
                    "name": "Scripts Vitest config targets Node utilities with coverage",
                    "description": "`projects/qwen-code/scripts/tests/vitest.config.ts` runs Vitest in a Node environment, scopes test discovery to `scripts/tests/**/*.test.js`, loads `test-setup.ts`, and enables V8 coverage reporting. It gives release automation scripts a small harness without polluting workspace configs.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/tests/vitest.config.ts",
                            "sha256": "927edfc9f52b9ae84e7c60d0102e79e505a3456cdea5ba6c095cd052b803a51a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-testing-scripts-test-setup",
                    "sectionId": "section-testing",
                    "slug": "testing-scripts-test-setup",
                    "name": "Scripts test setup mocks appendFileSync side effects",
                    "description": "`projects/qwen-code/scripts/tests/test-setup.ts` uses Vitest to mock `fs.appendFileSync`, preventing file system writes during script tests while re-exporting the rest of the real `fs` module. The lightweight harness lets versioning scripts be unit-tested safely.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/tests/test-setup.ts",
                            "sha256": "ae0fa0716d7880a4f585b7b794a52be1e24783197faf5184f1fb21e438071df6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.34
                },
                {
                    "id": "aspect-testing-make-fake-config",
                    "sectionId": "section-testing",
                    "slug": "testing-make-fake-config",
                    "name": "makeFakeConfig seeds deterministic Config for tests",
                    "description": "`src/test-utils/config.ts` exposes `DEFAULT_CONFIG_PARAMETERS` and `makeFakeConfig()`, instantiating Config with stable session IDs, disabled proxies, and overridable fields. Tests import it to bootstrap services without touching real credential stores.",
                    "tags": [
                        "testing",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/test-utils/config.ts",
                            "sha256": "885a2ebb98907aabd32cc9868b26f23e05a8ccfa6ecef3ff8cd2d8dafcda36b4"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-command-tests-help-docs",
                    "sectionId": "section-testing",
                    "slug": "cli-command-tests-help-docs",
                    "name": "Help/docs/about tests lock UI messaging and env detection",
                    "description": "`helpCommand.test.ts`, `docsCommand.test.ts`, and `aboutCommand.test.ts` verify that the help slash command injects a `MessageType.HELP` item, documentation launches respect sandbox heuristics before calling `open`, and the about command surfaces version, sandbox, auth, and IDE metadata sourced from mocked config and environment variables.",
                    "tags": [
                        "testing",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/helpCommand.test.ts",
                            "sha256": "998a11cbc1c815859c5f5f7b1d1e8c8699dc02d7c22324488b831f41dcab856d"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/docsCommand.test.ts",
                            "sha256": "5541af63022f1f3faa0f3646b35ab545d319b562e7c5949ea19e51c7cd501ec4"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/aboutCommand.test.ts",
                            "sha256": "bdfe02d897a456f2db12eb083a0a16309632e96aea18ace0036c3c358353aeb7"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.41
                },
                {
                    "id": "aspect-cli-command-tests-auth",
                    "sectionId": "section-testing",
                    "slug": "cli-command-tests-auth",
                    "name": "Auth and privacy dialog tests guard approval flows",
                    "description": "`authCommand.test.ts` and `privacyCommand.test.ts` assert the commands return dialog actions for switching auth providers and viewing privacy notices, while `approvalModeCommand.test.ts` exhaustively checks subcommands for session/user/project scopes, invalid inputs, and error propagation from `setApprovalMode`, ensuring telemetry-critical approval modes stay consistent.",
                    "tags": [
                        "testing",
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/authCommand.test.ts",
                            "sha256": "50a43edf14c18c9dc102a2767baa9dca8a796200b73937370ec1ea0485ad531e"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/privacyCommand.test.ts",
                            "sha256": "c12b96d7c6a51aabcc4e9321a1ecdfc6d3a8853e9ae39d2433909a76a3acc309"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/approvalModeCommand.test.ts",
                            "sha256": "58147bdd6b8787d961654368f3de2aa65068fda7d002fd5779d0bb28f17d88de"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-command-tests-memory-tools",
                    "sectionId": "section-testing",
                    "slug": "cli-command-tests-memory-tools",
                    "name": "Memory/tools/stats tests simulate registry and telemetry wiring",
                    "description": "`memoryCommand.test.ts` mocks `SubagentManager` helpers to cover show/add/refresh branches, `toolsCommand.test.ts` exercises registry absence, empty tool lists, and description toggling, and `statsCommand.test.ts` fakes timers to ensure session, model, and tool stats payloads reach the Ink UI with the right message types.",
                    "tags": [
                        "testing",
                        "cli-commands",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/memoryCommand.test.ts",
                            "sha256": "04ab151f8a0af83f1132f4eb74006a80d51a75741cf6b5aed7ba93cc2ddb5445"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/toolsCommand.test.ts",
                            "sha256": "8ecfc9ce1771a477ef86a0d4331208a8fb3485259a405192bc7c10940457280d"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/statsCommand.test.ts",
                            "sha256": "a92d6fabdb93e04bb51befee6a3281c065e6839c1d310d2f4c5e89dde1a338e1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-cli-command-tests-model-theme",
                    "sectionId": "section-testing",
                    "slug": "cli-command-tests-model-theme",
                    "name": "Model/theme/compress tests cover dialogs and compression lifecycle",
                    "description": "`modelCommand.test.ts` stubs available models and auth modes to prove the command surfaces dialog or error responses, `themeCommand.test.ts` confirms the `/theme` command launches the theme picker, and `compressCommand.test.ts` checks pending-item guards, success pipelines, and error cleanup when invoking `GeminiClient.tryCompressChat`.",
                    "tags": [
                        "testing",
                        "cli-commands",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/modelCommand.test.ts",
                            "sha256": "d1ed1c7460c51ca842f59e46912f18e0b0ff1a1468bd8883cb7bbc6155c55ebc"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/themeCommand.test.ts",
                            "sha256": "1089f00fd2bc714a242757a6942fd82acb6d81ce5a89a757c32494b375b93d41"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/compressCommand.test.ts",
                            "sha256": "a42b38696979c043b14ff79b9feeb5f7eae6d8c3b44894d7bbbb4bbdc484cd46"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-testing-cli-config-flags",
                    "sectionId": "section-testing",
                    "slug": "testing-cli-config-flags",
                    "name": "CLI config tests enforce prompt and approval guardrails",
                    "description": "`projects/qwen-code/packages/cli/src/config/config.test.ts` drives `parseArguments` to reject conflicting flag pairs like `--prompt` with `--prompt-interactive` or `--yolo` with `--approval-mode`, while alias cases continue to pass. It then asserts `loadCliConfig` lets CLI flags override settings and environment defaults for memory usage, proxies, and telemetry target/endpoint/log-prompts so interactive runs always start with the requested approval posture and network wiring.",
                    "tags": [
                        "testing",
                        "cli-config",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/config.test.ts",
                            "sha256": "1be5dc7d02f8e1c387b96ebcd3143e6da1236bc4e495dc149d1a52a54256e1cd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-testing-cli-config-integration-defaults",
                    "sectionId": "section-testing",
                    "slug": "testing-cli-config-integration-defaults",
                    "name": "Config integration tests keep file filtering defaults resilient",
                    "description": "`projects/qwen-code/packages/cli/src/config/config.integration.test.ts` builds `Config` instances with empty, partial, CI, and security-focused inputs to prove file-filtering options fall back to the shipped defaults unless callers override them. Using MSW, it also exercises telemetry POSTs and confirms optional sections can be omitted without breaking constructor invariants, giving confidence that workspace JSON migrations keep runtime behaviour stable.",
                    "tags": [
                        "testing",
                        "cli-config",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/config.integration.test.ts",
                            "sha256": "03bae0ce9795e172b7585d7a351275cf78da6df4ebabd7f0b9c62ed78cdf6db6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-testing-cli-settings-layering",
                    "sectionId": "section-testing",
                    "slug": "testing-cli-settings-layering",
                    "name": "Settings tests lock system/user/workspace merging and migrations",
                    "description": "`projects/qwen-code/packages/cli/src/config/settings.test.ts` mocks `fs`, `os`, and `strip-json-comments` to verify `loadSettings` materialises missing files, merges system, user, and workspace scopes, copes with malformed JSON via error reporting, and persists writes back through `setValue`. It also walks dozens of `migrateSettingsToV1` scenarios so newer schema fields downgrade cleanly to the legacy layout without losing data.",
                    "tags": [
                        "testing",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/settings.test.ts",
                            "sha256": "5e4d8783cfc314b33217366dafcc1a004ca0128846b1b916f6f3db8fe438b7fd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-testing-cli-settings-schema",
                    "sectionId": "section-testing",
                    "slug": "testing-cli-settings-schema",
                    "name": "Settings schema test keeps catalog coverage and defaults intact",
                    "description": "`projects/qwen-code/packages/cli/src/config/settingsSchema.test.ts` asserts every expected top-level setting, nested property, and category exists in `SETTINGS_SCHEMA`, and that boolean defaults remain either explicit booleans or undefined. The snapshot-style checks catch regressions when adding accessibility, checkpointing, or file-filtering knobs so the settings UI never ships with missing labels or categories.",
                    "tags": [
                        "testing",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/settingsSchema.test.ts",
                            "sha256": "8b37aa34e6bbca8e0c07730b233ce3791eaad4d3f1b5ea64d304806e9ff20e89"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.44
                },
                {
                    "id": "aspect-testing-cli-trusted-folders",
                    "sectionId": "section-testing",
                    "slug": "testing-cli-trusted-folders",
                    "name": "Trusted folders tests guard JSON errors and approval lookups",
                    "description": "`projects/qwen-code/packages/cli/src/config/trustedFolders.test.ts` seeds homedir and filesystem mocks to ensure absent configs yield empty rule sets, malformed JSON is reported without crashing, and `setValue` writes back the user file with pretty formatting. It also verifies `isWorkspaceTrusted` respects folder trust rules and workspace settings toggles so sandbox approvals never run on untrusted paths.",
                    "tags": [
                        "testing",
                        "cli-config",
                        "security"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/trustedFolders.test.ts",
                            "sha256": "0f9c307be8def570351a505f7deb813887404f849b59a9198029d947da18642e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-testing-cli-auth-methods",
                    "sectionId": "section-testing",
                    "slug": "testing-cli-auth-methods",
                    "name": "Auth validation tests demand required environment variables",
                    "description": "`projects/qwen-code/packages/cli/src/config/auth.test.ts` covers every `AuthType`, confirming Google login and Cloud Shell skip checks, Gemini authentication requires `GEMINI_API_KEY`, and Vertex AI succeeds when either project/location or API key env vars are set. Invalid auth modes surface a targeted error string, keeping onboarding guardrails tight.",
                    "tags": [
                        "testing",
                        "cli-config",
                        "security"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/auth.test.ts",
                            "sha256": "95f0e6818f7d14f9fcae4d91f8e44e4953910c07126f73c220b6aaedaf93a214"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                }
            ]
        },
        {
            "id": "section-cli-ui",
            "slug": "cli-ui",
            "title": "CLI UI & UX",
            "entries": [
                {
                    "id": "aspect-cli-ui-markdown-display",
                    "slug": "cli-ui-markdown-display",
                    "name": "MarkdownDisplay renders headings, code fences, and tables inline",
                    "description": "`MarkdownDisplay.tsx` walks streamed content line-by-line, handling fenced code blocks with truncation when responses are pending, drawing markdown tables via `RenderTable`, and styling headings with the Ink colour palette. It falls back for unterminated fences, collapses repeated blank lines, and links into the inline renderer so tool output stays legible in narrow terminals.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/MarkdownDisplay.tsx",
                            "sha256": "a8985183112aa24f0cb615a1142d7753674a3359dd59df94a75752d8cba7ded6"
                        }
                    ],
                    "importance": 0.64,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-table-renderer",
                    "slug": "cli-ui-table-renderer",
                    "name": "TableRenderer sizes markdown tables for Ink layouts",
                    "description": "`TableRenderer.tsx` computes column widths from rendered text, rescales to the current terminal width, and truncates overflow with ellipses while preserving markdown emphasis. It draws box borders using box-drawing characters and colourises header cells, giving the CLI deterministic table layouts when tools emit markdown tables.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/TableRenderer.tsx",
                            "sha256": "625125a53b287efb0e86e15061d99d5136c9255d316b21be42337c5b99c1032b"
                        }
                    ],
                    "importance": 0.58,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-inline-markdown",
                    "slug": "cli-ui-inline-markdown",
                    "name": "InlineMarkdownRenderer handles emphasis, links, and inline code",
                    "description": "`InlineMarkdownRenderer.tsx` tokenises inline segments with a single regex pass, rendering bold, italic, strikethrough, inline code, underline tags, and HTTP links while tracking printable width via `string-width`. Helpers like `getPlainTextLength` feed table sizing and prevent control sequences from skewing alignment.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/InlineMarkdownRenderer.tsx",
                            "sha256": "9f7f2eae7ec6ba6bed550f1cca63f138c1dd0fc0ccc480c6abbf32a1373ddc31"
                        }
                    ],
                    "importance": 0.56,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-model-selection",
                    "slug": "cli-ui-model-selection",
                    "name": "ModelSelectionDialog surfaces available models with quick toggles",
                    "description": "The `ModelSelectionDialog.tsx` component projects the available model list into a `RadioButtonSelect`, annotating vision-capable entries and the current selection, and closes when Esc is pressed via `useKeypress`. Selecting an item simply emits the model ID, letting the surrounding dialog update session settings without duplicating UI wiring.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ModelSelectionDialog.tsx",
                            "sha256": "8a17c0e58b47e11ec04c02f12758b4d3ddfa4eff7f687c9fb3c12bf8336c0a75"
                        }
                    ],
                    "importance": 0.57,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-model-stats",
                    "slug": "cli-ui-model-stats",
                    "name": "ModelStatsDisplay visualises per-model request metrics",
                    "description": "`ModelStatsDisplay.tsx` reads aggregated `ModelMetrics` from the session context and renders request counts, error rates, average latency, and token buckets for each model. It highlights cache hit ratios and only shows \"thought\" or \"tool\" rows when those counters are non-zero, giving power users an at-a-glance health check.",
                    "tags": [
                        "cli-ui",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ModelStatsDisplay.tsx",
                            "sha256": "cd17c1565ded927dfbb30eba274f820dfd0a4b01fdd0359d3695afdbf7e83e25"
                        }
                    ],
                    "importance": 0.62,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-tool-stats",
                    "slug": "cli-ui-tool-stats",
                    "name": "ToolStatsDisplay summarises tool reliability and user agreement",
                    "description": "`ToolStatsDisplay.tsx` loops over tool telemetry, colouring success rates against configurable thresholds, formatting average durations, and breaking down accept/reject/modify counts. It also computes overall agreement and displays progress indicators, making the CLI dashboard a single stop for tool quality telemetry.",
                    "tags": [
                        "cli-ui",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ToolStatsDisplay.tsx",
                            "sha256": "8f7c4f6d5256ec00188b98c93e439b19e278de05e2882556a19827beb2bfa0ab"
                        }
                    ],
                    "importance": 0.62,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-context-summary",
                    "slug": "cli-ui-context-summary",
                    "name": "ContextSummaryDisplay condenses IDE, context files, and MCP state",
                    "description": "The `ContextSummaryDisplay.tsx` widget counts `@include` files, IDE open editors, and active/blocklisted MCP servers, then adapts layout based on terminal width. It also advertises keyboard shortcuts (ctrl+g, ctrl+t) so operators can drill into detailed panels, keeping situational awareness inline with the conversation.",
                    "tags": [
                        "cli-ui",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ContextSummaryDisplay.tsx",
                            "sha256": "1ff7fc76d32b4a16941ebf83d12d4d4aae4f802c8929a3e4cf866a3bfddffe1b"
                        }
                    ],
                    "importance": 0.59,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-suggestions",
                    "slug": "cli-ui-suggestions",
                    "name": "SuggestionsDisplay paginates slash commands and completions",
                    "description": "`SuggestionsDisplay.tsx` slices the suggestions array with a rolling window, renders matched substrings via `PrepareLabel`, and adapts layout when the user typed a slash command so descriptions align. Scroll arrows and the `(index/total)` footer help users navigate long completion lists without overwhelming the prompt.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/SuggestionsDisplay.tsx",
                            "sha256": "e1bf66a4c1b16102af2e4be92994196f0e75766c7e11ef8820485fa177aaaeed"
                        }
                    ],
                    "importance": 0.55,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-shell-confirmation",
                    "slug": "cli-ui-shell-confirmation",
                    "name": "Shell confirmation dialog vets tool-suggested commands",
                    "description": "When a tool wants to run shell commands, `ShellConfirmationDialog.tsx` lists each command with inline markdown, listens for Esc to cancel, and maps radio button choices into `ToolConfirmationOutcome` values. Accepted decisions echo back the approved command list so the executor can honour once/always semantics.",
                    "tags": [
                        "cli-ui",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ShellConfirmationDialog.tsx",
                            "sha256": "156a31ee581246eb063a079535e0f2535518d4a8c43aa3ee30e405f845c95eaf"
                        }
                    ],
                    "importance": 0.6,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-workspace-migration",
                    "slug": "cli-ui-workspace-migration",
                    "name": "Workspace migration dialog upgrades per-workspace extensions",
                    "description": "`WorkspaceMigrationDialog.tsx` calls `performWorkspaceExtensionMigration`, shows progress, and lists failed extension names when installs go wrong. It binds the radio selector to either queue the migration or skip, and after completion listens for `q` to exit so the CLI can prompt for restart.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/WorkspaceMigrationDialog.tsx",
                            "sha256": "cdc95d15c87ebc0e849f9e2240d9750fb2175532ab52fdcc9c7f1f48db04b4b9"
                        }
                    ],
                    "importance": 0.58,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-qwen-oauth-progress",
                    "slug": "cli-ui-qwen-oauth-progress",
                    "name": "Qwen OAuth progress UI renders QR codes and timeout states",
                    "description": "`QwenOAuthProgress.tsx` generates a QR code via `qrcode-terminal`, drives a countdown timer, and flips between polling, timeout, and idle states while listening for Esc/ctrl+C. It prints the verification URL, reusable QR ASCII art, and status hints so device flows succeed even when the CLI is controlling the browser launch.",
                    "tags": [
                        "cli-ui",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/QwenOAuthProgress.tsx",
                            "sha256": "82340bbb4c4901de2852a0a0c1f992b7f86d50bd6e5fe68281be21263126585d"
                        }
                    ],
                    "importance": 0.61,
                    "sectionId": "section-cli-ui",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-auth-in-progress",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-auth-in-progress",
                    "name": "AuthInProgress enforces timeout and escape shortcuts",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/AuthInProgress.tsx` wraps the OAuth wait UI in an Ink box, wires `useKeypress` to listen for Escape or Ctrl+C, and starts a 180-second timer that switches the messaging to a red failure notice before calling `onTimeout`. The component keeps device-code authentication responsive by letting users cancel stalled attempts and by auto-failing long waits without leaving the terminal hanging.",
                    "tags": [
                        "cli-ui",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/AuthInProgress.tsx",
                            "sha256": "aa773b8423d5cf7d82ad87fa2e96f4b814d49261d7dbfb79b77d0d2fc7274480"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-cli-ui-auto-accept-indicator",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-auto-accept-indicator",
                    "name": "AutoAcceptIndicator displays approval posture",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/AutoAcceptIndicator.tsx` maps the shared `ApprovalMode` enum into color-coded labels (plan, auto-accept edits, YOLO) and prints the Shift+Tab cycling hint whenever rotation is possible. It keeps the footer in sync with tool approval rules so users immediately see when edits will auto-apply.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/AutoAcceptIndicator.tsx",
                            "sha256": "31052a05e227551b71ee3269aaeb80be14e89bd3ef52dc025d5692a313169bf5"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-ui-detailed-messages-display",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-detailed-messages-display",
                    "name": "DetailedMessagesDisplay formats debug console output",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/DetailedMessagesDisplay.tsx` renders the debug console inside a rounded Ink box, piping messages through `MaxSizedBox` and assigning icons/colors per severity (info, warn, error, debug). It also coalesces repeat counts, giving developers a scrollable, legible log without overwhelming the main transcript.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/DetailedMessagesDisplay.tsx",
                            "sha256": "7f6a0866555673a2aa7a7708b81b3599a9bda37a85a05b7d05338af11cc50d00"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-cli-ui-editor-settings-dialog",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-editor-settings-dialog",
                    "name": "EditorSettingsDialog toggles editor per scope",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/EditorSettingsDialog.tsx` builds a two-pane dialog that reads available editors from `editorSettingsManager`, lets users flip focus between editor and scope radio lists with Tab, and persists selections via `onSelect` for user or workspace scope. It also highlights the merged effective editor so contributors know which launcher the CLI will open.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/EditorSettingsDialog.tsx",
                            "sha256": "27e0f140ee1162c5d8b22816398a688a86a033f3954c6a27563aca2b515310c9"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-ui-folder-trust-dialog",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-folder-trust-dialog",
                    "name": "FolderTrustDialog captures trusted directory choice",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/FolderTrustDialog.tsx` presents radio options for trusting the current folder or parent, binds Escape to decline, and, when `isRestarting` is true, swaps key handlers so pressing `r` exits after a restart-required change. It explains why trust matters for command execution, making sandbox opt-in explicit.",
                    "tags": [
                        "cli-ui",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/FolderTrustDialog.tsx",
                            "sha256": "35dfaafd2087b68b255b259d8b45d912bf8d3cbfd2a9246da78b9162e1112fa1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-ui-footer-status-line",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-footer-status-line",
                    "name": "Footer shows workspace, sandbox, and quota summary",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/Footer.tsx` composes the bottom status bar: it shortens the cwd with `tildeifyPath`, surfaces branch and nightly gradients, inspects `process.env.SANDBOX` to warn about missing isolation, and chains model, corgi mode, error counts, memory usage, and prompt token counters. The result gives operators a single glance view of environment and resource usage.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/Footer.tsx",
                            "sha256": "fc661504d402d7ef37bcab6c2b087330b873477fc7d560b9600b73564e165d7f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-ui-header-responsive-ascii",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-header-responsive-ascii",
                    "name": "Header selects ASCII art for current terminal width",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/Header.tsx` measures the terminal width with `useTerminalSize`, chooses between long, short, tiny, or user-supplied ASCII art, and optionally overlays a gradient and nightly version tag. That keeps the banner readable on narrow terminals while still showing release information.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/Header.tsx",
                            "sha256": "91f530c28c36b0109e40d7bfe563a6f474cf4bdfe4c17a313e8aafb71a335c3b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-ui-history-item-display",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-history-item-display",
                    "name": "HistoryItemDisplay routes history items to Ink components",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/HistoryItemDisplay.tsx` centralizes how every `HistoryItem` renders\u2014switching between user, shell, Gemini, help, stats, tool group, summary, and compression components before memoizing the fragment. By driving all timeline updates through this component, the CLI keeps chat, telemetry, and tool output consistent.",
                    "tags": [
                        "cli-ui",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/HistoryItemDisplay.tsx",
                            "sha256": "04e4c6d1edccf66dc70691075fa7f1e4e3d511e7dde7aefc0f7ff559ea5d4fe9"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-ui-input-prompt-engine",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-input-prompt-engine",
                    "name": "InputPrompt powers editing, history, and shell handoff",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/InputPrompt.tsx` is the heart of the TUI input: it tracks a text buffer, integrates slash command completion, reverse search, Vim bindings, shell history, clipboard image pasting, and double-Escape clearing while coordinating ghost text and suggestions. It also toggles shell mode when the first character is `!`, ensuring keyboard flows match the CLI\u2019s hybrid chat/shell expectations.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/InputPrompt.tsx",
                            "sha256": "e0c06b9adda8483c161f8c344092af5309c5d26027afa5ad51ae88779f7095ca"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.82
                },
                {
                    "id": "aspect-cli-ui-shell-mode-indicator",
                    "sectionId": "section-cli-ui",
                    "slug": "cli-ui-shell-mode-indicator",
                    "name": "ShellModeIndicator reminds users how to exit shell mode",
                    "description": "`projects/qwen-code/packages/cli/src/ui/components/ShellModeIndicator.tsx` prints a yellow \"shell mode enabled\" banner with an `(esc to disable)` hint so the footer can warn when commands are being routed through the shell pipeline instead of the chat loop.",
                    "tags": [
                        "cli-ui",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ShellModeIndicator.tsx",
                            "sha256": "217457078dab53d3ccbe889ebd59824bc767c9492e9f00c40d0f7ca2b0ffe386"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.4
                }
            ]
        },
        {
            "id": "section-cli-commands-core",
            "slug": "cli-commands-core",
            "title": "CLI Core Commands",
            "entries": [
                {
                    "id": "aspect-cli-command-chat",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-chat",
                    "name": "chat command manages conversation checkpoints",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/chatCommand.ts` loads checkpoint files from the project temp directory, lists them with timestamps, and provides `save`, `resume`, and `delete` subcommands that call the shared logger. Save prompts for overwrite confirmation via a React prompt, resume hydrates both UI and client history, and both resume/delete offer tag completion, giving the CLI first-class branching for chat history.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/chatCommand.ts",
                            "sha256": "763345763354ed02a20b4504d16d005cfc6795392d2e69df775d884b830690fe"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.74
                },
                {
                    "id": "aspect-cli-command-init",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-init",
                    "name": "init command scaffolds QWEN.md via model prompt",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/initCommand.ts` ensures the target `QWEN.md` (or variant) exists, asks for confirmation before overwriting non-empty files, and then emits a long, formatted prompt that instructs the model to explore the repo and generate a project context file. It uses history items to narrate progress, making `/init` a safe regeneration workflow.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/initCommand.ts",
                            "sha256": "fde7dadb60c26248162b4055269431644b5b36c9ac3974cc643f125247105f0d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.7
                },
                {
                    "id": "aspect-cli-command-memory",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-memory",
                    "name": "memory command inspects and updates stored facts",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/memoryCommand.ts` exposes subcommands to show merged memory, project-only, or global files, triggers the `save_memory` tool with optional scope flags, and runs `loadServerHierarchicalMemory` during `/memory refresh` to rebuild cached context. It keeps hierarchal memories transparent while reusing the shared tool pipeline.",
                    "tags": [
                        "cli-commands",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/memoryCommand.ts",
                            "sha256": "d9c6bb8d84099bbdd5a5ec7d87df1e28a6a41f1c6eb1a4a8679f6fa807594716"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.72
                },
                {
                    "id": "aspect-cli-command-model",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-model",
                    "name": "model command launches model picker by auth type",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/modelCommand.ts` inspects the current `Config` and auth type, looks up the allowed model list (Qwen or OpenAI sourced from env), and either errors with guidance or returns a dialog request so the Ink UI can render the picker. It prevents unsupported switches before reaching the network layer.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/modelCommand.ts",
                            "sha256": "c85a8acc6a1170a9a5db4fbebfaaa185e29eed14ec91d93321adbb4a9672597b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-command-summary",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-summary",
                    "name": "summary command writes .qwen/PROJECT_SUMMARY.md",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/summaryCommand.ts` guards against concurrent runs, feeds chat history plus the project summary prompt into `generateContent`, shows pending status updates, and writes the markdown output to `.qwen/PROJECT_SUMMARY.md` with metadata. Errors clear the pending item and surface a failure message so users know the summary did not persist.",
                    "tags": [
                        "cli-commands",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/summaryCommand.ts",
                            "sha256": "9fdeb3dc8aa68bb16275fc143578dd6fd63fd62b1830cbca7283236e3172f7f3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.71
                },
                {
                    "id": "aspect-cli-command-tools",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-tools",
                    "name": "tools command lists registered non-MCP tools",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/toolsCommand.ts` queries the `ToolRegistry`, filters out MCP-backed tools, and prints display names with optional multi-line descriptions when `/tools desc` is used. That makes the current built-in action surface discoverable without leaving the CLI.",
                    "tags": [
                        "cli-commands",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/toolsCommand.ts",
                            "sha256": "03b007a319f0459806af07ef1f497c1b64769dddcf0aa183ed78a3ae38fa5f02"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-command-stats",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-stats",
                    "name": "stats command emits session, model, and tool metrics",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/statsCommand.ts` computes wall-clock session duration with `formatDuration` and injects history items for session, model, or tool stats based on subcommands. It leverages the same Ink components used elsewhere so `/stats` mirrors the footer metrics in a reusable timeline entry.",
                    "tags": [
                        "cli-commands",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/statsCommand.ts",
                            "sha256": "1fb65b54d0f76f4f37f36d2ee51b200930113e1f6657dcb06f8e04693e8f668e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.59
                },
                {
                    "id": "aspect-cli-command-terminal-setup",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-terminal-setup",
                    "name": "terminal-setup command configures multiline keybindings",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/terminalSetupCommand.ts` calls `terminalSetup()` to patch VS Code, Cursor, and Windsurf keymaps for Shift+Enter/Ctrl+Enter, translates the result into an info or error message, and reminds users to restart when required. It automates the manual steps documented for multi-line input support.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/terminalSetupCommand.ts",
                            "sha256": "cff657bb4297381b19535c1b0df83f8dad5504ba18673c7a525abdd7d286e7ba"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-command-directory",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-directory",
                    "name": "directory command maintains include directories and memory",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/directoryCommand.tsx` adds and lists workspace directories, expands `~` and `%USERPROFILE%`, blocks additions when running in restrictive sandbox profiles, and refreshes memory (and Gemini MD counts) when include directories change. It keeps multi-root workspaces synchronized with the agent\u2019s context.",
                    "tags": [
                        "cli-commands",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/directoryCommand.tsx",
                            "sha256": "78bd1e409a0418f0b331a5db10f07e9b67b888dea3d67c370f504a5bbeb0bb30"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-cli-command-copy",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-copy",
                    "name": "copy command copies last model message to clipboard",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/copyCommand.ts` fetches the latest model response from the chat history, assembles its text parts, and hands them to `copyToClipboard`, returning success or error feedback. It provides a quick way to export model answers without leaving the terminal.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/copyCommand.ts",
                            "sha256": "256cab29117536bcdb0d4ad967d4c387c3fbdeae92824541bcd0cb9e3fc7e955"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-command-compress",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-compress",
                    "name": "compress command calls Gemini compression flow",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/compressCommand.ts` guards against concurrent compression, posts a pending history item, invokes `tryCompressChat`, and updates the timeline with token savings or errors. It gives users a manual trigger for the same compression logic the agent can run automatically.",
                    "tags": [
                        "cli-commands",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/compressCommand.ts",
                            "sha256": "bd8d1b8f2c3c01703dc8026cb3691a0937289b304ee2876474f34832247dc791"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-command-restore",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-restore",
                    "name": "restore command replays cached tool calls when checkpointing is on",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/restoreCommand.ts` only registers when checkpointing is enabled; it lists `.json` tool-call snapshots, reloads UI and client history, optionally rolls the repo back via `GitService`, and replays the captured tool invocation. That makes it possible to re-run tool suggestions after approval.",
                    "tags": [
                        "cli-commands",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/restoreCommand.ts",
                            "sha256": "2bd0529ac8436e1e8f7fae48ccd5a89091abd977d9a1b61306e8e38e7b5ce46c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.66
                },
                {
                    "id": "aspect-cli-command-clear",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-clear",
                    "name": "clear command resets the chat session and screen",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/clearCommand.ts` resets the Gemini chat via `resetChat()`, clears debug messages, resets the telemetry token counter, and wipes the history manager. It ensures `/clear` leaves the CLI in a clean state for the next conversation.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/clearCommand.ts",
                            "sha256": "c9ff4a45bf7f198ecdde94904331bf7acad6595dcea98a576f6d474c4d6be48e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-cli-command-agents",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-agents",
                    "name": "agents command opens subagent management dialogs",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/agentsCommand.ts` groups `/agents manage` and `/agents create` subcommands, each returning dialog actions that launch the subagent list or creation wizard. It ties the subagent UX into the same slash command system as the rest of the CLI.",
                    "tags": [
                        "cli-commands",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/agentsCommand.ts",
                            "sha256": "d4a12bbf531249c5b48fcd0c85f17ae7c88af9a64a203a3c05f829f0c1deb0b5"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-command-ide",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-ide",
                    "name": "ide command manages IDE companion state",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/ideCommand.ts` conditionally registers based on IDE detection, formats connection status messages, installs the VS Code companion via `getIdeInstaller`, and toggles `ide.enabled` in settings when users enable or disable integration. Status subcommands also surface the active open files streamed from the IDE server.",
                    "tags": [
                        "cli-commands",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/ideCommand.ts",
                            "sha256": "521543a0862d7c01b1123f1ab23493200c67ca4800ac62954035520c563cf6ed"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.67
                },
                {
                    "id": "aspect-cli-command-loader-interface",
                    "sectionId": "section-cli-commands-core",
                    "slug": "cli-command-loader-interface",
                    "name": "ICommandLoader contract keeps slash command sources pluggable",
                    "description": "`src/services/types.ts` introduces the `ICommandLoader` interface with a single `loadCommands(AbortSignal)` promise returning `SlashCommand[]`. CommandService injects Config into loaders so builtin, file, and extension sources implement the same cancellation-aware contract.",
                    "tags": [
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/types.ts",
                            "sha256": "ffb76fd13ac61d7763b0301e89175c5266a23d5977f909b3d1445860f3c77915"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.48
                }
            ]
        },
        {
            "id": "section-cli-commands-support",
            "slug": "cli-commands-support",
            "title": "CLI Support Commands",
            "entries": [
                {
                    "id": "aspect-cli-command-about",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-about",
                    "name": "about command reports CLI build context",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/aboutCommand.ts` gathers the CLI version, sandbox environment, selected auth type, detected IDE, and model from configuration and emits them as an `about` history item. It gives support teams a single command to capture runtime diagnostics.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/aboutCommand.ts",
                            "sha256": "07c2c9755d775190ae61c706d639f8c051a903e0001a84dd81e0370ce66be6af"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-command-approval-mode",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-approval-mode",
                    "name": "approval-mode command persists approval posture",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/approvalModeCommand.ts` tokenizes arguments, validates them against `APPROVAL_MODES`, and writes the chosen mode to session, user, or project settings via `SettingScope`. It also registers subcommands for each mode with scope flags and offers auto-completion, turning policy changes into an auditable command.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/approvalModeCommand.ts",
                            "sha256": "9535432e729124d7693c90ef819772de81a5e992c92ec89732aeb5ff631f04e0"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.65
                },
                {
                    "id": "aspect-cli-command-auth",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-auth",
                    "name": "auth command opens the authentication dialog",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/authCommand.ts` directly returns a dialog action targeting the auth flow so `/auth` drops users into the multi-provider login UI regardless of where they are in the session.",
                    "tags": [
                        "cli-commands",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/authCommand.ts",
                            "sha256": "24f5be8f3b27a808b0ae0de7677e3ce6abea77ea26c5a738a419744f2122ff31"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-command-docs",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-docs",
                    "name": "docs command launches hosted documentation",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/docsCommand.ts` either opens the hosted documentation URL in the system browser or prints it when running inside a sandbox that cannot spawn GUIs. It keeps the `/docs` shortcut consistent across environments.",
                    "tags": [
                        "cli-commands",
                        "documentation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/docsCommand.ts",
                            "sha256": "98261046dba38bbbb346f85ad585aa65ab5be51e29abae662420831b584648f9"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-command-editor",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-editor",
                    "name": "editor command opens editor preference dialog",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/editorCommand.ts` wraps the editor settings dialog behind `/editor`, letting users open the Ink picker without navigating menus.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/editorCommand.ts",
                            "sha256": "18c8de0c5aa3408cdbbefd3bc2913e47ee8cae7c429cc31d9ff529938e657acd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-command-extensions",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-extensions",
                    "name": "extensions command lists active extensions",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/extensionsCommand.ts` filters the config\u2019s extension registry for active entries and prints each name and version. It gives `/extensions` parity with the CLI\u2019s install/uninstall commands.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/extensionsCommand.ts",
                            "sha256": "d90cd730c03548b63e7da4676c7c86386e157fd4e2b18ff424f56234e421869e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-command-help",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-help",
                    "name": "help command injects the interactive cheatsheet",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/helpCommand.ts` pushes a `MessageType.HELP` history item with the current timestamp so the Ink components can render the inline cheatsheet whenever a user types `/help` or `/?`.",
                    "tags": [
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/helpCommand.ts",
                            "sha256": "d979cafe4d0cecf9f810990c19ab704c0cbf479dc89f861d2ab96644c346d601"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.44
                },
                {
                    "id": "aspect-cli-command-mcp",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-mcp",
                    "name": "mcp command summarizes MCP server status",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/mcpCommand.ts` inspects configured servers, colorizes status lines, surfaces OAuth state, and lists tool counts or cached prompts while respecting discovery progress. Optional flags include descriptions and schema inspection, so `/mcp` doubles as a monitoring dashboard for MCP integrations.",
                    "tags": [
                        "cli-commands",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/mcpCommand.ts",
                            "sha256": "9193caa783f7f3bfe4c34e5517be273039adfa878529e06caf80d158ccbc69e1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.69
                },
                {
                    "id": "aspect-cli-command-privacy",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-privacy",
                    "name": "privacy command opens privacy notice dialog",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/privacyCommand.ts` returns a dialog action pointing at the privacy component so users can review data handling without leaving the CLI.",
                    "tags": [
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/privacyCommand.ts",
                            "sha256": "8fea33205e3762cc1e810f1ff99b76c4059f4a575d00b17ac2b2cd57d78a3491"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "id": "aspect-cli-command-quit",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-quit",
                    "name": "quit command produces session summary and exit events",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/quitCommand.ts` formats `/quit` and `/quit-confirm` actions that append user intent, include session duration via `formatDuration`, and either exit immediately or present a confirmation dialog. It ensures graceful shutdown flows are consistent.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/quitCommand.ts",
                            "sha256": "64ffc2e9285a9e1cd9211ea853055892765b0ce821091d0fcf99cdda294af96e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-command-settings",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-settings",
                    "name": "settings command shows settings dialog",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/settingsCommand.ts` is a thin wrapper that opens the settings Ink dialog, giving `/settings` parity with the UI button.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/settingsCommand.ts",
                            "sha256": "1f355cfa914857a064fc5e1bfbccb7755fd9b091094674e0d2a19d21ba61517b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-cli-command-setup-github",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-setup-github",
                    "name": "setup-github command downloads GitHub workflows",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/setupGithubCommand.ts` verifies the repo is on GitHub, fetches the latest workflow bundle, writes them into `.github/workflows`, updates `.gitignore`, and returns a `run_shell_command` tool call that echoes success and opens follow-up URLs. It automates the action setup described in the documentation.",
                    "tags": [
                        "cli-commands",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/setupGithubCommand.ts",
                            "sha256": "db20b0da1263b0060c1e9251e7d53cbc3189d16a1c06e5810d0a5040ee81cba6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.66
                },
                {
                    "id": "aspect-cli-command-theme",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-theme",
                    "name": "theme command opens theme selector",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/themeCommand.ts` routes `/theme` to the theme dialog so the palette picker is available on demand.",
                    "tags": [
                        "cli-commands",
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/themeCommand.ts",
                            "sha256": "f6870a54f05118b8bf9637c7fcc4e8acd206c9952c60d089c755c6fadad732f3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.43
                },
                {
                    "id": "aspect-cli-command-vim",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-vim",
                    "name": "vim command toggles Vim keybindings",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/vimCommand.ts` calls `toggleVimEnabled()` on the UI manager and returns an info message indicating whether Vim mode is on or off, making modal editing discoverable without flags.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/vimCommand.ts",
                            "sha256": "86f56aeba2eee9af63ab8ae5802f1ab3f354860f608b6e1640cf0747d138075f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                },
                {
                    "id": "aspect-cli-command-bug",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-bug",
                    "name": "bug command pre-fills GitHub report with session details",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/bugCommand.ts` collects platform, sandbox, model, CLI version, git commit info, session ID, and memory usage, then builds a bug report URL (respecting `bugCommand` overrides), prints it, and tries to open it in a browser. It streamlines filing actionable issues from the CLI.",
                    "tags": [
                        "cli-commands",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/bugCommand.ts",
                            "sha256": "55812d578e2629c743ba554b22fe04a0fe79b29d09cb935586565817e1163ef2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-command-extensions-enable",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-extensions-enable",
                    "name": "`gemini extensions enable` toggles scopes with SettingScope defaults",
                    "description": "`commands/extensions/enable.ts` maps CLI flags into `SettingScope` (user + workspace by default) and calls `enableExtension`. Errors are wrapped with `FatalConfigError` so the CLI exits with code 52 and prints a normalized message via `getErrorMessage`.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/extensions/enable.ts",
                            "sha256": "4c0bb1ea66cc7c73e788578f0b30bda324df0d9995d94014aed3513fadcebaa4"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-command-extensions-disable",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-extensions-disable",
                    "name": "`gemini extensions disable` enforces per-scope shutdown",
                    "description": "`commands/extensions/disable.ts` defaults to the user scope, routes through `disableExtension`, and prints scope-qualified success messages. Failures reuse `getErrorMessage` but keep the CLI exit code non-zero via `process.exit(1)` so scripts detect soft errors.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/extensions/disable.ts",
                            "sha256": "38301a0450ce172b0571804c85e2fc32a70efe3ccad163e405aecfb68ab6cdfc"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-command-extensions-uninstall",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-extensions-uninstall",
                    "name": "`gemini extensions uninstall` removes bundles and reports status",
                    "description": "`commands/extensions/uninstall.ts` validates the required package name, calls `uninstallExtension`, and prints whether removal succeeded. On failure it logs the normalized error and exits code 1 so CI or shells can surface permission or network issues.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/extensions/uninstall.ts",
                            "sha256": "7d47ad5bd1d507e83ded7b1c7ccf19ff8e66763986cc34d2a1ff8a41e233bb25"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.54
                },
                {
                    "id": "aspect-cli-command-extensions-update",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-extensions-update",
                    "name": "`gemini extensions update` reports version bumps",
                    "description": "`commands/extensions/update.ts` invokes `updateExtension`, echoes failure when the extension is missing, and on success prints the semantic diff (`originalVersion \u2192 updatedVersion`). Errors fall back to `process.exit(1)` after logging the human-friendly message.",
                    "tags": [
                        "cli-commands",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/extensions/update.ts",
                            "sha256": "0f713685531a3bd7f112ae82e459ec88c028000821ae8a598e0cd9f6471590e7"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.54
                },
                {
                    "id": "aspect-cli-command-mcp-remove",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-mcp-remove",
                    "name": "`gemini mcp remove` prunes scoped servers from settings",
                    "description": "`commands/mcp/remove.ts` loads merged settings, prunes the named MCP server under the requested scope (default `project`), persists via `settings.setValue`, and prints warnings when the entry does not exist instead of failing hard.",
                    "tags": [
                        "cli-commands",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/mcp/remove.ts",
                            "sha256": "38956f9f6e6d088ee6b8166167e9d92e3d8e352057094a4c7047b34b8179eb68"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.57
                },
                {
                    "id": "aspect-cli-command-corgi",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-corgi",
                    "name": "`/corgi` built-in toggles corgi mode",
                    "description": "`ui/commands/corgiCommand.ts` registers a `SlashCommand` marked `CommandKind.BUILT_IN` that calls `context.ui.toggleCorgiMode()`. Shipping it alongside serious commands keeps the easter egg consistently available in CommandService results.",
                    "tags": [
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/corgiCommand.ts",
                            "sha256": "655d10971ccc3a684db28da08f997048f02830a6350ddc97f7c4a8e5eb5e2da0"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.3
                },
                {
                    "id": "aspect-cli-command-show-memory",
                    "sectionId": "section-cli-commands-support",
                    "slug": "cli-command-show-memory",
                    "name": "Show memory action reports loaded context files and contents",
                    "description": "`useShowMemoryCommand.ts` builds an async action that inspects `Config.getUserMemory()`, counts `GeminiMd` files, and posts formatted markdown blocks (or fallback guidance) into the history rail. It respects debug logging, handles missing config objects, and differentiates between empty memory and absent context files so users know why `/memory` output might be blank.",
                    "tags": [
                        "cli-commands",
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useShowMemoryCommand.ts",
                            "sha256": "d34f1d5ab567b6125651a7f45c8d34594643a17db0c696b8053e4cfda5d02932"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                }
            ]
        },
        {
            "id": "section-cli-prompt",
            "slug": "cli-prompt",
            "title": "CLI Command & Prompt Pipeline",
            "entries": [
                {
                    "id": "aspect-cli-prompt-default-argument",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-default-argument",
                    "name": "DefaultArgumentProcessor appends raw invocation text",
                    "description": "`projects/qwen-code/packages/cli/src/services/prompt-processors/argumentProcessor.ts` implements `DefaultArgumentProcessor`, appending the full raw command invocation to the last text part when `{{args}}` is absent so custom prompts still receive the typed arguments. It keeps slash commands predictable without making prompt authors handle the fallback.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/argumentProcessor.ts",
                            "sha256": "d2c1ee2390f6db8debc54758707f583ee86bfc2cb09101f7e098fcc7f3c3c170"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                },
                {
                    "id": "aspect-cli-prompt-shell-processor",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-shell-processor",
                    "name": "ShellProcessor executes !{} blocks with permission checks",
                    "description": "`projects/qwen-code/packages/cli/src/services/prompt-processors/shellProcessor.ts` scans prompt text for `!{...}` injections, escapes `{{args}}`, enforces `checkCommandPermissions` against approval mode and session allowlists, and runs commands through `ShellExecutionService`. It surfaces hard denials, requires confirmation when needed, and annotates stderr/exit codes in the returned prompt so models see side effects.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime",
                        "sandboxing",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/shellProcessor.ts",
                            "sha256": "1f52e8a2f9d5e93509b48a19f750ebf48557cf9f9df1e8c5da01ae29b86ac9d8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.73
                },
                {
                    "id": "aspect-cli-prompt-injection-parser",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-injection-parser",
                    "name": "extractInjections parses nested prompt injections",
                    "description": "`projects/qwen-code/packages/cli/src/services/prompt-processors/injectionParser.ts` provides `extractInjections`, a brace-counting parser that supports nested braces and throws explicit errors when blocks are unclosed. It underpins both `!{}` and `@{}` trigger handling so malformed prompts fail fast with helpful context.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/injectionParser.ts",
                            "sha256": "d6a5fff7ab40e8c77fe891c5c7d86bc10caf7c8486c085f4ee0f41c50fa7362b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-cli-prompt-types",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-types",
                    "name": "Prompt processor types define shared contract and constants",
                    "description": "`projects/qwen-code/packages/cli/src/services/prompt-processors/types.ts` declares the `IPromptProcessor` interface, the `PromptPipelineContent` alias, and placeholders like `{{args}}` and `!{` that processors rely on. It keeps the prompt pipeline strongly typed across processors.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/types.ts",
                            "sha256": "440a4245be6f119e2171c9fba315e1b5e96b946aab1c421b4e89c6f1d8048d59"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-command-types-contract",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-command-types-contract",
                    "name": "SlashCommand types define command context and returns",
                    "description": "`projects/qwen-code/packages/cli/src/ui/commands/types.ts` codifies the `CommandContext`, return type unions (message, dialog, tool, quit, confirm), completion hooks, and `CommandKind`, ensuring every slash command integrates with history management, settings, and services in a consistent way.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/commands/types.ts",
                            "sha256": "51c95c6ad73600e3bca8a46ae1c2f7cb403fc2c91230658a6a310547443efe39"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-prompt-registry",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-registry",
                    "name": "PromptRegistry deduplicates MCP prompts and exposes server views",
                    "description": "`projects/qwen-code/packages/core/src/prompts/prompt-registry.ts` stores discovered MCP prompts in a `Map`, auto-renaming duplicates with a `serverName_` prefix so collisions do not clobber handlers. It returns alphabetized lists for the palette, supports looking up a single prompt, filtering by server, and clearing or pruning entries when clients disconnect\u2014giving the prompt pipeline a single source of truth for slashable MCP prompts.",
                    "tags": [
                        "cli-runtime",
                        "prompting",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/prompts/prompt-registry.ts",
                            "sha256": "f88e19b7eed94afb39166c2a7de0f22ed3edbec806c632a7f9ed61964ecfa433"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-prompt-system-instruction-overrides",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-system-instruction-overrides",
                    "name": "getCoreSystemPrompt wires env overrides, config mappings, and memory tails",
                    "description": "`projects/qwen-code/packages/core/src/core/prompts.ts` `getCoreSystemPrompt` inspects `systemPromptMappings` from the global config to swap templates when `OPENAI_BASE_URL`/`OPENAI_MODEL` match, respects `GEMINI_SYSTEM_MD` overrides (including `~/` resolution and existence checks), and optionally persists the canonical prompt via `GEMINI_WRITE_SYSTEM_MD`. It appends trimmed user memory behind an `---` separator so agent sessions inherit long-term context while keeping the base instructions consistent across CLI runs.",
                    "tags": [
                        "cli-runtime",
                        "prompting",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/prompts.ts",
                            "sha256": "0178ebf8fc0213519918561acc7eb81fa371ccdedb95bbcbd932f0112c60523e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.74
                },
                {
                    "id": "aspect-cli-prompt-compression-directive",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-compression-directive",
                    "name": "Compression prompt codifies scratchpad + XML state snapshot contract",
                    "description": "`projects/qwen-code/packages/core/src/core/prompts.ts` `getCompressionPrompt()` instructs the model to reason privately in a `<scratchpad>` before emitting a `<state_snapshot>` XML block covering goal, key knowledge, file system state, recent actions, and plan status. It emphasizes lossless retention when history is truncated, so manual `/compress` and automatic triggers both preserve actionable context.",
                    "tags": [
                        "prompting",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/prompts.ts",
                            "sha256": "0178ebf8fc0213519918561acc7eb81fa371ccdedb95bbcbd932f0112c60523e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-cli-prompt-project-summary",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-project-summary",
                    "name": "Project summary prompt drives markdown exports of session context",
                    "description": "`projects/qwen-code/packages/core/src/core/prompts.ts` `getProjectSummaryPrompt()` lays out a deterministic markdown scaffold (overall goal, key knowledge, recent actions, current plan with status markers) and forbids tool calls, ensuring the `/summary` flow saves reproducible briefings that future sessions or teammates can consume without replaying chat logs.",
                    "tags": [
                        "prompting",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/prompts.ts",
                            "sha256": "0178ebf8fc0213519918561acc7eb81fa371ccdedb95bbcbd932f0112c60523e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-prompt-refresh-memory",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-refresh-memory",
                    "name": "REFRESH_MEMORY_COMMAND_NAME keeps the /refreshmemory alias canonical",
                    "description": "`useRefreshMemoryCommand.ts` exports the `/refreshmemory` slash-command identifier from a single place so prompt processors, help text, and hooks reference the same string when wiring the memory summary refresh flow.",
                    "tags": [
                        "cli-commands",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useRefreshMemoryCommand.ts",
                            "sha256": "9737381a80e0999083335fab1aa3290ca53e84fcdaf721b57a9feeaee4d9cf9e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.3
                },
                {
                    "id": "aspect-cli-prompt-at-file-processor",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-at-file-processor",
                    "name": "AtFileProcessor inlines @{path} placeholders from the workspace",
                    "description": "`projects/qwen-code/packages/cli/src/services/prompt-processors/atFileProcessor.ts` \u0438\u0449\u0435\u0442 `@{...}` \u0432 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u0445 \u0447\u0430\u0441\u0442\u044f\u0445, \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0435\u0442 \u0438\u0445 \u0447\u0435\u0440\u0435\u0437 `extractInjections`, \u0447\u0438\u0442\u0430\u0435\u0442 \u0444\u0430\u0439\u043b\u044b `readPathFromWorkspace` \u0438 \u0432\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0447\u0430\u0441\u0442\u0438 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0433\u043e \u0432 prompt. \u0418\u0433\u043d\u043e\u0440\u0438\u0440\u0443\u0435\u043c\u044b\u0435 \u043f\u043e `.gitignore`/`.qwenignore` \u043f\u0443\u0442\u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u044e\u0442\u0441\u044f \u043a\u0430\u043a `MessageType.INFO`, \u043e\u0448\u0438\u0431\u043a\u0438 \u043b\u043e\u0433\u0438\u0440\u0443\u044e\u0442\u0441\u044f \u0438 \u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u043f\u043b\u0435\u0439\u0441\u0445\u043e\u043b\u0434\u0435\u0440, \u0447\u0442\u043e\u0431\u044b CLI \u0438 UI \u043d\u0435 \u0442\u0435\u0440\u044f\u043b\u0438 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0434\u0430\u0436\u0435 \u043f\u0440\u0438 \u0441\u0431\u043e\u044f\u0445 \u0447\u0442\u0435\u043d\u0438\u044f.",
                    "tags": [
                        "cli-commands",
                        "cli-runtime",
                        "prompting",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/atFileProcessor.ts",
                            "sha256": "0d3c2bc66f51e7540b1a933d13042153d724327331c63bb60081a1e0577bf234"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.64
                },
                {
                    "id": "aspect-cli-prompt-processor-tests",
                    "sectionId": "section-cli-prompt",
                    "slug": "cli-prompt-processor-tests",
                    "name": "Prompt processor tests enforce parsing and approval guardrails",
                    "description": "`argumentProcessor.test.ts` proves the default processor appends the raw slash-command invocation only when arguments exist, `atFileProcessor.test.ts` walks through multi-file injections, ignored files, and UI warnings, `injectionParser.test.ts` stress-tests nested braces and malformed triggers, and `shellProcessor.test.ts` simulates approval modes plus OS-specific quoting to assert dangerous `!{}` commands demand confirmations or respect YOLO overrides.",
                    "tags": [
                        "testing",
                        "cli-commands",
                        "cli-runtime",
                        "security"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/argumentProcessor.test.ts",
                            "sha256": "a7ad6af6cb29f8aed45f385fa0ebbb910c1f41823b6e1c05c8e5be5e1f3b2ee8"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/atFileProcessor.test.ts",
                            "sha256": "de32a026ee9ed9beb6b8adbeca36d8adef537b85a2928a20eaa2a81ef5877d60"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/injectionParser.test.ts",
                            "sha256": "07d5d1638b012b92e181e645701986ca4443fce8d8b1777032b9161f015acda9"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/services/prompt-processors/shellProcessor.test.ts",
                            "sha256": "3816315de21c3d76bb162efb911cdeff9e16ae59f2c87a4245f10fca9f9ba335"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.51
                }
            ]
        },
        {
            "id": "section-automation",
            "slug": "automation",
            "title": "Automation & Ops",
            "entries": [
                {
                    "id": "aspect-automation-build-package",
                    "slug": "automation-build-package",
                    "name": "`build_package.js` compiles a package and stamps build freshness",
                    "description": "`scripts/build_package.js` asserts it is run from a workspace package, executes `tsc --build`, copies documentation assets via `copy_files.js`, and touches `dist/.last_build` so later checks can detect stale builds. The script exits non-zero if prerequisites fail, guarding release pipelines from half-built artifacts.",
                    "tags": [
                        "automation",
                        "build-system"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/build_package.js",
                            "sha256": "588f5e5b5c68b4c978d5e94aef841918832800cb9b8cab9cf01265665ba4b0d7"
                        }
                    ],
                    "importance": 0.6,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-build-vscode",
                    "slug": "automation-build-vscode-companion",
                    "name": "`build_vscode_companion.js` packages the VS Code companion extension",
                    "description": "`scripts/build_vscode_companion.js` resolves the repo root, then runs `npx @vscode/vsce package --no-dependencies` inside `packages/vscode-ide-companion`. It intentionally skips dependency bundling so the generated `.vsix` mirrors production release settings.",
                    "tags": [
                        "automation",
                        "build-system"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/build_vscode_companion.js",
                            "sha256": "3bff7095d707b666a0b915bc62834aa0f097701f6b146c95be5786971eff33c0"
                        }
                    ],
                    "importance": 0.55,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-check-build-status",
                    "slug": "automation-check-build-status",
                    "name": "`check-build-status.js` warns when sources outdate `dist/.last_build`",
                    "description": "`scripts/check-build-status.js` scans CLI source files and watched manifests, compares their mtimes against `dist/.last_build`, and writes warnings to `~/tmp/qwen-code-warnings.txt` without blocking startup. If the stamp is missing it prints a guidance banner so developers rerun `npm run build` before launching the CLI.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/check-build-status.js",
                            "sha256": "1921ef983be474947ed90ea56a0c5576f75c57ce1366d28e8ef89862c909542e"
                        }
                    ],
                    "importance": 0.59,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-copy-artifacts",
                    "slug": "automation-copy-artifacts",
                    "name": "Copy scripts replicate docs and bundle assets into release directories",
                    "description": "`scripts/copy_files.js` walks `src/` and mirrors `.md/.json/.sb` files into `dist/src`, while `copy_bundle_assets.js` gathers every `.sb` bundle across packages into the top-level `bundle/` folder. Together they ensure packaged artifacts ship documentation and sandbox manifests alongside compiled code.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/copy_files.js",
                            "sha256": "24c018ecca634456609dfa6b93ba1729fd5455d35d7ea1c73a374b3c020cd10e"
                        },
                        {
                            "path": "projects/qwen-code/scripts/copy_bundle_assets.js",
                            "sha256": "49f2e3bf843a5166bd00d0f47958e61088cb4059c3aca7f85800d6520d4b0711"
                        }
                    ],
                    "importance": 0.54,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-git-commit-info",
                    "slug": "automation-generate-git-commit-info",
                    "name": "`generate-git-commit-info.js` writes commit metadata for CLI and core",
                    "description": "`scripts/generate-git-commit-info.js` shells out to `git rev-parse --short HEAD`, reads the workspace version, and writes `generated/git-commit.ts` into both CLI and core packages. The generated module exports `GIT_COMMIT_INFO` and `CLI_VERSION`, keeping runtime banners and telemetry aligned with the build provenance.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/generate-git-commit-info.js",
                            "sha256": "0a25aad15ff2b569d047df9329af2ae8899b5358455692c95785042649ca9d34"
                        }
                    ],
                    "importance": 0.58,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-get-previous-tag",
                    "slug": "automation-get-previous-tag",
                    "name": "`get-previous-tag.js` finds the comparison baseline for releases",
                    "description": "`scripts/get-previous-tag.js` parses semver tags, distinguishes nightly builds from stable releases, and walks backwards through git tags to locate the prior stable cut. The helper falls back across patch/minor/major boundaries so release notes always diff against the right ancestor.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/get-previous-tag.js",
                            "sha256": "9675c8f3872cd577b5b3ed0fea307d6dd549d5d0c5a409cba7ae056d783bb96e"
                        }
                    ],
                    "importance": 0.57,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-get-release-version",
                    "slug": "automation-get-release-version",
                    "name": "`get-release-version.js` computes nightly, preview, or manual tags",
                    "description": "`scripts/get-release-version.js` inspects `IS_NIGHTLY`, `IS_PREVIEW`, and `MANUAL_VERSION` env vars, bumps patch versions, queries GitHub releases for the last matching tag, and normalises results to `vX.Y.Z` plus npm dist-tags. It rejects build metadata and enforces canonical prefixes so release automation stays predictable.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/get-release-version.js",
                            "sha256": "748f399c68191cb9a5847461b162585ebdf5a27fbd49fd1682b43205ec07806a"
                        }
                    ],
                    "importance": 0.63,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-sandbox-command",
                    "slug": "automation-sandbox-command",
                    "name": "`sandbox_command.js` selects docker, podman, or sandbox-exec wrappers",
                    "description": "`scripts/sandbox_command.js` resolves the effective `GEMINI_SANDBOX` from user settings or local `.env`, probes the PATH for docker/podman, and falls back to macOS `sandbox-exec` when enabled. It prints the chosen binary (unless `--quiet`) so host tooling can splice the CLI into containers on demand.",
                    "tags": [
                        "automation",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/sandbox_command.js",
                            "sha256": "0c43138c65f39523e3318f29aa0b86f3515d03bff9827f3584eadb20002e17dd"
                        }
                    ],
                    "importance": 0.6,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-telemetry-launchers",
                    "slug": "automation-telemetry-launchers",
                    "name": "Telemetry runners spin local OTEL collectors or GCP exporters",
                    "description": "`scripts/telemetry.js` reads CLI or user settings to choose `local` or `gcp` targets, invoking `local_telemetry.js` to download otelcol/Jaeger, manage ports, and update sandbox telemetry settings, or `telemetry_gcp.js` to start an OTLP collector pointing at Google Cloud. Both scripts register cleanups and reuse helpers from `telemetry_utils.js` to manage binaries and log files.",
                    "tags": [
                        "automation",
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/telemetry.js",
                            "sha256": "3fcae3f57bd51ffeb3b747789476411e103e9bc34c2a12b64e4c4898561a5f95"
                        },
                        {
                            "path": "projects/qwen-code/scripts/local_telemetry.js",
                            "sha256": "b3a81bec2f5b136b281fcec4cfcf1b03184f523070962ca39b2a4bdcb281caf5"
                        },
                        {
                            "path": "projects/qwen-code/scripts/telemetry_gcp.js",
                            "sha256": "8e33834590b4abd4b47ac0cc105464cc499a289fd04fb9337c227f621af5de2a"
                        }
                    ],
                    "importance": 0.66,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-telemetry-utils",
                    "slug": "automation-telemetry-utils",
                    "name": "`telemetry_utils.js` downloads collectors and manages hashed state",
                    "description": "`scripts/telemetry_utils.js` hashes the workspace path to isolate cache directories under `~/.qwen/tmp`, fetches release JSON via curl, downloads binaries, handles cross-device renames, and polls ports before declaring collectors healthy. Helper routines also toggle telemetry settings and register cleanup hooks for spawned processes.",
                    "tags": [
                        "automation",
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/telemetry_utils.js",
                            "sha256": "bd57177f9a175309907eedb7100eab378485f4e7ed0998c3004fdc787c3b8340"
                        }
                    ],
                    "importance": 0.64,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-version-script",
                    "slug": "automation-version-script",
                    "name": "`version.js` bumps workspace versions and rewrites sandbox image URIs",
                    "description": "`scripts/version.js` runs `npm version` for the root and every workspace, rewrites `config.sandboxImageUri` in root and CLI manifests to include the new version, and finishes with `npm install` so `package-lock.json` stays in sync. It keeps release bumps atomic and consistent across the monorepo.",
                    "tags": [
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/version.js",
                            "sha256": "78c8ec9819ec48563ab667e73680771887846ee89b47bfba0e5f56993e5f3cf4"
                        }
                    ],
                    "importance": 0.61,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-automation-test-windows-paths",
                    "slug": "automation-test-windows-paths",
                    "name": "`test-windows-paths.js` sanity-checks path normalisation for tests",
                    "description": "`scripts/test-windows-paths.js` exercises `path.join`, `path.normalize`, and snapshot markers to ensure integration tests compare platform-agnostic paths. The script prints sample markers so golden files match on Windows and UNIX alike.",
                    "tags": [
                        "automation",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/scripts/test-windows-paths.js",
                            "sha256": "55148ec29f7e717d2722510479d08c26d4caa2477d1cee3dea046ed57cf8d6e4"
                        }
                    ],
                    "importance": 0.45,
                    "sectionId": "section-automation",
                    "lastUpdated": "2025-10-18"
                }
            ]
        },
        {
            "id": "section-integration-tests",
            "slug": "integration-tests",
            "title": "Integration Tests",
            "entries": [
                {
                    "id": "aspect-integration-stdin-context",
                    "slug": "integration-stdin-context",
                    "name": "`stdin-context.test.ts` covers stdin ingestion success and failure",
                    "description": "The skipped `stdin-context.test.ts` harness spins a `TestRig`, pushes random content via stdin, and asserts the captured API request logs include stdin before the prompt. A second case simulates never-ending stdin to verify the CLI exits quickly with a helpful error instead of hanging.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/stdin-context.test.ts",
                            "sha256": "04b22995d42ba0df1781a5263a3bf2674079243735156325a2f81f5a0e315b07"
                        }
                    ],
                    "importance": 0.52,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-mcp-server",
                    "slug": "integration-test-mcp-server",
                    "name": "`test-mcp-server.ts` provides a disposable MCP HTTP transport for tests",
                    "description": "`integration-tests/test-mcp-server.ts` starts an Express server, wires a `StreamableHTTPServerTransport` with random session IDs, and forwards `/mcp` POST bodies into the MCP runtime. The helper exposes `start()` and `stop()` so Vitest suites can exercise MCP negotiation without external dependencies.",
                    "tags": [
                        "integration-tests",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/test-mcp-server.ts",
                            "sha256": "999de95f97818d63880a1cb98c361a8712ecb88c80ab1c9fa182ba65402e74a4"
                        }
                    ],
                    "importance": 0.56,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-terminal-bench-config",
                    "slug": "integration-terminal-bench-config",
                    "name": "Terminal bench Vitest config serialises long-running suites",
                    "description": "`integration-tests/vitest.terminal-bench.config.ts` sets a configurable timeout (default 30 minutes), attaches `globalSetup`, disables file parallelism, and targets `terminal-bench/*.test.ts`. The bespoke config prevents Terminal Bench suites from racing each other or timing out mid-run.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/vitest.terminal-bench.config.ts",
                            "sha256": "413acd780bf16c7862ced693e256fd5f020fe4adc1ecfb307c5b991bae4856e8"
                        }
                    ],
                    "importance": 0.5,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-terminal-agent",
                    "slug": "integration-terminal-agent-driver",
                    "name": "`qwen_code.py` adapts Terminal Bench to launch the CLI agent",
                    "description": "`terminal-bench/qwen_code.py` implements the Terminal Bench agent interface by exporting API key, model, and base URL environment variables from agent kwargs, then returning a single `qwen -y --prompt \u2026` command. The class enforces that an API key is provided and defaults the model/base URL when absent.",
                    "tags": [
                        "integration-tests"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/qwen_code.py",
                            "sha256": "5cabfb8f6af17e869c144ce1f9f97b69c431fcce4af130fadb749d2b1db7be90"
                        }
                    ],
                    "importance": 0.55,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-terminal-hello-world",
                    "slug": "integration-terminal-hello-world",
                    "name": "Hello-world Terminal Bench task validates basic file manipulation",
                    "description": "The `ci-tasks/hello-world` suite defines a simple task YAML that asks the agent to create `hello.txt`, ships a reference `solution.sh`, and reuses `run-tests.sh` to invoke reusable uv-based pytest harness scripts. It provides a fast smoke test path for CI without heavy dependencies.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/hello-world/task.yaml",
                            "sha256": "3fbfd4e18534323bbbb2fa833faf9bd998b1662fb8cc558f598c52e3ddf4d07d"
                        },
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/hello-world/solution.sh",
                            "sha256": "83605fbcb8fb37355ef907dd073b5cb63b66e88ee9de5fa1352b0cdef46c1d37"
                        },
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/hello-world/run-tests.sh",
                            "sha256": "38cd63059daafc6a15b3d1ec58a7d551eb13b3a076a0d3fa7861a1568d489dca"
                        }
                    ],
                    "importance": 0.53,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-terminal-swe-bench",
                    "slug": "integration-terminal-swe-bench",
                    "name": "SWE Bench Astropy task exercises complex patch workflows",
                    "description": "`ci-tasks/swe-bench-astropy-1` provisions a container via `docker-compose`, applies a patch to Astropy, pins dependencies, and runs targeted pytest. The `solution.sh` demonstrates agent workflow while `run-tests.sh` bootstraps venvs and enforces the expected fix, providing a realistic regression benchmark.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/swe-bench-astropy-1/task.yaml",
                            "sha256": "939cfdb67ca78f47f19b506b2e44d7dba0085f8bcf6e716b982d8f097d16d953"
                        },
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/swe-bench-astropy-1/solution.sh",
                            "sha256": "d71667575926f67dc34f7f20863b1ae84dc73b5261f367e4d59c7b8eb673daf5"
                        },
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/swe-bench-astropy-1/run-tests.sh",
                            "sha256": "f3711c77051405f93e5b17abda01c07f1f6b68bbd3068d66373f850b73d94390"
                        },
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/swe-bench-astropy-1/docker-compose.yaml",
                            "sha256": "e97d2046b343e52070fffbcf2733e11aa5432aae6e6dde4b2a71c7f7ebcc7f87"
                        }
                    ],
                    "importance": 0.6,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-terminal-uv-pytest",
                    "slug": "integration-terminal-uv-pytest",
                    "name": "Reusable uv pytest scripts setup Python envs inside bench tasks",
                    "description": "`tests/setup-uv-pytest.sh` installs uv and configures the testing virtualenv, while `tests/run-uv-pytest.sh` executes pytest with uv wrappers. Bench tasks source these scripts to keep container images minimal and ensure deterministic Python toolchains during CI.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/hello-world/tests/setup-uv-pytest.sh",
                            "sha256": "b31743d9f7c7b711444a05770a0523ce0d33da4013cc00dfc09de993434c40a2"
                        },
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/hello-world/tests/run-uv-pytest.sh",
                            "sha256": "b03e2fed1a5fcec35cae61157b7f76e67d2d0b66e77dfed168077266c288561a"
                        }
                    ],
                    "importance": 0.51,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-terminal-test-outputs",
                    "slug": "integration-terminal-test-outputs",
                    "name": "`test_outputs.py` enforces Terminal Bench result validation",
                    "description": "`tests/test_outputs.py` parses Terminal Bench artifacts and asserts they match the runner contract, catching regressions in how results are formatted or returned. The assertions ensure the CLI produces the expected success markers for downstream tooling.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/terminal-bench/ci-tasks/hello-world/tests/test_outputs.py",
                            "sha256": "ae70869cb2179ea8d9c4834132c5d9675e371f4152094a3f199198e95958e165"
                        }
                    ],
                    "importance": 0.48,
                    "sectionId": "section-integration-tests",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-integration-edit-tool",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-edit-tool",
                    "name": "`edit.test.ts` ensures the Edit tool rewrites files end-to-end",
                    "description": "`projects/qwen-code/integration-tests/edit.test.ts` spins up a `TestRig`, seeds `file_to_edit.txt`, prompts the model to swap text, and asserts `waitForToolCall('edit')` resolves before checking the file system. It pipes failures through `printDebugInfo()` and `validateModelOutput()` so regression logs capture missing tool calls, console output, and tool arguments when the edit tool misbehaves.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/edit.test.ts",
                            "sha256": "dc251d16af9f5a800e697e4a94bdb72b96b143ece7583dd2fd5fa37f82639286"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-integration-file-system",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-file-system",
                    "name": "`file-system.test.ts` covers read/write tool parity",
                    "description": "`integration-tests/file-system.test.ts` drives both `read_file` and `write_file` or `edit` flows: the first case checks the model streams file content back after `waitForToolCall('read_file')`, while the second accepts either `write_file` or `edit`, then verifies the persisted text includes \"hello\". Detailed debug dumps capture tool logs and output when expectations fail, giving quick insight into tool regressions.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/file-system.test.ts",
                            "sha256": "7e430bfa9b2ef24c69f89e1a49f8e92c5ec6dad81c6990b9861d12d27fb94970"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-integration-run-shell",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-run-shell",
                    "name": "`run_shell_command.test.ts` validates CLI and stdin shell execution",
                    "description": "`integration-tests/run_shell_command.test.ts` drives two prompts\u2014normal and stdin-based\u2014and waits for `run_shell_command` invocations that echo `hello-world` or `test-stdin`. It accepts either stdout or exit-code text via `validateModelOutput()` and prints environment telemetry when the tool is not invoked, so shell regressions surface quickly in CI.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/run_shell_command.test.ts",
                            "sha256": "8f3e1c4c7f970a8542d31900250c9cea6a80f67310cda4133c7e5f8ae1e5cc64"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.51
                },
                {
                    "id": "aspect-integration-save-memory",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-save-memory",
                    "name": "`save_memory.test.ts` guarantees persisted facts reappear in output",
                    "description": "`integration-tests/save_memory.test.ts` asks the model to remember \"my favorite color is blue\", waits for the `save_memory` tool, and asserts the transcript repeats \"blue\". When not found, it dumps all tool calls and result text, giving a targeted signal if the memory pipeline or tool schema changes.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/save_memory.test.ts",
                            "sha256": "7b86fee761756b97d5affb9e49b2e4c39cbcd81ccc4cd5755eddba1dcedd8a4b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-integration-todo-write",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-todo-write",
                    "name": "`todo_write.test.ts` checks list creation and updates via tool payloads",
                    "description": "`integration-tests/todo_write.test.ts` first seeds a four-item requirements list and inspects the JSON arguments from the `todo_write` tool to ensure IDs, statuses, and content are present. A second case updates status after another run, confirming subsequent tool calls also serialize valid todo arrays\u2014critical for keeping the planner workflow healthy.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/todo_write.test.ts",
                            "sha256": "0075147ec73cad9c3a4b1b59f8f34349feb8d2fdec204db82add2fb0263a026c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-integration-read-many-files",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-read-many-files",
                    "name": "`read_many_files.test.ts` (skipped) encodes fallback expectations",
                    "description": "Although marked `.skip`, `integration-tests/read_many_files.test.ts` documents the desired behavior: either a single `read_many_files` call or multiple `read_file` calls should surface both file contents after `TestRig.run()`. The debug harness captures when neither pattern appears, making it a road map for future enablement of batch file reads.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/read_many_files.test.ts",
                            "sha256": "770ffbfa5a835e1e82fc7a997488f5ecd4c2d20d826b64b8ae92a4a3887a3ae2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-integration-write-file",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-write-file",
                    "name": "`write_file.test.ts` verifies file creation with debug-friendly error messages",
                    "description": "`integration-tests/write_file.test.ts` prompts for a dad joke saved to `dad.txt`, waits for `write_file`, and leverages `createToolCallErrorMessage()` to show actual tool invocation lists when the call is missing. It then checks the written file is not empty, dumping tool arguments if it is, giving quick root cause for CLI write regressions.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/write_file.test.ts",
                            "sha256": "3c8e5e3f02caf03a846b4813e7fa6202c4c5913bc6d1d2076960a77294ac8bc6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-integration-web-search",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-web-search",
                    "name": "`web_search.test.ts` guards Tavily-backed discovery with network fallbacks",
                    "description": "`integration-tests/web_search.test.ts` skips automatically when `TAVILY_API_KEY` is unset and tolerates network timeouts by logging and returning early. When conditions are met it asserts `web_search` executes, validates the transcript mentions both \"weather\" and \"London\", and dumps failed tool args for diagnostics if content is missing.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/web_search.test.ts",
                            "sha256": "9d2259a910c4c44c8ab5240ed4a25ddd23eec9da73a53e2599df8bfe11fbed37"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-integration-ide-client",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-ide-client",
                    "name": "`ide-client.test.ts` exercises port discovery and proxy connection paths",
                    "description": "`integration-tests/ide-client.test.ts` spins up a `TestMcpServer`, stubs environment variables, and verifies `IdeClient.getInstance().connect()` succeeds when reading ports from env variables, from JSON files, or after a failed port-file attempt. A proxy scenario stubs `HTTP_PROXY`, `HTTPS_PROXY`, and `NO_PROXY` to validate the client still connects, documenting regression coverage for IDE bridge startup.",
                    "tags": [
                        "integration-tests",
                        "testing",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/ide-client.test.ts",
                            "sha256": "8b0750c6cbd2401448fd5f56477482da83dbcf18a7a384f716e7e39521ac6288"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-integration-stdin-context-future",
                    "sectionId": "section-integration-tests",
                    "slug": "integration-stdin-context-future",
                    "name": "`stdin-context.test.ts` documents stdin forwarding expectations",
                    "description": "`integration-tests/stdin-context.test.ts` (skipped) encodes two scenarios: when stdin carries a random token the test waits for telemetry, inspects the last API request, and asserts the token precedes the prompt in the request history; another case simulates a never-ending stdin stream and expects the CLI to exit quickly with \"No input provided via stdin\". These tests capture desired sandbox behavior even before full support lands.",
                    "tags": [
                        "integration-tests",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/integration-tests/stdin-context.test.ts",
                            "sha256": "04b22995d42ba0df1781a5263a3bf2674079243735156325a2f81f5a0e315b07"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                }
            ]
        },
        {
            "id": "section-core-utils",
            "slug": "core-utils",
            "title": "Core Utilities",
            "entries": [
                {
                    "id": "aspect-core-utils-error-parsing",
                    "slug": "core-utils-error-parsing",
                    "name": "`errorParsing.ts` maps API errors to tier-aware guidance",
                    "description": "`errorParsing.ts` inspects structured errors, string payloads, and nested JSON to produce consistent `[API Error]` messages, and chooses fallback messaging based on auth type and detected quota issues. It leverages quota detectors to swap models or prompt users to upgrade when limits are hit.",
                    "tags": [
                        "core-utils",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/errorParsing.ts",
                            "sha256": "2c0d875c06e09f7ecb31b5fc2e5ae7a0d955e65edb873f4590e9f46b09847a03"
                        }
                    ],
                    "importance": 0.64,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-retry-backoff",
                    "slug": "core-utils-retry-backoff",
                    "name": "`retry.ts` implements exponential backoff with quota-aware fallbacks",
                    "description": "`retryWithBackoff` calculates delays, tracks consecutive 429s, and invokes a fallback callback to switch Gemini models when OAuth quota is exhausted while short-circuiting on Qwen-specific quota errors. It reuses `quotaErrorDetection` helpers and applies jittered delays between attempts.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/retry.ts",
                            "sha256": "958422ccf505b19da1910da7486d453921c15637a1b763541dfeacb027f91b95"
                        }
                    ],
                    "importance": 0.66,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-quota-detection",
                    "slug": "core-utils-quota-detection",
                    "name": "`quotaErrorDetection.ts` classifies Gemini and Qwen quota failures",
                    "description": "`quotaErrorDetection.ts` differentiates Pro quota overruns, generic quota exhaustion, Qwen insufficient quota, and throttling scenarios by inspecting strings, structured payloads, or gaxios responses. These predicates steer both error messaging and retry logic throughout the core runtime.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/quotaErrorDetection.ts",
                            "sha256": "d35d66d4d97780a70163e439de3dc9ef8f581c856cff89198c07736c431a7dbf"
                        }
                    ],
                    "importance": 0.63,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-secure-browser",
                    "slug": "core-utils-secure-browser-launcher",
                    "name": "`secure-browser-launcher.ts` opens auth URLs without shell injection risk",
                    "description": "`openBrowserSecurely` validates HTTP(S) URLs, strips control characters, and uses `execFile` to launch platform-specific commands (`open`, PowerShell `Start-Process`, `xdg-open`). It falls back to browser-specific binaries on Linux and checks `shouldLaunchBrowser` to skip launches in headless or SSH environments.",
                    "tags": [
                        "core-utils",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/secure-browser-launcher.ts",
                            "sha256": "82b75cdf32739e92bf83117a50ee28a753607f3ab8b96891790fc93340306a05"
                        }
                    ],
                    "importance": 0.58,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-system-encoding",
                    "slug": "core-utils-system-encoding",
                    "name": "`systemEncoding.ts` caches locale-derived encodings with chardet fallback",
                    "description": "`getSystemEncoding` interrogates Windows `chcp` output or UNIX locale variables, mapping code pages to encoding names, while `getCachedEncodingForBuffer` caches the result and falls back to `chardet` per buffer. The module gracefully handles missing locale data and logs warnings for unknown code pages.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/systemEncoding.ts",
                            "sha256": "8c798f7c048de14d589ce63786b03b0495e6b2d506ac6fe07dfc580aa676af6b"
                        }
                    ],
                    "importance": 0.55,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-user-account-manager",
                    "slug": "core-utils-user-account-manager",
                    "name": "`userAccountManager.ts` tracks active and historical Google accounts",
                    "description": "`UserAccountManager` reads and validates the cached accounts JSON under the storage directory, migrates the active account into an `old` array before replacing it, and counts unique logins for telemetry. It tolerates missing files and discards malformed content to keep auth state resilient.",
                    "tags": [
                        "core-utils",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/userAccountManager.ts",
                            "sha256": "5b1a6f3f28ee078709b2ecac033bca10f8094cfa7745b9b145960114768ed554"
                        }
                    ],
                    "importance": 0.57,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-installation-manager",
                    "slug": "core-utils-installation-manager",
                    "name": "`installationManager.ts` issues persistent installation IDs",
                    "description": "`InstallationManager` reads the installation UUID from disk, lazily generates a new ID with `randomUUID` if missing, and writes it back with recursive directory creation. On IO errors it logs and falls back to a fixed value, ensuring analytics still record runs without crashing.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/installationManager.ts",
                            "sha256": "672ee62bc26289f6733a200d6d53459fab72b1cf7b81e8dc6584b02eaf947666"
                        }
                    ],
                    "importance": 0.52,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-shell-readonly",
                    "slug": "core-utils-shell-readonly-checker",
                    "name": "`shellReadOnlyChecker.ts` vets commands for read-only shells",
                    "description": "`isShellCommandReadOnly` tokenises shell snippets, strips wrappers, rejects command substitution or redirection, and only allows commands from a safe allowlist with extra validation for `find`, `sed`, and `git` subcommands. It prevents tools from performing mutating operations when approval is required.",
                    "tags": [
                        "core-utils",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/shellReadOnlyChecker.ts",
                            "sha256": "85617a57279704e94885cd56b6e19b4b5eb6702055566e54d1d2eb4d7a8dc73f"
                        }
                    ],
                    "importance": 0.67,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-bfs-file-search",
                    "slug": "core-utils-bfs-file-search",
                    "name": "`bfsFileSearch.ts` performs batched breadth-first file discovery",
                    "description": "`bfsFileSearch` processes directories in batches of 15, respects ignore sets, and uses the `FileDiscoveryService` to skip ignored files while tracking visited directories. The queue head pointer avoids expensive array shifts, making project-wide searches fast and bounded.",
                    "tags": [
                        "core-utils",
                        "search"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/bfsFileSearch.ts",
                            "sha256": "1e9ed9f0c1681e17603ffa88ce4c3b0fd901846e124229261a1bc27e921349d0"
                        }
                    ],
                    "importance": 0.58,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-file-search",
                    "slug": "core-utils-file-search",
                    "name": "`fileSearch.ts` builds recursive or directory-scoped search engines",
                    "description": "`FileSearchFactory` produces either a recursive engine that crawls once, caches results, and uses AsyncFzf for fuzzy matching, or a directory engine that walks on demand. The module ties in gitignore/geminiignore rules, supports abort signals, and caches filtered results for subsequent queries.",
                    "tags": [
                        "core-utils",
                        "search"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/fileSearch.ts",
                            "sha256": "4ea79130f45794db56911c6b153a117bf3ca7e4fc85139bd6f0079fe4b5b2a5a"
                        }
                    ],
                    "importance": 0.62,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-request-tokenizer",
                    "slug": "core-utils-request-tokenizer",
                    "name": "`DefaultRequestTokenizer` counts text, image, and other parts with fallbacks",
                    "description": "`requestTokenizer.ts` groups request contents by type, feeds text through a batch `TextTokenizer`, estimates audio and other payloads, and falls back to JSON length when tokenizers fail. Its companion `imageTokenizer.ts` detects dimensions for PNG/JPEG/WebP/GIF/BMP/TIFF/HEIC images and enforces vision token caps, providing accurate budgeting before requests leave the CLI.",
                    "tags": [
                        "core-utils",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/requestTokenizer.ts",
                            "sha256": "839315eedb0dc0397153036c363b0c472f82be2fc1f424fb95a98de3be68a707"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/imageTokenizer.ts",
                            "sha256": "bd95c370cca3500891569f1609e75f8d7ccaec07726e55480fcee10112d30beb"
                        }
                    ],
                    "importance": 0.65,
                    "sectionId": "section-core-utils",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-core-utils-fatal-errors",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-fatal-errors",
                    "name": "FatalError hierarchy encodes CLI exit codes and friendly messages",
                    "description": "`utils/errors.ts` defines `FatalError` subclasses for auth (41), input (42), sandbox (44), config (52), and turn limits (53) so caller code can throw semantic failures without sprinkling magic numbers. Helpers like `isNodeError` and `getErrorMessage` safely unwrap unknown error objects when logging.",
                    "tags": [
                        "core-utils",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/errors.ts",
                            "sha256": "978681f4718176f51246c426b9d50db182dbcb14ea6d1de3b85b980eccfd4861"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.63
                },
                {
                    "id": "aspect-core-utils-safe-json-stringify",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-safe-json-stringify",
                    "name": "safeJsonStringify guards against circular structures",
                    "description": "`safeJsonStringify.ts` wraps `JSON.stringify` with a WeakSet visitor that replaces repeated objects with `[Circular]`, preventing crashes when logging rich diagnostics or tool results that include parent pointers.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/safeJsonStringify.ts",
                            "sha256": "ce451dc3c6d60fb4af7510591e75db442b0119d2916b95ab2f8edaed70e4dade"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.52
                },
                {
                    "id": "aspect-core-utils-safe-json-parse",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-safe-json-parse",
                    "name": "safeJsonParse repairs malformed JSON with jsonrepair",
                    "description": "`safeJsonParse.ts` first attempts `JSON.parse` and then retries via `jsonrepair` to auto-fix trailing commas or truncated strings. It logs both the original and repair errors before returning a fallback value so telemetry parsing never crashes the runtime.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/safeJsonParse.ts",
                            "sha256": "7276462234c4b82e9df81355d485261927a28a549b9cf3580f57ef7728afcb3c"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.55
                },
                {
                    "id": "aspect-core-utils-tool-invocation-matcher",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-tool-invocation-matcher",
                    "name": "Tool invocation matcher normalizes shell aliases",
                    "description": "`tool-utils.ts` exposes `doesToolInvocationMatch`, expanding both the tool instance name and constructor name, and special-casing shell tools so patterns like `ShellTool(git status)` match either declarative or imperative invocations. It compares command prefixes to support allow/deny lists without parsing full arguments.",
                    "tags": [
                        "core-utils",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/tool-utils.ts",
                            "sha256": "c507e8858ce175abf35dd051bd5ffaaf1441be79395c5bc8c650a08cc930c825"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.58
                },
                {
                    "id": "aspect-core-utils-text-binary-detection",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-text-binary-detection",
                    "name": "Binary detector flags buffers with null bytes",
                    "description": "`textUtils.ts` samples up to 512 bytes from a buffer and returns true if any byte equals 0x00, providing a cheap heuristic consumers can use before attempting text decoding or display.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/textUtils.ts",
                            "sha256": "0fd1e018efce3087296c143caa37d19c106d8c4f027cedb6c6c29c03368574fd"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.49
                },
                {
                    "id": "aspect-core-utils-yaml-parser",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-yaml-parser",
                    "name": "Minimal YAML parser supports subagent frontmatter",
                    "description": "`yaml-parser.ts` implements a small parser/stringifier for the subagent frontmatter format: it ignores comments, handles two-level indentation, arrays (`- item`), number/boolean coercion, and escapes quotes when emitting YAML so configs round-trip without pulling a heavy dependency.",
                    "tags": [
                        "core-utils",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/yaml-parser.ts",
                            "sha256": "c201296e665c32ba36ff89a83df2e8833865c31043a1a2619eb52e7d89e960af"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.56
                },
                {
                    "id": "aspect-core-utils-git-utils",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-git-utils",
                    "name": "Git utilities find repository roots without spawning git",
                    "description": "`gitUtils.ts` walks parent directories looking for `.git` entries (files or folders) to answer `isGitRepository` and `findGitRoot`. It uses synchronous `fs.existsSync` to keep the logic simple and avoids invoking git so it works inside sandboxes.",
                    "tags": [
                        "core-utils",
                        "git"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/gitUtils.ts",
                            "sha256": "28700fdb9c3ca7ddb9779a9f27255db23f3d85f89b6306742dc84a8321567af0"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.5
                },
                {
                    "id": "aspect-core-utils-system-encoding-cache",
                    "sectionId": "section-core-utils",
                    "slug": "core-utils-system-encoding-cache",
                    "name": "systemEncoding caches locale detection with buffer fallbacks",
                    "description": "`systemEncoding.ts` caches the first call to `getSystemEncoding`, translating Windows code pages via `windowsCodePageToEncoding` and using locale env vars or `locale charmap` on Unix. If detection fails it falls back to `chardet` per buffer, ensuring repeated file reads don\u2019t repeatedly spawn subprocesses.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/systemEncoding.ts",
                            "sha256": "8c798f7c048de14d589ce63786b03b0495e6b2d506ac6fe07dfc580aa676af6b"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.57
                },
                {
                    "id": "aspect-core-filesearch-cache",
                    "sectionId": "section-core-utils",
                    "slug": "core-filesearch-cache",
                    "name": "Filesearch caches reuse crawl and query results",
                    "description": "`utils/filesearch/crawlCache.ts` stores glob results keyed by directory/ignore/maxDepth with TTL-based eviction timers, while `result-cache.ts` keeps a prefix map so narrower queries start from previous hits. The caches keep workspace searches fast across repeated commands.",
                    "tags": [
                        "core-utils",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/crawlCache.ts",
                            "sha256": "5c2e39f59e588046cd9f736f2e936417124cd2eeeaa432c52b722754f0ffcec4"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/result-cache.ts",
                            "sha256": "8b8fd77115d18e1a70172e6b192229ac6d903a09f5db708fd19627acff820ccb"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.62
                },
                {
                    "id": "aspect-core-request-tokenizer",
                    "sectionId": "section-core-utils",
                    "slug": "core-request-tokenizer",
                    "name": "Request tokenizer singleton exposes text and image counters",
                    "description": "`utils/request-tokenizer/index.ts` exports the default tokenizer instance plus text/image tokenizers and dispose helpers, while `types.ts` defines the token breakdown/result interfaces. The CLI and SDK use it to share token budgeting logic across providers.",
                    "tags": [
                        "core-utils",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/index.ts",
                            "sha256": "5eac0a33e0c9653292b251a86c07a22c2e1c8c09890d4500f93d3f3acca3faf2"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/types.ts",
                            "sha256": "3ae1a9d4b6b04bf9c2601420e880d847ee44dff254a31b8c77d926ebc4d646bb"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.59
                },
                {
                    "id": "aspect-core-format-memory",
                    "sectionId": "section-core-utils",
                    "slug": "core-format-memory",
                    "name": "formatMemoryUsage normalizes byte counts into human units",
                    "description": "`utils/formatters.ts` provides a single helper that renders bytes as KB/MB/GB with fixed precision, ensuring telemetry and status messages report memory usage consistently across the CLI and core services.",
                    "tags": [
                        "core-utils",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/formatters.ts",
                            "sha256": "0beb971cd19f8503ed7e8e8b2f55873f6cb9197996a1e6f23ed518f74f8dbcb8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                }
            ]
        },
        {
            "id": "section-mcp-integration",
            "slug": "mcp-integration",
            "title": "MCP Integration",
            "entries": [
                {
                    "id": "aspect-mcp-oauth-utils",
                    "slug": "mcp-oauth-utils",
                    "name": "`oauth-utils.ts` discovers OAuth metadata for MCP servers",
                    "description": "`OAuthUtils` builds both root and path-aware well-known URLs, fetches protected resource and authorization server metadata, and parses `WWW-Authenticate` headers to recover discovery endpoints. Helper methods convert metadata into `MCPOAuthConfig` and derive resource parameters for SSE endpoints.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/oauth-utils.ts",
                            "sha256": "667afc0f7394cb74234f9c803b96472d6b92c7cb2c69b2ba371c2a52a705ba02"
                        }
                    ],
                    "importance": 0.63,
                    "sectionId": "section-mcp-integration",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-mcp-oauth-provider",
                    "slug": "mcp-oauth-provider",
                    "name": "`MCPOAuthProvider` handles PKCE, local callbacks, and token refresh",
                    "description": "`oauth-provider.ts` can dynamically register clients, discover configuration from MCP URLs, spin up a localhost callback server, and launch the browser securely. It generates PKCE code verifiers, exchanges authorization codes for tokens, persists them via storage, and injects them into SSE transports when needed.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/oauth-provider.ts",
                            "sha256": "630ba3cbf315dd29351ec405e8bca31825d0d1cd1f43ca4acbe4eeac0a5096d9"
                        }
                    ],
                    "importance": 0.68,
                    "sectionId": "section-mcp-integration",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-mcp-token-storage",
                    "slug": "mcp-token-storage",
                    "name": "`MCPOAuthTokenStorage` persists per-server credentials with expiry checks",
                    "description": "`oauth-token-storage.ts` uses the shared storage directory to write `OAuthCredentials` JSON with 0600 permissions, merges updates per server, and exposes helpers to remove or clear tokens. The accompanying `BaseTokenStorage` enforces credential validation and sanitises server names while providing expiry buffers.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/oauth-token-storage.ts",
                            "sha256": "b098413cc2ab7266abd78892f489e8c9e89b8a564f1e274614a84b0d7f561849"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/token-storage/base-token-storage.ts",
                            "sha256": "f8b4e96291f4b5aec9c32a09f394c49179e6b8acc79a67d1938a0d5b4f66d4a4"
                        }
                    ],
                    "importance": 0.6,
                    "sectionId": "section-mcp-integration",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-mcp-add",
                    "slug": "cli-mcp-add-command",
                    "name": "`gemini mcp add` registers stdio/http/sse servers with scoped settings",
                    "description": "`commands/mcp/add.ts` parses transport-specific flags, converts env and header arrays into maps, and writes server definitions into user or workspace settings via `loadSettings`. It supports include/exclude tool lists, trust flags, timeouts, and logs whether a server was created or updated.",
                    "tags": [
                        "mcp",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/mcp/add.ts",
                            "sha256": "d853421c0c2744355f96384ce44bd6f3fdca77ac49a855d8615c68695d29fa67"
                        }
                    ],
                    "importance": 0.58,
                    "sectionId": "section-mcp-integration",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-mcp-list",
                    "slug": "cli-mcp-list-command",
                    "name": "`gemini mcp list` merges extension servers and probes connectivity",
                    "description": "`commands/mcp/list.ts` loads merged MCP server configs from settings and installed extensions, then spins up transports with `createTransport` and a temporary MCP client to ping each server. It colourises output with connection status indicators so operators can spot misconfigured endpoints.",
                    "tags": [
                        "mcp",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/commands/mcp/list.ts",
                            "sha256": "cf8643d0abeaac28c4af6fb61dad53dd01851ca9081b3f93140e91fbdabc2acd"
                        }
                    ],
                    "importance": 0.6,
                    "sectionId": "section-mcp-integration",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-mcp-client-class",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-client-class",
                    "name": "`McpClient` connects, discovers, and tracks a single MCP server",
                    "description": "`projects/qwen-code/packages/core/src/tools/mcp-client.ts` defines `McpClient`, which connects via `createTransport()` (STDI/O, SSE, or HTTP), registers roots capability for workspace folders, and wires `client.onerror` to flip `MCPServerStatus` back to `DISCONNECTED`. After a successful `connect()` it calls `discover()` to fetch prompts and tools, registering each tool with the shared `ToolRegistry` so the CLI and IDE share one connection lifecycle.",
                    "tags": [
                        "mcp",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.72
                },
                {
                    "id": "aspect-mcp-status-tracking",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-status-tracking",
                    "name": "MCP status maps expose listener hooks and discovery state",
                    "description": "`mcp-client.ts` keeps a `Map<string, MCPServerStatus>` plus `mcpServerRequiresOAuth` flags, offers `addMCPStatusChangeListener()`/`removeMCPStatusChangeListener()` callbacks, and surfaces global discovery progress through `(get|set)MCPDiscoveryState`. Tool loaders use these hooks to drive UI indicators for connection progress, surfacing `IN_PROGRESS`/`COMPLETED` states while still letting code query individual server health.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-mcp-discover-multi",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-discover-multi",
                    "name": "`discoverMcpTools` fans out across configured servers and CLI overrides",
                    "description": "`mcp-client.ts` `discoverMcpTools()` marks discovery as `IN_PROGRESS`, plumbs `mcpServerCommand` through `populateMcpServerCommand()` (parsing shell args with `shell-quote`) to append an ad-hoc server named `mcp`, then `Promise.all`s `connectAndDiscover()` for each entry. Completion toggles the state back to `COMPLETED`, so orchestrators know when registry hydration finished.",
                    "tags": [
                        "mcp",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.61
                },
                {
                    "id": "aspect-mcp-connect-and-discover",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-connect-and-discover",
                    "name": "`connectAndDiscover` ties status updates to prompt/tool registration",
                    "description": "`mcp-client.ts` `connectAndDiscover()` drives a server lifecycle: it emits `CONNECTING`, calls `connectToMcpServer()` to obtain a raw `Client`, then runs `discoverPrompts()` and `discoverTools()`. If either returns results it promotes the status to `CONNECTED` and registers tools with the registry; failures close the client, log the error via `getErrorMessage()`, and set `DISCONNECTED`, ensuring UI state mirrors discovery outcomes.",
                    "tags": [
                        "mcp",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.67
                },
                {
                    "id": "aspect-mcp-transport-selection",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-transport-selection",
                    "name": "`createTransport` picks HTTP, SSE, or stdio with injected OAuth tokens",
                    "description": "`mcp-client.ts` `createTransport()` first routes Google ADC configs through `GoogleCredentialProvider`, then checks stored OAuth credentials (`MCPOAuthTokenStorage`) or configured tokens to attach `Authorization: Bearer` headers on `StreamableHTTPClientTransport` and `SSEClientTransport`. If no URLs exist it falls back to `StdioClientTransport`, piping stderr to debug logs when `debugMode` is enabled, so every server shape shares a consistent transport factory.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.7
                },
                {
                    "id": "aspect-mcp-auto-oauth",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-auto-oauth",
                    "name": "401 handling triggers automatic OAuth discovery and transport retry",
                    "description": "Within `connectToMcpServer()` `mcp-client.ts` traps 401 errors, flags `mcpServerRequiresOAuth`, and uses `extractWWWAuthenticateHeader()` + `OAuthUtils.discoverOAuthConfig()` to hydrate credentials. `handleAutomaticOAuth()` invokes `MCPOAuthProvider.authenticate()` and on success `createTransportWithOAuth()` retries the connection with injected tokens, falling back to explicit `/mcp auth` guidance when automation fails.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.69
                },
                {
                    "id": "aspect-mcp-calltool-timeouts",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-calltool-timeouts",
                    "name": "`connectToMcpServer` patches callTool timeouts and mirrors workspace roots",
                    "description": "`connectToMcpServer()` (in `mcp-client.ts`) wraps the SDK `Client` to watch `WorkspaceContext.onDirectoriesChanged`, notifying `roots/list_changed` so servers see new project folders. It monkey-patches `client.callTool` to enforce the configured timeout (`MCP_DEFAULT_TIMEOUT_MSEC`), ensuring long-running MCP invocations respect CLI budgets while still supporting standard request APIs.",
                    "tags": [
                        "mcp",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.66
                },
                {
                    "id": "aspect-mcp-discover-tools",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-discover-tools",
                    "name": "`discoverTools` filters declarations and wraps them as `DiscoveredMCPTool`s",
                    "description": "`mcp-client.ts` `discoverTools()` uses `mcpToTool()` to fetch function declarations, skips entries based on `includeTools`/`excludeTools`, and validates JSON Schemas via `hasValidTypes()` before instantiating `DiscoveredMCPTool` with server trust metadata and timeouts. Invalid schemas log a warning so operators can nudge server owners without breaking discovery.",
                    "tags": [
                        "mcp",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-mcp-discover-prompts",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-discover-prompts",
                    "name": "`discoverPrompts` registers server prompts with invoke wrappers",
                    "description": "`mcp-client.ts` `discoverPrompts()` queries `prompts/list`, skips servers without prompt capability, and for each declaration registers it with `PromptRegistry`, attaching an `invoke` closure that delegates to `invokeMcpPrompt()`. This lets CLI slash commands surface remote prompt names with consistent invocation semantics.",
                    "tags": [
                        "mcp",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.64
                },
                {
                    "id": "aspect-mcp-invoke-prompt",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-invoke-prompt",
                    "name": "`invokeMcpPrompt` wraps `prompts/get` with schema validation",
                    "description": "`mcp-client.ts` `invokeMcpPrompt()` requests `prompts/get` with named arguments, validating the response against `GetPromptResultSchema` so downstream code receives typed prompt bodies and steps. Errors other than `Method not found` are logged with context, helping diagnose per-server failures while allowing prompt execution to surface to users.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.ts",
                            "sha256": "4d20a9480b46e6f812fa2bc55b5f6dfbe21b19a59314098c5cf7f1e093a76f08"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-mcp-google-credential-provider",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-google-credential-provider",
                    "name": "GoogleCredentialProvider supplies ADC tokens for MCP transports",
                    "description": "`projects/qwen-code/packages/core/src/mcp/google-auth-provider.ts` implements `OAuthClientProvider` for Google-hosted MCP endpoints: it validates hosts against allowlists, enforces scopes, lazy-loads ADC credentials via `google-auth-library`, and returns bearer tokens so `createTransport()` can authenticate SSE/HTTP transports without manual OAuth flows.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/google-auth-provider.ts",
                            "sha256": "a6b7b57b5a8b0794d593e07c75b67b31f0f690ff087abf3c2729d9c702538a80"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-mcp-oauth-credential-types",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-oauth-credential-types",
                    "name": "MCP OAuth credential types define token store contract",
                    "description": "`mcp/token-storage/types.ts` specifies `OAuthToken`, `OAuthCredentials`, and the `TokenStorage` interface (`getCredentials`, `setCredentials`, `listServers`, `clearAll`). MCP OAuth storage implementations rely on these shapes so the CLI, sandbox, and IDE share the same persistence contract.",
                    "tags": [
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/token-storage/types.ts",
                            "sha256": "b7d7d7f2c9e98fafb7fa97a9e6e1420725d574b2634c96022a7aa23aeadd5b21"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.48
                },
                {
                    "id": "aspect-mcp-server-prompt-registry",
                    "sectionId": "section-mcp-integration",
                    "slug": "mcp-server-prompt-registry",
                    "name": "getMCPServerPrompts forwards registry lookups per server",
                    "description": "`mcp-prompts.ts` provides a thin adapter that fetches the CLI's `PromptRegistry` from config and returns prompts scoped to a given MCP server name, defaulting to an empty list when the registry is absent. It is the shared entry point used by MCP loaders and slash commands to surface server-specific prompt templates.",
                    "tags": [
                        "mcp",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/prompts/mcp-prompts.ts",
                            "sha256": "cdd35907e67fb31eb37d26d61ed0c137969d473ab497862534f6f0a7f9973007"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                }
            ]
        },
        {
            "id": "section-cli-utils",
            "title": "CLI Utilities",
            "slug": "cli-utils",
            "entries": [
                {
                    "id": "aspect-cli-utils-settings-schema-tools",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-settings-schema-tools",
                    "name": "Settings utils flatten schema and track pending edits",
                    "description": "`projects/qwen-code/packages/cli/src/utils/settingsUtils.ts` flattens the nested settings schema into dot-key lookups, groups definitions by category, and exposes helpers for restart-required flags, dialog filtering, and validating keys. It also updates pending settings via deep copy setters so the TUI can stage edits per scope before calling `saveModifiedSettings`, keeping user/workspace overrides and defaults in sync.",
                    "tags": [
                        "cli-runtime",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/settingsUtils.ts",
                            "sha256": "3c42bbe1f069d511d799e0c6f00bb18587a10b475c6def0ada18d72d19e6fcb0"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-utils-dialog-scope-labels",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-dialog-scope-labels",
                    "name": "Dialog scope helpers surface cross-scope warnings",
                    "description": "`projects/qwen-code/packages/cli/src/utils/dialogScopeUtils.ts` defines stable labels for user/workspace/system scopes and inspects loaded settings to see where a key is already set. The helpers build radio-button option lists and append \"(Modified in \u2026)\" hints so dialogs warn when a value is inherited or overridden elsewhere.",
                    "tags": [
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/dialogScopeUtils.ts",
                            "sha256": "cf999cac80d415af05d845684d346635b7367547474d4f858e7fd59acaf9a888"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-utils-installation-info",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-installation-info",
                    "name": "Installation detector infers package manager and update command",
                    "description": "`projects/qwen-code/packages/cli/src/utils/installationInfo.ts` resolves the CLI entrypoint, checks for git clones, npx/pnpx/bunx shims, and probes workspace lockfiles to decide whether the binary came from npm, yarn, pnpm, bun, Homebrew, or a local checkout. It returns an `updateCommand` and messaging that downstream auto-update code uses to either run the right global install or tell the user to `git pull`.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/installationInfo.ts",
                            "sha256": "772f72f73dc930d5ac05f5a8f1f08495f98d5a95e727c8108308b07ba25d1ba7"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.64
                },
                {
                    "id": "aspect-cli-utils-auto-update-handler",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-auto-update-handler",
                    "name": "Auto-update handler runs upgrade command and broadcasts status",
                    "description": "`projects/qwen-code/packages/cli/src/utils/handleAutoUpdate.ts` merges release notes with installer guidance, emits update events, and\u2014when auto updates are allowed\u2014spawns the package manager command returned by `getInstallationInfo()`. It listens for stderr/exit, rewrites `@latest` to the actual version or nightly track, and fires success/failure events so the TUI can show toast messages while keeping manual fallback instructions nearby.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/handleAutoUpdate.ts",
                            "sha256": "ad62e3f332b6c4b41dfc4c3c3843cb0f307614b51e4efc10d01785cc0a3460cf"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-utils-update-event-bus",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-update-event-bus",
                    "name": "Update event bus decouples status banners",
                    "description": "`projects/qwen-code/packages/cli/src/utils/updateEventEmitter.ts` exports a shared Node `EventEmitter` that bridges background version checks with UI components. `handleAutoUpdate()` pushes `update-received`, `update-success`, and `update-failed`, while Ink components subscribe via `setUpdateHandler()` so notification drawers and history panes react without tight coupling.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/updateEventEmitter.ts",
                            "sha256": "8a738c0d2639aab84e663035f5910bb95dfae9357f1993e63c1b806259c8dad8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.35
                },
                {
                    "id": "aspect-cli-utils-read-stdin-guardrails",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-read-stdin-guardrails",
                    "name": "readStdin enforces timeout and 8\u202fMB guardrail",
                    "description": "`projects/qwen-code/packages/cli/src/utils/readStdin.ts` reads UTF-8 data from stdin, giving pipelines ~500\u202fms to begin streaming before assuming nothing was piped. It caps input at 8\u202fMB, truncates with a warning, and removes listeners on end/error so non-interactive commands can safely consume heredocs without hanging the CLI.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/readStdin.ts",
                            "sha256": "1cfcd029424f482f2748e619368417e5dc0efc0a62cca139e81a78a432745bed"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-utils-cleanup-hooks",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-cleanup-hooks",
                    "name": "Cleanup utilities register exit hooks and purge checkpoints",
                    "description": "`projects/qwen-code/packages/cli/src/utils/cleanup.ts` keeps a list of async/ sync teardown callbacks, running them on exit so subsystems can close resources. Its `cleanupCheckpoints()` helper also uses the shared core `Storage` abstraction to wipe `.qwen/tmp/<hash>/checkpoints`, preventing stale state after failed runs or sandbox crashes.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/cleanup.ts",
                            "sha256": "317ed871c28a74a812a2a7cda938f03f36dc769495eda678ba7099820732ebff"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-utils-startup-risk-warnings",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-startup-risk-warnings",
                    "name": "Startup warnings flag home or root workspaces",
                    "description": "`projects/qwen-code/packages/cli/src/utils/userStartupWarnings.ts` resolves the workspace and home directories and warns when they match (home directory) or the workspace is the filesystem root. The checks run asynchronously and surface advisory strings so the CLI can discourage running the agent against entire home volumes or `/`, which would send massive context snapshots.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/userStartupWarnings.ts",
                            "sha256": "44216b50646d25a6e4321b077d5d7b74daf2b95655f357b2c17327b71941cc02"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-utils-warning-file-reader",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-warning-file-reader",
                    "name": "Warnings file reader replays build health messages",
                    "description": "`projects/qwen-code/packages/cli/src/utils/startupWarnings.ts` looks for the temp file that `check-build-status.js` writes, splits it into lines, and deletes the file once consumed. If deletion fails it appends a follow-up warning, keeping the CLI banner in sync with build health without blocking startup.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/startupWarnings.ts",
                            "sha256": "02445ba071ca5ee157a897d21d59c095ef0f1597d373592b1b014ed8fa7e53e3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-cli-utils-resolve-path",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-resolve-path",
                    "name": "Path resolver expands home and %USERPROFILE%",
                    "description": "`projects/qwen-code/packages/cli/src/utils/resolvePath.ts` normalizes user input by expanding `~` and Windows `%USERPROFILE%` prefixes before running `path.normalize()`. The helper lets config files and commands accept cross-platform shortcuts while the runtime always works with absolute, canonical paths.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/resolvePath.ts",
                            "sha256": "94fedfd5aea0e9aece2a6d58a46a273636422509acb5ff1cad6b2a29efee0730"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.36
                },
                {
                    "id": "aspect-cli-utils-git-helpers",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-git-helpers",
                    "name": "Git helpers detect remotes, repo roots, and latest release",
                    "description": "`projects/qwen-code/packages/cli/src/utils/gitUtils.ts` shells out to `git remote -v`/`git rev-parse` to discover GitHub remotes and repo roots, parses origin URLs into owner/repo, and fetches the latest `google-github-actions/run-gemini-cli` release via the GitHub REST API (respecting proxies). The CLI reuses these helpers to show upgrade instructions and to scope workspace trust prompts.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/gitUtils.ts",
                            "sha256": "27fd17a94f218d53767c533939193ca50417090fc04d906e9785b7c75949a9bd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-utils-check-exhaustive",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-check-exhaustive",
                    "name": "Exhaustiveness guards throw on unexpected enum values",
                    "description": "`projects/qwen-code/packages/cli/src/utils/checks.ts` provides `assumeExhaustive()`/`checkExhaustive()` helpers that the CLI uses in switch statements to satisfy TypeScript exhaustiveness and still fail loudly at runtime. It prevents silent fallthrough when new enum members are added across the TUI and command processors.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/checks.ts",
                            "sha256": "21a181024fd7f692d2e064f2b60258d1dd556c5b428622dd23bff7e8850d1cef"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.3
                },
                {
                    "id": "aspect-cli-utils-app-events",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-app-events",
                    "name": "App event emitter unifies debug console toggles",
                    "description": "`projects/qwen-code/packages/cli/src/utils/events.ts` exports a shared `appEvents` emitter with typed events like `open-debug-console` and `log-error`. Ink components and background services publish/subscribe through it so tracing windows, toast notifications, and telemetry logging stay decoupled.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/events.ts",
                            "sha256": "35fa1aebb772c13021116ce24b68962a97f179269d6afc9c4fd813c70ed7771d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.38
                },
                {
                    "id": "aspect-cli-utils-version-helper",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-version-helper",
                    "name": "Version helper prefers CLI_VERSION override",
                    "description": "`projects/qwen-code/packages/cli/src/utils/version.ts` reads the bundled package.json via `getPackageJson()` and falls back to the `CLI_VERSION` env var when the bundle injects version information at build time. This keeps banners and telemetry accurate whether the CLI runs from `npm`, a nightly tarball, or a custom image.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/version.ts",
                            "sha256": "2e4a33f5f113e65e868464a66532f0b30b637943829e1ee3b960aba4d8d475ea"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.33
                },
                {
                    "id": "aspect-cli-utils-package-metadata",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-package-metadata",
                    "name": "Package metadata loader caches monorepo package.json",
                    "description": "`projects/qwen-code/packages/cli/src/utils/package.ts` uses `read-package-up` with ESM-friendly globals to locate the nearest package.json, caches it in-memory, and exposes the optional `config.sandboxImageUri`. Version, sandbox image, and other metadata flow through this hook so multiple utilities reuse the same lookup without repeated IO.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/package.ts",
                            "sha256": "b585831b09dc01b18af017b5177de793c755f083b17385e308bf705ebad80147"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.4
                },
                {
                    "id": "aspect-cli-config-extension-variables",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-config-extension-variables",
                    "name": "Extension variable schema hydrates `${...}` templates safely",
                    "description": "`config/extensions/variableSchema.ts` defines the built-in variable catalog (`extensionPath`, path separators), and `variables.ts` validates required keys then replaces `${name}` placeholders recursively across strings, arrays, and objects so extension manifests can inject workspace data without arbitrary eval.",
                    "tags": [
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/extensions/variableSchema.ts",
                            "sha256": "fedc38140ba3c22c926ea1136755746d0156854619fd94e6d14592b34b2eab1c"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/extensions/variables.ts",
                            "sha256": "749d4cadc03b2831bd526231982371d4856cb7f0800894f35ca62b7ba87d1839"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.61
                },
                {
                    "id": "aspect-cli-config-extension-tests",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-config-extension-tests",
                    "name": "Extension loader tests verify installs, context files, and variable hydration",
                    "description": "`config/extension.test.ts` spins up temporary workspaces to assert `loadExtensions()` preserves install paths, filters disabled entries, hydrates `${extensionPath}` variables, and flags ignored files through `annotateActiveExtensions`, while `config/extensions/variables.test.ts` locks `hydrateString()` placeholder replacement so manifest templates get resolved safely.",
                    "tags": [
                        "testing",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/extension.test.ts",
                            "sha256": "b94dbe34a5f8de8addecb57de73ab92e5bf098a7871c6c41860cafffbeda6523"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/config/extensions/variables.test.ts",
                            "sha256": "7babb24930ccf4b29f75ecf082ba358fddb611826ed7811794c99bb614c8426f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-utils-error-messages",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-error-messages",
                    "name": "getErrorMessage normalizes unknown error payloads",
                    "description": "`errors.ts` surfaces a single helper that unwraps `Error` instances or stringifies unknown values, giving CLI command handlers a consistent way to print failures.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/errors.ts",
                            "sha256": "4ce02a9625ddc29e820782921e0223d3fa5a9554d2885d21cb3921325b85bfce"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.28
                },
                {
                    "id": "aspect-cli-utils-spawn-wrapper",
                    "sectionId": "section-cli-utils",
                    "slug": "cli-utils-spawn-wrapper",
                    "name": "spawnWrapper exposes Node's spawn for easier mocking",
                    "description": "`spawnWrapper.ts` re-exports `child_process.spawn` so tests and sandbox adapters can stub process creation without touching Node's global module cache.",
                    "tags": [
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/utils/spawnWrapper.ts",
                            "sha256": "3259eb2cb3e2a388bbcd996533080d9f140be9770b79bdb1e317d76307244d1d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.27
                }
            ]
        },
        {
            "id": "section-core-foundations",
            "title": "Core Foundations",
            "slug": "core-foundations",
            "entries": [
                {
                    "id": "aspect-core-foundations-lru-cache",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-lru-cache",
                    "name": "LruCache keeps tiny hot sets without external deps",
                    "description": "`projects/qwen-code/packages/core/src/utils/LruCache.ts` wraps a Map to provide most-recently-used eviction for lightweight caches, deleting the oldest key whenever the configured capacity is exceeded. Core services reuse it where memoization needs eviction without pulling in heavier cache libraries.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/LruCache.ts",
                            "sha256": "d1999f9d3c64fc43a800f45896c9445efffc94ed69380548485a9a6a2387b409"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.32
                },
                {
                    "id": "aspect-core-foundations-browser-launch",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-browser-launch",
                    "name": "Browser heuristics block OAuth prompts in CI and SSH",
                    "description": "`projects/qwen-code/packages/core/src/utils/browser.ts` mirrors Google Cloud SDK logic to decide when it is safe to open a browser: it rejects CI shells, noninteractive Debian installs, SSH sessions without DISPLAY, and `BROWSER` blocklist entries. Qwen OAuth flows rely on it to avoid hanging headless environments.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/browser.ts",
                            "sha256": "7938335726c5de7b27d312bbfac3b81d1ce03e4b8755881405a540fbaaf886f6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-core-foundations-editor-bridge",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-editor-bridge",
                    "name": "Editor bridge detects CLI editors and spawns diff commands",
                    "description": "`projects/qwen-code/packages/core/src/utils/editor.ts` probes PATH for supported editors, verifies sandbox compatibility, and builds per-editor diff command lines (including rich Vim instructions and Emacs Lisp). `openDiff()` then spawns GUI or terminal editors with the right flags so diff reviews work consistently across platforms.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/editor.ts",
                            "sha256": "bc7044e1d5dc44e74964e0635a47eb99adc506a9f62948cc7d2dfbbc550a2fbc"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-core-foundations-error-reporting",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-error-reporting",
                    "name": "Error reporter writes JSON crash dumps with context",
                    "description": "`projects/qwen-code/packages/core/src/utils/errorReporting.ts` serializes thrown errors plus optional chat/context payloads into timestamped files under the OS temp directory. It falls back to minimal reports when JSON stringification fails and logs explicit guidance, giving support teams reproducible artifacts for user-reported crashes.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/errorReporting.ts",
                            "sha256": "78a8f367c8ea7341dba36b3b4ab92cb76689943786f086d1da460747af6d7057"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-core-foundations-fetch-wrapper",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-fetch-wrapper",
                    "name": "fetchWithTimeout wraps global fetch with Abort and error codes",
                    "description": "`projects/qwen-code/packages/core/src/utils/fetch.ts` adds helpers to classify private IPs and implements `fetchWithTimeout()` using `AbortController`. It converts aborts into a custom `FetchError` (`ETIMEDOUT`) and normalizes other failures via `getErrorMessage`, so tool calls can provide clearer diagnostics when web requests stall.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/fetch.ts",
                            "sha256": "472a4d46b522e8a8e15a49bce33a3bfc5f6a3d568dbdce6b68a54fe38dd3a1cd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-core-foundations-file-utils",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-file-utils",
                    "name": "File utils detect binary formats and produce LLM-safe slices",
                    "description": "`projects/qwen-code/packages/core/src/utils/fileUtils.ts` checks extensions against known binary lists, samples file bytes to confirm, and streams text files with line limits and truncation metadata. It leverages mime lookups to classify PDFs/images and returns `PartUnion` payloads plus display strings, powering tools like `/read` and contextual file summaries.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/fileUtils.ts",
                            "sha256": "ad501c6bd14ba5317a824d42635457121ecba1414199740f8e6aad030fb94bd4"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.74
                },
                {
                    "id": "aspect-core-foundations-response-normalizer",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-response-normalizer",
                    "name": "Response utilities extract text and function call JSON",
                    "description": "`projects/qwen-code/packages/core/src/utils/generateContentResponseUtilities.ts` pulls `Part` text segments, surfaces structured function calls, and serializes them as pretty JSON. The helpers combine text and tool invocations into a single string so logs, telemetry, and CLI output stay consistent across streaming and non-streaming responses.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/generateContentResponseUtilities.ts",
                            "sha256": "b507334823ad9af23b65524c1903bc0d0636e02ccf518a30fca726f95f7c52f0"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-core-foundations-get-pty",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-get-pty",
                    "name": "getPty lazily loads node-pty variants with graceful fallback",
                    "description": "`projects/qwen-code/packages/core/src/utils/getPty.ts` attempts to import `@lydell/node-pty` (and recorded platform builds) before falling back to legacy `node-pty`, returning the module plus an identifier. Shell tools call it to attach PTY sessions while still running in environments where no PTY dependency is available.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/getPty.ts",
                            "sha256": "dc2b69d31a0cef5b78a0164a282551541c6d917a4e16ac8e279957412ab6b15f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "id": "aspect-core-foundations-gitignore-parser",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-gitignore-parser",
                    "name": "GitIgnoreParser merges git and .qwenignore filters",
                    "description": "`projects/qwen-code/packages/core/src/utils/gitIgnoreParser.ts` loads `.gitignore` plus `.git/info/exclude`, auto-adds `.git`, and exposes `isIgnored()`/`getPatterns()` over normalized POSIX paths. It borrows `isGitRepository()` to skip non-git projects, ensuring context builders and file discovery honor the same ignore rules as Git.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/gitIgnoreParser.ts",
                            "sha256": "7ccad5ef12deeae0b34aeeff5b32338f0ec86d31e9330e6df113b6e9c77035e1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-core-foundations-language-detection",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-language-detection",
                    "name": "Language detection maps extensions to display names",
                    "description": "`projects/qwen-code/packages/core/src/utils/language-detection.ts` maintains a curated map from file extensions (and special filenames like `.gitignore`) to human-readable language labels. Tools reuse it for syntax highlighting metadata and telemetry classification without pulling in heavyweight language detectors.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/language-detection.ts",
                            "sha256": "15cae8d1f074007d9ac4e485fe13f98a955bfddb4267e950f190b1a169485d75"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-core-foundations-openai-logger",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-openai-logger",
                    "name": "OpenAILogger persists request/response transcripts with system info",
                    "description": "`projects/qwen-code/packages/core/src/utils/openaiLogger.ts` creates a logs/openai folder, writes interaction JSON with UUID filenames, and includes host/platform metadata. It exposes `getLogFiles()`/`readLogFile()` so developers can inspect raw traffic when debugging OpenAI integrations.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/openaiLogger.ts",
                            "sha256": "3a6410a658ce9b35cd3a96a62d3ae0946df2b89f49a53ebd95e970255334958c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-core-foundations-part-utils",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-part-utils",
                    "name": "Part utilities flatten responses and rewrite text segments",
                    "description": "`projects/qwen-code/packages/core/src/utils/partUtils.ts` converts mixed `PartListUnion` values into strings, annotating non-text parts when verbose. It offers `flatMapTextParts()` and `appendToLastTextPart()` so prompt builders can transform text segments without losing structured tool calls or inline data.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/partUtils.ts",
                            "sha256": "da2a10f3d405bf958a0a0a321b01b77e944f6ad9caf15b7a8193dc0852bf901f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-core-foundations-path-reader",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-path-reader",
                    "name": "Path reader walks workspace directories with ignore enforcement",
                    "description": "`projects/qwen-code/packages/core/src/utils/pathReader.ts` resolves absolute or relative paths against the active workspace roots, filters them through `FileDiscoveryService` respect settings, and either streams a single file via `processSingleFileContent` or recursively emits directory contents with section headers. It underpins `/read` and planner context hydration.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/pathReader.ts",
                            "sha256": "3ebadd419e24428303dadaa20c72b0de91bd7ff2d090db27ab74a851ddcd9b24"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-core-foundations-paths",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-paths",
                    "name": "Path helpers tilt human-friendly display and hashing",
                    "description": "`projects/qwen-code/packages/core/src/utils/paths.ts` houses `tildeifyPath`, `shortenPath`, shell escaping/unescaping, and `getProjectHash()`, giving consistent CLI output and deterministic cache keys. It also defines constants like `.qwen` directories and the Google account credential filename shared across services.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/paths.ts",
                            "sha256": "26134ff72e03f10d35e363f48853f535ef992952dd16e65828e6d0f4d189bfb9"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-core-foundations-safe-json-parse",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-safe-json-parse",
                    "name": "Safe JSON parse repairs malformed payloads with jsonrepair",
                    "description": "`projects/qwen-code/packages/core/src/utils/safeJsonParse.ts` first attempts `JSON.parse`, then feeds failures through `jsonrepair` to fix common issues like trailing commas before retrying. It logs both the original and repaired errors and returns a caller-supplied fallback, hardening tool outputs that contain slightly invalid JSON.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/safeJsonParse.ts",
                            "sha256": "7276462234c4b82e9df81355d485261927a28a549b9cf3580f57ef7728afcb3c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-core-foundations-schema-validator",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-schema-validator",
                    "name": "SchemaValidator wraps Ajv with format coercion and boolean fixes",
                    "description": "`projects/qwen-code/packages/core/src/utils/schemaValidator.ts` configures Ajv with `coerceTypes` and `ajv-formats`, compiles schemas on demand, then retries validation after lowering \"True\"/\"False\" string literals. It returns human-readable error strings so tool invocations and MCP payloads can report precise schema mismatches.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/schemaValidator.ts",
                            "sha256": "835bb3a6bdc9a5a946a1d29231afb914eb896b5fd219be4cc1c33b74fc90d797"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-core-foundations-session-id",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-session-id",
                    "name": "Session helper generates per-run UUIDs",
                    "description": "`projects/qwen-code/packages/core/src/utils/session.ts` exports a single `sessionId` generated via `randomUUID()`, giving telemetry and log records a consistent run identifier without wiring Config dependencies through every caller.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/session.ts",
                            "sha256": "fc7d5fc8dd9af85e10c255e4387cb17c8a62dee00782a9cfb0c4dc7e380caee4"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.3
                },
                {
                    "id": "aspect-core-foundations-shell-utils",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-shell-utils",
                    "name": "Shell utils resolve platform shells and enforce read-only policies",
                    "description": "`projects/qwen-code/packages/core/src/utils/shell-utils.ts` picks the right shell binary (`cmd`, PowerShell, or bash), escapes arguments per shell rules, splits chained commands, and extracts root executables for policy checks. Combined with `isShellCommandReadOnly`, it ensures tool invocations obey approval and readonly gating across Windows and Unix.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/shell-utils.ts",
                            "sha256": "a0cda65ee469143a0bb6913cf38cce96d1e1d8d8cf4027b3a30056dc74b591ed"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.66
                },
                {
                    "id": "aspect-core-foundations-filesearch-crawler",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-filesearch-crawler",
                    "name": "File search crawler walks trees with caching and ignore filters",
                    "description": "`projects/qwen-code/packages/core/src/utils/filesearch/crawler.ts` wraps `fdir` to recursively list files from a crawl directory, skipping ignored folders via the custom `Ignore` class and caching results by directory, fingerprint, and depth. Subsequent searches reuse cached listings to speed up globbing across large workspaces.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/crawler.ts",
                            "sha256": "4d87f929eb7acb938ccefa12ed0bf84af4febb2ca3134c361528e18c8d95a686"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-core-foundations-filesearch-ignore",
                    "sectionId": "section-core-foundations",
                    "slug": "core-foundations-filesearch-ignore",
                    "name": "Ignore builder merges git, .qwenignore, and heuristic patterns",
                    "description": "`projects/qwen-code/packages/core/src/utils/filesearch/ignore.ts` loads `.gitignore` and `.qwenignore`, adds `.git` plus supplied directories, and splits patterns into directory vs file matchers (guessing directories when the glob lacks an extension). It exposes fingerprints used by the crawler cache so ignore changes invalidate stale listings.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/ignore.ts",
                            "sha256": "60ab1f55b9d975d7c9521da976efa6b8d4e8ef83363cb584cde4cc6d348f19cd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-core-package-entrypoints",
                    "sectionId": "section-core-foundations",
                    "slug": "core-package-entrypoints",
                    "name": "Core package entrypoints re-export config, services, and tools",
                    "description": "`packages/core/index.ts` re-exports everything from `src/index.ts` and surfaces storage helpers, default models, telemetry hooks, and tokenizer utilities for consumers, while `src/index.ts` fans out Config, Gemini clients, services, IDE bridges, tool implementations (including MCP/subagents), telemetry, and OAuth helpers. Keeping these barrel exports current lets the CLI, IDE companion, and tests import from `@qwen-code/qwen-code-core` without deep paths.",
                    "tags": [
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/index.ts",
                            "sha256": "cbd946ac075dcc695ae7f437888ca8b69f3c865b73221dd8f585e8f1f172453e"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/index.ts",
                            "sha256": "1fbe92f641cbe3572ce89682b9c918924426c5ba5553c664cf8b3c99e05c25d9"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.64
                },
                {
                    "id": "aspect-core-openai-timeouts",
                    "sectionId": "section-core-foundations",
                    "slug": "core-openai-timeouts",
                    "name": "OpenAI content generator constants fix retry policy",
                    "description": "`constants.ts` defines the default 120s timeout and three retry attempts used by the OpenAI content generator, keeping HTTP policies consistent across adapters.",
                    "tags": [
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/constants.ts",
                            "sha256": "cd5338ce1143f60705d5892928e09ea7f8000fa3c36d168ba9421589f24284a1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.37
                }
            ]
        },
        {
            "id": "section-documentation",
            "title": "Documentation & Guides",
            "slug": "documentation",
            "entries": [
                {
                    "id": "aspect-documentation-architecture-overview",
                    "sectionId": "section-documentation",
                    "slug": "documentation-architecture-overview",
                    "name": "Architecture guide explains CLI \u2194 Core responsibilities",
                    "description": "`projects/qwen-code/docs/architecture.md` outlines how the CLI front end hands prompts to the core backend, how tools are orchestrated, and the typical request/response flow. It points to configuration, theming, and tool docs so newcomers understand the split before diving into code.",
                    "tags": [
                        "documentation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/architecture.md",
                            "sha256": "9d340cd0abb660db9dda7eefd01749363c06a93e08e92af8717386d41b7d6f1f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.7
                },
                {
                    "id": "aspect-documentation-sandbox-guide",
                    "sectionId": "section-documentation",
                    "slug": "documentation-sandbox-guide",
                    "name": "Sandbox guide compares seatbelt and container modes",
                    "description": "`projects/qwen-code/docs/sandbox.md` documents the security goals of sandboxing, how to enable it via flags, env vars, or settings, the available macOS seatbelt profiles, custom container flags, and troubleshooting tips. It is the authoritative reference for choosing sandbox isolation strategies.",
                    "tags": [
                        "documentation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/sandbox.md",
                            "sha256": "421b1176a2dc6d4022d944594c3283f7b3fb5db4d68e7c21219c6f681b0864f3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-documentation-telemetry-guide",
                    "sectionId": "section-documentation",
                    "slug": "documentation-telemetry-guide",
                    "name": "Telemetry guide details configuration precedence and collectors",
                    "description": "`projects/qwen-code/docs/telemetry.md` explains how CLI flags, environment variables, workspace settings, and defaults combine to enable telemetry, and walks through running the local or Google Cloud collectors via `npm run telemetry`. It also enumerates the log events and metrics emitted so operators know what is captured.",
                    "tags": [
                        "documentation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/telemetry.md",
                            "sha256": "bd862b839ea3008d54a9bd18fa7346a830fcde545b92f564c599a38295c8af49"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.72
                },
                {
                    "id": "aspect-documentation-checkpointing",
                    "sectionId": "section-documentation",
                    "slug": "documentation-checkpointing",
                    "name": "Checkpointing doc covers shadow repos and /restore flow",
                    "description": "`projects/qwen-code/docs/checkpointing.md` describes how the CLI snapshots files to `~/.qwen/history/<hash>` and stores conversation/tool state before mutating tools run. It documents enabling the feature, listing checkpoints, and restoring them so users understand the safety net around write_file/edit approvals.",
                    "tags": [
                        "documentation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/checkpointing.md",
                            "sha256": "4ec08ba2cffe75210b5e8c0b83a930747260643d9083b36263bbbe6475646519"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.66
                },
                {
                    "id": "aspect-documentation-issue-pr-automation",
                    "sectionId": "section-documentation",
                    "slug": "documentation-issue-pr-automation",
                    "name": "Issue and PR automation reference maps triage bots",
                    "description": "`projects/qwen-code/docs/issue-and-pr-automation.md` enumerates the Gemini-backed issue triage, scheduled sync jobs, CI requirements, and release automation that run in `.github/workflows`. Contributors can read it to understand required labels, linked issues, and how nightly releases are produced.",
                    "tags": [
                        "documentation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/issue-and-pr-automation.md",
                            "sha256": "da1c98c0bafb105854a5fcd036e483fee18f3691b5ae17458b7573d035daffa4"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-docs-cli-commands",
                    "sectionId": "section-documentation",
                    "slug": "docs-cli-commands",
                    "name": "CLI Commands documentation catalogs slash commands",
                    "description": "`projects/qwen-code/docs/cli/commands.md` documents every slash command, its subcommands, usage notes, and related shortcuts, linking to deeper guides where needed. It is the canonical reference for slash-command behavior.",
                    "tags": [
                        "documentation",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/cli/commands.md",
                            "sha256": "79bbbbda3350e1a0b71f19a3b8672a88e429bad89472f085fa3f94c469584d46"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-docs-cli-token-caching",
                    "sectionId": "section-documentation",
                    "slug": "docs-cli-token-caching",
                    "name": "Token caching guide explains reused context quotas",
                    "description": "`projects/qwen-code/docs/cli/token-caching.md` details which authentication modes benefit from cached tokens, when caching is disabled, and how `/stats` surfaces savings. It helps operators understand cost optimization knobs.",
                    "tags": [
                        "documentation",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/cli/token-caching.md",
                            "sha256": "d13cda9c315774c20be8786381991c9ae9c30b04a74b5ba3da4281dcb2d14ce6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-docs-tools-mcp-server",
                    "sectionId": "section-documentation",
                    "slug": "docs-tools-mcp-server",
                    "name": "MCP server guide covers configuration and OAuth",
                    "description": "`projects/qwen-code/docs/tools/mcp-server.md` explains how the core discovers MCP servers, wraps tools, and connects over stdio, SSE, or HTTP, plus provides schema examples and OAuth setup guidance. It is the operational playbook for extending the CLI with MCP.",
                    "tags": [
                        "documentation",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/tools/mcp-server.md",
                            "sha256": "746bdd4c39e321ffa934f8ebcc7e7514a97282090abc205da292300487e0e212"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-docs-subagents",
                    "sectionId": "section-documentation",
                    "slug": "docs-subagents",
                    "name": "Subagents guide describes specialization workflows",
                    "description": "`projects/qwen-code/docs/subagents.md` walks through creating, storing, and delegating to subagents, including storage locations, markdown schema, and best practices for automatic delegation. It complements the `/agents` command behavior.",
                    "tags": [
                        "documentation",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/subagents.md",
                            "sha256": "cfe931274d4970ede19b05c0e368d1c925d6ea514580f1b781b7e124f83cc7fc"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-docs-deployment",
                    "sectionId": "section-documentation",
                    "slug": "docs-deployment",
                    "name": "Deployment doc explains run modes and packaging",
                    "description": "`projects/qwen-code/docs/deployment.md` summarizes installation paths (npm, npx, Docker, from source), the build and publish pipelines, and the sandbox image architecture so teams can choose the right distribution channel.",
                    "tags": [
                        "documentation",
                        "automation"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/docs/deployment.md",
                            "sha256": "32e4f0a685873277dd81da5af5c509dbe9894fae17853be3e0517c565be1cd3e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                }
            ]
        },
        {
            "id": "section-openai-integration",
            "slug": "openai-integration",
            "title": "OpenAI Integration",
            "entries": [
                {
                    "id": "aspect-openai-provider-factory",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-provider-factory",
                    "name": "Factory picks OpenAI-compatible provider per auth",
                    "description": "`createOpenAIContentGenerator` in `openaiContentGenerator/index.ts` inspects the active `ContentGeneratorConfig` and returns DashScope, DeepSeek, OpenRouter, or the default provider. It reuses `Config.getContentGeneratorConfig()` when the CLI did not override settings and relies on each provider\u2019s `is*Provider` guard so deployments can swap endpoints or auth types without editing the factory.",
                    "tags": [
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/index.ts",
                            "sha256": "d582fb3445698adf78c4c7746114f83a2089af6daf78af81ca899bc002855815"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.72
                },
                {
                    "id": "aspect-openai-content-generator",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-content-generator",
                    "name": "OpenAIContentGenerator wires pipeline, telemetry, tokenizer fallback",
                    "description": "`openaiContentGenerator.ts` builds a `ContentGenerationPipeline` with `DefaultTelemetryService`, `EnhancedErrorHandler`, and provider-specific client wiring. `countTokens` prefers the shared `request-tokenizer` (cl100k_base) and only falls back to `len/4` heuristics if that fails, while `embedContent` normalizes mixed `contents` into a single string before calling `client.embeddings.create`.",
                    "tags": [
                        "chat-engine",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/openaiContentGenerator.ts",
                            "sha256": "db8df47bc66860cdb806c2929d5f9f7c9569aed4ad6217c556e7ad60c937c27a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.73
                },
                {
                    "id": "aspect-openai-pipeline-execution",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-pipeline-execution",
                    "name": "ContentGenerationPipeline handles sampling, streaming, and telemetry",
                    "description": "`ContentGenerationPipeline` assembles OpenAI chat requests by converting Gemini messages, merging sampling knobs from config vs request, and letting providers add cache metadata. `execute` and `executeStream` share `executeWithErrorHandling`, while streaming calls `processStreamWithLogging` to buffer OpenAI chunks, merge finishReason/usage fragments, reset tool-call state, and emit telemetry success or `logError` before delegating to `EnhancedErrorHandler`.",
                    "tags": [
                        "chat-engine",
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/pipeline.ts",
                            "sha256": "167a2a44576b37bba9d3be79336a2519998470afa87b53b452db95592f1767c8"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.74
                },
                {
                    "id": "aspect-openai-streaming-tool-parser",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-streaming-tool-parser",
                    "name": "StreamingToolCallParser repairs partial tool-call JSON",
                    "description": "`streamingToolCallParser.ts` tracks buffers, nesting depth, and escape state per tool-call index so the pipeline can merge interleaved OpenAI chunks. It remaps repeated indices when providers reuse slots, auto-repairs unterminated strings, and falls back to `jsonrepair` when standard parsing fails, ensuring streaming tool arguments stay coherent across chunk boundaries.",
                    "tags": [
                        "chat-engine",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/streamingToolCallParser.ts",
                            "sha256": "f03b384ed7b670cbd24f969aee79434473642da3359e8b752d58ae101ef9e545"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.68
                },
                {
                    "id": "aspect-openai-error-handler",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-error-handler",
                    "name": "EnhancedErrorHandler surfaces timeout guidance and suppressible logging",
                    "description": "`errorHandler.ts` centralizes OpenAI failures: it checks for timeout keywords, codes like `ETIMEDOUT`, and streaming vs batch context to craft user-facing tips (e.g. increase `contentGenerator.timeout`). Callers can inject a `shouldSuppressLogging` hook so benign retries stay quiet, but fatal cases still throw after printing contextual guidance.",
                    "tags": [
                        "chat-engine",
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/errorHandler.ts",
                            "sha256": "352ea87cd0073211a0fa5a04dd9aefa3018ac9a2c0427bc84d52b9be0d5bc54e"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.66
                },
                {
                    "id": "aspect-openai-telemetry-service",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-telemetry-service",
                    "name": "DefaultTelemetryService bridges OpenAI interactions into Gemini telemetry",
                    "description": "`telemetryService.ts` emits `ApiResponseEvent`/`ApiErrorEvent` for every OpenAI call, forwarding usage metadata and prompt IDs into the existing telemetry pipeline. When open-ai logging is enabled it records requests via `openaiLogger`, and streaming runs `combineOpenAIChunksForLogging` to fold chunked deltas into a single ChatCompletion payload before persistence.",
                    "tags": [
                        "chat-engine",
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/telemetryService.ts",
                            "sha256": "933c1960e31c5bde3966fcb6c2c6b80eaafe6d1990d600dc6c544c4e11ca235c"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.69
                },
                {
                    "id": "aspect-openai-provider-contract",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-provider-contract",
                    "name": "Provider contract adds cache-control aware tool types",
                    "description": "`provider/types.ts` defines the `OpenAICompatibleProvider` interface plus DashScope-aware tool shapes that carry optional `cache_control`. Providers must expose `buildHeaders`, `buildClient`, and `buildRequest(userPromptId)` so the pipeline can inject provider-specific metadata without branching.",
                    "tags": [
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/types.ts",
                            "sha256": "f3bf7abf70ec88f915d1d86fc5892b76a82cbde1adcadfba21003429cf5b78ac"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.62
                },
                {
                    "id": "aspect-openai-provider-default",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-provider-default",
                    "name": "Default provider builds OpenAI client with CLI fingerprint",
                    "description": "`provider/default.ts` reuses `Config.getCliVersion()` to stamp a `User-Agent` and constructs the OpenAI SDK client with configured `apiKey`, base URL, timeout, and retry budget. Its `buildRequest` simply forwards the pipeline\u2019s sampling parameters, acting as the baseline for other providers to extend.",
                    "tags": [
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/default.ts",
                            "sha256": "123a444eaf851a0c1fa05cc9851aaac835e2d4bf996a31bee297c269afb573fb"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.6
                },
                {
                    "id": "aspect-openai-provider-dashscope",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-provider-dashscope",
                    "name": "DashScope provider applies cache control, vision flags, and limits",
                    "description": "`provider/dashscope.ts` activates when authType is Qwen OAuth or the base URL matches DashScope. It stamps custom headers, adds `cache_control` markers to the system and latest messages (and last tool call when streaming), enforces model-specific `max_tokens` via `tokenLimit`, and for vision models injects `vl_high_resolution_images` plus session metadata.",
                    "tags": [
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/dashscope.ts",
                            "sha256": "5e5280a3af8f4c24a67c8c2b6278b32de4431a7f0c69c4be5d230716be932139"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.71
                },
                {
                    "id": "aspect-openai-provider-deepseek",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-provider-deepseek",
                    "name": "DeepSeek provider collapses multi-part messages to plain text",
                    "description": "`provider/deepseek.ts` extends the default provider but detects DeepSeek endpoints and rewrites array-based Gemini message parts into single text entries. It throws if non-text content slips through, protecting the API from unsupported media payloads while preserving the provider\u2019s sampling behaviour.",
                    "tags": [
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/deepseek.ts",
                            "sha256": "375c437b0a26f3b820dae0d48c05554b94e6e62b07752c590e40d3997d1e8517"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.63
                },
                {
                    "id": "aspect-openai-provider-openrouter",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-provider-openrouter",
                    "name": "OpenRouter provider adds referral headers for rate-limited access",
                    "description": "`provider/openrouter.ts` reuses the default client but adds mandatory `HTTP-Referer` and `X-Title` headers so OpenRouter can attribute traffic to Qwen Code. The `isOpenRouterProvider` guard simply matches `openrouter.ai` base URLs, keeping configuration declarative.",
                    "tags": [
                        "chat-engine",
                        "core-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/openrouter.ts",
                            "sha256": "b8302e6a58d2ae57a5498b4dc16cc5b563b3b06ef0ceaaef4096e8d59e897fdf"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.58
                },
                {
                    "id": "aspect-openai-provider-registry",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-provider-registry",
                    "name": "Provider index re-exports DashScope, DeepSeek, OpenRouter adapters",
                    "description": "`core/openaiContentGenerator/provider/index.ts` aggregates the default, DashScope, DeepSeek, and OpenRouter provider implementations plus shared type aliases. The barrel keeps the CLI's OpenAI-compatible pipeline decoupled from concrete transport files and centralizes the metadata types used by the content generator.",
                    "tags": [
                        "chat-engine",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/index.ts",
                            "sha256": "42f35e729160d13b7d11e17072980bf4dc09ec4ebd0bb29946cca73f36bde475"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-openai-converter",
                    "sectionId": "section-openai-integration",
                    "slug": "openai-converter",
                    "name": "OpenAIContentConverter bridges Gemini requests, tools, and streaming responses",
                    "description": "`converter.ts` normalizes Gemini tools (including lazily-evaluated `CallableTool`s and MCP schemas) into OpenAI `ChatCompletionTool`s, converts Gemini messages and candidates to OpenAI format, reconstructs Gemini responses from streaming chunks via `StreamingToolCallParser`, and now prunes orphaned tool calls before merging consecutive assistant messages so OpenAI never sees dangling IDs. It also maps JSON Schema constraints (number vs integer, bounds) and preserves tool call IDs so retries keep consistent arguments.",
                    "tags": [
                        "chat-engine",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/converter.ts",
                            "sha256": "72e76a3aaffccf52c363813dfbf8270c7c11331f6f0776c51cd287b8f4f2d3e4"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.7
                }
            ]
        },
        {
            "id": "section-cli-zed",
            "slug": "cli-zed",
            "title": "CLI Zed Integration",
            "entries": [
                {
                    "id": "aspect-cli-zed-agent-bridge",
                    "sectionId": "section-cli-zed",
                    "slug": "cli-zed-agent-bridge",
                    "name": "GeminiAgent adapts CLI runtime for ACP over stdio",
                    "description": "`zedIntegration.ts` wraps process stdio with `ReadableStream`/`WritableStream`, re-routes console output to stderr, and spins a `GeminiAgent` per ACP client. The agent handles authentication (refreshing OAuth or OpenAI keys), merges remote MCP server definitions into CLI settings, installs `AcpFileSystemService` when the client advertises FS capabilities, and keeps per-session `GeminiChat` objects.",
                    "tags": [
                        "cli-runtime",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/zed-integration/zedIntegration.ts",
                            "sha256": "78d7878d1b17b630981cf0b418e26abf32eb5312f25388cbe612cc5fe1b9742d"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.75
                },
                {
                    "id": "aspect-cli-zed-agent-connection",
                    "sectionId": "section-cli-zed",
                    "slug": "cli-zed-agent-connection",
                    "name": "AgentSideConnection validates ACP RPC with zod schemas",
                    "description": "`zed-integration/acp.ts` constructs a JSON-RPC bridge that feeds ACP requests through the generated `schema.*` validators before delegating to `GeminiAgent`. It exposes notifications like `session_update`, request/response helpers for permission prompts and FS reads, and queues writes via a single `WritableStream` to keep interleaved messages ordered.",
                    "tags": [
                        "cli-runtime",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/zed-integration/acp.ts",
                            "sha256": "24138b2282f2412830273b39c899be0d39710687804190b2dedb0ca5fc9d3304"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.66
                },
                {
                    "id": "aspect-cli-zed-filesystem",
                    "sectionId": "section-cli-zed",
                    "slug": "cli-zed-filesystem",
                    "name": "AcpFileSystemService proxies FileSystemService through ACP",
                    "description": "`fileSystemService.ts` implements `FileSystemService` by checking the ACP client\u2019s advertised capabilities: when the client cannot service `readTextFile`/`writeTextFile` it falls back to the local provider, otherwise it forwards the request with the active session ID so remote edits stay in sync with the agent.",
                    "tags": [
                        "cli-runtime",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/zed-integration/fileSystemService.ts",
                            "sha256": "ccfb824afa9dbd2a7c0122abc6b624d23438beacde5a72be37a015016a8936a0"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-zed-schema",
                    "sectionId": "section-cli-zed",
                    "slug": "cli-zed-schema",
                    "name": "ACP schema enumerates agent/client methods and typed payloads",
                    "description": "`schema.ts` defines the ACP protocol surface with zod: agent methods (`session/new`, `authenticate`, etc.), client callbacks (`session/update`, `fs/read_text_file`), enum types for tool permissions, resource blobs, and MCP server descriptors. These types power runtime validation and strongly-typed responses across the JSON-RPC link.",
                    "tags": [
                        "cli-runtime",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/zed-integration/schema.ts",
                            "sha256": "3aaa8932f6d79375e0f1293ce1842e3fba0fe7095d81396300003fc251c9e22a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.59
                },
                {
                    "id": "aspect-cli-zed-session-stream",
                    "sectionId": "section-cli-zed",
                    "slug": "cli-zed-session-stream",
                    "name": "Session prompt streams responses and proxies tool approvals",
                    "description": "`projects/qwen-code/packages/cli/src/zed-integration/zedIntegration.ts` keeps a per-session `AbortController`, streams Gemini chunks to ACP as `agent_message_chunk` or `agent_thought_chunk`, and collects `FunctionCall`s so cancellations return `stopReason: \"cancelled\"` while successful turns report `end_turn`. `runTool()` looks up the target in the shared `ToolRegistry`, asks the client for confirmation via `requestPermission`, mirrors status updates (`tool_call`/`tool_call_update`), logs duration with `logToolCall`, and converts results back into function responses, falling back to structured errors on missing tools or declined approvals. The private `#resolvePrompt()` resolves `@` path references by consulting `FileService`, respecting gitignore, and invoking `read_many_files` (with `glob` fallbacks) so Zed sessions get the same inline file context as the CLI.",
                    "tags": [
                        "cli-runtime",
                        "ide-integration",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/zed-integration/zedIntegration.ts",
                            "sha256": "78d7878d1b17b630981cf0b418e26abf32eb5312f25388cbe612cc5fe1b9742d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.72
                }
            ]
        },
        {
            "id": "section-cli-ui-utilities",
            "slug": "cli-ui-utilities",
            "title": "CLI UI Utilities",
            "entries": [
                {
                    "id": "aspect-cli-ui-clipboard-utils",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-clipboard-utils",
                    "name": "Clipboard utilities capture macOS images and purge temp files",
                    "description": "`ui/utils/clipboardUtils.ts` uses `osascript` to detect and dump macOS clipboard images into `.gemini-clipboard`, tries PNG/JPEG/TIFF/GIF in order, and cleans out files older than an hour so repeated paste prompts do not leak temp artifacts.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/clipboardUtils.ts",
                            "sha256": "dbc694994908c87a4adc67d592934b22d5d0d16ebfff65f2ecf51f4995613828"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-ui-command-utils",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-command-utils",
                    "name": "Command utilities detect slash/at commands and copy text cross-platform",
                    "description": "`ui/utils/commandUtils.ts` flags potential `@` or `/` prompts while ignoring comment prefixes, implements clipboard writes for Windows/macOS/Linux (with xclip/xsel fallback detection), and surfaces `getUrlOpenCommand` so UI components can open docs on any platform.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/commandUtils.ts",
                            "sha256": "8ac2f9cb44f31d0a769b7a989610b35c61cfa0bab397ed99f09a24138672125f"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-ui-compute-stats",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-compute-stats",
                    "name": "Session stats aggregators compute cache efficiency and tool success",
                    "description": "`ui/utils/computeStats.ts` exposes helpers for the session footer: `calculateErrorRate`, `calculateAverageLatency`, and `computeSessionStats` sum API/tool times, cache hit rates, tool agreement, and line deltas so UI widgets can render normalized percentages from raw telemetry counters.",
                    "tags": [
                        "cli-ui",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/computeStats.ts",
                            "sha256": "c4eaee9fdd06146dfe02b57c082e3a05ae6845f29731d3995087db9c2e1779df"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-ui-display-utils",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-display-utils",
                    "name": "Display utilities map KPI thresholds to theme colors",
                    "description": "`ui/utils/displayUtils.ts` defines thresholds for tool success, agreement, and cache efficiency, and `getStatusColor` picks theme colors based on value bands with an optional default color. Metrics views call it to keep status badges consistent.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/displayUtils.ts",
                            "sha256": "aaf6250658bcad743edd6096d517fb16acb9132c934c516c7658bdc9d541527a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-ui-formatters",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-formatters",
                    "name": "UI formatters render memory and duration in human scale",
                    "description": "`ui/utils/formatters.ts` exposes `formatMemoryUsage` (KB/MB/GB) and `formatDuration` that collapses milliseconds into ms/s/m/h while trimming zero segments, giving the footer compact labels without duplicating logic across components.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/formatters.ts",
                            "sha256": "125b6cec23ec2d1106b4eff53a5b2acc98b140d60b65f82c652363c14a028efe"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.44
                },
                {
                    "id": "aspect-cli-ui-update-check",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-update-check",
                    "name": "Update check prefers nightly builds when bases match",
                    "description": "`ui/utils/updateCheck.ts` skips checks in dev mode, loads package metadata via `getPackageJson`, then queries both `nightly` and `latest` dist-tags. `getBestAvailableUpdate` picks nightly when semver bases match, and results include human-readable upgrade strings for the CLI banner.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/updateCheck.ts",
                            "sha256": "532e366d7ca171a25db151aeb669e52a276a0170e02de487f054fd65b1a1892a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.56
                },
                {
                    "id": "aspect-cli-ui-terminal-setup",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-terminal-setup",
                    "name": "Terminal setup auto-configures Shift+Enter in VS Code family",
                    "description": "`ui/utils/terminalSetup.ts` detects VS Code, Cursor, or Windsurf via env vars and parent process names, strips comments from `keybindings.json`, backs it up, and inserts Shift/Ctrl+Enter sequences that send `\\r\\n`. It avoids overriding existing bindings and checks Kitty protocol support before touching config.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/terminalSetup.ts",
                            "sha256": "cf432dbd0636867bd9a8fb096657c9c3bad1ee2c85066a4290732dbdb71beedf"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-ui-kitty-detector",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-kitty-detector",
                    "name": "Kitty protocol detector enables enhanced keyboard sequences",
                    "description": "`ui/utils/kittyProtocolDetector.ts` probes stdin/stdout for TTY, sends CSI queries, tracks progressive enhancement responses, enables the Kitty protocol (`\u001b[>1u`), and registers exit handlers to disable it. Detected support is cached so repeated checks are cheap.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/kittyProtocolDetector.ts",
                            "sha256": "8d52f3987d29bc2698f361be724d1e5b6b6f337001a2fa31cd514019b12bb2fe"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.57
                },
                {
                    "id": "aspect-cli-ui-platform-constants",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-platform-constants",
                    "name": "Platform constants centralize Kitty codes and VS Code sequences",
                    "description": "`ui/utils/platformConstants.ts` documents Kitty control codes, timing windows, and VS Code\u2019s Shift+Enter escape sequence so keyboard handlers and detectors share a single source of truth when parsing terminal events.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/platformConstants.ts",
                            "sha256": "6b43a9e50726a6befbdcbed04ab58b4cc23d51e77f7eb2553138c5cb61379eac"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.43
                },
                {
                    "id": "aspect-cli-ui-console-patcher",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-console-patcher",
                    "name": "ConsolePatcher mirrors console output into Ink panels",
                    "description": "`ui/utils/ConsolePatcher.ts` captures `console.log/warn/error/debug/info`, formats arguments via `util.format`, optionally mirrors to stderr, and pushes structured messages into the UI through the supplied callback. `cleanup` restores the original console methods once the session ends.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/ConsolePatcher.ts",
                            "sha256": "610044bf14df35683e6ce940370f9ce8c7915b96d4042c71912dee8bb7f819ac"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-ui-code-colorizer",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-code-colorizer",
                    "name": "CodeColorizer renders lowlight tokens with Ink themes",
                    "description": "`ui/utils/CodeColorizer.tsx` feeds code into `lowlight`, walks the HAST tree to inherit theme colors, supports top/bottom overflow via `MaxSizedBox`, and optionally draws line numbers based on user settings. It falls back to plain text if highlighting fails.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/CodeColorizer.tsx",
                            "sha256": "73a83233ec5346090a5bd5a037d1fc6e8cc85404c7607396df992b90ac3a6c2a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.61
                },
                {
                    "id": "aspect-cli-ui-markdown-splitter",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-markdown-splitter",
                    "name": "Markdown utilities find safe split points around code fences",
                    "description": "`ui/utils/markdownUtilities.ts` tracks fenced code blocks and searches backward for double newlines so the UI can split long Markdown replies without breaking fences. If a chunk ends inside a fence it backs up to the block start; otherwise it falls back to the content length.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/markdownUtilities.ts",
                            "sha256": "312715d5f0a1df7b8963bd161940642a14804a19a2953e40df619c39480bbbb5"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.53
                },
                {
                    "id": "aspect-cli-ui-ci-detection-patch",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-ci-detection-patch",
                    "name": "CI patch keeps Ink interactive rendering enabled",
                    "description": "`src/patches/is-in-ci.ts` substitutes the `is-in-ci` package with a constant `false`, avoiding Ink\u2019s CI heuristics that would hide the TUI. The comment documents issue #1563 and clarifies the patch only affects interactive flows, so automation still runs while the CLI remains visible.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/patches/is-in-ci.ts",
                            "sha256": "dd4851fba39d16ea883e94d9374bca8535c0e560f70795ebe8a7652640c472c8"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.44
                },
                {
                    "id": "aspect-cli-ui-terminal-sizing",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-terminal-sizing",
                    "name": "Terminal sizing clamps layout width to ASCII art budget",
                    "description": "`useTerminalSize.ts` subtracts an 8-column padding from `process.stdout.columns` and listens for resize events, while `constants.ts` declares the ~63 column UI width derived from the logo art and tool glyphs. Together they keep Ink layouts within a predictable width and provide a shared `STREAM_DEBOUNCE_MS` and tool status glyph map for other widgets.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useTerminalSize.ts",
                            "sha256": "0ff5dc83c2f3ea565be071102f5216fe9bf8e2cc9d3d345ba3dc9806db765e1b"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/constants.ts",
                            "sha256": "225bd3d606532111a00f141602781e7807f4e315f32037e2f41481cefdd47e92"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-ui-key-matchers",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-key-matchers",
                    "name": "Key matchers turn keybinding config into executable predicates",
                    "description": "`keyMatchers.ts` walks the configurable `KeyBindingConfig`, building predicate functions that compare key name/sequence plus modifier expectations (`ctrl`, `shift`, `command`, `paste`). By exporting `keyMatchers` and `createKeyMatchers`, the rest of the UI can ask \"does this keystroke trigger `/slash`?\" without re-parsing the config, supporting both default and dynamically supplied bindings.",
                    "tags": [
                        "cli-ui",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/keyMatchers.ts",
                            "sha256": "b15bc6028cff767f6509896b714754c0b3f6407a5ff136550a547efe40e9740b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-ui-utility-bracketed-paste",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-utility-bracketed-paste",
                    "name": "useBracketedPaste guards terminal paste mode",
                    "description": "`useBracketedPaste.ts` writes the OSC 200/201 escape toggles on mount and cleans them on unmount or process exit signals, ensuring multiline pastes arrive wrapped and don't smear across the CLI input buffer.",
                    "tags": [
                        "cli-ui",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useBracketedPaste.ts",
                            "sha256": "bf07e2fe2150e183686c1ed139cfa709727ea6e2128158e3e7322f40f895a08f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-ui-utility-is-narrow-width",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-utility-is-narrow-width",
                    "name": "isNarrowWidth flags terminal widths under 80 columns",
                    "description": "`isNarrowWidth.ts` centralizes the CLI's responsive breakpoint, letting layout code degrade gracefully for small terminals without hard-coding the threshold in multiple places.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/isNarrowWidth.ts",
                            "sha256": "df14ddbef8832de76e294f16a2912e6e1fb0e24b4107507c98681b1612e584d7"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.3
                },
                {
                    "id": "aspect-cli-ui-utility-text-utils",
                    "sectionId": "section-cli-ui-utilities",
                    "slug": "cli-ui-utility-text-utils",
                    "name": "textUtils.ts strips unsafe control characters and counts codepoints",
                    "description": "`textUtils.ts` provides `cpLen`, `cpSlice`, and `stripUnsafeCharacters` helpers that remove VT control sequences and handle surrogate pairs, ensuring Ink rendering stays stable with emoji-laden output.",
                    "tags": [
                        "cli-ui",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/utils/textUtils.ts",
                            "sha256": "dcaf9e973d97eeb677e09cc79f2c946fa9d765bc2f398863f0ed63b914c08e17"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                }
            ]
        },
        {
            "id": "section-cli-privacy",
            "slug": "cli-privacy",
            "title": "CLI Privacy Notices",
            "entries": [
                {
                    "id": "aspect-cli-privacy-router",
                    "sectionId": "section-cli-privacy",
                    "slug": "cli-privacy-router",
                    "name": "PrivacyNotice routes to tier-specific disclosures",
                    "description": "`ui/privacy/PrivacyNotice.tsx` inspects `Config.getContentGeneratorConfig().authType` and renders the Gemini, Vertex, or Cloud Free privacy notice inside a rounded Ink box, wiring `onExit` through each implementation so Escape or form completion dismisses the modal.",
                    "tags": [
                        "cli-ui",
                        "cli-config",
                        "documentation",
                        "privacy"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/privacy/PrivacyNotice.tsx",
                            "sha256": "9c9e8585d15e90618b99e061fb7ec9f50ba6aff15c13b75155c43a23df85a5d1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-privacy-free-tier",
                    "sectionId": "section-cli-privacy",
                    "slug": "cli-privacy-free-tier",
                    "name": "CloudFreePrivacyNotice drives opt-in flow with radio selector",
                    "description": "`CloudFreePrivacyNotice.tsx` uses `usePrivacySettings` to load remote opt-in state, renders the multi-paragraph disclosure, and persists the choice via `RadioButtonSelect`. It shows loading/error placeholders and switches to the paid notice when the user is not on the free tier.",
                    "tags": [
                        "cli-ui",
                        "documentation",
                        "privacy"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/privacy/CloudFreePrivacyNotice.tsx",
                            "sha256": "23f9d36c8b443bc43f86fb0eb974bca25fa78847689d5b91a782f8f014bb1e83"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-privacy-paid",
                    "sectionId": "section-cli-privacy",
                    "slug": "cli-privacy-paid",
                    "name": "CloudPaidPrivacyNotice references Google Cloud service terms",
                    "description": "`CloudPaidPrivacyNotice.tsx` listens for Escape via `useKeypress` and renders the Vertex AI legal references with themed footnotes, guiding enterprise users to the appropriate Service Specific Terms.",
                    "tags": [
                        "cli-ui",
                        "documentation",
                        "privacy"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/privacy/CloudPaidPrivacyNotice.tsx",
                            "sha256": "7cedba82d944e71c02c59dd9b18f08284c8b10e28f2178ea4f946035812d5ab3"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-privacy-gemini",
                    "sectionId": "section-cli-privacy",
                    "slug": "cli-privacy-gemini",
                    "name": "GeminiPrivacyNotice summarizes API key terms",
                    "description": "`GeminiPrivacyNotice.tsx` hooks Escape handling and displays the Gemini API, Google AI Studio, and Additional Terms URLs with color-coded footnotes so individuals understand the agreements tied to their API key.",
                    "tags": [
                        "cli-ui",
                        "documentation",
                        "privacy"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/privacy/GeminiPrivacyNotice.tsx",
                            "sha256": "25cc2dbb6e5a78c91987a9d5c97ae9d879dfb08c2b65ac793949a66b57481c33"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-privacy-orchestration",
                    "sectionId": "section-cli-privacy",
                    "slug": "cli-privacy-orchestration",
                    "name": "App state toggles privacy notice via slash command and ESC routing",
                    "description": "`App.tsx` tracks `showPrivacyNotice`, exposing `openPrivacyNotice` to the slash-command processor so `/privacy` swaps the main viewport for `PrivacyNotice`. `slashCommandProcessor.ts` returns a dialog action that flips the flag, while `useDialogClose.ts` intercepts Ctrl+C/Esc to call `setShowPrivacyNotice(false)`, ensuring the modal closes cleanly without terminating the session.",
                    "tags": [
                        "cli-ui",
                        "cli-config",
                        "privacy",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/App.tsx",
                            "sha256": "da9ab515c6cf9e5bd0594528a525ebd237435cc1b546590c78cd7e30e940d80c"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/slashCommandProcessor.ts",
                            "sha256": "6583d0a7b2fa665197c5fd7ae536dc8a994638dcbbe89fc6b46de23aed82bfab"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useDialogClose.ts",
                            "sha256": "67271aa12942e3d75c504990f68aac06251dfd0a03c3e1e6287b6eb8015c4d8d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-cli-privacy-settings-tests",
                    "sectionId": "section-cli-privacy",
                    "slug": "cli-privacy-settings-tests",
                    "name": "usePrivacySettings tests verify tier detection and opt-in updates",
                    "description": "`usePrivacySettings.test.ts` renders the hook against mocked `LoggingContentGenerator` and `CodeAssistServer`, asserting it unwraps the logger wrapper, tolerates direct servers, and treats missing `projectId` or non-CodeAssist generators as fatal (`\"Oauth not being used\"`). It also covers paid-tier bypass logic and the opt-in updater, ensuring the CLI surfaces free-tier collection state and persists toggles through `setCodeAssistGlobalUserSetting` even when the remote API returns 404 fallbacks.",
                    "tags": [
                        "cli-ui",
                        "privacy",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/usePrivacySettings.test.ts",
                            "sha256": "5b29dcbe91154384f10aa93a560eb38b0720ada21fafcadc9c7452bc38a2cc90"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                }
            ]
        },
        {
            "id": "section-cli-ui-hooks",
            "slug": "cli-ui-hooks",
            "title": "CLI UI Hooks",
            "entries": [
                {
                    "id": "aspect-cli-hook-keypress",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-keypress",
                    "name": "useKeypress subscribes components to the KeypressContext",
                    "description": "`ui/hooks/useKeypress.ts` reads the shared `KeypressContext`, subscribes when `isActive` is true, and cleans up on effect teardown so dialogs can temporarily capture keyboard input without leaking listeners.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useKeypress.ts",
                            "sha256": "8aabff40001a16a9581e0cfb3a86519e99c0fab1a9609f09d5aaaa321ac10d89"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-hook-privacy-settings",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-privacy-settings",
                    "name": "usePrivacySettings unwraps Code Assist tiers and opt-in state",
                    "description": "`ui/hooks/usePrivacySettings.ts` unwraps the `LoggingContentGenerator` to reach the underlying `CodeAssistServer`, fetches the user tier via `loadCodeAssist`, handles 404 fallbacks for opt-in status, and exposes an updater that calls `setCodeAssistGlobalUserSetting` while surfacing errors.",
                    "tags": [
                        "cli-ui",
                        "privacy",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/usePrivacySettings.ts",
                            "sha256": "0afa6d2492c2f704c6b0912b7e63b2ae940ce0769cb354b539669da8db02e938"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-hook-workspace-migration",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-workspace-migration",
                    "name": "useWorkspaceMigration tracks nudges per workspace",
                    "description": "`ui/hooks/useWorkspaceMigration.ts` reads experimental extension settings, detects when workspace extensions exist without recorded nudges, exposes dialog open/close handlers, and records visited workspaces under the user scope so migration prompts are shown only once per repo.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useWorkspaceMigration.ts",
                            "sha256": "8867883d513cfda8660265045c20e387319a00c18bf9513fcbf9fdfdd2236d3b"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.57
                },
                {
                    "id": "aspect-cli-hook-gemini-stream",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-gemini-stream",
                    "name": "useGeminiStream orchestrates chat turns, tools, and cancellations",
                    "description": "`ui/hooks/useGeminiStream.ts` ties together history management, `useReactToolScheduler`, slash commands, @-commands, and shell mode: it logs each prompt via `logUserPrompt`, schedules tool calls or shell invocations when commands resolve locally, funnels the rest into `GeminiClient.sendMessageStream`, and updates Ink history with pending tool groups and compression/completion telemetry. Escape cancels the active turn (`useKeypress`), emitting `ApiCancelEvent` and committing any pending tool output so the chat survives partial responses.",
                    "tags": [
                        "cli-ui",
                        "chat-engine",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useGeminiStream.ts",
                            "sha256": "dd7206b7bef6716898e3382c2c5e7c9cc76e8a974d3429001ad73288163c5002"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.7
                },
                {
                    "id": "aspect-cli-hook-react-tool-scheduler",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-react-tool-scheduler",
                    "name": "useReactToolScheduler mirrors CoreToolScheduler in UI state",
                    "description": "`ui/hooks/useReactToolScheduler.ts` wraps `CoreToolScheduler`, wiring output chunks through `setPendingHistoryItem`, tracking `responseSubmittedToGemini` flags, and translating core statuses into `ToolCallStatus` so Ink renders live output, approval prompts, and completion cards consistently. `mapToDisplay()` flattens tracked calls into `HistoryItemToolGroup`s while preserving markdown rendering hints and confirmation metadata.",
                    "tags": [
                        "cli-ui",
                        "core-tools",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useReactToolScheduler.ts",
                            "sha256": "08d8f6c7a1d7c8a60303abe58637506da37d0d146b8dbea38690d1f90690d019"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.64
                },
                {
                    "id": "aspect-cli-hook-vision-auto-switch",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-vision-auto-switch",
                    "name": "useVisionAutoSwitch enforces image-aware model switches",
                    "description": "`ui/hooks/useVisionAutoSwitch.ts` inspects each prompt for image parts, warns about unsupported MIME types, and\u2014when Qwen OAuth is active\u2014either auto-switches to the default VLM in YOLO mode or applies the configured `/model` policy before falling back to an operator dialog. It remembers the original model so completions can restore it after tool chains finish.",
                    "tags": [
                        "cli-ui",
                        "context-management",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useVisionAutoSwitch.ts",
                            "sha256": "d7d065857ab7774d292860a0eb32d58e1b27fae799bcb3d6e43db0dab2bea9c2"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.59
                },
                {
                    "id": "aspect-cli-hook-history-manager",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-history-manager",
                    "name": "useHistory assigns deterministic IDs and deduplicates user turns",
                    "description": "`ui/hooks/useHistoryManager.ts` generates history IDs by offsetting a monotonic counter from the submission timestamp so related items sort predictably, rejects consecutive duplicate user messages to stop accidental echo spam, and exposes `loadHistory`/`clearItems` helpers for welcome-back restores and session resets.",
                    "tags": [
                        "cli-ui",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useHistoryManager.ts",
                            "sha256": "b81c90ddad3b55fe79499474640823f5c7114659e31a2fcd6d97f6c615459cfb"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.51
                },
                {
                    "id": "aspect-cli-hook-message-queue",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-message-queue",
                    "name": "useMessageQueue buffers follow-up prompts while streaming",
                    "description": "`ui/hooks/useMessageQueue.ts` trims and stores queued strings while the model responds, joins them with blank lines once `StreamingState.Idle` fires, and auto-submits the aggregate via `submitQuery` so impatient users can stack questions without losing order.",
                    "tags": [
                        "cli-ui",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useMessageQueue.ts",
                            "sha256": "05ac63aae56f5866d207cdb4f39f38fc5959b40ae6cdbe0f51f518fee561cc08"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.48
                },
                {
                    "id": "aspect-cli-hook-input-history",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-input-history",
                    "name": "useInputHistory replays prior prompts without losing edits",
                    "description": "`ui/hooks/useInputHistory.ts` tracks the current query before navigation, only steps through `userMessages` when the input is active, and restores the typed draft when the user exits history traversal\u2014mirroring Readline UX while delegating submission back to the parent form.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useInputHistory.ts",
                            "sha256": "2c08827dbf18ca933501fd8bb3907817839452b1b0f1cc6e3264fb33e8c8d521"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.42
                },
                {
                    "id": "aspect-cli-hook-shell-history",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-shell-history",
                    "name": "useShellHistory persists deduped shell commands per workspace",
                    "description": "`ui/hooks/useShellHistory.ts` locates the shell history file via `Storage.getHistoryFilePath()`, collapses multiline commands joined with trailing backslashes, deduplicates entries while capping history at 100 items, and flushes the list back to disk so `/shell` sessions resume across launches.",
                    "tags": [
                        "cli-ui",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useShellHistory.ts",
                            "sha256": "f55bffea9266ba1e309cfda724ed51add9f2d3d0f9fd5de50453156eac269029"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-hook-reverse-search-completion",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-reverse-search-completion",
                    "name": "useReverseSearchCompletion filters shell history as you type",
                    "description": "`ui/hooks/useReverseSearchCompletion.tsx` reuses the shared completion reducer to rank shell history matches by substring position, resets suggestions when reverse search closes, and applies the selected command directly to the `TextBuffer` so Ctrl+R behaves like Readline inside the Ink terminal.",
                    "tags": [
                        "cli-ui",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useReverseSearchCompletion.tsx",
                            "sha256": "684b2f0a67b164afee06d3298ab29530f5c255b78254374c9a14d2fe26a70907"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-hook-command-completion",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-command-completion",
                    "name": "useCommandCompletion unifies slash, @-path, and prompt suggestions",
                    "description": "`ui/hooks/useCommandCompletion.tsx` inspects the cursor context to detect slash commands, @-paths, or long-form prompts: it hands file lookups to `useAtCompletion`, slash routing to `useSlashCompletion`, and prompt expansion to `usePromptCompletion`, then normalises offsets so accepted suggestions splice into the `TextBuffer` with trailing spaces as needed.",
                    "tags": [
                        "cli-ui",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useCommandCompletion.tsx",
                            "sha256": "e1a2278360554c32edd57859559b1c7071592c89c30c8732b0430f1abc7c20f3"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.56
                },
                {
                    "id": "aspect-cli-hook-slash-completion",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-slash-completion",
                    "name": "useSlashCompletion walks command trees and defers to argument completers",
                    "description": "`ui/hooks/useSlashCompletion.ts` splits the slash path into segments, matches aliases, and routes into nested `subCommands`, marking perfect matches when an action is available. When a command exposes a `completion` handler the hook flips into argument mode, awaits async suggestions, and surfaces them without clearing existing context.",
                    "tags": [
                        "cli-ui",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useSlashCompletion.ts",
                            "sha256": "94f27094095383a99ed4839970efa2481dc3ce9ed0cf2d38deed3f3fc10be12c"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-hook-at-completion",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-at-completion",
                    "name": "useAtCompletion lazily spins up FileSearch for @-path prompts",
                    "description": "`ui/hooks/useAtCompletion.ts` creates a cached `FileSearch` instance on first use with gitignore/geminiignore respect, aborts stale searches, and only flips the loading spinner on when queries run longer than 200 ms. Results are escaped via `escapePath` so suggestions can be safely injected back into commands.",
                    "tags": [
                        "cli-ui",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useAtCompletion.ts",
                            "sha256": "07dd7e0a9933462b28d6ef79dc066b7c86235e366c63aa49c60f8d77cb3ba53a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-hook-shell-command-processor",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-shell-command-processor",
                    "name": "useShellCommandProcessor pipes /shell invocations into history and Gemini",
                    "description": "`ui/hooks/shellCommandProcessor.ts` wraps `ShellExecutionService.execute`, throttles live stdout updates for Ink, detects binary streams, and injects warnings when directory changes would be lost. On completion it writes a tool history card, mirrors the full result into `GeminiClient.addHistory`, and cleans up temp PWD files so shell mode retains context without persisting state.",
                    "tags": [
                        "cli-ui",
                        "shell",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/shellCommandProcessor.ts",
                            "sha256": "36ad9f857ee3f7039c18408572c709c3dfd0370e8d811bda4e9bab416cea9213"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.66
                },
                {
                    "id": "aspect-cli-hook-auto-accept-indicator",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-auto-accept-indicator",
                    "name": "useAutoAcceptIndicator cycles approval modes on Shift+Tab",
                    "description": "`ui/hooks/useAutoAcceptIndicator.ts` listens for Shift+Tab via `useKeypress`, advances through `APPROVAL_MODES`, and optimistically updates local state while calling `Config.setApprovalMode`. Errors are written to Ink history as info messages so the UI reflects permission failures instantly.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useAutoAcceptIndicator.ts",
                            "sha256": "3f2187cc1e3e15c1081c10cd8b7aa672ccddfc4cdf555f067db2d28097111979"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.43
                },
                {
                    "id": "aspect-cli-hook-welcome-back",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-welcome-back",
                    "name": "useWelcomeBack surfaces project summaries and pre-fills follow-up prompts",
                    "description": "`ui/hooks/useWelcomeBack.ts` checks `getProjectSummaryInfo()` at startup (respecting the `enableWelcomeBack` setting), opens a dialog when prior history exists, and either seeds the input buffer with an @PROJECT_SUMMARY prompt or clears state depending on the user's choice, letting conversations resume without manual copy/paste.",
                    "tags": [
                        "cli-ui",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useWelcomeBack.ts",
                            "sha256": "3438e756f14a9b451344762212de29b25094ceefcab763729c4ec442f15ab53a"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-hook-kitty-protocol",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-kitty-protocol",
                    "name": "useKittyKeyboardProtocol caches terminal capability detection",
                    "description": "`ui/hooks/useKittyKeyboardProtocol.ts` runs `isKittyProtocolSupported()` and `isKittyProtocolEnabled()` once per mount and returns the memoised flags so downstream components can enable enhanced keyboard shortcuts without re-querying the terminal.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useKittyKeyboardProtocol.ts",
                            "sha256": "b1b23ad95a4daf1026f0bfae558d1e57dc4ec9064f702faa40d515697b18c7fe"
                        }
                    ],
                    "lastUpdated": "2025-10-20",
                    "importance": 0.38
                },
                {
                    "id": "aspect-cli-hook-theme-command",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-theme-command",
                    "name": "useThemeCommand guards palette changes and persists scope",
                    "description": "`useThemeCommand.ts` opens the theme dialog unless `NO_COLOR` is set, validates the requested theme against the built-in registry and merged custom definitions, and writes the selection to user or workspace scope through `LoadedSettings.setValue`. It reloads custom themes into the shared `themeManager`, applies previews on highlight, and surfaces explicit errors when a name is missing in the chosen scope, ensuring palette changes never strand the UI in an invalid state.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useThemeCommand.ts",
                            "sha256": "5ebb53c3b7aaf891963e199fffbb8e1859f12dad13cd5036907c758b0e6b683f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.66
                },
                {
                    "id": "aspect-cli-hook-prompt-completion",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-prompt-completion",
                    "name": "usePromptCompletion streams ghost text from Gemini",
                    "description": "`usePromptCompletion.ts` debounces input, ignores slash commands and `@` paths, and only fires when the cursor sits at the buffer tail with \u22655 trimmed characters. It calls `Config.getGeminiClient().generateContent` with a tightly-scoped prompt, cancels outstanding requests via `AbortController`, and only accepts completions that prefix-match the user text. Accepting ghost text writes through the shared `TextBuffer`, while validation clears stale suggestions as soon as the cursor moves, keeping inline completions responsive but predictable.",
                    "tags": [
                        "cli-ui",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/usePromptCompletion.ts",
                            "sha256": "6d9aaeee5a06e1f7095e5f53078c2683cb21ff6dfdde7d2dc09d37317bf30b98"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.7
                },
                {
                    "id": "aspect-cli-hook-at-command-processor",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-at-command-processor",
                    "name": "handleAtCommand resolves @paths and stages read_many_files",
                    "description": "`atCommandProcessor.ts` tokenizes user input for unescaped `@path` segments, unescapes spaces, and uses the shared file service plus ignore rules to decide which specs to read. It upgrades directories to `/**` globs, falls back to `glob` when a direct stat fails, and rewrites the outgoing prompt with the resolved `@spec`. On success it executes the `read_many_files` tool, logs skipped (git or gemini ignored) paths, and injects per-file content blocks into the LLM payload while emitting a synthetic tool history item.",
                    "tags": [
                        "cli-ui",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/atCommandProcessor.ts",
                            "sha256": "2f344e770129513be080bc09c1d7a7a8eadcde357f76207e497bd75acbb7bbca"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.72
                },
                {
                    "id": "aspect-cli-hook-slash-command-processor",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-slash-command-processor",
                    "name": "useSlashCommandProcessor loads command trees and logs telemetry",
                    "description": "`slashCommandProcessor.ts` assembles slash-command metadata by instantiating `McpPromptLoader`, `BuiltinCommandLoader`, and `FileCommandLoader`, wiring them through `CommandService.create`. It walks command aliases to find canonical paths, composes a `CommandContext` with config, session stats, logger, and shell allowlists, and routes results into history (tool scheduling, dialogs, info/error banners). Every execution reports `SlashCommandStatus` via `makeSlashCommandEvent`/`logSlashCommand`, while confirmation state for shell actions and quit flows is tracked through dedicated React state so the UI can render pending prompts.",
                    "tags": [
                        "cli-ui",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/slashCommandProcessor.ts",
                            "sha256": "6583d0a7b2fa665197c5fd7ae536dc8a994638dcbbe89fc6b46de23aed82bfab"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.74
                },
                {
                    "id": "aspect-cli-hook-loading-indicator",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-loading-indicator",
                    "name": "Loading indicator hook mixes timers with witty phrase cycling",
                    "description": "`useLoadingIndicator.ts` tracks streaming state transitions, resetting a shared `useTimer` whenever responses resume and pinning the elapsed time when waits for confirmation begin. It layers `usePhraseCycler.ts` to rotate curated loading messages (or switch to a fixed confirmation prompt) and relies on a `useRef` to detect state edges cleanly, giving the status footer both a deterministic timer and playful copy. The underlying `useTimer.ts` and `usePhraseCycler.ts` hooks manage interval lifecycle so nothing leaks when the stream settles.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useLoadingIndicator.ts",
                            "sha256": "29c7dc1f2a7688749369920827e7b210c8598097ab0d79c5ee76893ca4058d96"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/usePhraseCycler.ts",
                            "sha256": "187bfd65b8ac4d9ae061c86bb70df373fe29ac2eda90d606ac6c6c47a0f9698d"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useTimer.ts",
                            "sha256": "6e0861641da59d2c5e7f535110403c250130c0df957ed7910bf69fb6698b655d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-hook-vim-editing",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-vim-editing",
                    "name": "useVim implements NORMAL/INSERT modal editing for TextBuffer",
                    "description": "`vim.ts` mirrors canonical Vim keystrokes by reducing input through a state machine: it tracks counts, pending operators, and the last repeatable command, delegating motion/edit operations to `TextBuffer` helpers (`vimDeleteWordForward`, `vimChangeLine`, etc.). It syncs mode with `VimModeContext`, updates counts from digit prefixes, handles ESC transitions, and replays the dot command, giving the CLI prompt genuine Vim ergonomics without leaking state outside the hook.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/vim.ts",
                            "sha256": "f538f7511e3c60489b187bb77a887572abb8211f572c8b97e4e4cc9906c67a73"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-cli-hook-focus-reporting",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-focus-reporting",
                    "name": "useFocus toggles ANSI focus reporting to track terminal blur",
                    "description": "`useFocus.ts` writes the `?1004h`/`?1004l` control sequences on mount/unmount, listens to stdin for `\u001b[I`/`\u001b[O`, and flips a boolean so the UI can dim when the terminal loses focus. The hook restores the previous stdin listener set-up, making focus-aware affordances possible without leaking event handlers.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useFocus.ts",
                            "sha256": "2b8f050c9f133ce642ee06964ad71bced24c832d14927e9de1c47b1f0fcbc46d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "id": "aspect-cli-hook-launch-editor",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-launch-editor",
                    "name": "useLaunchEditor respects preferred editor and stdin raw mode",
                    "description": "`useLaunchEditor.ts` reads `general.preferredEditor` from settings, falls back to platform defaults (`open -t` on macOS, `notepad` on Windows, `$VISUAL`/`$EDITOR` otherwise), and spawns the command while temporarily disabling raw TTY mode via Ink's `useStdin`. It also special-cases `open -t` arguments and restores raw mode after the editor exits, so launching external editors never leaves the CLI input broken.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useLaunchEditor.ts",
                            "sha256": "6604de31b9f40cede8f24b6a801bf6a6d14b525b491830f94e8e4d30a64f9151"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-hook-auth-command",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-auth-command",
                    "name": "useAuthCommand drives the CLI auth dialog lifecycle",
                    "description": "`useAuthCommand.ts` opens the auth dialog when no provider is configured, retries `config.refreshAuth()` in the background, and clears cached credential files before persisting the selected `AuthType`. It handles browser-suppressed Google logins by triggering `runExitCleanup()` and a controlled process exit, and exposes cancellation hooks so the UI can stop showing a spinner when authentication is aborted.",
                    "tags": [
                        "cli-ui",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useAuthCommand.ts",
                            "sha256": "65f1bfd89925342ac2c8748ef6a8d5cc1553856c822adb99d530e4442a60e028"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-hook-folder-trust",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-folder-trust",
                    "name": "useFolderTrust persists trust decisions and signals restarts",
                    "description": "`useFolderTrust.ts` derives the current trust state from merged security settings, opens the dialog when a workspace is undecided, and records choices via `trustedFolders.setValue`. It mirrors git/gemini trust booleans back to the caller, flags when a restart is required after changing trust, and watches for on-disk log changes so the UI updates if the status flips externally.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useFolderTrust.ts",
                            "sha256": "456ca06f2580793c5d783c06b7861c7b4ae59b8caef6dd92bb758d64ea096419"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-hook-git-branch",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-git-branch",
                    "name": "useGitBranchName watches .git/logs/HEAD to keep the prompt current",
                    "description": "`useGitBranchName.ts` shells out to `git rev-parse` (falling back to commit SHA) and installs an FS watcher on `.git/logs/HEAD` so branch names refresh when HEAD moves. It tolerates missing logs, cleans up the watcher on unmount, and returns `undefined` when Git commands fail, letting the CLI header show branch info without blocking on errors.",
                    "tags": [
                        "cli-ui",
                        "git"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useGitBranchName.ts",
                            "sha256": "b5a4d2fa50183649312d74c44c52eb754983992450c1766e39ec29d5581657d0"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-cli-hook-state-ref",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-state-ref",
                    "name": "useStateAndRef keeps a mutable ref in sync with React state",
                    "description": "`useStateAndRef.ts` returns a setter that writes to both state and a ref, letting command processors read the latest value inside async callbacks without stale closures. It accepts direct values or updater functions and centralizes the pattern the CLI uses in several hooks that need synchronous reads after scheduling state updates.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useStateAndRef.ts",
                            "sha256": "35cdd3ca523583d2fac31dd25344181fbc381da6f3af13816695d99f0394e830"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.4
                },
                {
                    "id": "aspect-cli-hook-logger",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-logger",
                    "name": "useLogger lazily boots the session logger without blocking UI",
                    "description": "`useLogger.ts` instantiates the core `Logger` with the current `Storage`, kicks off `initialize()` without awaiting it, and updates local state once the promise resolves. By swallowing init failures, the hook keeps the prompt responsive at startup while still exposing a ready logger for telemetry surfaces that need it.",
                    "tags": [
                        "cli-ui",
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useLogger.ts",
                            "sha256": "2ea141ee3d31ba294ef09076272cf61e224ac2c59b0de4eeefba7b2af6e51e85"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-cli-hook-completion-state",
                    "sectionId": "section-cli-ui-hooks",
                    "slug": "cli-hook-completion-state",
                    "name": "useCompletion manages suggestion focus and scrolling",
                    "description": "`useCompletion.ts` keeps track of the suggestion list, active index, visible window, and loading flags, exposing `navigateUp`/`navigateDown` that wrap around the list while adjusting the first visible index to honor `MAX_SUGGESTIONS_TO_SHOW`. Reset helpers clear state when a new input arrives, so slash/at completions can share consistent keyboard behaviour.",
                    "tags": [
                        "cli-ui",
                        "cli-commands"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useCompletion.ts",
                            "sha256": "3888a02f673ef525ec05e2ed6c8b486cea46c4f033f4fe41fdd1bdfc91e5d39f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                }
            ]
        },
        {
            "id": "section-cli-ui-components",
            "slug": "cli-ui-components",
            "title": "CLI UI Components",
            "entries": [
                {
                    "id": "aspect-cli-ui-ide-integration-nudge",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-ide-integration-nudge",
                    "name": "IDE integration nudge guides editor linking",
                    "description": "`projects/qwen-code/packages/cli/src/ui/IdeIntegrationNudge.tsx` paints a yellow bordered Ink panel that looks up the detected IDE via `getIdeInfo`, infers whether the extension is pre-installed from `QWEN_CODE_IDE_SERVER_PORT`/`QWEN_CODE_IDE_WORKSPACE_PATH`, binds Esc with `useKeypress`, and feeds a `RadioButtonSelect` so the shell knows if it should launch the bridge, skip, or stop asking. It\u2019s the reusable entry point into VS Code/Zed companion flows from inside the TUI.",
                    "tags": [
                        "cli-ui",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/IdeIntegrationNudge.tsx",
                            "sha256": "d68abe4ceed28600ea120841b2312cb0e3e6ce338d24061a5b879c2f67716c80"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-ui-onboarding-dialogs",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-onboarding-dialogs",
                    "name": "Onboarding dialogs surface product state and guidance",
                    "description": "`AboutBox.tsx`, `WelcomeBackDialog.tsx`, `UpdateNotification.tsx`, `Tips.tsx`, `Help.tsx`, \u0438 `AsciiArt.ts` compose the CLI\u2019s welcome surfaces: About shows version, commit, model, sandbox, auth, and IDE info (via `GIT_COMMIT_INFO`), WelcomeBack hydrates `ProjectSummaryInfo` with pending tasks and lets users continue or restart through `RadioButtonSelect` + Esc, UpdateNotification highlights release messages, Tips inspects `Config.getGeminiMdFileCount()` to tailor advice, Help prints slash-command descriptions plus platform-specific shortcuts, and the ASCII logo exports keep headers consistent. Together they give newcomers and returning users context-aware guidance without leaving the terminal.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/AboutBox.tsx",
                            "sha256": "3605e32df23a1324242c497872f99e0ed5b0a35ea1861a68749bd23d6ea89d62"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/WelcomeBackDialog.tsx",
                            "sha256": "1262764729e920c5082814129ec65660ff000c4d34d0ab0af52eeaf325b3084a"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/UpdateNotification.tsx",
                            "sha256": "bdd9b9535254a6f5289ffb78170d871f9b7c8f0233b6657d042803b603f55f93"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/Tips.tsx",
                            "sha256": "39a918ddf4af792bbfd042356de60d79792dc9c243ff213b89fc34259718f0a4"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/Help.tsx",
                            "sha256": "95a84564765921a5d6cce44f0fee1605bbf4712526f73250b49767b0a0a2f74f"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/AsciiArt.ts",
                            "sha256": "e142448336258c1c238c9f4a2c831bc18fe525fb286a35a13fe535c0fe619e7b"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-ui-settings-modals",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-settings-modals",
                    "name": "Settings, theme, model, and OpenAI dialogs share navigation",
                    "description": "`SettingsDialog.tsx` clones layered `LoadedSettings` per `SettingScope`, tracks pending values, saves immediate toggles (like Vim mode), queues restart-required changes, and routes Esc/Tab between scope and setting lists. `ThemeDialog.tsx` renders live previews with `colorizeCode`, supports scope switching, and degrades gracefully on narrow terminals; `ModelSwitchDialog.tsx` offers one-off or session-wide vision model switches with Esc fallback; and `OpenAIKeyPrompt.tsx` scrubs pasted control sequences, cycles fields with Tab/arrow keys, and enforces a non-empty API key before submission. The shared wiring keeps configuration pivots consistent across providers and themes.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/SettingsDialog.tsx",
                            "sha256": "a57f78d918e465238d2a933859b6281aac652d18070c9c42cb699fdc79cab61c"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ThemeDialog.tsx",
                            "sha256": "e135ab99ff28309779937cb4d058690ca954461a5fdcb0ef4029960db6ca26dd"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ModelSwitchDialog.tsx",
                            "sha256": "1cc2aceced9d186bc14c4e3f3251f94acc131d859fe48a451daca82512aa4356"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/OpenAIKeyPrompt.tsx",
                            "sha256": "994445ad1423b9c9d0c973d8589eeab9811693c2130170fde1c8d3f113469416"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.67
                },
                {
                    "id": "aspect-cli-ui-stat-widgets",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-stat-widgets",
                    "name": "Session stat widgets visualize models, context, and memory",
                    "description": "`StatsDisplay.tsx` pulls `useSessionStats()` to format success/agreement rates, render model usage tables with gradients, and call out cache savings; `ContextUsageDisplay.tsx` shows remaining context by consulting `tokenLimit(model)`; `MemoryUsageDisplay.tsx` polls RSS every two seconds and turns red past 2\u202fGB; `ConsoleSummaryDisplay.tsx` emits a \u2716 counter with shortcut hints; and `SessionSummaryDisplay.tsx` replays the stats card on shutdown. They give operators real-time feedback on model load, tokens, and errors without leaving the transcript.",
                    "tags": [
                        "cli-ui",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/StatsDisplay.tsx",
                            "sha256": "f33cf45798c0a4262335175e2ee986228b7a03b53e5b73e2e5482207d55d9a5c"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ContextUsageDisplay.tsx",
                            "sha256": "0ece6a44f69c477bdec041d2ac095dab4d9f5c3c21a10e74bf52e3f56cd297b4"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/MemoryUsageDisplay.tsx",
                            "sha256": "b8a8de26cb58d904d8d2d29e0ea01a73ac024159c60c1c51c5b483431f61690f"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ConsoleSummaryDisplay.tsx",
                            "sha256": "551415d4d70961e57103e75196f7d7bee6281f313bc1814488ad6beb640919f1"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/SessionSummaryDisplay.tsx",
                            "sha256": "a93541e607c9f5a66e4534c324a808862c2b5f02766c385607867d4df121bc17"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-ui-plan-surfaces",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-plan-surfaces",
                    "name": "Plan and todo surfaces coordinate approvals and overflow",
                    "description": "`PlanSummaryDisplay.tsx` presents `PlanResultDisplay` markdown with highlighted status text, `PrepareLabel.tsx` dynamically bolds command palette matches, `TodoDisplay.tsx` draws pending/in-progress/completed items with iconography, and `ShowMoreLines.tsx` watches `OverflowContext` plus streaming state to prompt ctrl\u2011s expansion when content is truncated. These components keep plan mode approvals, todo lists, and search suggestions legible while respecting terminal limits.",
                    "tags": [
                        "cli-ui",
                        "prompting"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/PlanSummaryDisplay.tsx",
                            "sha256": "68780f72a216bfc030beb82d3ddbf8bd8f6c4a4eb75dc534711c34774f1c242f"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/PrepareLabel.tsx",
                            "sha256": "e81e3a155dad1f5ae2978908a8b07c9dfafb8fdf757fd2e527aa1bd1f54f6e40"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/TodoDisplay.tsx",
                            "sha256": "c3e0c4abf7f5fc76dcee6ca0e7f3275aeb72ea45b1cd955db7127d115f4d1d35"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ShowMoreLines.tsx",
                            "sha256": "d4db0ba9c760e4d1a281605c71f2ddcf5cd9ea85b5faa5f018c60b5dc7187a48"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.56
                },
                {
                    "id": "aspect-cli-ui-status-indicators",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-status-indicators",
                    "name": "Loading and debug indicators mirror streaming state",
                    "description": "`LoadingIndicator.tsx` observes `StreamingContext` to show spinner/text, formats elapsed time with cancel hints, adapts to narrow terminals, and hosts optional right-aligned status; `GeminiRespondingSpinner.tsx` swaps between `ink-spinner` visuals and screen-reader strings for responding versus pending states; and `DebugProfiler.tsx` toggles render counts with ctrl+b. Together they give operators lightweight instrumentation for long-running requests.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/LoadingIndicator.tsx",
                            "sha256": "8ab5174fb3c4449f3af694b6c1155ae31b9c55b3897933dcdfa968f908deb1a6"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/GeminiRespondingSpinner.tsx",
                            "sha256": "1a46a6db9fce552e62f2d4eb7cc3839a82ee412ff480382e0533b7d06c0308b4"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/DebugProfiler.tsx",
                            "sha256": "7fd150091340ba8281c369ed88e9456a158267a390b8ffae3a66b819e589c011"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-ui-quit-confirmation",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-quit-confirmation",
                    "name": "Quit confirmation dialog routes actions before exiting",
                    "description": "`QuitConfirmationDialog.tsx` renders a RadioButtonSelect with quit, summary, save, or cancel outcomes and binds Escape to cancel, while `useQuitConfirmation.ts` tracks visibility and maps selections to `{shouldQuit, action}` payloads. The hook/component pair lets slash commands request secondary confirmation and decide whether to save transcripts or run summaries before terminating the session.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/QuitConfirmationDialog.tsx",
                            "sha256": "e9460dc20874bb5719956c2df3857c4ed29a4c63c773ec0f2a80fa1ef8ae86d7"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useQuitConfirmation.ts",
                            "sha256": "0ba51832097238166299e251ce059e569f28cfe2d9c2f90476d06880dcaa3a3e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.61
                },
                {
                    "id": "aspect-cli-ui-editor-settings-manager",
                    "sectionId": "section-cli-ui-components",
                    "slug": "cli-ui-editor-settings-manager",
                    "name": "EditorSettingsManager enumerates available editors with sandbox gating",
                    "description": "`editorSettingsManager.ts` inspects `checkHasEditorType` and `allowEditorTypeInSandbox` for each supported editor, precomputing display labels and disabled flags so the settings dialog clearly marks missing binaries and sandbox-incompatible choices.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/editors/editorSettingsManager.ts",
                            "sha256": "841bbaae15b41fe931d4ed01872542b795632a9e6220280ec4d4789822d94a25"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                }
            ]
        },
        {
            "id": "section-cli-ui-messages",
            "slug": "cli-ui-messages",
            "title": "CLI Message Components",
            "entries": [
                {
                    "id": "aspect-cli-ui-gemini-message",
                    "sectionId": "section-cli-ui-messages",
                    "slug": "cli-ui-gemini-message",
                    "name": "Gemini message renderer handles chunking and diffs",
                    "description": "`GeminiMessage.tsx` prefixes replies with a \u2726 label, preserves accessibility metadata, and streams Markdown via `MarkdownDisplay`; `GeminiMessageContent.tsx` indents overflow chunks to keep Ink\u2019s static renderer performant; and `DiffRenderer.tsx` parses unified diffs into numbered rows, colorizes adds/removals, handles new-file syntax highlighting, and falls back to screen-reader friendly text. This trio keeps long model responses readable in the terminal.",
                    "tags": [
                        "cli-ui",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/GeminiMessage.tsx",
                            "sha256": "2421bd5171b249eefca357e9bfa56c264001797d6e807f23b4dd0e1c8a423734"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/GeminiMessageContent.tsx",
                            "sha256": "4314162ab7dcac964ddb68539315d9c62e4d30fb86b019dbe91b8cd4160e1e91"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/DiffRenderer.tsx",
                            "sha256": "8d5b06c5bfb79f7f4a5b27db894c453ed97320602264039bc048d949762baaa1"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-ui-user-message",
                    "sectionId": "section-cli-ui-messages",
                    "slug": "cli-ui-user-message",
                    "name": "User message components distinguish text and shell",
                    "description": "`UserMessage.tsx` wraps prompts in a rounded panel, detects slash commands via `commandUtils`, and adjusts colors plus screen-reader labels accordingly, while `UserShellMessage.tsx` normalizes leading `!` commands and prints a cyan `$` prompt. They preserve author input while making shell echoes visually distinct.",
                    "tags": [
                        "cli-ui",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/UserMessage.tsx",
                            "sha256": "2c7c45826c0ff61c9e44fcf40c334f3dd3d24c95d266a244e9b1dbdf6db39bef"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/UserShellMessage.tsx",
                            "sha256": "1f9595c190905a6cfe7640791a55b6d7e8db54fbc26bddc31e82151232769d32"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.54
                },
                {
                    "id": "aspect-cli-ui-tool-messages",
                    "sectionId": "section-cli-ui-messages",
                    "slug": "cli-ui-tool-messages",
                    "name": "Tool message stack renders results and approvals",
                    "description": "`ToolMessage.tsx` chooses between markdown, diffs, todo lists, plan summaries, or subagent dashboards per `IndividualToolCallDisplay`, applies truncation via `MaxSizedBox`, and shows spinners/status icons; `ToolGroupMessage.tsx` groups related calls in a bordered panel, budgets height per result, and keeps only the active confirmation focused; `ToolConfirmationMessage.tsx` drives RadioButtonSelect approvals, mirrors IDE diff resolutions, and offers compact mode for agent cards. They provide a unified experience for tool execution feedback and consent.",
                    "tags": [
                        "cli-ui",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/ToolMessage.tsx",
                            "sha256": "7d78c068b0b132ed2be314b108bb327b1171bdb922a3b5356c84eb8ae0fde546"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/ToolGroupMessage.tsx",
                            "sha256": "521f1f758e69c3a0c778ec5de4eda61847da37da72767e061d198cb31a3814d7"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/ToolConfirmationMessage.tsx",
                            "sha256": "0b534575a7c26128c86f8dd4a1e449a44eb212aea8f910ff8a711d85d04dc545"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.65
                },
                {
                    "id": "aspect-cli-ui-status-messages",
                    "sectionId": "section-cli-ui-messages",
                    "slug": "cli-ui-status-messages",
                    "name": "Status message cards cover compression, summaries, notices",
                    "description": "`CompressionMessage.tsx` shows `/compress` progress with a spinner and reports before/after token counts, `SummaryMessage.tsx` walks through summary stages with success checkmarks and file destinations, `ErrorMessage.tsx` prints red \u2715 banners, and `InfoMessage.tsx` renders \u2139 hints with inline markdown. These micro-components surface background tasks and system guidance inline in the transcript.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/CompressionMessage.tsx",
                            "sha256": "3eb19fd76047be9f96364ada47568b771c3df3445e2656ce832d857b94144602"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/SummaryMessage.tsx",
                            "sha256": "d383193812de6917563ad058cf7ffca02a4ba917a6531655b4f12411c52f8eed"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/ErrorMessage.tsx",
                            "sha256": "14c9e0e2ab098289c1cc6b02c0518e2eb5c9ad52b24a41d59fdfc3a62c75c68a"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/InfoMessage.tsx",
                            "sha256": "aeeff8e7b94cc8f7c830abccf1cee55c74197787cd60169118241e81bd19c853"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-ui-console-message-buffer",
                    "sectionId": "section-cli-ui-messages",
                    "slug": "cli-ui-console-message-buffer",
                    "name": "useConsoleMessages batches duplicates for the transcript rail",
                    "description": "`useConsoleMessages.ts` queues incoming console events, coalesces adjacent duplicates by incrementing a `count`, and flushes them with `useTransition` on a 16\u202fms timer to keep Ink paints smooth during bursts. Clearing the console cancels pending timeouts and wipes the queue, so command output spools remain compact even when tools spam identical lines.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useConsoleMessages.ts",
                            "sha256": "96056d02ba593fbf0079d539075e9676a346b7fd8c382f41884033a640afd59f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-ui-screen-reader-prefixes",
                    "sectionId": "section-cli-ui-messages",
                    "slug": "cli-ui-screen-reader-prefixes",
                    "name": "Screen reader text constants align narration with speaker role",
                    "description": "`textConstants.ts` centralizes the `User:`/`Model:` prefixes and status strings (`loading`, `responding`) announced through screen reader output. Centralization keeps accessibility narration consistent whenever message rendering changes.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/textConstants.ts",
                            "sha256": "43c55fff04c0a2aa296e171d2afd6941291fe9108fb74453102674caf7f5a53c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.35
                }
            ]
        },
        {
            "id": "section-cli-ui-shared",
            "slug": "cli-ui-shared",
            "title": "CLI UI Shared",
            "entries": [
                {
                    "id": "aspect-cli-ui-text-input-buffer",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-text-input-buffer",
                    "name": "Prompt text buffer supports Vim actions and external editor",
                    "description": "`TextInput.tsx` delegates editing to `useTextBuffer`, integrates Ink key bindings, handles Ctrl+Enter vs multiline escapes, and surfaces validation errors; `shared/text-buffer.ts` manages a codepoint-aware buffer with undo stack, viewport slicing, external-editor spawning, and Unicode-aware word navigation; `vim-buffer-actions.ts` maps Vim delete/change/motion commands across scripts. Together they give the CLI a responsive, script-aware prompt editor.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/shared/TextInput.tsx",
                            "sha256": "c49861315d1ddc60a96e1efb0aaac631c1f9db48f3f0dfe42892493ad3a4144e"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/shared/text-buffer.ts",
                            "sha256": "f4c4bebf043d49db530a8d576816b33b893b2fda01d3a052dc54969c60486edb"
                        },
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/shared/vim-buffer-actions.ts",
                            "sha256": "615cb15c1ae4e92ed6c0b894975a030f4d44fd3ce4147efdbf70cdf8cdba83c7"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-ui-radio-select",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-radio-select",
                    "name": "RadioButtonSelect standardizes keyboard navigation",
                    "description": "`RadioButtonSelect.tsx` owns the CLI\u2019s option picker: it tracks active indices and scroll windows, listens to `j`/`k`, arrows, Enter, and multi-digit shortcuts via `useKeypress`, debounces numeric input, and supports numbering, scroll arrows, and highlight callbacks. Settings, onboarding, and confirmation dialogs reuse it for consistent selection UX.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/shared/RadioButtonSelect.tsx",
                            "sha256": "05e0e3274a270a61458cc9c8006faef3f6543b0121e5906df709b99a1da88cf2"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.57
                },
                {
                    "id": "aspect-cli-ui-max-sized-box",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-max-sized-box",
                    "name": "MaxSizedBox truncates long Ink layouts safely",
                    "description": "`MaxSizedBox.tsx` measures Ink `<Box>/<Text>` trees into codepoint-aware rows, enforces minimum heights, registers overflow IDs with `OverflowContext`, and inserts ellipsis rows depending on overflow direction. It even exposes debug logging to flag invalid child shapes, keeping massive tool outputs from tearing the terminal.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/shared/MaxSizedBox.tsx",
                            "sha256": "c3614b80970fcf1b4774bbdd40ad2acb32864176d1674e783770bdfaf8fcf0f2"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-ui-theme-colors",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-theme-colors",
                    "name": "Colors proxy keeps theme palette reactive",
                    "description": "`packages/cli/src/ui/colors.ts` exposes a `Colors` object with getter accessors that defer to `themeManager.getActiveTheme().colors`, so components read `Colors.AccentBlue` et al. without stale imports. When ThemeDialog switches palettes, every consumer picks up the new colors immediately.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/colors.ts",
                            "sha256": "eee8c30b40dfcc0aad3bbfe49325a33145613278eb72c5f6c816d4a40cc02368"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.53
                },
                {
                    "id": "aspect-cli-ui-theme-manager",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-theme-manager",
                    "name": "ThemeManager loads, validates, and selects CLI themes",
                    "description": "`theme-manager.ts` enumerates bundled ANSI/light/dark and Qwen palettes, keeps the currently active theme, and lazily loads custom definitions from settings or JSON files. `loadThemeFromFile()` realpath-resolves candidates, rejects paths outside the home directory, validates shape via `validateCustomTheme`, and caches canonical paths, while `setActiveTheme()` and `getAvailableThemes()` preserve custom picks and sort the display list by type. When `NO_COLOR` is present the manager falls back to a no-color theme, so every Ink surface stays consistent across palette changes.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/theme-manager.ts",
                            "sha256": "1adb44f347720c8e1e7c0389830cdb1ca0b0350d63dc39446927cfab9e525378"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-ui-semantic-tokens",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-semantic-tokens",
                    "name": "Semantic color tokens bridge palettes to UI roles",
                    "description": "`semantic-tokens.ts` defines the `SemanticColors` contract and provides light, dark, and ANSI mappings that translate highlight palette colors into text, background, border, status, and gradient roles. Components read from these semantic buckets instead of hard-coding palette entries, so swapping the active theme preserves emphasis colors, diff highlights, and status badges without bespoke overrides.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/semantic-tokens.ts",
                            "sha256": "48d9d0811aee0818753aa36624f7a66802e409cbdf00ca58c42e9df3b3773295"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-cli-ui-vim-mode-context",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-vim-mode-context",
                    "name": "VimModeProvider syncs editor state with persisted settings",
                    "description": "`VimModeContext.tsx` reads the merged settings to seed Vim enablement, exposes `toggleVimEnabled()` that writes `general.vimMode` back through `LoadedSettings.setValue`, and ensures entering Vim mode always resets to NORMAL. Consumers call `useVimMode()` and receive guardrails that throw outside of the provider, keeping modal editing state centralized for the CLI input buffer.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/VimModeContext.tsx",
                            "sha256": "3b3981faaf6baf74fe62f313a9e9ac323b56bab50e6f19abc1c39fd7afcf9ac3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.64
                },
                {
                    "id": "aspect-cli-ui-available-models",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-available-models",
                    "name": "Model registry filters vision preview availability",
                    "description": "`availableModels.ts` defines the Qwen model catalog, flags vision-capable entries, and exposes helpers that drop the vision model unless the preview flag is enabled. It also surfaces `getOpenAIAvailableModelFromEnv()` and `isVisionModel()` so UI selectors stay in sync with environment overrides.",
                    "tags": [
                        "cli-ui",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/models/availableModels.ts",
                            "sha256": "132b6e5a62d4e8129cbf866ddb070839b898ac704037bbf35ea75ebf8e6bf458"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-ui-types-history",
                    "sectionId": "section-cli-ui-shared",
                    "slug": "cli-ui-types-history",
                    "name": "CLI UI types codify history item variants and streaming enums",
                    "description": "`types.ts` declares `StreamingState`, `GeminiEventType`, tool-call status enums, and all `HistoryItem` discriminated unions so the UI can type-check message renderers and scheduler integrations without importing core internals.",
                    "tags": [
                        "cli-ui",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/types.ts",
                            "sha256": "ee28938260eccd6811f2633d0901307a786cae0e4af35be071284cd89bdbe67e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                }
            ]
        },
        {
            "id": "section-cli-subagent-ui",
            "slug": "cli-subagent-ui",
            "title": "CLI Subagent UI",
            "entries": [
                {
                    "id": "aspect-cli-subagent-create-wizard",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-create-wizard",
                    "name": "Subagent creation wizard manages multi-step state",
                    "description": "`AgentCreationWizard.tsx` owns the reducer-driven state machine for the six-step subagent flow, wiring `useKeypress` to route Esc between cancelling and backtracking, emitting debug panes in development, and composing the current step header/footer copy. It memoizes `WizardStepProps` so location, generation method, or manual entry steps plug in cleanly and ensures completed payloads feed `Config.getSubagentManager()` with consistent validation flags.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/AgentCreationWizard.tsx",
                            "sha256": "f1195d6317762e4b2e0c2f03733c9b3657f24c5a940db64bdd13111f076b94d6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.68
                },
                {
                    "id": "aspect-cli-subagent-manage-dialog",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-manage-dialog",
                    "name": "Agents manager dialog handles editing and deletion",
                    "description": "`AgentsManagerDialog.tsx` queries `Config.getSubagentManager()` on open, pushes view identifiers onto a stack, and decides whether Esc should unwind the dialog or simply pop the current pane. It injects data into the step renderers and toggles the dialog footer hints, leaving individual steps to manage editing, deletion, or inspection flows.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/manage/AgentsManagerDialog.tsx",
                            "sha256": "2c7c63a5c338dca38678a725b1da64a3f8536518238642d887bf2cf7481147bd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.66
                },
                {
                    "id": "aspect-cli-subagent-runtime-display",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-runtime-display",
                    "name": "Agent execution display tracks live task progress",
                    "description": "`runtime/AgentExecutionDisplay.tsx` renders compact/default/verbose layouts for `TaskResultDisplay`, colors headers from `COLOR_OPTIONS`, ties ctrl+r/ctrl+e to collapse/expand details, inlines pending approvals with `ToolConfirmationMessage`, summarizes completed runs, and shows failure reasons. It lets users monitor delegated subagent work directly in the conversation stream.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/runtime/AgentExecutionDisplay.tsx",
                            "sha256": "83bf159085c5ad914256849e7703c96bab7dda1da05df43e37e73f80efdcf44b"
                        }
                    ],
                    "lastUpdated": "2025-10-21",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-subagent-location-step",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-location-step",
                    "name": "Location selector commits project vs user scope",
                    "description": "`LocationSelector.tsx` wraps `RadioButtonSelect` with two presets mapping to project and user directories; when a value is highlighted and confirmed it dispatches `SET_LOCATION` and immediately advances the wizard so storage roots stay consistent with the eventual `SubagentManager` write path.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/LocationSelector.tsx",
                            "sha256": "dad35e9f31789b4cdd9014930b19800858c44fceb257ffb55ab5911381aced8b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-subagent-generation-step",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-generation-step",
                    "name": "GenerationMethodSelector toggles LLM vs manual authoring",
                    "description": "`GenerationMethodSelector.tsx` presents the Qwen-guided and manual creation modes, keeps the currently selected mode focused, and dispatches `SET_GENERATION_METHOD` so downstream steps know whether to invoke LLM scaffolding or the manual text entry flow before nudging the reducer to the next phase.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/GenerationMethodSelector.tsx",
                            "sha256": "168efb0bd0b815b1ec5c9852ae2290304881962ac07d6d6939dedf7a7a4946a1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-subagent-description-step",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-description-step",
                    "name": "DescriptionInput drives subagent prompt generation",
                    "description": "`DescriptionInput.tsx` sanitizes free-form text, flips the reducer into a generating state, and calls `subagentGenerator` with the active `Config` client while tracking an abort controller. Escape cancels active runs, errors are promoted via `SET_VALIDATION_ERRORS`, and successful completions push generated name/description/prompt back into state before advancing.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/DescriptionInput.tsx",
                            "sha256": "fe20ef623a084ee02a897a0bd0a45b953fa5a85d3feb05197bced39dd4c8fcc7"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.62
                },
                {
                    "id": "aspect-cli-subagent-text-entry-step",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-text-entry-step",
                    "name": "TextEntryStep parametrises manual wizard prompts",
                    "description": "`TextEntryStep.tsx` renders a reusable `TextInput` wrapper that injects per-step copy, placeholders, and validation, invoking `SET_VALIDATION_ERRORS` when checks fail and otherwise firing `onNext`. Manual name, prompt, and description phases all reuse this scaffold to share buffer sizing and error feedback.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/TextEntryStep.tsx",
                            "sha256": "37e79ea1d1b0380f37b02acbec4a05d8e6c4618c5bd48d70f2112be21060c10b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-cli-subagent-tool-selector",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-tool-selector",
                    "name": "ToolSelector derives categories from the live registry",
                    "description": "`ToolSelector.tsx` pulls `Kind` metadata from `Config.getToolRegistry()`, builds read/edit/execute groupings, and maps them into a `RadioButtonSelect` so users can commit 'all' or scoped tool sets. Highlight callbacks preview category membership, and selection normalises an empty array to mean 'all tools' for saved configs.",
                    "tags": [
                        "cli-ui",
                        "subagents",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/ToolSelector.tsx",
                            "sha256": "4843ba05a5fc75ec0700258c2d000e45c5feceebb14d1dd1827cdc7a6c5a96b6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.6
                },
                {
                    "id": "aspect-cli-subagent-color-selector",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-color-selector",
                    "name": "ColorSelector previews runtime accents",
                    "description": "`ColorSelector.tsx` reads the curated `COLOR_OPTIONS`, mirrors selection state locally, and maps highlights back to the wizard while rendering an Ink preview chip so operators can see the agent name in its eventual hue. Choosing 'auto' defers to runtime heuristics, keeping appearance and state in sync.",
                    "tags": [
                        "cli-ui",
                        "subagents",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/ColorSelector.tsx",
                            "sha256": "571be01e092e08c4e725ca5701fa91796039ed751258ab48b3a06de79034af90"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.44
                },
                {
                    "id": "aspect-cli-subagent-creation-summary",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-creation-summary",
                    "name": "CreationSummary validates conflicts and writes agents",
                    "description": "`CreationSummary.tsx` inspects the composed payload, warns about length limits or name collisions via `SubagentManager.isNameAvailable`, persists the agent with overwrite semantics, and optionally launches the editor for post-save tweaks. Success messaging auto-dismisses the dialog, while keypress handlers map enter/'s'/'e' shortcuts onto save flows.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/create/CreationSummary.tsx",
                            "sha256": "ed36363d03ba1a2fb510ec6bd9eb2b6aacc3629eea226e4d73b13bd42875b9c0"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.63
                },
                {
                    "id": "aspect-cli-subagent-wizard-constants",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-wizard-constants",
                    "name": "Wizard constants codify step order and palette",
                    "description": "`constants.ts` enumerates the step ordinals, user-facing labels, and the seven supported color options (including the automatic sentinel) used across creation and runtime renderers, keeping navigation copy and previews in sync across the wizard.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/constants.ts",
                            "sha256": "034b8a0c3a05225e861362fd11b9b76ac4d7039ff936530ae79c032803ea70ee"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.38
                },
                {
                    "id": "aspect-cli-subagent-wizard-reducer",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-wizard-reducer",
                    "name": "Wizard reducer gates navigation and validation",
                    "description": "`reducers.tsx` seeds `CreationWizardState` and enforces bounds on `SET_STEP`, toggles `canProceed`, and runs `validateStep` so each stage only unlocks when prerequisite fields are populated. It also branches manual vs generated flows, ensuring manual prompts add extra steps while assuring reset actions clear intermediate errors.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/reducers.tsx",
                            "sha256": "0e31b574aaa23ea756d84e92bb6654dbb55275d1c5018f6695c489946b9a8378"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-cli-subagent-wizard-types",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-wizard-types",
                    "name": "Wizard types define state, actions, and flows",
                    "description": "`types.ts` documents the `CreationWizardState`, union `WizardAction`, tool/category helpers, and management step identifiers so both creation and editing surfaces share navigation contracts. It keeps the reducer, UI components, and subagent manager aligned on the shape of wizard data.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/types.ts",
                            "sha256": "d53e38ba1f471542fdfaf2c112e2062ea88e79e5a296ecc3fa2ea09f2861888f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.36
                },
                {
                    "id": "aspect-cli-subagent-wizard-utils",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-wizard-utils",
                    "name": "Wizard utilities sanitize input and map steps",
                    "description": "`utils.ts` strips control characters, clamps whitespace, formats durations for execution summaries, and exposes `getStepKind`/`getTotalSteps` so the reducer and UI agree on manual vs guided flow lengths. It also centralises color display helpers to keep previews and runtime rendering consistent.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/utils.ts",
                            "sha256": "5d976f1bfb883c076efaf4988dea56558d13b72c70fec016ebc2161a046cfaf2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-cli-subagent-manage-selection",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-manage-selection",
                    "name": "AgentSelectionStep wires keyboard navigation across levels",
                    "description": "`manage/AgentSelectionStep.tsx` groups available agents by project, user, and builtin scope, watches keypresses to wrap between blocks with vim-style keys, and computes the global index before invoking `onAgentSelect`. It preserves focus even as inventories change so operators can pick the right agent quickly.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/manage/AgentSelectionStep.tsx",
                            "sha256": "b86bf59884898afb1f5ed6ebe20e1831cff00e29a4a05749867d768fe603f9a4"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-cli-subagent-manage-action",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-manage-action",
                    "name": "ActionSelectionStep filters edit operations for builtin agents",
                    "description": "`manage/ActionSelectionStep.tsx` presents view/edit/delete/back options through `RadioButtonSelect`, but prunes destructive actions when the chosen agent is builtin. It updates the navigation stack via `MANAGEMENT_STEPS`, keeping the manager dialog aligned with allowed operations.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/manage/ActionSelectionStep.tsx",
                            "sha256": "a887fc3751ca58ef35678d5b4478748bd654f8434ef3b86d28078d050293d46e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-subagent-manage-viewer",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-manage-viewer",
                    "name": "AgentViewerStep surfaces persisted agent metadata",
                    "description": "`manage/AgentViewerStep.tsx` lays out the selected agent\u2019s file path, tool roster, chosen color, description, and system prompt with Ink styling. It uses `shouldShowColor`/`getColorForDisplay` to avoid misleading previews when color is automatic and reports missing selections as errors.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/manage/AgentViewerStep.tsx",
                            "sha256": "06566f1858d4981b4a92ad045ae0595d816b795cebdbe39d1ee5cefb7c1d8dce"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-cli-subagent-manage-edit",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-manage-edit",
                    "name": "EditOptionsStep jumps to tools, color, or editor flows",
                    "description": "`manage/AgentEditStep.tsx` (exported as `EditOptionsStep`) lets operators pick between launching their editor via `useLaunchEditor`, editing tool assignments, or tweaking colors. It reflects errors if the editor launch fails and relies on `MANAGEMENT_STEPS` constants to push deeper dialogs.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/manage/AgentEditStep.tsx",
                            "sha256": "f0a21e82439e977a0431d4e6ba0908309e64bd7fc0a05afbf35545fbce23ea4f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-subagent-manage-delete",
                    "sectionId": "section-cli-subagent-ui",
                    "slug": "cli-subagent-manage-delete",
                    "name": "AgentDeleteStep confirms destructive operations via keypress",
                    "description": "`manage/AgentDeleteStep.tsx` listens for `y`/Enter to trigger the provided `onDelete` promise and `n` to cancel, keeping the dialog active until the parent clears the selection. It relies on Ink keypress plumbing to offer a fast keyboard-driven confirmation without extra menus.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/subagents/manage/AgentDeleteStep.tsx",
                            "sha256": "dce5b580fafa6f398c573c129a5939dd48b354138b76ffd3cb24647d3cfc196a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                }
            ]
        },
        {
            "id": "section-cli-ui-themes",
            "slug": "cli-ui-themes",
            "title": "CLI Themes & Palettes",
            "entries": [
                {
                    "id": "aspect-cli-ui-theme-semantic-proxy",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-semantic-proxy",
                    "name": "semantic-colors.ts proxies ThemeManager semantic buckets",
                    "description": "`semantic-colors.ts` exposes a lazy `theme` object whose getters forward to `themeManager.getSemanticColors()`, ensuring components reading `theme.text` or `theme.status` always reflect the currently selected palette.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/semantic-colors.ts",
                            "sha256": "699d480a0070ea37ff2f924c284dc3d29ebb56ec8e317a563777aa8e4fe3ee13"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-ui-theme-ansi",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-ansi",
                    "name": "ANSI theme maps highlight.js tokens to 16-color terminals",
                    "description": "`ansi.ts` constructs the dark `ANSI` Theme, binding highlight.js selectors to classic ANSI color names and providing diff backgrounds and gradients so the Ink UI stays legible on basic terminals.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/ansi.ts",
                            "sha256": "15ab91b0fb92898ad2291a9d281d263d312e5e6611e5882b2ef6cd53ad5f4940"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.41
                },
                {
                    "id": "aspect-cli-ui-theme-ansi-light",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-ansi-light",
                    "name": "ANSI Light theme preserves accessibility on bright backgrounds",
                    "description": "`ansi-light.ts` mirrors the ANSI palette for light terminals, swapping backgrounds to white, adjusting diff highlights, and remapping highlight.js selectors to stay readable without full RGB support.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/ansi-light.ts",
                            "sha256": "07ebd70b85d0a685566b33e0e09b768311a9a115d47ffae22f1ece2d141c5ee2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.38
                },
                {
                    "id": "aspect-cli-ui-theme-atom-one-dark",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-atom-one-dark",
                    "name": "Atom One Dark theme reproduces the editor palette",
                    "description": "`atom-one-dark.ts` ports the Atom One Dark highlight scheme into the Theme class, providing familiar colors for keywords, numbers, and strings when users switch away from the default palette.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/atom-one-dark.ts",
                            "sha256": "9513180671acce7c52a82e9f2341d592cbb6247aee76c996cf626d315dd190de"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.34
                },
                {
                    "id": "aspect-cli-ui-theme-ayu",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-ayu",
                    "name": "Ayu dark theme blends cyan accents with warm backgrounds",
                    "description": "`ayu.ts` defines the dark Ayu palette, pairing deep backgrounds with cyan and orange accents and precomputed diff colors so the CLI mimics popular editor themes.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/ayu.ts",
                            "sha256": "36d3bb551f5852613cbfe094afa9818ecf913e641b87af53efd51c9b445cffc9"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.34
                },
                {
                    "id": "aspect-cli-ui-theme-ayu-light",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-ayu-light",
                    "name": "Ayu Light theme adapts the palette for high-contrast daytime use",
                    "description": "`ayu-light.ts` supplies the light counterpart to Ayu, brightening the base colors while keeping accent hues and gradient ramps consistent with the dark variant.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/ayu-light.ts",
                            "sha256": "60e97643a0e29ade99738ac2df41ab0363d32c8bcbd3c21854962eac4b399673"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.32
                },
                {
                    "id": "aspect-cli-ui-theme-color-utils",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-color-utils",
                    "name": "color-utils.ts normalizes custom theme JSON into Theme inputs",
                    "description": "`color-utils.ts` validates user-supplied theme JSON, clamps missing highlight selectors to defaults, and converts color strings into the `ColorsTheme` shape so custom palettes plug into the Theme manager safely.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/color-utils.ts",
                            "sha256": "6a0243a9560cf461632875e91ab460d250bff57fbe111dd16f9f7463a59cd0a6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-ui-theme-default",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-default",
                    "name": "Default theme mirrors the Ink dark baseline",
                    "description": "`default.ts` encodes the dark default palette with teal accents and muted backgrounds, matching the CLI's historical look while feeding highlight.js style overrides into the Theme class.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/default.ts",
                            "sha256": "2f32f7e3c2ba492e719a212ce5e21aef1b34c5c004372356a4735e715f33daf5"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.4
                },
                {
                    "id": "aspect-cli-ui-theme-default-light",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-default-light",
                    "name": "Default Light theme keeps parity with the dark base",
                    "description": "`default-light.ts` provides the light variant of the default palette, swapping to pale backgrounds and recalibrated diff colors so UI affordances stay legible under bright terminals.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/default-light.ts",
                            "sha256": "0d2ee0856e485c52f186ffdaf86d4a053b3f88c256efdbe7bed0ee8a02460e9a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.36
                },
                {
                    "id": "aspect-cli-ui-theme-dracula",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-dracula",
                    "name": "Dracula theme ports the popular purple-heavy palette",
                    "description": "`dracula.ts` recreates the Dracula editor theme with magenta and cyan highlights, giving night-mode users a familiar color scheme across CLI output and Markdown rendering.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/dracula.ts",
                            "sha256": "88e42f74527474e43c48f239984ae60f8922657f3b17b58043c4222ee0c641dc"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.33
                },
                {
                    "id": "aspect-cli-ui-theme-github-dark",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-github-dark",
                    "name": "GitHub Dark theme matches the web editor",
                    "description": "`github-dark.ts` maps highlight selectors to the GitHub Dark palette, including teal keywords and amber literals, so terminal markdown mirrors what users see on github.com.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/github-dark.ts",
                            "sha256": "85a4923e9ab250bd04871874dd6a3bf03902e7eac12734016ad0f313e81695f9"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.34
                },
                {
                    "id": "aspect-cli-ui-theme-github-light",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-github-light",
                    "name": "GitHub Light theme brings parity for light terminals",
                    "description": "`github-light.ts` provides the bright GitHub palette with crisp blues and oranges, ensuring CLI diff previews resemble the GitHub UI when users prefer light backgrounds.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/github-light.ts",
                            "sha256": "1781ca468bfcf9db24d51b912e167abcbc7ca1e903cedec90b6f8f6e8230079d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.33
                },
                {
                    "id": "aspect-cli-ui-theme-googlecode",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-googlecode",
                    "name": "Googlecode theme targets monochrome-friendly environments",
                    "description": "`googlecode.ts` applies the Googlecode syntax colors, using muted pastels that stay legible on printers and basic terminals, rounding out the bundled palette set.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/googlecode.ts",
                            "sha256": "35bbf5ebf68c2034789f63ec49a25c10644ccf16eaf6c07d08f84fa64bada6b3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.32
                },
                {
                    "id": "aspect-cli-ui-theme-no-color",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-no-color",
                    "name": "NoColor theme strips all styling for accessibility",
                    "description": "`no-color.ts` manufactures a Theme with neutral foreground/background values and empty highlight overrides, supporting environments that set `NO_COLOR` or require high-contrast screen readers.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/no-color.ts",
                            "sha256": "4ad38c266822f01d16fa143b5d26b208ab65667b698bd9a2c38e1f92abe5cf75"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.43
                },
                {
                    "id": "aspect-cli-ui-theme-qwen-dark",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-qwen-dark",
                    "name": "Qwen Dark theme reflects the product brand palette",
                    "description": "`qwen-dark.ts` encodes the official Qwen dark colors\u2014deep navy backgrounds with bright cyan accents\u2014so the CLI can match marketing visuals out of the box.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/qwen-dark.ts",
                            "sha256": "3b7d0193281a711a5b78ea6af1c92244592850998d3595ed14829f001bf6ab90"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.37
                },
                {
                    "id": "aspect-cli-ui-theme-qwen-light",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-qwen-light",
                    "name": "Qwen Light theme keeps branding on bright backgrounds",
                    "description": "`qwen-light.ts` provides the light Qwen palette, balancing teal accents with neutral grays while preserving diff readability for users favoring light terminals.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/qwen-light.ts",
                            "sha256": "84e0b2affafae0059672e010f693c704d8beaad782387cf4f8c4c0ef0b04320c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.35
                },
                {
                    "id": "aspect-cli-ui-theme-shades-of-purple",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-shades-of-purple",
                    "name": "Shades of Purple theme brings neon accents",
                    "description": "`shades-of-purple.ts` implements Sarah Drasner's Shades of Purple palette, emphasizing magenta and lime highlights for users who prefer high-energy color schemes.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/shades-of-purple.ts",
                            "sha256": "98607f681dbf9a83d4f028ca5c6abcf22101d5ca98a0691d954f0e835e44680c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.32
                },
                {
                    "id": "aspect-cli-ui-theme-class",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-class",
                    "name": "Theme class stores highlight styles and color tokens together",
                    "description": "`theme.ts` defines the `Theme` class, bundling highlight.js selector overrides with `ColorsTheme` palettes and semantic color references so the manager can switch entire visual schemes atomically.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/theme.ts",
                            "sha256": "d729701458ad1194c401673292eea374c6572020a27ea554b99c14828cedab48"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-cli-ui-theme-xcode",
                    "sectionId": "section-cli-ui-themes",
                    "slug": "cli-ui-theme-xcode",
                    "name": "Xcode theme gives macOS developers familiar colors",
                    "description": "`xcode.ts` captures Xcode's blue and orange syntax palette, easing the transition for users accustomed to Apple's IDE when they adopt the CLI.",
                    "tags": [
                        "cli-ui",
                        "theming"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/themes/xcode.ts",
                            "sha256": "647a76b3cb1f65f63df8c2325913c43f52f01a02123b29a106c29d1a9d313416"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.32
                }
            ]
        },
        {
            "id": "section-cli-ui-dialogs",
            "slug": "cli-ui-dialogs",
            "title": "CLI Dialog State",
            "entries": [
                {
                    "id": "aspect-cli-ui-dialog-agents-manager",
                    "sectionId": "section-cli-ui-dialogs",
                    "slug": "cli-ui-dialog-agents-manager",
                    "name": "useAgentsManagerDialog toggles the subagent manager modal",
                    "description": "`useAgentsManagerDialog.ts` keeps an Ink state flag plus memoized open/close callbacks so menu items can spawn the Agents Manager dialog without duplicating state wiring across components.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useAgentsManagerDialog.ts",
                            "sha256": "7e810b6a0cf1fde7824046a165844ef7a06a2f8318c291c9c712afbde6800d77"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.34
                },
                {
                    "id": "aspect-cli-ui-dialog-close-hook",
                    "sectionId": "section-cli-ui-dialogs",
                    "slug": "cli-ui-dialog-close-hook",
                    "name": "useDialogClose funnels Ctrl+C into active dialog dismissals",
                    "description": "`useDialogClose.ts` centralizes the logic that ESC uses\u2014cycling through theme, editor, settings, folder trust, privacy, welcome, and quit-confirm modals\u2014so a Ctrl+C handler can close whichever dialog is on screen instead of terminating the app.",
                    "tags": [
                        "cli-ui",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useDialogClose.ts",
                            "sha256": "67271aa12942e3d75c504990f68aac06251dfd0a03c3e1e6287b6eb8015c4d8d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-ui-dialog-editor-settings",
                    "sectionId": "section-cli-ui-dialogs",
                    "slug": "cli-ui-dialog-editor-settings",
                    "name": "useEditorSettings validates preferred editor changes",
                    "description": "`useEditorSettings.ts` opens the editor picker, rejects selections that lack binaries or sandbox support, persists the preference via `LoadedSettings.setValue`, and posts an INFO history item so users see confirmation inline.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useEditorSettings.ts",
                            "sha256": "53e6259dae960499d1605fdd8b59ada256a523c4e98ddc637c12401af8938897"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-ui-dialog-settings",
                    "sectionId": "section-cli-ui-dialogs",
                    "slug": "cli-ui-dialog-settings",
                    "name": "useSettingsCommand toggles the CLI settings dialog",
                    "description": "`useSettingsCommand.ts` exposes memoized open/close handlers and a boolean flag that the command palette binds to the settings modal, decoupling UI buttons and slash commands from Ink state plumbing.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useSettingsCommand.ts",
                            "sha256": "5d783347fa77d9460775ac3a4bfe481e62edf2840b0ac3b7a72fbb830db55c7c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.33
                },
                {
                    "id": "aspect-cli-ui-dialog-subagent-create",
                    "sectionId": "section-cli-ui-dialogs",
                    "slug": "cli-ui-dialog-subagent-create",
                    "name": "useSubagentCreateDialog controls the creation wizard entry point",
                    "description": "`useSubagentCreateDialog.ts` wraps `useState` for the create-wizard visibility and returns stable open/close callbacks so menu items and slash commands can launch the subagent creator without duplicating state.",
                    "tags": [
                        "cli-ui",
                        "subagents"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useSubagentCreateDialog.ts",
                            "sha256": "7528e85deda707efecf02b1c7839708aa25fabd376dfed5d4fba2add3fa75ade"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.33
                }
            ]
        },
        {
            "id": "section-cli-ui-contexts",
            "slug": "cli-ui-contexts",
            "title": "CLI UI Contexts",
            "entries": [
                {
                    "id": "aspect-cli-ui-context-settings",
                    "sectionId": "section-cli-ui-contexts",
                    "slug": "cli-ui-context-settings",
                    "name": "SettingsContext shares merged preferences and handlers",
                    "description": "`SettingsContext.tsx` houses the Ink context that exposes loaded settings, dialog toggles, and helpers like `handleThemeSelect` and `handleAuthSelect`, letting downstream components read/write CLI preferences without prop drilling.",
                    "tags": [
                        "cli-ui",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/SettingsContext.tsx",
                            "sha256": "e1067dac9490b585aedb71fcbc50340d5b1f08157f6db624ce97bdf7a3fe83b6"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-cli-ui-context-streaming",
                    "sectionId": "section-cli-ui-contexts",
                    "slug": "cli-ui-context-streaming",
                    "name": "StreamingContext tracks Gemini event flow and pending chunks",
                    "description": "`StreamingContext.tsx` keeps the current `StreamingState`, partial Gemini output, and pending tool-call metadata so UI surfaces can render live responses, confirm dialogs, and status banners in sync with the chat loop.",
                    "tags": [
                        "cli-ui",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/StreamingContext.tsx",
                            "sha256": "8fcf578f7bce932a281f2598d48d0fd64dda14bd29d120e4172c97daa4d82150"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-ui-session-stats",
                    "slug": "cli-ui-session-stats",
                    "name": "Session stats context streams telemetry into the TUI",
                    "description": "SessionStatsProvider in `SessionContext.tsx` wires the shared `uiTelemetryService` into React state, seeds metrics and session IDs, and exposes helpers that increment prompt counts and surface the latest token totals to downstream components. By synchronizing `promptCount` and per-turn metrics next to the Ink tree, dialogs and dashboards can rely on live telemetry without touching the core runtime.",
                    "tags": [
                        "cli-ui",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/SessionContext.tsx",
                            "sha256": "a76e079053feae950b05da1f1623dff7c15e17cbd0dafb65a99e5ff6efe149db"
                        }
                    ],
                    "importance": 0.63,
                    "sectionId": "section-cli-ui-contexts",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-keypress-provider",
                    "slug": "cli-ui-keypress-provider",
                    "name": "KeypressProvider normalizes Kitty protocol input and paste mode",
                    "description": "`KeypressContext.tsx` switches stdin to raw mode, buffers data chunks, detects OSC 200/201 paste sentinels, and parses Kitty keyboard escape sequences so listeners get consistent `Key` objects. It throttles backslash+Enter detection, logs overlong sequences, and reports buffer overflows to telemetry, giving the CLI stable keyboard semantics across terminals.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/KeypressContext.tsx",
                            "sha256": "3be134052f91d03134e2cc59d26d5853815e083974b0fd3ad813863a4c67c0ed"
                        }
                    ],
                    "importance": 0.68,
                    "sectionId": "section-cli-ui-contexts",
                    "lastUpdated": "2025-10-18"
                },
                {
                    "id": "aspect-cli-ui-overflow-provider",
                    "slug": "cli-ui-overflow-provider",
                    "name": "OverflowProvider tracks scrollback IDs for expanders",
                    "description": "`OverflowContext.tsx` maintains a Set of overflowing element IDs and memoised add/remove callbacks so components can flip \"show more\" affordances without re-render storms. It ensures IDs are deduped and lets listeners decide which panels should render truncation controls when the terminal height is exceeded.",
                    "tags": [
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/OverflowContext.tsx",
                            "sha256": "12cbcb967e041854a09aa4122c38fdea76f665774ef3774a03836be646693191"
                        }
                    ],
                    "importance": 0.55,
                    "sectionId": "section-cli-ui-contexts",
                    "lastUpdated": "2025-10-18"
                }
            ]
        },
        {
            "id": "section-cli-ui-tests",
            "slug": "cli-ui-tests",
            "title": "CLI UI Tests",
            "entries": [
                {
                    "id": "aspect-cli-ui-test-auth-dialog",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-auth-dialog",
                    "name": "AuthDialog tests cover env-driven defaults and errors",
                    "description": "`AuthDialog.test.tsx` seeds `LoadedSettings` permutations plus `GEMINI_API_KEY`/`QWEN_DEFAULT_AUTH_TYPE` combinations to ensure invalid initial selections surface the provided error message, API-key hints only show when the default type requires them, and alternate defaults skip the notice while keeping OpenAI as the visible option.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/AuthDialog.test.tsx",
                            "sha256": "977b694ca4d10840860d0a6f8b777a61444c00b1366369b94e58969b1a19ccfd"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-cli-ui-test-folder-trust-dialog",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-folder-trust-dialog",
                    "name": "FolderTrustDialog tests guard restart and escape flows",
                    "description": "`FolderTrustDialog.test.tsx` drives the Ink harness to confirm Esc maps to `DO_NOT_TRUST` only when the restart banner is hidden, shows the post-restart warning copy, and verifies pressing `r` exits via `process.exit(0)` exclusively in restart mode so untrusted folders never keep stale approval state.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "security"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/FolderTrustDialog.test.tsx",
                            "sha256": "4c707c21ae40d2b1b59736fc2b3292767b03e4b35e0e54c7f3079a1490d30644"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.44
                },
                {
                    "id": "aspect-cli-ui-test-model-selection",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-model-selection",
                    "name": "ModelSelectionDialog tests ensure keyboard navigation and labels",
                    "description": "`ModelSelectionDialog.test.tsx` mocks `useKeypress` and `RadioButtonSelect` to assert Esc closes the dialog, `(current)` and `[Vision]` annotations render beside the right models, empty offerings zero the selection index, and choosing an option calls `onSelect` with the model ID.",
                    "tags": [
                        "cli-ui",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ModelSelectionDialog.test.tsx",
                            "sha256": "29682fe4490ca9cb4d47bf3b1f3c7bafdcfac984a8555316fc5fd2f78b835271"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.41
                },
                {
                    "id": "aspect-cli-ui-test-model-switch",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-model-switch",
                    "name": "ModelSwitchDialog tests drive vision switch outcomes",
                    "description": "`ModelSwitchDialog.test.tsx` verifies the three RadioButtonSelect choices map to `VisionSwitchOutcome` enums, confirms escape defaults to `ContinueWithCurrentModel`, checks enum string values, and ensures multiple selections emit the correct sequence of callbacks.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ModelSwitchDialog.test.tsx",
                            "sha256": "ffac89d208bc7446309aa7a53b597943634924113a53e061506526ee2c6025fa"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.39
                },
                {
                    "id": "aspect-cli-ui-test-openai-key-prompt",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-openai-key-prompt",
                    "name": "OpenAIKeyPrompt tests validate instructions and paste handling",
                    "description": "`OpenAIKeyPrompt.test.tsx` snapshots the onboarding panel, including the Bailian API URL and control hints, and feeds bracketed paste sequences to confirm control markers are stripped before the UI passes values into `onSubmit`.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "openai"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/OpenAIKeyPrompt.test.tsx",
                            "sha256": "160c9bc70816012c3da0481c0fd4662a2a8828f7108f118acb4b1ab8741117f3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.36
                },
                {
                    "id": "aspect-cli-ui-test-qwen-oauth-progress",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-qwen-oauth-progress",
                    "name": "QwenOAuthProgress tests exercise timers, QR codes, and cancel paths",
                    "description": "`QwenOAuthProgress.test.tsx` runs fake timers to prove countdowns tick from the device code expiry, triggers `onTimeout`, checks animated 'Waiting for authorization' dots, stubs `qrcode-terminal` to render the Static QR block, and verifies ESC/timeout keypresses flow into `onCancel` in both loading and authenticated states.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/QwenOAuthProgress.test.tsx",
                            "sha256": "2e00694207089f978702a3653cc47b834ce3c02c39b8d9b95765be399cb8bea2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                },
                {
                    "id": "aspect-cli-ui-test-settings-dialog",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-settings-dialog",
                    "name": "SettingsDialog tests simulate multi-scope toggles and Vim wiring",
                    "description": "`SettingsDialog.test.tsx` mounts the dialog under mocked `SettingsContext` and `VimModeContext`, drives arrow/vim/tab navigation, flips scoped settings between user and workspace, asserts restart-required banners, and ensures `toggleVimEnabled`/`setVimMode` are triggered when the Vim preference is toggled.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/SettingsDialog.test.tsx",
                            "sha256": "05bbe0a2ead1409971974e1be9ca3c858d46687f27a1f6692c5cf39e36b44691"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-cli-ui-test-shell-confirmation",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-shell-confirmation",
                    "name": "ShellConfirmationDialog tests snapshot consent options",
                    "description": "`ShellConfirmationDialog.test.tsx` renders the confirmation panel with sample commands to freeze the Ink snapshot and asserts the three options (`ProceedOnce`, session allow, cancel) are present so sandbox approvals keep their copy and ordering.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "security"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ShellConfirmationDialog.test.tsx",
                            "sha256": "31a0dfc5695be67f69b8cc0f31372b98083f6fc4560050b90e0d5ed730dc33c8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.33
                },
                {
                    "id": "aspect-cli-ui-test-tool-message",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-tool-message",
                    "name": "ToolMessage tests cover status icons and diff rendering",
                    "description": "`ToolMessage.test.tsx` injects mocked Markdown, diff, and spinner components to check each `ToolCallStatus` renders the right glyph, streaming mode swaps to the responding spinner, diff results hit the renderer, and emphasis flags add the trailing indicator only for high-priority calls.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/ToolMessage.test.tsx",
                            "sha256": "661fdb71fb273e49d69ce4ca0879b602ff26e3334708a0cd54cdd862af5131b8"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-cli-ui-test-tool-group-message",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-tool-group-message",
                    "name": "ToolGroupMessage tests cover grouped layouts and focus states",
                    "description": "`ToolGroupMessage.test.tsx` snapshots single and mixed tool batches, including shell commands with yellow borders and confirmation cards, and feeds limited terminal heights so the component trims outputs while preserving focused call emphasis.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/ToolGroupMessage.test.tsx",
                            "sha256": "870be8a91b378a6a2c61258de9c61968d80970d7c875efb19ccf94c416c9bda1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.44
                },
                {
                    "id": "aspect-cli-ui-test-tool-confirmation-message",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-tool-confirmation-message",
                    "name": "ToolConfirmationMessage tests gate trust-aware prompts",
                    "description": "`ToolConfirmationMessage.test.tsx` ensures URL lists collapse when they duplicate the prompt, renders plan markdown, and toggles the 'allow always' buttons based on `Config.isTrustedFolder()` for edit/exec/info/MCP confirmations so trust state drives the available approvals.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "security"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/messages/ToolConfirmationMessage.test.tsx",
                            "sha256": "a3ecd6995d6f55324be2ed3ef15b9ba38f211fde84b83dfb90f596e325c76bb0"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-cli-ui-test-radio-button-select",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-radio-button-select",
                    "name": "RadioButtonSelect tests lock down pagination and keyboard input",
                    "description": "`RadioButtonSelect.test.tsx` snapshots numbered, scrollable, and themed lists, checks empty inputs render nothing, and pumps arrow/Enter keystrokes to prove navigation wraps correctly while ignoring input when `isFocused` is false.",
                    "tags": [
                        "cli-ui",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/shared/RadioButtonSelect.test.tsx",
                            "sha256": "3d9e17f35bd22075e766de342e87c09ef80499826b6dc2905bd0710b03fcdb4b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-cli-ui-test-max-sized-box",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-max-sized-box",
                    "name": "MaxSizedBox tests enforce overflow truncation rules",
                    "description": "`MaxSizedBox.test.tsx` renders content under the `OverflowProvider` to assert top and bottom overflow messages, width wrapping, mixed wrap/unwrapped segments, and long token splitting all behave before truncation warnings appear.",
                    "tags": [
                        "cli-ui",
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/shared/MaxSizedBox.test.tsx",
                            "sha256": "40d0aa31bd6511efcdc71078c218098ba0e67a76c576a5453e805e43e11d7b67"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.38
                },
                {
                    "id": "aspect-cli-ui-test-keypress-context",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-keypress-context",
                    "name": "KeypressContext tests parse Kitty sequences and paste sentinels",
                    "description": "`KeypressContext.test.tsx` mounts the provider around a mocked Ink stdin to decode Kitty protocol enter/backspace/tab variants with modifiers, confirm disabling Kitty falls back to raw keypresses, and reconstruct bracketed paste payloads across fragmented data events before emitting a single `{ paste: true }` callback.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/KeypressContext.test.tsx",
                            "sha256": "a474a95957f25a13430c700dd61ab04d021e8fa3ee5b582a146dc60411d27222"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-cli-ui-test-session-context",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-session-context",
                    "name": "SessionContext tests stream telemetry updates into state",
                    "description": "`SessionContext.test.tsx` routes the provider through a harness to assert initial stats seed timestamps, emits `uiTelemetryService.update` events to verify metrics and last prompt token counts propagate, and ensures `useSessionStats` throws when called outside the provider.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/contexts/SessionContext.test.tsx",
                            "sha256": "f6bf25861e06e9b85cea7df6a5803226f8d88c230133d6913b639cf590c443ab"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "sectionId": "section-cli-ui-tests",
                    "id": "aspect-cli-ui-test-context-summary",
                    "slug": "cli-ui-test-context-summary",
                    "name": "ContextSummaryDisplay tests enforce breakpoint layout",
                    "description": "`packages/cli/src/ui/components/ContextSummaryDisplay.test.tsx` stubs `useTerminalSize` to verify the summary sticks to a single line at \u226580 columns, breaks into bullet lines below that, hides empty MCP/QWEN sections, and keeps hotkey hints aligned. It prevents regressions in the banner that explains which context sources are active.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ContextSummaryDisplay.test.tsx",
                            "sha256": "7bab40c314fe5c25f0a61d8c1575e46aa7afbd4e30f18db1f45e5f5933e4aa43"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.38
                },
                {
                    "sectionId": "section-cli-ui-tests",
                    "id": "aspect-cli-ui-test-history-display",
                    "slug": "cli-ui-test-history-display",
                    "name": "HistoryItemDisplay tests map every message type to the right card",
                    "description": "`packages/cli/src/ui/components/HistoryItemDisplay.test.tsx` renders the component under `SessionStatsProvider` to ensure user prompts, slash commands, stats, about panes, model/tool metrics, and quit summaries all delegate to the expected subcomponents and copy. The suite confirms transcript rows stay coherent as new types are added.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/HistoryItemDisplay.test.tsx",
                            "sha256": "b71954ac2e4ef9e831a21252e32472101fe72d3cd0af116ba1bc216969bac85a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.4
                },
                {
                    "sectionId": "section-cli-ui-tests",
                    "id": "aspect-cli-ui-test-input-prompt",
                    "slug": "cli-ui-test-input-prompt",
                    "name": "InputPrompt tests cover shell mode, completions, and clipboard paste",
                    "description": "`packages/cli/src/ui/components/InputPrompt.test.tsx` drives the Ink harness to assert shell history is only consulted in shell mode, slash/@ completions respond to arrow/tab combos, clipboard image pastes insert `@`-relative paths and clean temp files, and Ctrl+C/backslash flows reset the buffer without losing command context. It guards the heart of the terminal input UX.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/InputPrompt.test.tsx",
                            "sha256": "f243e837b8b64f904e2404bb2079f0a08c1c89b9db2dbcc33e5229366606f9d2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "sectionId": "section-cli-ui-tests",
                    "id": "aspect-cli-ui-test-loading-indicator",
                    "slug": "cli-ui-test-loading-indicator",
                    "name": "LoadingIndicator tests pin streaming states and responsive layout",
                    "description": "`packages/cli/src/ui/components/LoadingIndicator.test.tsx` mocks `StreamingContext` and `useTerminalSize` to prove idle renders nothing, responding mode shows the spinner, cancel hint, and humanised timers, confirmation swaps to a static glyph, and narrow terminals spread content across three lines. It also checks thought subjects override fallback phrases and right-side content survives rerenders.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/LoadingIndicator.test.tsx",
                            "sha256": "01e9ce6486fea43e9634ddb3de4e94e2828877723bf7a1e2c26a770d0c2d165d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.39
                },
                {
                    "sectionId": "section-cli-ui-tests",
                    "id": "aspect-cli-ui-test-model-stats",
                    "slug": "cli-ui-test-model-stats",
                    "name": "ModelStatsDisplay tests clamp conditional rows and large values",
                    "description": "`packages/cli/src/ui/components/ModelStatsDisplay.test.tsx` stubs `useSessionStats` to verify the widget hides cached/thought/tool columns until metrics exist, formats big numbers deterministically, and renders multiple models without layout breaks. Snapshot assertions lock glyph spacing for the session metrics view.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ModelStatsDisplay.test.tsx",
                            "sha256": "a2d29394ecf5e1b5b609808d4d26844248293adf03717078b1d307b3f3e59033"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.41
                },
                {
                    "sectionId": "section-cli-ui-tests",
                    "id": "aspect-cli-ui-test-session-summary",
                    "slug": "cli-ui-test-session-summary",
                    "name": "SessionSummaryDisplay test locks shutdown banner metrics",
                    "description": "`packages/cli/src/ui/components/SessionSummaryDisplay.test.tsx` feeds synthetic `SessionMetrics` into the context to ensure the farewell card renders model counts, token tallies, file deltas, and duration strings when the chat exits. The snapshot protects the closing copy shown after `/quit`.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/SessionSummaryDisplay.test.tsx",
                            "sha256": "6ec293c1ad01f03cf1397cbf9f596e63d14b3a11fce0f93c100e1f2ff0b26088"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.37
                },
                {
                    "sectionId": "section-cli-ui-tests",
                    "id": "aspect-cli-ui-test-tool-stats",
                    "slug": "cli-ui-test-tool-stats",
                    "name": "ToolStatsDisplay tests exercise aggregates, agreement, and snapshots",
                    "description": "`packages/cli/src/ui/components/ToolStatsDisplay.test.tsx` mocks session metrics to check the table emits the no-data banner, renders multiple tools with success/failure/decision breakdowns, formats huge counts, and prints agreement rates even when totals are zero. Snapshot baselines keep the tool telemetry dashboard stable.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/components/ToolStatsDisplay.test.tsx",
                            "sha256": "eeb13bb93912a92e30c89679f6c34484e5dbc75f8257e0be5af702f7c30ad28e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.4
                },
                {
                    "id": "aspect-cli-ui-test-use-keypress",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-use-keypress",
                    "name": "useKeypress test simulates bracketed paste and raw mode guards",
                    "description": "`projects/qwen-code/packages/cli/src/ui/hooks/useKeypress.test.ts` wraps the hook in a mocked `KeypressProvider` and Ink stdin to confirm it no-ops when inactive, toggles raw mode exactly once, and normalises Kitty vs legacy bracketed paste into a single callback before flushing pending buffers on unmount. It also verifies modifier detection (Alt+Enter, Ctrl combinations) so downstream handlers receive consistent key metadata across terminals.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useKeypress.test.ts",
                            "sha256": "12eb370e87e2f034ce988a210088e6ba8bb9d1b39aef355caf76fe4a115f5837"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-cli-ui-test-use-auto-accept",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-use-auto-accept",
                    "name": "useAutoAcceptIndicator test cycles approval modes with warnings",
                    "description": "`projects/qwen-code/packages/cli/src/ui/hooks/useAutoAcceptIndicator.test.ts` mocks the shared `Config` to prove initial state mirrors persisted `ApprovalMode`, Shift+Tab rotates through PLAN \u2192 AUTO_EDIT \u2192 YOLO with the right footer messages, and warnings are emitted when jumping into auto-apply modes. It also checks external config changes resync the hook, keeping the footer indicator aligned with approval policy changes.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "cli-config"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useAutoAcceptIndicator.test.ts",
                            "sha256": "5ef1c175f5622bf5ca6a41f1b9fea931232bab3eafd2bad6c4c65be5c4c568f5"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.43
                },
                {
                    "id": "aspect-cli-ui-test-use-gemini-stream",
                    "sectionId": "section-cli-ui-tests",
                    "slug": "cli-ui-test-use-gemini-stream",
                    "name": "useGeminiStream test orchestrates cancellations and tool scheduling",
                    "description": "`projects/qwen-code/packages/cli/src/ui/hooks/useGeminiStream.test.tsx` exercises the hook\u2019s entire happy path: tool calls aren\u2019t submitted until every tracked call finishes, escape cancels streams and commits pending tool output, vision auto-switch can veto submissions, and finish reasons add the right info messages. It also asserts memory refresh runs on `save_memory`, slash commands short-circuit Gemini calls, and concurrency guards block overlapping `submitQuery` invocations, proving the chat loop reacts correctly to every orchestration edge case.",
                    "tags": [
                        "cli-ui",
                        "testing",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/ui/hooks/useGeminiStream.test.tsx",
                            "sha256": "f8f6f554c17f9671cdeb8934018df3beb0fff501127a5653e6eb34c32d8bd455"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                }
            ]
        },
        {
            "id": "section-test-utilities",
            "slug": "test-utilities",
            "title": "Test Utilities",
            "entries": [
                {
                    "id": "aspect-test-utils-cli-custom-matchers",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-cli-custom-matchers",
                    "name": "CLI tests add TextBuffer validity matcher",
                    "description": "`customMatchers.ts` extends Vitest's `expect` with `toHaveOnlyValidCharacters`, scanning Ink `TextBuffer` lines for newlines, control codes, and ANSI escapes so TUI assertions fail fast when buffers contain terminal-breaking bytes.",
                    "tags": [
                        "testing",
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/test-utils/customMatchers.ts",
                            "sha256": "e942170bd8d59ceaf3de8f618558a98e11a719d95f28e6de0ef80bb6dbcbaa6f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "id": "aspect-test-utils-cli-command-context",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-cli-command-context",
                    "name": "createMockCommandContext wires deep-mocked CLI services",
                    "description": "`mockCommandContext.ts` builds a deeply merged clone of the CLI `CommandContext`, pre-populating Ink UI handlers, settings storage, and Git/logging mocks with `vi.fn()` so slash-command tests can override just the bits they care about without hand-wiring every dependency.",
                    "tags": [
                        "testing",
                        "cli-runtime"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/test-utils/mockCommandContext.ts",
                            "sha256": "39bf16f59cd6e72c65f065cac4f9827b4426179d3e10e01fe6c02b8b9571f371"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-test-utils-cli-render-with-providers",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-cli-render-with-providers",
                    "name": "renderWithProviders boots Ink tests with KeypressContext",
                    "description": "`render.tsx` wraps Ink's `render` helper inside the CLI `KeypressProvider`, enabling component tests to receive synthesized keyboard events (including Kitty protocol support) without reimplementing provider scaffolding in every test.",
                    "tags": [
                        "testing",
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/src/test-utils/render.tsx",
                            "sha256": "f32f4e4f6d12ec0e46b00058cc0a40977a72227f4aa2afa328fed61cd915e135"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.39
                },
                {
                    "id": "aspect-test-utils-cli-test-setup",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-cli-test-setup",
                    "name": "CLI test-setup clears NO_COLOR and installs matchers",
                    "description": "`test-setup.ts` removes `NO_COLOR` to keep snapshot themes stable and imports the custom matchers module so every Vitest suite gets the `toHaveOnlyValidCharacters` assertion.",
                    "tags": [
                        "testing",
                        "cli-ui"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/test-setup.ts",
                            "sha256": "1b85cabd76d5097cacb812610a87b86d7888fbf230ca62e8f75b90d2095220d3"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.36
                },
                {
                    "id": "aspect-test-utils-cli-vitest-config",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-cli-vitest-config",
                    "name": "CLI Vitest config enables jsdom and V8 coverage reports",
                    "description": "`vitest.config.ts` runs CLI tests in jsdom, enables global APIs, pipes results to JUnit/HTML/LCOV outputs, and wires coverage includes so UI packages stay measured in CI.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/cli/vitest.config.ts",
                            "sha256": "c1a7d563b9f5202befe37ce0e46a8486a38d381c373a8f2e62ce57d68dd90f38"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.44
                },
                {
                    "id": "aspect-test-utils-core-fs-promises-mock",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-core-fs-promises-mock",
                    "name": "fs/promises mock exposes readFile control hooks",
                    "description": "`__mocks__/fs/promises.ts` forwards all Node fs promises except `readFile`, which becomes a `vi.fn()` with a shared control handle so Vitest suites can script IO responses without patching import caches.",
                    "tags": [
                        "testing",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/__mocks__/fs/promises.ts",
                            "sha256": "73b99ce091a6e42d9e741e0ab69ce12fe33e866ef7b9716f99df1abe75a62b5e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "id": "aspect-test-utils-core-msw-server",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-core-msw-server",
                    "name": "msw.ts boots a shared MSW test server",
                    "description": "`mocks/msw.ts` instantiates an MSW node server that integration tests import to stub HTTP endpoints without repeating boilerplate setup.",
                    "tags": [
                        "testing",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/mocks/msw.ts",
                            "sha256": "1eb68be721b1f29c6d13a458644bcf07531295feffb906c446b10f06a15ac961"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.35
                },
                {
                    "id": "aspect-test-utils-core-workspace-context",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-core-workspace-context",
                    "name": "createMockWorkspaceContext fakes directory membership",
                    "description": "`mockWorkspaceContext.ts` returns a Vitest-mocked `WorkspaceContext` whose `isPathWithinWorkspace` and `getDirectories` methods operate on in-memory lists, letting core services test workspace logic without disk access.",
                    "tags": [
                        "testing",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/test-utils/mockWorkspaceContext.ts",
                            "sha256": "434ac680f1a7fabf391a22b112ba34d44db251a1a88ced06d9b15e4d48edb1a2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.39
                },
                {
                    "id": "aspect-test-utils-core-tools",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-core-tools",
                    "name": "MockTool and MockModifiableTool drive tool scheduler tests",
                    "description": "`tools.ts` subclasses `BaseDeclarativeTool` to create configurable mock tools and modifiable tool invocations, including confirm prompts and edit contexts, so tool orchestration tests can simulate approvals and diffs.",
                    "tags": [
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/test-utils/tools.ts",
                            "sha256": "284fbe7b974763dc7672c9301e109ed2889008e1a95818632e2f5769f6ceb4a4"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-test-utils-core-rate-limit-sim",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-core-rate-limit-sim",
                    "name": "testUtils.ts toggles synthetic 429 responses",
                    "description": "`utils/testUtils.ts` tracks request counts and auth-type filters to selectively throw simulated 429 errors, letting rate-limit fallback logic exercise retry and disable paths in unit tests.",
                    "tags": [
                        "testing",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/testUtils.ts",
                            "sha256": "cb1a793e6e42ef5bfeb4406855121b38694c28dfa7a95e27deb4948ce3111f83"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.4
                },
                {
                    "id": "aspect-test-utils-package-index",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-package-index",
                    "name": "@qwen-code/test-utils root entry exports file helpers",
                    "description": "`packages/test-utils/index.ts` re-exports the file-system helper bundle so external packages can import from `@qwen-code/test-utils` without knowing internal paths.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/test-utils/index.ts",
                            "sha256": "820a0799c64d7af841ffde7a8743dc5f584552f8bf562be2c627a62d8f5d5cb1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.31
                },
                {
                    "id": "aspect-test-utils-package-file-helpers",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-package-file-helpers",
                    "name": "file-system-test-helpers build disposable workspace trees",
                    "description": "`packages/test-utils/src/file-system-test-helpers.ts` turns nested dicts into temporary directory trees and provides cleanup helpers, streamlining integration tests that need complex workspace layouts.",
                    "tags": [
                        "testing",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/test-utils/src/file-system-test-helpers.ts",
                            "sha256": "cd8a41ae227852c6035817d4ee0efa41639cb27fbcd8fc6483a977b4925e0c0e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                },
                {
                    "id": "aspect-test-utils-package-src-index",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-package-src-index",
                    "name": "src/index.ts re-exports file helpers for tree-shaking",
                    "description": "`packages/test-utils/src/index.ts` re-exports the file-system helpers so bundlers can resolve ESM entrypoints while still providing CommonJS compatibility via the root index.",
                    "tags": [
                        "testing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/test-utils/src/index.ts",
                            "sha256": "e83624129944ff1293dfd30143af90c10f97d95cfc8995ccefad9ef8f157243c"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.28
                },
                {
                    "id": "aspect-test-utils-vscode-vitest-config",
                    "sectionId": "section-test-utilities",
                    "slug": "test-utils-vscode-vitest-config",
                    "name": "VS Code companion Vitest config runs in Node with coverage",
                    "description": "`packages/vscode-ide-companion/vitest.config.ts` runs extension tests in a Node environment, enables V8 coverage with multiple reporters, and limits includes/excludes to the extension source tree.",
                    "tags": [
                        "testing",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/vscode-ide-companion/vitest.config.ts",
                            "sha256": "207e8ab8b997ab2e0b6f4116d0144f7cfcd4e29e3d85880d8d9c5a7bff26ef8a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.38
                }
            ]
        },
        {
            "id": "section-core-engine-tests",
            "slug": "core-engine-tests",
            "title": "Core Engine Tests",
            "entries": [
                {
                    "id": "aspect-core-engine-tests-gemini-client",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-gemini-client",
                    "name": "Gemini client tests cover embedding, streaming, and generator selection",
                    "description": "`core/client.test.ts` checks `findIndexAfterFraction` edge cases and mocks `GoogleGenAI` to ensure `GeminiClient` emits pending compression events, batches embeddings, and clears pending state on errors. `core/contentGenerator.test.ts` forces different `AuthType` branches so `createContentGenerator` swaps Vertex, DashScope, and OpenRouter providers, while `core/geminiChat.test.ts` fakes `Turn.run` to verify streaming retries, history recording, and concurrency gates.",
                    "tags": [
                        "testing",
                        "core-engine",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/client.test.ts",
                            "sha256": "3bd837363c51df98a29e1c6d1df5c6efa4b6cb483d514a8fff54f1f48419d692"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/contentGenerator.test.ts",
                            "sha256": "c634721615c3c72795e8c4b0c140172ec43ffdd63eac03a4b997cc438b059a66"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/geminiChat.test.ts",
                            "sha256": "2acbac8119636dbfa56e75b0c677beaeced742f897954d7c03d84fdcc9fa2352"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-core-engine-tests-gemini-request",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-gemini-request",
                    "name": "Gemini request tests assert logging and prompt fallbacks",
                    "description": "`core/geminiRequest.test.ts` exercises `partListUnionToString` against mixed tool-call payloads, while `core/logger.test.ts` validates the structured payload emitted to Clearcut/Qwen loggers. `core/prompts.test.ts` pins plan-mode reminders, default system prompts, and template interpolation used by both Gemini and OpenAI generators.",
                    "tags": [
                        "testing",
                        "core-engine",
                        "telemetry"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/geminiRequest.test.ts",
                            "sha256": "6acbdf96211deb743bd006d7d1d3a70156a29763182b1e4e3cbc5d37092045d4"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/logger.test.ts",
                            "sha256": "0bfe11bab74a804e8641a3cf8c1671db55118a3f7112f207209e84eb8352550c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/prompts.test.ts",
                            "sha256": "94dcc0ed8271ae74fb67fb258fc35599b59661ce56e91d0cb7ee63701cd7b992"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                },
                {
                    "id": "aspect-core-engine-tests-tool-scheduler",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-tool-scheduler",
                    "name": "Tool scheduler tests enforce concurrency and timeout handling",
                    "description": "`core/coreToolScheduler.test.ts` simulates tool queues and ensures cancellations or cooldowns are honoured, `core/nonInteractiveToolExecutor.test.ts` confirms CLI streaming replays tool outputs back into Gemini, and `core/__tests__/openaiTimeoutHandling.test.ts` forces retries when OpenAI stalls so transcript truncation and telemetry happen in lockstep.",
                    "tags": [
                        "testing",
                        "core-engine",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/coreToolScheduler.test.ts",
                            "sha256": "e47a31da756f09261ac48869e62bfa2e4effa4aeec9e8b5ddd17a21a2bf2e352"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/nonInteractiveToolExecutor.test.ts",
                            "sha256": "ac3e433db13fb71db1dcdd55b395649a8df1937e1b225eb834245361192087b3"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/__tests__/openaiTimeoutHandling.test.ts",
                            "sha256": "f1902d3971d90c143b773412d38112b34771046b0f5322a481a33da9c5762eda"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-core-engine-tests-openai-pipeline",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-openai-pipeline",
                    "name": "OpenAI generator pipeline tests guard schema conversion and retries",
                    "description": "`core/openaiContentGenerator/openaiContentGenerator.test.ts` and `pipeline.test.ts` mock streaming responses to assert tool-call handling and backoff loops, while `converter.test.ts` and `errorHandler.test.ts` prove JSON schema coercion and error shaping stay consistent when upstream APIs misbehave.",
                    "tags": [
                        "testing",
                        "core-engine",
                        "openai"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/openaiContentGenerator.test.ts",
                            "sha256": "321ca6e547e3c53c7ba3f44d18fc252735bca1a83583f0fca3ba1c8fee9a3d26"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/pipeline.test.ts",
                            "sha256": "2384247a65b657920e72d9cacde89c852d8d0638860714474a3927b53800ff7c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/converter.test.ts",
                            "sha256": "4d9131d7c6d75148ef62885e7d03a553a17256aa0215f33cf5ea939529a86cfc"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/errorHandler.test.ts",
                            "sha256": "8af725d58cd51a93f773088f9e334d313d583d3e5c2c5e3341dbcd25273abfb5"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-core-engine-tests-openai-providers",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-openai-providers",
                    "name": "Provider tests validate OpenAI proxy adapters and telemetry",
                    "description": "`provider/dashscope.test.ts`, `deepseek.test.ts`, `default.test.ts`, and `openrouter.test.ts` stub API responses to ensure the adapter normalises model metadata and headers, while `streamingToolCallParser.test.ts` and `telemetryService.test.ts` assert tool-call chunks are parsed incrementally and instrumentation batches tokens correctly.",
                    "tags": [
                        "testing",
                        "core-engine",
                        "openai"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/dashscope.test.ts",
                            "sha256": "9cbcd1c97e97f3e84211782a7dcf80e37b511c7548a56b5980bdfd596b037987"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/deepseek.test.ts",
                            "sha256": "7dabc7d9a4ca7fbe651200f4c45b9e6d3b1cbaf81cfa11e54a0296b922be3a9c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/default.test.ts",
                            "sha256": "50408ab86304dc3561eb664f7edd5b82cf3dccb2eec24476d2bda2b5468b3c62"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/provider/openrouter.test.ts",
                            "sha256": "9d446f4da55104984833e8324214ba1a41a4ccbd7185e34618fa4233a7f241b3"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/streamingToolCallParser.test.ts",
                            "sha256": "566cf69b2f130bc3cccf80f258eba7913915bdd0098a14812e91a1ba55fe6b35"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/openaiContentGenerator/telemetryService.test.ts",
                            "sha256": "e1869ad42f02c1eeb72fc6dba4c49204f57f61c496346700b1407e6f98be9927"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                },
                {
                    "id": "aspect-core-engine-tests-token-limits",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-token-limits",
                    "name": "Token limit tests keep history trimming deterministic",
                    "description": "`core/tokenLimits.test.ts` verifies the rolling window math that prunes chat history before dispatch, and `core/turn.test.ts` covers turn lifecycle hooks, compression status updates, and Gemini event emission ordering.",
                    "tags": [
                        "testing",
                        "core-engine",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/core/tokenLimits.test.ts",
                            "sha256": "fe781c0c15052a7c1461417ea2cf4d94454f78e040b0946668d8954ec0b15a63"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/core/turn.test.ts",
                            "sha256": "a85a4dd0fea5f2764b4a4956077f736e41e5785146f70456e0502f7073787858"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-core-engine-tests-code-assist",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-code-assist",
                    "name": "Code Assist tests validate OAuth, converters, and proxy server",
                    "description": "`code_assist/converter.test.ts` ensures IDE diffs map into `CodeAssistResponse`, `oauth2.test.ts` drives the device flow handlers, `server.test.ts` bootstraps the JSON-RPC bridge, and `setup.test.ts` confirms the CLI config wizard scaffolds the service correctly.",
                    "tags": [
                        "testing",
                        "ide-integration",
                        "code-assist"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/converter.test.ts",
                            "sha256": "0f80d9d48737b59c2d6e086a7da15a776d00b549c6c5bf223c858b3cfba2a154"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/oauth2.test.ts",
                            "sha256": "aca13097e2d560625c5b0ac12f83507b097933c8b5968b89450c0cb9916c25be"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/server.test.ts",
                            "sha256": "c5498dddccf98f9f5beeaa794214d047128669e202e79535dab6ecb11e3290a7"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/code_assist/setup.test.ts",
                            "sha256": "8cfbb8bfad59372af91c04d9350cfe4f82d42f57f5dad0c3d0b5ec4ed7be725a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-core-engine-tests-mcp-oauth",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-mcp-oauth",
                    "name": "MCP OAuth tests secure credential storage",
                    "description": "`mcp/google-auth-provider.test.ts`, `oauth-provider.test.ts`, `oauth-token-storage.test.ts`, `oauth-utils.test.ts`, and `token-storage/base-token-storage.test.ts` simulate device-code and refresh flows, AES wrapping, and filesystem persistence to guarantee MCP bridges never leak tokens and recover cleanly.",
                    "tags": [
                        "testing",
                        "mcp",
                        "security"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/google-auth-provider.test.ts",
                            "sha256": "ccef8df86933482626e6717309c6a3c6fc1be536528d99aa3b3d06e93399cb90"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/oauth-provider.test.ts",
                            "sha256": "5a6844436805d484d64d52acb2cddbfd79505f0a430ae2bdcbdcb3d16d6a5305"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/oauth-token-storage.test.ts",
                            "sha256": "9497a7724ac6be5fc124da2cb2633c3994c76e52d31c6a976538a335a51c85f5"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/oauth-utils.test.ts",
                            "sha256": "82404b515da8fc9b27650b1f3c7e84516368b306e99fb361d783f1419fee1260"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/mcp/token-storage/base-token-storage.test.ts",
                            "sha256": "2c98db5c14b8e2a73d548785ca40c5675a5de74ac70d2543dd341e0324532bb0"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-core-engine-tests-qwen",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-qwen",
                    "name": "Qwen backend tests cover credentials and shared token refresh",
                    "description": "`qwen/qwenContentGenerator.test.ts` validates dashscope request plumbing, `qwenOAuth2.test.ts` runs the PKCE device flow against fake servers, and `sharedTokenManager.test.ts` ensures cross-process locking keeps refreshes idempotent.",
                    "tags": [
                        "testing",
                        "qwen-auth",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/qwen/qwenContentGenerator.test.ts",
                            "sha256": "7096199bd795d4d801351032897c307a92852085d1d896c320a8df5ed582b1f6"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/qwen/qwenOAuth2.test.ts",
                            "sha256": "3ac8c70701f9dd8071d62694011a4ff5bfb4830fa8afdee6f4f3d9b56c8c950d"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/qwen/sharedTokenManager.test.ts",
                            "sha256": "cb5ae9c450fa47eeba0eb726fe9278cc1fc91c69e37703d5b195bed5cb908c4d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-core-engine-tests-config-ide",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-config-ide",
                    "name": "Config and IDE tests lock persistent storage and detection",
                    "description": "`config/config.test.ts`, `storage.test.ts`, and `flashFallback.test.ts` verify merged settings, secure key storage, and fallback behaviour when Gemini Flash is unavailable. The IDE tests (`detect-ide`, `ide-client`, `ide-installer`, `ideContext`, `process-utils`) simulate discovery and command launching so VS Code/JetBrains adapters report consistent workspace roots.",
                    "tags": [
                        "testing",
                        "core-config",
                        "ide-integration"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/config/config.test.ts",
                            "sha256": "1342a7c125dc54882a28fd661e44a650f51807ebce73c377b3071dc6384966f8"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/config/storage.test.ts",
                            "sha256": "bc7c7e19ab091ff60593b0c215b381f7b88eda2227bda02a1886be4b2cf7d5b1"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/config/flashFallback.test.ts",
                            "sha256": "04d0735f576c122a9e01260568c7ede55d5bf4414c97c24553a9bae492719a1d"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/detect-ide.test.ts",
                            "sha256": "a6e1de0704f18302ae71673a1ef6561ae47fec0f59a7cf02f5b5b1f8bec20c97"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/ide-client.test.ts",
                            "sha256": "0bae66679db3f6719733f4427e90f5cf1ff08fbb462d070bac69fc367bad7edd"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/ide-installer.test.ts",
                            "sha256": "b5cff63fcef7db22229075e0cc45487107776d56bb42afe8e711f40dd1ae088b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/ideContext.test.ts",
                            "sha256": "b8ed5eae06e30783df4097544e644db2c8fa9d3635b15cd38401e2c547c1539a"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/ide/process-utils.test.ts",
                            "sha256": "08cd57c1f047fbe2a7cede56a920e953adfe046f4df9adf0c0b368d69f02ac63"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.59
                },
                {
                    "id": "aspect-core-engine-tests-services",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-services",
                    "name": "Service tests validate persistence, git diffing, and shell execution",
                    "description": "`chatRecordingService.test.ts` asserts transcript capture toggles, `fileDiscoveryService.test.ts` and `fileSystemService.test.ts` stub fs watchers, `gitService.test.ts` checks status diffing, `loopDetectionService.test.ts` simulates turn limits, and `shellExecutionService.test.ts` walks through sandbox passthrough and retry semantics.",
                    "tags": [
                        "testing",
                        "core-services",
                        "git"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/services/chatRecordingService.test.ts",
                            "sha256": "160bc1e04e9db8f1cbdfd9818d83face7b93bbcabbf7c683e1941832135c224c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/fileDiscoveryService.test.ts",
                            "sha256": "3f9d537e7b19ffc077bb54e88ae0540f8df6ee653302bd43fc1fd718e6177d9c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/fileSystemService.test.ts",
                            "sha256": "02b29dac1151647eb6f79c4d920b04c10b8f4b43b1773c71e9a4927c5a22c593"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/gitService.test.ts",
                            "sha256": "5995805e0f8cfe2ab36cb605a27d32d53c0e837509b159f13bff4ec81df31e0a"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/loopDetectionService.test.ts",
                            "sha256": "7e4894eb6e9e59d0705c45f725fe92d35882cfeaee385c78a11a83ad063b701b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/services/shellExecutionService.test.ts",
                            "sha256": "17926b1c3e0f8c33f8302aaae95cd7bc2854e4944b4096130df70267b1fe8e52"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.57
                },
                {
                    "id": "aspect-core-engine-tests-telemetry-sdk",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-telemetry-sdk",
                    "name": "Telemetry SDK tests select OTLP exporters per protocol",
                    "description": "`telemetry/sdk.test.ts` stubs every OTLP exporter and proves `initializeTelemetry()` picks the gRPC clients (gzip enabled) for `grpc` endpoints and the HTTP exporters with trailing slash normalisation for `http`, while `shutdownTelemetry()` cleans up the NodeSDK between runs so collectors are not double-started.",
                    "tags": [
                        "testing",
                        "telemetry",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/sdk.test.ts",
                            "sha256": "73be2917ff74d2473128fbf55891a3e52dd4263c3e4870d681178d5b4ab6cc5d"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-core-engine-tests-telemetry-loggers",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-telemetry-loggers",
                    "name": "Telemetry logger tests cover events, metrics, and circular data",
                    "description": "`telemetry/loggers.test.ts` exercises `logChatCompression`, `logCliConfiguration`, `logUserPrompt`, and `logToolCall` so OTEL metrics, Clearcut/Qwen loggers, and UI telemetry receive the right attributes (session, model, tool status, usage flags), while `loggers.test.circular.ts` feeds tool call arguments with recursive proxy objects to ensure the logging pipeline sanitises circular references instead of crashing.",
                    "tags": [
                        "testing",
                        "telemetry",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/loggers.test.ts",
                            "sha256": "898fd5bb9f7ef75b03d6fa822d798302b5484d08abefcd06c3ac32a99c2b8aeb"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/loggers.test.circular.ts",
                            "sha256": "672fe770c6add3bec84f53ca17c0c4ec0bb2ef9d389cf39322ff918beccba8fb"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.58
                },
                {
                    "id": "aspect-core-engine-tests-ui-telemetry",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-ui-telemetry",
                    "name": "UiTelemetryService tests aggregate tool decisions and token stats",
                    "description": "`telemetry/uiTelemetry.test.ts` drives API response, tool success/error/cancel, and decision events through `UiTelemetryService`, confirming it increments per-model latency and token buckets, tracks tool acceptance vs rejection (including auto-accept), records file diff counters, and emits `update` events with the last prompt token count for the CLI dashboard.",
                    "tags": [
                        "testing",
                        "telemetry",
                        "metrics"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/uiTelemetry.test.ts",
                            "sha256": "18a1f0406810dcafa78c1a4b13a878eeb373f56b841859b483cdd5f9358e9b1b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-core-engine-tests-qwen-logger",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-qwen-logger",
                    "name": "QwenLogger tests harden queue overflow and proxy edge cases",
                    "description": "`telemetry/qwen-logger/qwen-logger.test.ts` toggles usage-statistics flags to prove the singleton stays disabled when opt-in is off, verifies overflow drops oldest events with debug traces, guards against double flush, and requeues failures with size caps. `telemetry/integration.test.circular.ts` injects HttpsProxyAgent-like objects and thousands of events to assert `enqueueLogEvent` handles circular structures and large backlogs without throwing.",
                    "tags": [
                        "testing",
                        "telemetry",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/qwen-logger/qwen-logger.test.ts",
                            "sha256": "55f9b6cba425cc74a94eed8cdd07d2ac6e5c90fb8618bfb24192dabcdb0cd5c1"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/telemetry/integration.test.circular.ts",
                            "sha256": "7e1669eef7938aa7e45217d76d6f56e2df0d37338c71b91c9afa9db7f6afca8f"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                },
                {
                    "id": "aspect-core-engine-tests-subagents",
                    "sectionId": "section-core-engine-tests",
                    "slug": "core-engine-tests-subagents",
                    "name": "Subagent tests lock registry hydration and validation rules",
                    "description": "`subagents/builtin-agents.test.ts`, `subagent-manager.test.ts`, `subagent-statistics.test.ts`, `subagent.test.ts`, `types.test.ts`, and `validation.test.ts` ensure built-ins load with the right metadata, file-backed agents sync stats, schema validation catches bad prompts, and manager CRUD honours overwrite semantics.",
                    "tags": [
                        "testing",
                        "subagents",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/builtin-agents.test.ts",
                            "sha256": "5fc256f718bcdbb3d26e6245746297eb8cba6fab803b2b954e5791a52fdfbb63"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent-manager.test.ts",
                            "sha256": "0e8c370f37e3fbf0f417c16950a464e1f2638cec5ff20f4417f54d36ffe942b8"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent-statistics.test.ts",
                            "sha256": "053c576ad65ece42a992690aa836c5f70a8ec1a544df2ee372f32dc1fa78b1d9"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/subagent.test.ts",
                            "sha256": "1535efd1b74ba2102cecceb2bfe6f64c8d26cbb460dff7e86fca928af749bb6e"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/types.test.ts",
                            "sha256": "8104ae06b7a92871c990b8723c2a19a29bf5a37a483870d966b11ca740c3e0af"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/subagents/validation.test.ts",
                            "sha256": "e2a3518259c1bb0ee17116474c59a75e30e4814917e0daec46a5eafd12c1503b"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.54
                }
            ]
        },
        {
            "id": "section-core-tool-tests",
            "slug": "core-tool-tests",
            "title": "Core Tool Tests",
            "entries": [
                {
                    "id": "aspect-core-tool-tests-readers",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-readers",
                    "name": "Read tools tests mock file IO and directory listings",
                    "description": "`tools/read-file.test.ts`, `read-many-files.test.ts`, and `ls.test.ts` stub the discovery services to ensure large files stream in chunks, multi-file reads respect glob filters, and directory listings page results with metadata columns.",
                    "tags": [
                        "testing",
                        "core-tools",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/read-file.test.ts",
                            "sha256": "f4cd43551797ddfb9a0c00f20150a3b2b8b98588767041b426cbff37ec062a5d"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/read-many-files.test.ts",
                            "sha256": "70e8a25f4650a4e16d7c731f3830da233266ff7e9b67571d05d6244d9af94ad3"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/ls.test.ts",
                            "sha256": "bb28440d95d27598d8af57ea094854f81f2874fa0cf723adc6749c9464ec16ca"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-core-tool-tests-writers",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-writers",
                    "name": "Write tools tests guard patching and plan-mode behaviour",
                    "description": "`tools/write-file.test.ts`, `todoWrite.test.ts`, and `edit.test.ts` verify diffs are validated before disk writes, to-do insertions target the right section, and the edit tool threads arguments through plan mode approvals.",
                    "tags": [
                        "testing",
                        "core-tools",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/write-file.test.ts",
                            "sha256": "ec5e2f90073e6f30253be59e697f747f0649918303d73fb60a3b8052dde9a1d5"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/todoWrite.test.ts",
                            "sha256": "255bdfeabef272fc723af6600cdc71e960b1d1ed1d902fa1f281098ed7392177"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/edit.test.ts",
                            "sha256": "68674970658102b661384c43f1339478a6f8ea3233105623058641f41fda0d65"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.55
                },
                {
                    "id": "aspect-core-tool-tests-search",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-search",
                    "name": "Search tools tests keep diff and grep outputs stable",
                    "description": "`tools/diffOptions.test.ts`, `glob.test.ts`, `ripGrep.test.ts`, and `grep.test.ts` assert diff formatting flags, glob normalisation, and regex escaping to guarantee CLI search surfaces match developer expectations.",
                    "tags": [
                        "testing",
                        "core-tools",
                        "search"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/diffOptions.test.ts",
                            "sha256": "412d853efe7855b7b0f713a608098ec725c5f2760e522764590378e661286f5a"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/glob.test.ts",
                            "sha256": "5dffaee105b05464ab7a7e811fe42ed12286b06995a66276db65b8ead92889e6"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/ripGrep.test.ts",
                            "sha256": "51b5b361a4047e05571873d743b2fd913da28b4c9f4063a19e4b462dd7407f0b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/grep.test.ts",
                            "sha256": "d22474d8864a8280ef5b47fb9932698e338ce9416b77f82eff67d756340d3b25"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.51
                },
                {
                    "id": "aspect-core-tool-tests-shell",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-shell",
                    "name": "Shell and task tool tests simulate process lifecycles",
                    "description": "`tools/shell.test.ts`, `task.test.ts`, and `exitPlanMode.test.ts` stub process spawning, enforce approval prompts before execution, and ensure plan-mode exits flip the right flags when switching back to normal operation.",
                    "tags": [
                        "testing",
                        "core-tools",
                        "shell"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/shell.test.ts",
                            "sha256": "9a23a1f730501be6d3276d8eabd6ad5b7c04245a36106007d0467f4daec1e3d1"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/task.test.ts",
                            "sha256": "45255b095fc8c69be32d38305081c629d2368e1f4b074ca696047343396912ed"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/exitPlanMode.test.ts",
                            "sha256": "aaa45fa5b0ed9faab8071b0fba040d22e2c3b55d565a69d812e1e38b5f60b404"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.53
                },
                {
                    "id": "aspect-core-tool-tests-memory",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-memory",
                    "name": "Memory tools tests assert scope handling and registry wiring",
                    "description": "`tools/memoryTool.test.ts` verifies global vs project scope arguments, `modifiable-tool.test.ts` confirms guardrails for user-editable tools, and `tool-registry.test.ts` ensures registration collisions surface helpful errors.",
                    "tags": [
                        "testing",
                        "core-tools",
                        "memory"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/memoryTool.test.ts",
                            "sha256": "bf6635ca4ef1663e1bed19a01effb8852d158294790537a6b4bdb77c8f197f2f"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/modifiable-tool.test.ts",
                            "sha256": "8638fb932b57d662d6a40ab682c35c2c07fcba939952062405c31a09056e010d"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tool-registry.test.ts",
                            "sha256": "5f184480d8ea59528ca509e178c8885da6dd98f339b9694f6004f81083b62068"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-core-tool-tests-web",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-web",
                    "name": "Web tool tests mock fetch and search providers",
                    "description": "`tools/web-fetch.test.ts` stubs network requests and response size checks, while `web-search.test.ts` verifies query mapping into the search API and pagination of aggregated results.",
                    "tags": [
                        "testing",
                        "core-tools",
                        "web"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/web-fetch.test.ts",
                            "sha256": "f0e1d31171dec75247f6c76af1821897f6b4ecb0c9be97695794e8de0c44dda4"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/web-search.test.ts",
                            "sha256": "e4d5f3e2d8a883e514f5630508c58a9c323ad55749af18769efc73a01fb0453a"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-core-tool-tests-mcp",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-mcp",
                    "name": "MCP tool tests validate client lifecycle and prompts",
                    "description": "`tools/mcp-tool.test.ts`, `mcp-client.test.ts`, and `mcp-client-manager.test.ts` simulate tool declaration parsing, heartbeat handling, and client reuse so external MCP servers integrate safely with the scheduler.",
                    "tags": [
                        "testing",
                        "core-tools",
                        "mcp"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-tool.test.ts",
                            "sha256": "18005b12ec8d41fc1350a0eb63a4a3bb4c381ee0aec83d32f87a788afa972a87"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client.test.ts",
                            "sha256": "904970473bf427151e4aa624dca5440d23884fbcc5c9f4f9a00703309aa91a80"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/mcp-client-manager.test.ts",
                            "sha256": "757da9d2a0b945a162fa146339727fd96457d6dc3cd04d504c2f059d33fafa09"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.52
                },
                {
                    "id": "aspect-core-tool-tests-declarative",
                    "sectionId": "section-core-tool-tests",
                    "slug": "core-tool-tests-declarative",
                    "name": "Declarative tool tests enforce schema cycle checks",
                    "description": "`tools/tools.test.ts` covers `DeclarativeTool.validateBuildAndExecute` error paths and the `hasCycleInSchema` guard, preventing recursive JSON schemas from crashing tool execution.",
                    "tags": [
                        "testing",
                        "core-tools"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/tools/tools.test.ts",
                            "sha256": "b6a3308f269f35852a75b3bd65add1f6fc238f26838cd919d5bb9539880c3fb2"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                }
            ]
        },
        {
            "id": "section-core-utils-tests",
            "slug": "core-utils-tests",
            "title": "Core Utilities Tests",
            "entries": [
                {
                    "id": "aspect-core-utils-tests-file-search",
                    "sectionId": "section-core-utils-tests",
                    "slug": "core-utils-tests-file-search",
                    "name": "File search cache tests guard BFS crawlers and glob ignores",
                    "description": "`utils/bfsFileSearch.test.ts` and the `filesearch` suite (`crawler`, `ignore`, `fileSearch`, `result-cache`, `crawlCache`) stub filesystem walks to ensure ignore patterns, caching keys, and traversal limits behave identically across platforms.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/bfsFileSearch.test.ts",
                            "sha256": "1a4cecd6404d9f6533b5dbe209bad4aa4651c46c0d9e008e952dc381fb800b09"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/fileSearch.test.ts",
                            "sha256": "e5f6f31e6b2401ebe7922b857df1fee15335081932165cf9ede94d850a30d52b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/result-cache.test.ts",
                            "sha256": "4eb4b14b23958c78fb7ff72f3415ec6426e81b4616b71d38c3c3b3c5e19a354a"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/crawler.test.ts",
                            "sha256": "9d34df71e3e008575c405b118343723894d6c9e763b266b571c10884fd187a23"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/ignore.test.ts",
                            "sha256": "d11d1b547d2928cd603516202186de1b3eb9a1e4f783cd39101b23fbb75a793c"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/filesearch/crawlCache.test.ts",
                            "sha256": "285beef8b6107bde0ca561acb1048378b6fb665c5764ed0c9dd9c2eefa1992d1"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.56
                },
                {
                    "id": "aspect-core-utils-tests-tokenizers",
                    "sectionId": "section-core-utils-tests",
                    "slug": "core-utils-tests-tokenizers",
                    "name": "Request tokenizer tests prevent overflow and schema drift",
                    "description": "`requestTokenizer.test.ts`, `textTokenizer.test.ts`, and `imageTokenizer.test.ts` feed multi-modal payloads to guarantee token budgets are calculated correctly before hitting Gemini or OpenAI quotas.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "chat-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/requestTokenizer.test.ts",
                            "sha256": "75e0986766ba794a78f5133d368d84fa78a992a799ebea2bd92f9af874d8b87e"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/textTokenizer.test.ts",
                            "sha256": "f801125a2eb7e1cac3a8d64339395f527c4fa1a37f4a32955c260e95ec2d8e70"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/request-tokenizer/imageTokenizer.test.ts",
                            "sha256": "30d38eebf6ea61376dd88d4bcc747b5851da1f32f0238aa8a7d497cf7e581d64"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "id": "aspect-core-utils-tests-error-handling",
                    "sectionId": "section-core-utils-tests",
                    "slug": "core-utils-tests-error-handling",
                    "name": "Error utility tests ensure retry backoff and JSON safety",
                    "description": "`errorParsing.test.ts`, `errorReporting.test.ts`, `retry.test.ts`, `safeJsonParse.test.ts`, `safeJsonStringify.test.ts`, and `quotaErrorDetection.test.ts` simulate malformed payloads and 429s so error messaging and retry strategies stay predictable.",
                    "tags": [
                        "testing",
                        "core-utils"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/errorParsing.test.ts",
                            "sha256": "512b38bbe8103dcaf206431f4b798e14b25af8d57594fb7638138110dec8d851"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/errorReporting.test.ts",
                            "sha256": "8a609a026dffdb6122a3ac152c1af82f350d11cd8c7f4a8ea8aebaa32c1418c7"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/retry.test.ts",
                            "sha256": "e27896f287694799c065ce2d7896daa9fe9557e87400ae8222aa1c591addef67"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/safeJsonParse.test.ts",
                            "sha256": "ec424b82e15da2ab32ef2d3091f659d4911e44a589ae750a018bcb08098ade8f"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/safeJsonStringify.test.ts",
                            "sha256": "cc2acd076313b8cf70dd25d0a445072c24c80bd9ff86246b381a7fedbecd1ed5"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/quotaErrorDetection.test.ts",
                            "sha256": "695140e265e2787f0e413088c88ebd686f62d8d42b4a54a6eae5468f38241598"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.47
                },
                {
                    "id": "aspect-core-utils-tests-environment",
                    "sectionId": "section-core-utils-tests",
                    "slug": "core-utils-tests-environment",
                    "name": "Environment utils tests map workspace trees and encodings",
                    "description": "`environmentContext.test.ts`, `getFolderStructure.test.ts`, `paths.test.ts`, `pathReader.test.ts`, and `systemEncoding.test.ts` ensure workspace roots, relative path formatting, and locale encodings are derived deterministically before prompts are prepared.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/environmentContext.test.ts",
                            "sha256": "dd665ffd1eb78fe52edb8f8f6b4eafb73fe414e770f34777e8d3457ee78b41c9"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/getFolderStructure.test.ts",
                            "sha256": "04be9bd9b9e0486c91069d56daca5295b30423ff38e6968bcbc7b97e681ba31f"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/paths.test.ts",
                            "sha256": "454263fa17ff53132c67e13a9b0ee41c3a041b44b2cbb482b926d922b5d38062"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/pathReader.test.ts",
                            "sha256": "ed744218c63c58faf5d15cb66774d8418a91107f9e467fd98d36a695bb751a1b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/systemEncoding.test.ts",
                            "sha256": "c6109eb65abc309d358842eacffe38a3363a6f9407c98e9035a2cb5e1d55c266"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "id": "aspect-core-utils-tests-memory",
                    "sectionId": "section-core-utils-tests",
                    "slug": "core-utils-tests-memory",
                    "name": "Memory helper tests enforce chunking and summarisation",
                    "description": "`memoryDiscovery.test.ts`, `memoryImportProcessor.test.ts`, `summarizer.test.ts`, and `generateContentResponseUtilities.test.ts` confirm that imported notes dedupe by hash, summariser prompts trim context, and response parsing recovers tool calls correctly.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "memory"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/memoryDiscovery.test.ts",
                            "sha256": "193f69843021f9db44a36034347c42470d2aa1ce7fd5b3bcc926688b73aa6e2e"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/memoryImportProcessor.test.ts",
                            "sha256": "9e54aabde93b45623b7c8959ec24a2e83f239ff57b58ce48c9ed7abf88b71184"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/summarizer.test.ts",
                            "sha256": "c44ffaf9058a2acfd7f4f1d15463ec6988eb3e2e0ca119d81c56b8fed4faa190"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/generateContentResponseUtilities.test.ts",
                            "sha256": "032666c46511c908c81c6fd6ea142c5a8d0501e1d5c721b077715666d82326df"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.48
                },
                {
                    "id": "aspect-core-utils-tests-shell-security",
                    "sectionId": "section-core-utils-tests",
                    "slug": "core-utils-tests-shell-security",
                    "name": "Shell security tests prevent writes in read-only sandboxes",
                    "description": "`shell-utils.test.ts`, `shellReadOnlyChecker.test.ts`, `secure-browser-launcher.test.ts`, `installationManager.test.ts`, and `userAccountManager.test.ts` simulate various environments to guarantee commands respect sandbox bans, browser launches sanitize arguments, and tool installation honours per-user directories.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "sandboxing"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/shell-utils.test.ts",
                            "sha256": "2f2d9aa51378b1974fd7f4952e5fe0df7c8329078ad7e9363d052f1d4acab49b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/shellReadOnlyChecker.test.ts",
                            "sha256": "905d968db11352e745bf44087ba02b2ef9e3b815c5318d59e1917f19a3befb05"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/secure-browser-launcher.test.ts",
                            "sha256": "ba3ef89ac01ff0689a9ad88528a4a904418a187065e2773d06ec1d2e9acde6ab"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/installationManager.test.ts",
                            "sha256": "4198c09384f7bccde178dd640d33d87b5da9b22678ef0bb66b518128bb1bf06b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/userAccountManager.test.ts",
                            "sha256": "4842c68e53f3735f063bebafe53133938955b743d03cc7069203a93571e601d5"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.49
                },
                {
                    "id": "aspect-core-utils-tests-workspace",
                    "sectionId": "section-core-utils-tests",
                    "slug": "core-utils-tests-workspace",
                    "name": "Workspace and prompt utils tests keep context assembly deterministic",
                    "description": "`workspaceContext.test.ts`, `tool-utils.test.ts`, `partUtils.test.ts`, `editor.test.ts`, `nextSpeakerChecker.test.ts`, and `yaml-parser.test.ts` assure context snapshots, prompt parts, and YAML parsing all fail loudly when inputs drift, protecting downstream prompt assembly.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "context-management"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/workspaceContext.test.ts",
                            "sha256": "82ba0f1e167638f99175a4c80ded6af546ac112d7fbc078a1b1fc6af2075768e"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/tool-utils.test.ts",
                            "sha256": "8cabb18386f829e93d12bb11901bd9968f3c081672114927bbe0170170c2504e"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/partUtils.test.ts",
                            "sha256": "8d29b421130fe051cebad08efe6cda80791972ac1392f90c7605116c12ea88bc"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/editor.test.ts",
                            "sha256": "3c3fd1a0c247e0b8a2f7b7b7e7cdb7cc8444bdb75d623b221997e1fa7833b6e3"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/nextSpeakerChecker.test.ts",
                            "sha256": "02d689003c3fc2033b5a953db9ef6f13ff9977a4290683346ed5b0c807a6f24b"
                        },
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/yaml-parser.test.ts",
                            "sha256": "79fc18f2c80de3765faf93579872ed0b06287ff7ffe6b638561bad53cb695f73"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.5
                },
                {
                    "sectionId": "section-core-utils-tests",
                    "id": "aspect-core-utils-tests-file-utils",
                    "slug": "core-utils-tests-file-utils",
                    "name": "fileUtils.test.ts guards detection, truncation, and binary skips",
                    "description": "`packages/core/src/utils/fileUtils.test.ts` spins up a temp project to prove `isWithinRoot` rejects sibling paths, `isBinaryFile` toggles on non-printable bytes, `detectFileType` respects MIME lookups before falling back to raw reads, and `processSingleFileContent` paginates, truncates long lines, base64-encodes PDFs/images, and surfaces directory/ENOENT/20MB-limit failures. The suite locks down the helpers backing `@`-file ingestion and context uploads.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "file-io"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/fileUtils.test.ts",
                            "sha256": "534a34aaffd05f59c16d5196d8a540e88d2702142e58c1aea65ceee8351d8840"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.46
                },
                {
                    "sectionId": "section-core-utils-tests",
                    "id": "aspect-core-utils-tests-flash-fallback",
                    "slug": "core-utils-tests-flash-fallback",
                    "name": "flashFallback integration test enforces OAuth-only 429 downgrade",
                    "description": "`packages/core/src/utils/flashFallback.integration.test.ts` wires `Config`, `retryWithBackoff`, and the simulated 429 helpers to confirm two consecutive 429s for `LOGIN_WITH_GOOGLE` swap the session to `DEFAULT_GEMINI_FLASH_MODEL`, while API-key auth exhausts retries without downgrading. It also verifies `disableSimulationAfterFallback()` flips the guard so future calls resume normal traffic.",
                    "tags": [
                        "testing",
                        "core-engine",
                        "qwen-auth"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/flashFallback.integration.test.ts",
                            "sha256": "fa804fa15d982813ac369f96673325337d26c7baaba0347df82f96a60881b94e"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.44
                },
                {
                    "sectionId": "section-core-utils-tests",
                    "id": "aspect-core-utils-tests-gitignore-parser",
                    "slug": "core-utils-tests-gitignore-parser",
                    "name": "gitIgnoreParser.test.ts covers repo, exclude, and negation paths",
                    "description": "`packages/core/src/utils/gitIgnoreParser.test.ts` creates throwaway repos to assert `.gitignore`, `.git/info/exclude`, and custom pattern files all populate the parser, preserves the implicit `.git` ignore, and honours negations, absolute paths, and out-of-root inputs. It guarantees file discovery respects Git semantics before the context pipeline crawls workspaces.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/gitIgnoreParser.test.ts",
                            "sha256": "0863ad69ab9ce00193c80af3e5e5830b2b030a8a94c81a4762ab6b64e5b0a0e5"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.43
                },
                {
                    "sectionId": "section-core-utils-tests",
                    "id": "aspect-core-utils-tests-ignore-patterns",
                    "slug": "core-utils-tests-ignore-patterns",
                    "name": "ignorePatterns.test.ts locks FileExclusions defaults and overrides",
                    "description": "`packages/core/src/utils/ignorePatterns.test.ts` asserts `FileExclusions` always seeds core globs, toggles dynamic GEMINI.md rules, merges runtime/custom patterns, and honours Config-provided excludes across default, glob, and legacy readManyFiles helpers. It also exercises `extractExtensionsFromPatterns` via the binary extension table, keeping context pruning deterministic.",
                    "tags": [
                        "testing",
                        "core-utils",
                        "file-scanning"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/ignorePatterns.test.ts",
                            "sha256": "25c08480806ac0d9de745ce20e937ed0e7572d62fd01cafdb25f1c931a8e1518"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.42
                },
                {
                    "sectionId": "section-core-utils-tests",
                    "id": "aspect-core-utils-tests-subagent-generator",
                    "slug": "core-utils-tests-subagent-generator",
                    "name": "subagentGenerator.test.ts validates JSON contract and error paths",
                    "description": "`packages/core/src/utils/subagentGenerator.test.ts` mocks `GeminiClient.generateJson` to ensure empty descriptions throw, required fields (name/description/systemPrompt) are enforced, API failures bubble, and successful calls target `DEFAULT_QWEN_MODEL` with the architect system prompt. It protects the UX that scaffolds subagent prompts from malformed provider responses.",
                    "tags": [
                        "testing",
                        "subagents",
                        "core-engine"
                    ],
                    "sources": [
                        {
                            "path": "projects/qwen-code/packages/core/src/utils/subagentGenerator.test.ts",
                            "sha256": "0e0ac4267e77a3e99da205a58c9ec4c83cfb28e3e8f2d181c674f3c06a6c5291"
                        }
                    ],
                    "lastUpdated": "2025-10-19",
                    "importance": 0.45
                }
            ]
        }
    ]
}
