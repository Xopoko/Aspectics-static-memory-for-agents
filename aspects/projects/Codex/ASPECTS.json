{
  "sections": [
    {
      "id": "section-architecture",
      "slug": "architecture",
      "title": "Architecture",
      "entries": [
        {
          "id": "aspect-codex-rs-workspace",
          "sectionId": "section-architecture",
          "slug": "codex-rs-workspace",
          "name": "Rust workspace multi-tool CLI",
          "description": "`codex-rs/Cargo.toml` defines a workspace of 40+ crates (cli, core, exec, tui, apply-patch, app-server, mcp, sandbox, utils) with shared versions via `[workspace.dependencies]`. `cli/src/main.rs` defines `MultitoolCli` and routes the `codex` facade (`exec`, `review`, `login/logout`, `mcp`, `mcp-server`, `app-server`, `completion`, `sandbox`, `apply`, `resume`, `fork`, `cloud`, `responses-api-proxy`, `stdio-to-uds`, `features`), while `arg0_dispatch_or_else` can switch to `codex-linux-sandbox` or apply_patch mode based on argv0.",
          "tags": [
            "architecture",
            "rust",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/Cargo.toml",
              "sha256": "8bc3a84d780bca6cd9becd3bc12c81fa8b57d779d58c9482a360fd17a986b7a0"
            },
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.85
        },
        {
          "id": "aspect-codex-exec-headless",
          "sectionId": "section-architecture",
          "slug": "exec-headless",
          "name": "Headless exec pipeline",
          "description": "`codex-rs/exec/src/lib.rs` implements headless `codex exec`: `run_main` exposes originator `codex_exec`, reads prompt from stdin on demand, wraps `ConfigOverrides` With `AskForApproval::Never`, manages sandbox (`--sandbox`, `--skip-git-repo-check`), loads `load_output_schema` and configures OTEL+`tracing` with auto color detection. By flag `--json` is selected `EventProcessorWithJsonOutput` or `EventProcessorWithHumanOutput`, `Resume` restores history via `find_conversation_path_by_id_str`, and errors and usage go to stderr. So, without a UI, a JSONL stream and the final response for automation are issued.",
          "tags": [
            "architecture",
            "rust",
            "cli",
            "exec"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/lib.rs",
              "sha256": "6179dc3017cca28aeb267752c2e1035d5360c32301f2d56cb4e0d5d155172cf2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.75
        },
        {
          "id": "aspect-codex-conversation-manager-lifecycle",
          "sectionId": "section-architecture",
          "slug": "conversation-manager",
          "name": "Thread lifecycle via ThreadManager",
          "description": "`core/src/thread_manager.rs` manages in-memory threads: `start_thread` spawns `CodexThread` with `InitialHistory::New`, `resume_thread_from_rollout` rebuilds history via `RolloutRecorder`, and `fork_thread` truncates rollout items before the nth user message to create branches. Threads live in an `RwLock<HashMap<ThreadId, Arc<CodexThread>>>` with a broadcast channel for creation events.",
          "tags": [
            "architecture",
            "conversation",
            "rust",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/thread_manager.rs",
              "sha256": "5c0d578814bfe9841e2d192c416b5461d32eea5f97079c34da99f12ec2c726f8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.78
        },
        {
          "id": "aspect-codex-session-bootstrap",
          "sectionId": "section-architecture",
          "slug": "codex-session-bootstrap",
          "name": "Codex session bootstrap pipeline",
          "description": "`core/src/codex.rs` describes `Codex::spawn`: creates bounded `SUBMISSION_CHANNEL_CAPACITY` For `Op` and unbounded `tx_event`, collects `ConfigureSession` (model, sandbox_policy, notifier, cwd) and calls `Session::new`to get `SessionServices` And `TurnContext`. After generation `conversation_id` task `submission_loop` works until `Op::Shutdown`, A `Codex` stores `AtomicU64` message counter and event channel. Startup errors are logged and translated into `CodexErr::InternalAgentDied`, providing a clean bootstrap for every session.",
          "tags": [
            "architecture",
            "sessions",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.77
        },
        {
          "id": "aspect-model-client-dispatch",
          "sectionId": "section-architecture",
          "slug": "model-client-dispatch",
          "name": "Model client dispatch and aggregation",
          "description": "`core/src/client.rs` does `ModelClient::stream`: By `provider.wire_api` selects Responses (`stream_responses`) or Chat, where `stream_chat_completions` builds SSE and aggregates via `AggregateStreamExt::aggregate` or leaves a reasoning stream. The stream is bridged into `ResponseStream` through `tokio::spawn` And `mpsc::channel(16)`, preserving the semantics of the Responses API. The client uses `create_client()` and metadata `ModelProviderInfo`, reports `get_model_context_window`, adds reasoning include and processes `usage_limit_reached`, combining access to the Responses API and chat models.",
          "tags": [
            "architecture",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-prompt-instructions-builder",
          "sectionId": "section-architecture",
          "slug": "prompt-instructions-builder",
          "name": "Prompt assembly and apply_patch instructions",
          "description": "Structure `Prompt` controls the model input: `get_full_instructions` adds `APPLY_PATCH_TOOL_INSTRUCTIONS`, if the model requires freeform instructions and there is no tool of the same name, and `get_formatted_input` through `reserialize_shell_outputs`  shell-  freeform apply_patch. This ensures that the model sees consistent instructions and history before making a move.",
          "tags": [
            "architecture",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client_common.rs",
              "sha256": "dba47bc2bfe58f4a1ee0d99dec085eeaa396af4e6baa11d2e03937081454c97e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-turn-task-loop",
          "sectionId": "section-architecture",
          "slug": "turn-task-loop",
          "name": "The turn loop manages tasks and tools",
          "description": "`codex-rs/core/src/codex.rs` holds `submission_loop`: he is reading `Submission` from the channel and manages the life cycle of turn tasks. `Op::Interrupt` interrupts active turn, `Op::OverrideTurnContext` rebuilds `TurnContext` with new cwd/approval/sandbox/model and writes `EnvironmentContext`, `Op::UserInput` tries to inject messages into the current task, otherwise it will spawn `RegularTask`. `Op::UserTurn` unfolds per-turn `ModelClient`, recalculates `ToolsConfig`, records the change in the environment and starts the task; approvals deliver decisions, history requests and MCPs are processed through `tokio::spawn`, `Op::Compact`/`Op::Review` create specialized tasks, and `Op::Shutdown` interrupts all tasks, closes `RolloutRecorder` and sends `ShutdownComplete`.",
          "tags": [
            "architecture",
            "sessions",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.78
        },
        {
          "id": "aspect-codex-tools-config",
          "sectionId": "section-architecture",
          "slug": "tools-config",
          "name": "ToolsConfig builds tool matrix",
          "description": "`core/src/tools/spec.rs` collects the tool configuration: `ToolsConfig::new` compares `ModelFamily` with shell type (default/local/streamable), includes plan, apply_patch, web_search, view_image and experimental unified exec, passing `experimental_supported_tools`. `build_specs` fills `ToolRegistryBuilder`, creates `create_apply_patch_*`, `create_unified_exec_tool` and brings MCP tools to `ToolSpec::Function`by normalizing JSON Schema via `JsonSchema`/`AdditionalProperties`. Thanks to this, Codex creates a consistent set of tools for the Responses API and local servers from a single source.",
          "tags": [
            "architecture",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "id": "aspect-agent-roles",
          "sectionId": "section-architecture",
          "slug": "agent-roles",
          "name": "Agent role profiles and prompts",
          "description": "`core/src/agent/role.rs` defines `AgentRole` (Default/Orchestrator/Worker) and `AgentProfile` with base instructions, model overrides, and optional read-only sandboxing. `profile` maps Orchestrator to `templates/agents/orchestrator.md`, Worker to the fixed `gpt-5.2-codex` model and prompt, and `apply_to_config` writes those overrides into `Config`. `core/src/tools/handlers/collab.rs` reads the `agent_type` argument in `spawn_agent`, defaults to `AgentRole::Default`, and applies the role before `agent_control.spawn_agent`, so spawned agents inherit the intended prompt and model.",
          "tags": [
            "architecture",
            "configuration",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/agent/role.rs",
              "sha256": "51453ae7100554a72492e4e90fcdbde0c0c943a7b88d7ffe7fedd5a68e1d19a9"
            },
            {
              "path": "projects/Codex/codex-rs/core/templates/agents/orchestrator.md",
              "sha256": "b250935a778c9cbe46a719d8080013eb3a2cdf443df3367e0d591b81761abeba"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/collab.rs",
              "sha256": "1ca7645cb9158a4c7ca3899a5fe77e4979f7e04597f05f88e9b598f0100d82d8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-agent-control-plane",
          "sectionId": "section-architecture",
          "slug": "agent-control-plane",
          "name": "AgentControl spawns and tracks multi-agent threads",
          "description": "`core/src/agent/control.rs` defines `AgentControl`, held in `SessionServices`, with a `Weak<ThreadManagerState>` to avoid cycles; it can `spawn_agent` (notify thread created and send the prompt), `send_prompt`/`interrupt_agent`/`shutdown_agent`, and drops dead threads when `InternalAgentDied` surfaces. `subscribe_status` exposes a `watch::Receiver`, while `agent/status.rs` maps `EventMsg` to `AgentStatus` and `is_final` gates terminal states so collab tools can track agent lifecycles.",
          "tags": [
            "architecture",
            "sessions",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/agent/control.rs",
              "sha256": "b81370ca5c9981c9b3a485779c6c510aa272a4ea2563969e62b99fb954927013"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/agent/status.rs",
              "sha256": "41378b3d54be18f23a13c649c9dcac397a842ec143171ff84e7a5b82ee1e9080"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-mcp-tool-call-events",
          "sectionId": "section-architecture",
          "slug": "mcp-tool-call-events",
          "name": "MCP tool call event bridge",
          "description": "`core/src/mcp_tool_call.rs` publishes MCP call events: `handle_mcp_tool_call` parses JSON arguments, sends `McpToolCallBegin` before `Session::call_tool`, measures `Instant` and upon completion sends `McpToolCallEnd` with duration and result. Parsing errors are returned `FunctionCallOutput` With `success = false`, so the model receives a clear response, and the flow of events in the session remains synchronized.",
          "tags": [
            "architecture",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/mcp_tool_call.rs",
              "sha256": "1ecc29fb5414a776fa87e18c09923d41bc8e3fb603be50e0d6b8397768acaa03"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-codex-mcp-auth-status",
          "sectionId": "section-architecture",
          "slug": "mcp-auth-status",
          "name": "MCP auth status aggregation",
          "description": "`core/src/mcp/auth.rs` calculates MCP authorization statuses: `compute_auth_statuses` parallely bypasses the configuration via `join_all`, For `StreamableHttp` causes `determine_streamable_http_auth_status` taking into account `OAuthCredentialsStoreMode`, A `Stdio` marks as `Unsupported`. Errors are logged as a warning and result in a fallback `Unsupported`, which gives the CLI a stable snapshot of the servers' auth state.",
          "tags": [
            "architecture",
            "mcp",
            "rust",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/mcp/auth.rs",
              "sha256": "2b674a47bd2fef4d72c2f0fe26b187b886ab7592856aaecaf6bed0e4ec27cfb6"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-codex-config-types",
          "sectionId": "section-architecture",
          "slug": "config-types",
          "name": "Config type system for Codex",
          "description": "`core/src/config/types.rs` defines `McpServerConfig` and transport enums for stdio/streamable HTTP, including manual deserialization of timeouts and environment fields plus helpers like `option_duration_secs`. These shared types keep config layers and protocol structures aligned.",
          "tags": [
            "architecture",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/types.rs",
              "sha256": "9860efbe214d387a921aead6f29a13e0cb5909a906e7fefeff6a258fe358f346"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-error-taxonomy",
          "sectionId": "section-architecture",
          "slug": "error-taxonomy",
          "name": "Codex error taxonomy and UI shaping",
          "description": "`core/src/error.rs` centralizes kernel errors: `SandboxErr` normalizes timeouts, signals and landlock failures, and `CodexErr` combines network statuses, rate-limit, refresh and fatal failures with automatic `From` for io/reqwest/json. `get_error_message_ui` truncates messages to 4 KiB, returning aggregated stderr/stdout in priority, and `UsageLimitReachedError` formats tips by tariff and reset time. This guarantees a single error UX and a single channel for OTEL logging.",
          "tags": [
            "architecture",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/error.rs",
              "sha256": "c1357a796c111693653f71557b2bed82e53359c48ed8c90180b3056eaf74bd35"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-codex-shell-detection",
          "sectionId": "section-architecture",
          "slug": "shell-detection",
          "name": "Default shell selection and rewriting",
          "description": "`core/src/shell.rs` describes how Codex runs commands in the user shell: `format_default_shell_invocation` trying to unpack `bash -lc` script, replaces it with `zsh`/`bash` With `source ~/.zshrc`/`~/.bashrc`, and for PowerShell if available `bash_exe_fallback` replaces the call with `bash.exe`. `detect_default_user_shell` reads `/etc/passwd`, and Windows `default_user_shell` prefers `pwsh` and checks availability `bash.exe`. This allows the model to execute commands uniformly, regardless of the user's environment.",
          "tags": [
            "architecture",
            "rust",
            "shell"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/shell.rs",
              "sha256": "cb2cdf46ecae0b5898d105a0f1629877a04ca2c9270d3f57e2dd9c8a25d34430"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-landlock-bridge",
          "sectionId": "section-architecture",
          "slug": "landlock-bridge",
          "name": "Landlock sandbox invocation bridge",
          "description": "`core/src/landlock.rs` adapts internal `SandboxPolicy` to binary `codex-linux-sandbox`: `create_linux_sandbox_command_args` serializes the policy to JSON, adds cwd and delimiter `--`, A `spawn_command_under_linux_sandbox` causes `spawn_child_async` with the right `StdioPolicy` and surroundings. Thus, Codex enforces Landlock/seccomp restrictions without duplicating the logic of the CLI flag `--sandbox-permission`.",
          "tags": [
            "architecture",
            "rust",
            "sandbox",
            "linux"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/landlock.rs",
              "sha256": "f7fe86ae3a3a1dab82f9b0ff1f1a3a06816e7f3dee1c8c3c3d05744830172ae4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.67
        },
        {
          "id": "aspect-codex-exec-approval-cache",
          "sectionId": "section-architecture",
          "slug": "exec-approval-cache",
          "name": "Executor approval cache",
          "description": "`core/src/tools/sandboxing.rs` implements `ApprovalStore` and `with_cached_approval` to cache `ReviewDecision` per tool key, so repeated commands or patches skip redundant prompts during a session.",
          "tags": [
            "architecture",
            "execution",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/sandboxing.rs",
              "sha256": "ac32927a6b828136e3340b8a23fe5b0838396a070001fc06a4f9df7b0ce76e80"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-review-format",
          "sectionId": "section-architecture",
          "slug": "review-format-block",
          "name": "Review findings formatter",
          "description": "`core/src/review_format.rs` formats review comments: `format_review_findings_block` builds header, checkboxes `[x]/[ ]` if available `selection` and prints the body line by line, and `format_location` generates `path:start-end`. The block is returned in plain text so that the TUI and CLI can style the output without duplicating the logic.",
          "tags": [
            "architecture",
            "rust",
            "interface"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/review_format.rs",
              "sha256": "26d30868f759a6069026e463d0fe54afcbad15114403859936b147317d8caea0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-conversation-handle",
          "sectionId": "section-architecture",
          "slug": "codex-conversation-handle",
          "name": "CodexThread session conduit",
          "description": "`core/src/codex_thread.rs` wraps `Codex` as `CodexThread`: `submit` and `submit_with_id` enqueue ops, `next_event` streams events, and `rollout_path` exposes the JSONL history location. This keeps the bidirectional thread API narrow and safe for callers.",
          "tags": [
            "architecture",
            "sessions",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex_thread.rs",
              "sha256": "81423a5dc7634edd840e88cf5c85cbd761c0f2b35dd2889ebeef8cc5ee0219db"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.61
        },
        {
          "id": "aspect-readiness-flag",
          "sectionId": "section-architecture",
          "slug": "readiness-flag",
          "name": "ReadinessFlag tokens gate async startup",
          "description": "`codex-rs/utils/readiness/src/lib.rs` describes `ReadinessFlag`: `subscribe` highlights `Token` through `AtomicI32`, holding `tokens` with timeout `LOCK_TIMEOUT=1000ms`, A `mark_ready` checks that the token is still active, sets `AtomicBool` and broadcasts `watch::Sender`. `wait_ready` first reads the fast path, then waits `rx.changed()`, so that Codex components are synchronously unlocked only after confirmed readiness.",
          "tags": [
            "architecture",
            "concurrency",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/readiness/src/lib.rs",
              "sha256": "40d8b33676570c08a475d5b816ccd87777cdd98a1284e172b8cceccc48247649"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "sectionId": "section-architecture",
          "id": "aspect-protocol-response-models",
          "slug": "protocol-response-models",
          "name": "Protocol response models",
          "description": "`codex-rs/protocol/src/models.rs` describes the streaming elements of the Responses API: `ResponseItem` supports reasoning blocks with optional encrypted content, shell calls and web search, `ResponseInputItem::into` converts MCP/function inputs into a single format, and `LocalShellExecAction` And `FunctionCallOutputPayload` save JSON as strings. These types are the basis for serializing conversations between the Codex core and the SDK.",
          "tags": [
            "architecture",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/models.rs",
              "sha256": "99bce5460037d30c528589de7f7ab8ab1b54b39b21c27e242fe5fd8501a1a268"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-core-jitter-backoff",
          "sectionId": "section-architecture",
          "slug": "core-jitter-backoff",
          "name": "Exponential backoff with jitter",
          "description": "`core/src/util.rs` implements `backoff(attempt)`: delay starts at 200 ms, multiplied by a factor of 2.0 and multiplied by a random factor of 0.9-1.1 through `rand::rng().random_range`. This jitter biases retry requests and protects against synchronous retries in network restarts.",
          "tags": [
            "architecture",
            "execution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/util.rs",
              "sha256": "032be655e3d29ae4be13f87da4a5bdfb3b05d661e385a21b7b377302960b00ed"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-session-task-adapters",
          "sectionId": "section-architecture",
          "slug": "session-task-adapters",
          "name": "SessionTask adapters for Regular/Review/Compact",
          "description": "`core/src/tasks/compact.rs`, `regular.rs` And `review.rs` implement `SessionTask` three types: `CompactTask` causes `compact::run_compact_task` for auto-reduction of history, `RegularTask` delegates `run_task`, A `ReviewTask` reuses `run_task` and implements `abort`, calling `exit_review_mode`. Each structure gives its `TaskKind`, so the scheduler can interrupt and restart Codex subtasks with the correct semantics.",
          "tags": [
            "architecture",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tasks/compact.rs",
              "sha256": "c0944295fa36758df1e5ffacc2f80cee05ff972ba35433dde09f6e95bec4ab4c"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tasks/regular.rs",
              "sha256": "d251a1ed76849ace536307855abe31d17d9caca03f6e45cde4ad608ce137ea36"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tasks/review.rs",
              "sha256": "6216d9315d50339649f1777416eca5cb3cb9e2b7cfc74b249847be407933b5bb"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        }
      ]
    },
    {
      "id": "section-interface",
      "slug": "interface",
      "title": "Interface and app server",
      "entries": [
        {
          "id": "aspect-interface-app-server-summary",
          "sectionId": "section-interface",
          "slug": "interface-app-server-summary",
          "name": "App-server JSON-RPC summary",
          "description": "`app-server/src/lib.rs` keeps three-threaded loop JSON-RPC: sets `CHANNEL_CAPACITY=128`, parses CLI overrides via `CliConfigOverrides::parse_overrides`, loads synchronously `Config::load_with_cli_overrides` and starts tasks stdin->mpsc, `MessageProcessor::process_*` and stdout. `message_processor.rs` denies requests until `Initialize`, fixes the user agent in `USER_AGENT_SUFFIX` and converts `JSONRPCRequest` V `ClientRequest`. `outgoing_message.rs` generates `RequestId` counter `AtomicI64`, stores oneshot callbacks approvals and responds to serialization failures `INTERNAL_ERROR_CODE`. Any protocol or concurrency changes should start from here.",
          "tags": [
            "app-server",
            "app-server-flow",
            "auth",
            "interface",
            "rust",
            "search",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/lib.rs",
              "sha256": "c5229d3ebecd92a59f4973417c6175e57df8aad137f6c1c1d7aaae04c24e29d9"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/message_processor.rs",
              "sha256": "48419755439bc4c73ac27809237b00f95d63af1f1b23c953833bb39e87804cd6"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/outgoing_message.rs",
              "sha256": "41ec8b0f59077508f33598b9d8e740e8f8457ede46cf68483e40360dd1b44633"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "sectionId": "section-interface",
          "id": "aspect-jsonrpc-lite-types",
          "slug": "jsonrpc-lite-types",
          "name": "JSON-RPC message envelopes",
          "description": "`codex-rs/app-server-protocol/src/jsonrpc_lite.rs` defines the JSON-RPC framework: `RequestId` supports string and numeric identifiers, `JSONRPCMessage` through `#[serde(untagged)]` combines requests, notifications, responses and errors, and structures `JSONRPCRequest`/`JSONRPCNotification` optionally serialize `params`. `JSONRPCError` packs `code`, `message` And `data`so app-server keeps the IDE's single error format and can directly export types to TypeScript via ts-rs.",
          "tags": [
            "app-server-flow",
            "interface",
            "jsonrpc",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/jsonrpc_lite.rs",
              "sha256": "2bf45953f2845fad7de5b23c8662b18faa2c20ddfd8a732d0f2a241be71ef093"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-app-server-client-requests",
          "sectionId": "section-interface",
          "slug": "app-server-client-request-schema",
          "name": "ClientRequest schema and exports",
          "description": "`app-server-protocol/src/protocol/common.rs` defines `client_request_definitions!`, which builds the tagged `ClientRequest` enum (`method` + `request_id` + typed `params`) and wires each variant to its `response` type from `protocol::v1`/`protocol::v2`. The macro also generates `export_client_responses`, `export_client_response_schemas`, and `export_client_param_schemas` so TS/JSON exports stay aligned with the JSON-RPC wire format. `AuthMode` and `GitSha` live alongside the requests for typed auth and revision fields.",
          "tags": [
            "app-server-flow",
            "interface",
            "jsonrpc",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/common.rs",
              "sha256": "e77676433444c4fe1ecb0ce2d11990401b3b383d7c68bfbda309967fce7d93a0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-app-server-conversation-flows",
          "sectionId": "section-interface",
          "slug": "app-server-conversation-flows",
          "name": "App-server conversation flows",
          "description": "`message_processor.rs` transforms `JSONRPCRequest` V `ClientRequest`, blocks calls until `Initialize` and transmits them to `CodexMessageProcessor`. `codex_message_processor.rs` collects `Config` through `derive_config_from_params`, creates sessions via `ConversationManager::new_conversation`, sends to resume `SessionConfiguredNotification` and filters `initial_messages` By `InputMessageKind::Plain`, stores `pending_interrupts` for TurnAborted and leads `conversation_listeners` via oneshot cancel. `RolloutRecorder::list_conversations` gives pagination and cursors, and the test `codex_message_processor_flow.rs` checks that new/listener/approvals/resume are synchronous and pulls up sandbox/cwd from the settings.",
          "tags": [
            "app-server",
            "app-server-flow",
            "interface",
            "rust",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/message_processor.rs",
              "sha256": "48419755439bc4c73ac27809237b00f95d63af1f1b23c953833bb39e87804cd6"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/codex_message_processor.rs",
              "sha256": "86d07e2661aaf702fc1837768112d962f70898782a403c769856f8ab78f3766c"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/codex_message_processor_flow.rs",
              "sha256": "648fec01f6d89782c7ae336e88249098b799cef1da5f8845d935de720fabaaf5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-app-server-outgoing-message-sender",
          "sectionId": "section-interface",
          "slug": "app-server-outgoing-message-sender",
          "name": "App-server outgoing message dispatcher",
          "description": "`app-server/src/outgoing_message.rs` holds `OutgoingMessageSender`: counter `AtomicI64` issues `RequestId::Integer`, `send_request` saves oneshot to `request_id_to_callback`, A `notify_client_response` removes callback and logs losses. `send_response` serializes payload and throws it back if there is an error `JSONRPCErrorError` With `INTERNAL_ERROR_CODE`. `send_server_notification`/`send_notification` share `ServerNotification` and legacy `OutgoingNotification`, and enum `OutgoingMessage` encapsulates requests, responses, and errors. Unit test `verify_server_notification_serialization` confirms that the strum metadata is passed to the method `loginChatGptComplete`, so the IDE receives correct JSON-RPC notifications even when migrating schemas.",
          "tags": [
            "app-server-flow",
            "interface",
            "jsonrpc",
            "notifications",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/outgoing_message.rs",
              "sha256": "41ec8b0f59077508f33598b9d8e740e8f8457ede46cf68483e40360dd1b44633"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-app-server-error-codes",
          "sectionId": "section-interface",
          "slug": "app-server-error-codes",
          "name": "App-server JSON-RPC error codes",
          "description": "`app-server/src/error_code.rs` captures the JSON-RPC constants: `INVALID_REQUEST_ERROR_CODE` (-32600) and `INTERNAL_ERROR_CODE` (-32603) with default texts. `MessageProcessor` uses them to reject calls until `initialize`, A `OutgoingMessageSender::send_error` - to return consistent errors when serialization fails. Common values ensure that the IDE and MCP receive the same codes for retrays and diagnostics.",
          "tags": [
            "app-server-flow",
            "interface",
            "jsonrpc",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/error_code.rs",
              "sha256": "60981f1dd57a92e37d14a65125265943651b7bb83fe53772e1f243daf2517338"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.52
        },
        {
          "id": "aspect-app-server-config-api",
          "sectionId": "section-interface",
          "slug": "app-server-config-api",
          "name": "Config API read/write and requirements",
          "description": "`app-server/src/config_api.rs` wraps `ConfigService` for JSON-RPC: `read` returns `ConfigReadResponse`, `config_requirements_read` maps `ConfigRequirementsToml` to API `ConfigRequirements`, and `write_value`/`batch_write` persist edits. `map_error` turns `ConfigServiceError` into `JSONRPCErrorError`, attaching `config_write_error_code` payloads for invalid requests and defaulting to `INTERNAL_ERROR_CODE` otherwise.",
          "tags": [
            "app-server",
            "app-server-flow",
            "configuration",
            "interface",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/config_api.rs",
              "sha256": "0ad9d8718a20b7ea3875b6403c60a04db0d5654cda3eb2b586cd7f6d02620949"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-app-server-model-list",
          "sectionId": "section-interface",
          "slug": "app-server-model-list",
          "name": "Model picker list for app-server",
          "description": "`app-server/src/models.rs` builds `supported_models`: asks `ThreadManager::list_models` with `RefreshStrategy::OnlineIfUncached`, filters `ModelPreset::show_in_picker`, and maps presets into protocol `Model` entries (ids, display names, default reasoning effort, and supported effort descriptions). This is the app-server source for model picker data in client UIs.",
          "tags": [
            "app-server",
            "app-server-flow",
            "configuration",
            "interface",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/models.rs",
              "sha256": "f199f19c8210d3f361199d82459a1d8339d00711b3b8f1066f4b8d86c64cf5b3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-app-server-auth-flows",
          "sectionId": "section-interface",
          "slug": "app-server-auth-flows",
          "name": "App-server auth and approvals",
          "description": "`message_processor.rs` routes login commands, and `codex_message_processor.rs` controls the input state: `login_api_key` resets active `ActiveLogin`, saves the key via `login_with_api_key`, causes `auth_manager.reload()` and sends out `AuthStatusChange`. `login_chatgpt` starts `run_login_server` with a timeout of 10 minutes, stores `ShutdownHandle` V `active_login`, upon completion sends `LoginChatGptComplete` and repeated `AuthStatusChange`. `cancel_login_chatgpt` And `logout_chatgpt` close the server or return `INVALID_REQUEST_ERROR_CODE`, if the identifier does not match, but `get_auth_status` takes into account `requires_openai_auth` provider. Test `auth.rs` holds successful and failing entry branches.",
          "tags": [
            "app-server",
            "app-server-flow",
            "auth",
            "interface",
            "rust",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/message_processor.rs",
              "sha256": "48419755439bc4c73ac27809237b00f95d63af1f1b23c953833bb39e87804cd6"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/codex_message_processor.rs",
              "sha256": "86d07e2661aaf702fc1837768112d962f70898782a403c769856f8ab78f3766c"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/auth.rs",
              "sha256": "97258a408e4a49a526e28657393b449da18182f201ba78487c2691a362613e62"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-app-server-codex-message-processor",
          "sectionId": "section-interface",
          "slug": "app-server-codex-message-processor",
          "name": "CodexMessageProcessor orchestrates IDE bridge",
          "description": "`codex_message_processor.rs` creates `AuthManager` And `ConversationManager`, stores `conversation_listeners`, `pending_interrupts` And `pending_fuzzy_searches` for cancellations `send_user_turn` mapit `WireInputItem` V `CoreInputItem`, throws sandbox/model/effort overrides and confirms completion. `add_conversation_listener` launches background tasks, and `bespoke_event_handling.rs::apply_bespoke_event_handling` translates core events into v1/v2 approvals, item lifecycle notifications, and rollback/interrupt responses via `OutgoingMessageSender`. `exec_one_off_command` picks up sandbox via `get_platform_sandbox` and returns stdout/stderr, `fuzzy_file_search` cancels previous requests for token with `AtomicBool`. Codes from `error_code.rs` (-32600/-32603) provide a uniform error response.",
          "tags": [
            "app-server",
            "app-server-flow",
            "auth",
            "interface",
            "rust",
            "search",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/codex_message_processor.rs",
              "sha256": "86d07e2661aaf702fc1837768112d962f70898782a403c769856f8ab78f3766c"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/bespoke_event_handling.rs",
              "sha256": "b527be8f2a4c43930a6582b84682c3bd86833386e0c346ad5c02c17adf60e950"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/error_code.rs",
              "sha256": "60981f1dd57a92e37d14a65125265943651b7bb83fe53772e1f243daf2517338"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-app-server-search-overview",
          "sectionId": "section-interface",
          "slug": "app-server-search-overview",
          "name": "App-server fuzzy search overview",
          "description": "`app-server/src/fuzzy_file_search.rs` implements fuzzy search by workspace, and `app-server/tests/suite/fuzzy_file_search.rs` checks the ranking and highlighting of matches. The node describes where to refine hints and file searches for client interfaces.",
          "tags": [
            "app-server",
            "app-server-flow",
            "interface",
            "rust",
            "search",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/fuzzy_file_search.rs",
              "sha256": "d6b3d7ab6fd051ed5de31f2fc858ca63d28326ab945697f615b38d230592cd1d"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/fuzzy_file_search.rs",
              "sha256": "0ecd36cb87879ee40e993a835a141b945e8a00a939f00e2bf3585036aa8d9147"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-interface-index",
          "sectionId": "section-interface",
          "slug": "interface-index",
          "name": "App-server interface index",
          "description": "`app-server/src/lib.rs`, `message_processor.rs` And `codex_message_processor.rs` form the core of the IDE bridge: the first configures stdin/processor/stdout tasks, the second serializes JSON-RPC and monitors `initialized`, the third manages sessions, logins and approvals. The entry specifies which files to change when finalizing the protocol.",
          "tags": [
            "app-server",
            "app-server-flow",
            "interface",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/lib.rs",
              "sha256": "c5229d3ebecd92a59f4973417c6175e57df8aad137f6c1c1d7aaae04c24e29d9"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/message_processor.rs",
              "sha256": "48419755439bc4c73ac27809237b00f95d63af1f1b23c953833bb39e87804cd6"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/outgoing_message.rs",
              "sha256": "41ec8b0f59077508f33598b9d8e740e8f8457ede46cf68483e40360dd1b44633"
            },
            {
              "path": "projects/Codex/codex-rs/app-server/src/codex_message_processor.rs",
              "sha256": "86d07e2661aaf702fc1837768112d962f70898782a403c769856f8ab78f3766c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-user-notifier",
          "sectionId": "section-interface",
          "slug": "user-notifier",
          "name": "External notifier hook",
          "description": "`core/src/user_notification.rs` allows Codex to notify external programs: `UserNotifier::new` reads a list of commands from the configuration, `notify` serializes `UserNotification` to JSON and starts the process `spawn` without waiting. Currently supported type `agent-turn-complete` With `turn_id`, input messages and the agent's last response. Serialization or startup errors are logged via `tracing::error`/`warn`, so the CLI can delegate notifications (for example, in desktop toast) without blocking the UI.",
          "tags": [
            "app-server-flow",
            "interface",
            "notifications",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/user_notification.rs",
              "sha256": "dd97cc59a8f60f12e6cadc34bacb5379ca0b239c84a34c45825b7de102a26466"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-response-event-mapping",
          "sectionId": "section-interface",
          "slug": "response-event-mapping",
          "name": "Response->event fan-out",
          "description": "`core/src/event_mapping.rs` translates `ResponseItem` in UI events: `map_response_item_to_event_messages` collects user text and images into `UserMessageEvent`, filters system roles and marks `EnvironmentContext`/`UserInstructions`. For Reasoning blocks adds `AgentReasoningEvent` and optionally raw reasoning when `show_raw_agent_reasoning`. Web search calls are converted to `WebSearchEndEvent`, and function /exec elements are given to the upper levels. This determines what messages the interface actually sees and how the model data is grouped.",
          "tags": [
            "app-server-flow",
            "interface",
            "notifications",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/event_mapping.rs",
              "sha256": "cc2f2429a89c2b8c0a562097d768d04f0b4c2827a1e19c5bd4cddbab3db17258"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-user-instructions-tag",
          "sectionId": "section-interface",
          "slug": "user-instructions-tag",
          "name": "User instructions tagging block",
          "description": "`core/src/user_instructions.rs` packs user instructions: `UserInstructions::serialize_to_xml` wraps text in `<user_instructions>` with additional newlines and turns it into `ResponseItem::Message` With `ContentItem::InputText`. This decouples the instruction block from the rest of the story, and clients can highlight user context or hide it in the UI without heuristics.",
          "tags": [
            "app-server-flow",
            "interface",
            "rust",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/user_instructions.rs",
              "sha256": "937062389970371f1bb0af1ab5583dfcdad29f6068647c65dea63e5f26eef4d0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-fuzzy-match-engine",
          "sectionId": "section-interface",
          "slug": "fuzzy-match-engine",
          "name": "Fuzzy subsequence matcher for UI filters",
          "description": "`common/src/fuzzy_match.rs` implements case-insensitive substring search: `fuzzy_match` builds a lowercase version of the string, maps indexes to the source text, adds a bonus for the prefix and penalizes for breaks, and `fuzzy_indices` returns unique positions for highlighting. The algorithm works correctly with Unicode (e.g. I -> i) and ensures that TUI lists and filters highlight the exact characters regardless of casefolding.",
          "tags": [
            "app-server-flow",
            "interface",
            "rust",
            "search"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/fuzzy_match.rs",
              "sha256": "15ec4eeee55e23e7d2b30fca3ac05d3e5a16071518ad180fc875fe4d632d7c0e"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.44
        },
        {
          "id": "aspect-fuzzy-file-search-tests",
          "sectionId": "section-interface",
          "slug": "fuzzy-file-search-tests",
          "name": "Fuzzy file search response tests",
          "description": "`app-server/tests/suite/fuzzy_file_search.rs` raises `codex-app-server`, creates a file tree and checks that the response `fuzzyFileSearch` sorted by speed, contains `indices` and takes into account Windows/Unix differences. The second test sends a second request with `cancellation_token`, making sure that the server returns only the result of the new attempt. This protects the TUI/IDE from outdated tooltips.",
          "tags": [
            "app-server-flow",
            "interface",
            "search",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/fuzzy_file_search.rs",
              "sha256": "0ecd36cb87879ee40e993a835a141b945e8a00a939f00e2bf3585036aa8d9147"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-debug-client-app-server",
          "sectionId": "section-interface",
          "slug": "debug-client-app-server",
          "name": "Debug client for app-server",
          "description": "`codex-rs/debug-client/src/main.rs` provides a minimal interactive app-server client: parses CLI flags (codex binary, config overrides, approval policy, model/provider/cwd), spawns `AppServerClient` to the `codex` CLI, initializes JSON-RPC, and either starts or resumes a thread. The stdin loop parses `UserCommand` actions (`NewThread`, `Resume`, `Use`, `RefreshThread`, `Quit`) and forwards user messages to `send_turn`, while a reader thread streams events to the console. This is the lightweight tool for debugging app-server flows without the full TUI.",
          "tags": [
            "app-server",
            "app-server-flow",
            "interface",
            "rust",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/debug-client/src/main.rs",
              "sha256": "4bccc8275e8bb8de789586608cc338e576a9fd8ae2787bfe09c9048b8fb47345"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        }
      ]
    },
    {
      "id": "section-tui",
      "slug": "tui",
      "title": "TUI core UX",
      "entries": [
        {
          "id": "aspect-codex-tui-event-loop",
          "sectionId": "section-tui",
          "slug": "tui-event-loop",
          "name": "TUI event loop and conversation flow",
          "description": "Components `codex-rs/tui/src/app.rs` and `codex-rs/tui2/src/app.rs` unfold `ConversationManager`, `AuthManager` And `FileSearchManager`, subscribe TUI to events and manage overlays (diffs, assertion pipeline, backtracking). Cycle `App::run` combines TUI and internal channel events, monitors tokens, notifications and persistent settings, which sets the behavior of the interactive client.",
          "tags": [
            "conversation",
            "interface",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/app.rs",
              "sha256": "dc247252242d9609014bcf974ded2ba796018f867a5982515216a5f61c9cb284"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/app.rs",
              "sha256": "f9e2b38fafd6e4f0e68352e87915aff3b3758bed7a17b81207773a46d4ecb70e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-tui-backtrack",
          "sectionId": "section-tui",
          "slug": "tui-backtrack-flow",
          "name": "Backtrack overlay workflow",
          "description": "`tui/src/app_backtrack.rs` and `tui2/src/app_backtrack.rs` implement Esc-backtrack: `BacktrackState` fixes the base `ConversationId`, selected user message and pending fork. Esc in main mode opens transcript overlay, `overlay_step_backtrack` And `apply_backtrack_selection` highlight the desired replica, Enter calls `request_backtrack`, A `fork_and_switch_to_new_conversation` rebuilds the chat via ConversationManager. It is this module that controls UI hints, overlay switching and re-rendering of the transcript after a fork.",
          "tags": [
            "conversation",
            "interface",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/app_backtrack.rs",
              "sha256": "34bb2907ace05a608cc30d90a86752288e87f0e9ee209ea493510dc8abd5445c"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/app_backtrack.rs",
              "sha256": "61b8a03aced8d5a0460108e0228e45ca0e10a1b925c2473a5fb99b571003f091"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-tui-stream-controller",
          "sectionId": "section-tui",
          "slug": "tui-stream-controller",
          "name": "StreamController splits the agent stream",
          "description": "`tui/src/streaming/mod.rs` and `tui2/src/streaming/mod.rs` store `StreamState` With `MarkdownStreamCollector`, queue `VecDeque<Line>` and flag `has_seen_delta`, while `controller.rs` controls the newline gate: `push` accumulates deltas and commits ready lines, `on_commit_tick` gives one line by timer, `finalize` drains the remainder and resets the condition. `emit` ensures that the agent header is printed only once. Together, this gives a smooth animation of generating responses in the chat widget.",
          "tags": [
            "interface",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/streaming/controller.rs",
              "sha256": "9001a1ee6e90060eb079b8f1f6a7152901017fe61e8c56a900c7953045552b55"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/streaming/mod.rs",
              "sha256": "f66403742bc49efded7e3409a1366d9dc5e6f7a0667aa52292d6b157dd488a81"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/streaming/controller.rs",
              "sha256": "03b8e2864f6048003a86042132412f5e7b4f2ee191bcadb14b3672a37185f3c0"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/streaming/mod.rs",
              "sha256": "429aff7a331452d4de80b82bc42d116b1e56310a1d11772175fa5859c6ab7dfd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-tui-chatwidget-orchestration",
          "sectionId": "section-tui",
          "slug": "tui-chatwidget-orchestration",
          "name": "ChatWidget orchestrates session UX",
          "description": "`tui/src/chatwidget.rs` and `tui2/src/chatwidget.rs` are the main controllers: they handle `EventMsg` (commit deltas, MCP, approvals, web search), manage `BottomPane`, `StreamController`, `InterruptManager`, and store transcript history in `VecDeque<HistoryCell>` while syncing git context, notifications, and model presets/approval. Collab events (`CollabAgent*`, `CollabWaiting*`, `CollabClose*`) are routed to `collab::spawn_end`/`interaction_end`/`waiting_*`/`close_end` in `tui/src/collab.rs` and `tui2/src/collab.rs`, which format `PlainHistoryCell` entries with call/sender/receiver/status details and prompt previews.",
          "tags": [
            "interface",
            "rust",
            "sessions",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget.rs",
              "sha256": "69d514ad4e18fadf3c4f62d2948f45b99eabff1d484d97dc4dd8d266ce6aa654"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/collab.rs",
              "sha256": "2c2df23adc07585fbacddb0529d72a45b833ad8aa3dd51c3d65c28322a6aaf7d"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget.rs",
              "sha256": "5fc938c9a489eeb37c2b8f1d5d811d1fdf0da04776fd5d9c6d3b49b5a14e446f"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/collab.rs",
              "sha256": "2c2df23adc07585fbacddb0529d72a45b833ad8aa3dd51c3d65c28322a6aaf7d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-tui-approval-overlay",
          "sectionId": "section-tui",
          "slug": "tui-approval-overlay",
          "name": "TUI approval overlay queue",
          "description": "`project/Codex/codex-rs/tui/src/bottom_pane/approval_overlay.rs` and `tui2/src/bottom_pane/approval_overlay.rs` draw the confirmation modal: `ApprovalOverlay` stores the queue `ApprovalRequest::Exec`/`ApplyPatch`, builds a list of options via `build_options` and sends decisions to `AppEvent::CodexOp`. Key handlers (`handle_key_event`, `on_ctrl_c`) support hotkeys `y/n`, Enter and `Ctrl+C`, and the renderer outputs hints and diff via `DiffSummary`. Unit tests check queue clearing and history format to ensure consistent UX consistency.",
          "tags": [
            "interface",
            "rust",
            "tools",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/approval_overlay.rs",
              "sha256": "68d081be5c3a4ddced7694d41cfb0dc9b86f932d2e3d947dc24f2cac1e653922"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/approval_overlay.rs",
              "sha256": "68d081be5c3a4ddced7694d41cfb0dc9b86f932d2e3d947dc24f2cac1e653922"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-tui-app-events",
          "sectionId": "section-tui",
          "slug": "tui-app-events",
          "name": "AppEvent routes TUI events",
          "description": "`tui/src/app_event.rs` and `tui2/src/app_event.rs` list all signals between the UI and the agent: `AppEvent::CodexEvent` delivers the SSE stream, `StartFileSearch`/`FileSearchResult` manage `@` search, `UpdateModel` And `UpdateReasoningEffort` synchronize model selection, `FullScreenApprovalRequest` opens modals, and `AppEvent::CodexOp` forwards operations back to core. A single enum simplifies event routing and TUI tests.",
          "tags": [
            "events",
            "rust",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/app_event.rs",
              "sha256": "4d39a999345567d55851f6087b2d712e07fca0e7c1b57f6963b95b126c905e55"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/app_event.rs",
              "sha256": "4fd1d50f1968afe2cbd643fbf357b188593cb5816d6089b57bf03084c87d9196"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-tui-app-event-sender",
          "sectionId": "section-tui",
          "slug": "tui-app-event-sender",
          "name": "AppEventSender synchronizes queue and log",
          "description": "`tui/src/app_event_sender.rs` and `tui2/src/app_event_sender.rs` are light shells around `UnboundedSender<AppEvent>`: before sending, write the event to `session_log` (except `AppEvent::CodexOp`). This prevents event loss and links UI queues to the replay log.",
          "tags": [
            "events",
            "rust",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/app_event_sender.rs",
              "sha256": "7e4c99eff34f255836ab4097fbff2d96760a507fe75fc1630466a6461b03624f"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/app_event_sender.rs",
              "sha256": "7e4c99eff34f255836ab4097fbff2d96760a507fe75fc1630466a6461b03624f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-chatwidget-interrupt-queue",
          "sectionId": "section-tui",
          "slug": "chatwidget-interrupt-queue",
          "name": "InterruptManager serializes Exec/MCP events",
          "description": "`tui/src/chatwidget/interrupts.rs` and `tui2/src/chatwidget/interrupts.rs` postpone external events: `InterruptManager` accumulates exec approvals, MCP tool calls and `PatchApplyEnd` V `VecDeque`, A `flush_all` plays them through `ChatWidget::handle_*_now` when the UI is ready. This prevents races when modals and log output try to update at the same time.",
          "tags": [
            "execution",
            "rust",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget/interrupts.rs",
              "sha256": "803f06b630ceae062719d17adcba81794a01029540c34c9649ff482f9734c1cc"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget/interrupts.rs",
              "sha256": "803f06b630ceae062719d17adcba81794a01029540c34c9649ff482f9734c1cc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-tui-slash-command-registry",
          "sectionId": "section-tui",
          "slug": "tui-slash-command-registry",
          "name": "TUI slash commands are listed and filtered",
          "description": "`codex-rs/tui/src/slash_command.rs` and `tui2/src/slash_command.rs` hold the registry of built-in commands: `SlashCommand` sets the display order via EnumIter, `description()` gives hints and `available_during_task()` blocks dangerous commands (`/model`, `/approvals`, `/review`, `/undo` etc.) while the task is running. `built_in_slash_commands()` filters `/undo` through `BETA_FEATURE`, returning pairs ('command', SlashCommand) for popup. This ensures that TUI only shows supported slash commands and hides experimental features by default.",
          "tags": [
            "cli",
            "interface",
            "rust",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/slash_command.rs",
              "sha256": "65e1eb427cbcfbf8874834ac3389940b532cde4c85d066a834fa334e5246d329"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/slash_command.rs",
              "sha256": "ebc896933d1c728a8edbed24088367590b21227243e58f86ddcadf7ab1297b05"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-tui-resume-picker",
          "sectionId": "section-tui",
          "slug": "tui-resume-picker",
          "name": "Alt-screen picker restores sessions",
          "description": "`tui/src/resume_picker.rs` and `tui2/src/resume_picker.rs` open the resume menu in alt-screen: `run_resume_picker` includes `AltScreenGuard`, starts background `PageLoader`, which through `RolloutRecorder::list_conversations` pulls up JSONL pages by `Cursor`, and reduces `TuiEvent` With `BackgroundEvent` in one `tokio::select!`. `PickerState` tracks `query`, `seen_paths` and lazily completes the list when scrolling (`LOAD_NEAR_THRESHOLD`) or empty search, synchronizing download tokens. The renderer shows relative timestamps, a preview of the first user message, and prompts (Enter/Esc/Ctrl+C), so the user can quickly resume rollout or start a new session without leaving the TUI.",
          "tags": [
            "interface",
            "sessions",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/resume_picker.rs",
              "sha256": "8cd29f33aa9ad8bfa66fcfae861ec5e83290bb8e24b1c0531f7705570d450373"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/resume_picker.rs",
              "sha256": "8cd29f33aa9ad8bfa66fcfae861ec5e83290bb8e24b1c0531f7705570d450373"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-tui-update-check",
          "sectionId": "section-tui",
          "slug": "tui-update-check",
          "name": "TUI caches CLI update banner",
          "description": "`projects/Codex/codex-rs/tui/src/updates.rs` and `tui2/src/updates.rs` read `version.json` next to `Config::codex_home`, and if there is no recording or it is more than 20 hours old, `get_upgrade_version` starts background `tokio::spawn(check_for_update)` without blocking TUI launch. `check_for_update` goes to GitHub `releases/latest` through `create_client`, removes the prefix `rust-v` and saves `{latest_version,last_checked_at}`. `is_newer` compares the sample without prereleases, so the banner is shown only on stable releases newer than the one collected `CODEX_CLI_VERSION`.",
          "tags": [
            "interface",
            "tui",
            "tui-core",
            "updates"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/updates.rs",
              "sha256": "3719305f170ee5d68b466da5ac154edacc333b53b78c30756e667c25a5a1261f"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/version.rs",
              "sha256": "826c6b17bfb5860f9b4b5ac7111a003a510087452a0e45225c3f8f2e2b7512b9"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/updates.rs",
              "sha256": "3719305f170ee5d68b466da5ac154edacc333b53b78c30756e667c25a5a1261f"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/version.rs",
              "sha256": "826c6b17bfb5860f9b4b5ac7111a003a510087452a0e45225c3f8f2e2b7512b9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-chatwidget-agent-loop",
          "sectionId": "section-tui",
          "slug": "chatwidget-agent-loop",
          "name": "spawn_agent forwards SessionConfigured and operations",
          "description": "`tui/src/chatwidget/agent.rs` and `tui2/src/chatwidget/agent.rs` launch background tasks to communicate with core: `spawn_agent` creates `ConversationManager::new_conversation`, synchronously sends the first `SessionConfigured` How `AppEvent::CodexEvent`, and then turns two in parallel `tokio::spawn`: one is listening `codex_op_rx` and calls `conversation.submit(op)`, the second relays `conversation.next_event()` back to UI. `spawn_agent_from_existing` repeats the flow for forked sessions so that the UI instantly shows the saved config. Submission and initialization errors are logged via `tracing::error!`, so the widget always receives events and keeps a single queue `UnboundedSender<Op>`.",
          "tags": [
            "conversation",
            "execution",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget/agent.rs",
              "sha256": "e432e1152c0611edf14232f7dd4900a60be53e303facc265eaea172b8594123c"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget/agent.rs",
              "sha256": "dd64a563b4014b3087e4feeccb4c8d24a4734208d55fbbc8af749f21f88e9b01"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        },
        {
          "id": "aspect-chatwidget-session-header",
          "sectionId": "section-tui",
          "slug": "chatwidget-session-header",
          "name": "SessionHeader caches the selected model",
          "description": "`tui/src/chatwidget/session_header.rs` and `tui2/src/chatwidget/session_header.rs` store the model string for the top chat bar: `SessionHeader::new` accepts text from `SessionConfigured`, A `set_model` updates it only when an actual change occurs. This prevents unnecessary status redraws and synchronizes the displayed model with the conversation configuration.",
          "tags": [
            "conversation",
            "interface",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget/session_header.rs",
              "sha256": "d4b63593c60183416b80b25753d8a4463360a1436ce4fbd7f629c9e5d67058ca"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget/session_header.rs",
              "sha256": "d4b63593c60183416b80b25753d8a4463360a1436ce4fbd7f629c9e5d67058ca"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.3
        },
        {
          "id": "aspect-tui-terminal-runtime",
          "sectionId": "section-tui",
          "slug": "tui-terminal-runtime",
          "name": "Tui manages terminal modes and frames",
          "description": "`tui/src/tui.rs` and `tui2/src/tui.rs` initialize low-level runtime: `set_modes` includes bracketed paste, focus events and keyboard enhancement flags, `init`/`restore` switch raw mode and alternate screen, and `set_panic_hook` guarantees that settings will be returned in case of a crash. `FrameRequester` coalesces footage through the background `tokio::spawn`, `event_stream` combines crossterm events and the draw schedule, handling suspend/resume (`Ctrl+Z` on Unix) and focus notifications. Methods `enter_alt_screen`/`leave_alt_screen`, `insert_history_lines` And `draw` update synchronously `CustomTerminal`, saving viewport and pending history. This is the core on which all other TUI widgets are built.",
          "tags": [
            "interface",
            "tui",
            "tui-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/tui.rs",
              "sha256": "c957e57265d80b73f59567f4a2373eab0e194e5e49960fdd9264eb02bbba4f59"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/tui.rs",
              "sha256": "ad2272d5653bb1adc33e9d506670fc9ebcf4ccaa482af7f53cefcc5cc0e576f7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-tui-md-events-dump",
          "sectionId": "section-tui",
          "slug": "tui-md-events-dump",
          "name": "Markdown event dumper",
          "description": "`tui/src/bin/md-events.rs` reads stdin into a string, passes through `pulldown_cmark::Parser::new` and prints debug `Debug` every event. The utility helps to debug the TUI markdown render without heavy integration tests, showing the sequence `Start`/`Text`/`End` right in the terminal.",
          "tags": [
            "tui",
            "tui-testing",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bin/md-events.rs",
              "sha256": "110688ce934ed9891f06acaa0c0f140c3749405a3a2ece33de60e93a2eb29a75"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.32
        },
        {
          "id": "aspect-tui2-bootstrap",
          "sectionId": "section-tui",
          "slug": "tui2-bootstrap",
          "name": "TUI2 bootstrap and OSS selection",
          "description": "`codex-rs/tui2/src/cli.rs` defines CLI flags for the new TUI (prompt/images, resume/fork selectors, `--oss` and `--local-provider`, sandbox/approval, `--search`, `--add-dir`, `--no-alt-screen`) and preserves compatibility via `From<codex_tui::Cli>`. `tui2/src/lib.rs` implements `run_main`: maps `--full-auto`/`--dangerously-bypass-approvals-and-sandbox`, translates `--search` to `web_search` overrides, resolves the OSS provider and default model, loads config, and applies `ConfigOverrides` including additional writable roots. This is the new TUI entrypoint for session setup and model selection.",
          "tags": [
            "tui-core",
            "configuration",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui2/src/lib.rs",
              "sha256": "72927e17cadb5115b046f638ed2e35b595b970647ffe89e5578aaeaf17a017b7"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/cli.rs",
              "sha256": "f561d9bd61601f8f7dc7468fdda1b5ecb87e3783342bf0af6fd4606749ff5574"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-tui-notification-backend",
          "sectionId": "section-tui",
          "slug": "tui-notification-backend",
          "name": "TUI notification backend selection",
          "description": "`tui/src/notifications/mod.rs` and `tui2/src/notifications/mod.rs` choose between OSC 9 notifications and Windows toast notifications: `detect_backend` selects `WindowsToast` only when running under WSL with Windows Terminal (`WT_SESSION`). `windows_toast.rs` builds a PowerShell toast script, encodes it for `powershell.exe -EncodedCommand`, and suppresses stdio to avoid terminal noise. `tui/src/tui.rs` and `tui2/src/tui.rs` cache the backend, emit notifications only when unfocused, and fall back from toast to OSC 9 (or disable notifications) on errors.",
          "tags": [
            "tui",
            "interface",
            "notifications"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/notifications/mod.rs",
              "sha256": "3b4688fbe444394cb527a1e85d866c47c6474dc9d491d38eab97c802f299191d"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/notifications/windows_toast.rs",
              "sha256": "2ce6f7c6b574a967d0b63b8cb35b820ff62f94120393c9596330b0bb2b81e915"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/tui.rs",
              "sha256": "c957e57265d80b73f59567f4a2373eab0e194e5e49960fdd9264eb02bbba4f59"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/notifications/mod.rs",
              "sha256": "3b4688fbe444394cb527a1e85d866c47c6474dc9d491d38eab97c802f299191d"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/notifications/windows_toast.rs",
              "sha256": "2ce6f7c6b574a967d0b63b8cb35b820ff62f94120393c9596330b0bb2b81e915"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/tui.rs",
              "sha256": "ad2272d5653bb1adc33e9d506670fc9ebcf4ccaa482af7f53cefcc5cc0e576f7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        }
      ]
    },
    {
      "id": "section-tui-bottom",
      "slug": "tui-bottom-pane",
      "title": "TUI Bottom Pane",
      "entries": [
        {
          "id": "aspect-codex-bottom-pane",
          "sectionId": "section-tui-bottom",
          "slug": "bottom-pane-state",
          "name": "Bottom pane composer and approval stack",
          "description": "`tui/src/bottom_pane/mod.rs` controls the bottom panel: `BottomPane` holds ChatComposer and stack `BottomPaneView`, processes Ctrl+C/Esc, shows ApprovalOverlay, widget status and tooltips (Ctrl-C quit, Esc backtrack). `set_task_running` activates the StatusIndicatorWidget and message queue, `show_selection_view` and popups insert modal windows without losing text. This determines the UX of input, pop-ups and interactive approvals.",
          "tags": [
            "conversation",
            "interface",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/mod.rs",
              "sha256": "182e6cab396d8483591fc92623767d32309e9afb0c74accb26b34882c21aa79b"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/mod.rs",
              "sha256": "af677101dd9cfbe0eb6bded4cab706df55b996b557227ce86fe8921c8be3d7e7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-tui-footer-shortcuts",
          "sectionId": "section-tui-bottom",
          "slug": "tui-footer-shortcuts",
          "name": "Footer toggles hints and Ctrl+C hint",
          "description": "`tui/src/bottom_pane/footer.rs` controls the hint line: `FooterMode` selects the mode (Ctrl+C reminder, summary, overlay, Esc hint, context-only), and `toggle_shortcut_mode` And `reset_mode_after_activity` switch state in response to user actions. `render_footer` indents through `prefix_lines` and, in overlay mode, `build_columns` lays out `SHORTCUTS` two columns with dynamic filling (`ShortcutDescriptor::overlay_entry` takes into account `shift+Enter`, esc-backtrack and ctrl+c`). The context window shows the percentage of context remaining, and snapshot tests `footer_snapshots` insure the layout of tips.",
          "tags": [
            "interface",
            "shortcuts",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/footer.rs",
              "sha256": "9f0ad726bdbec1a291dec50b76d83315ed47da6fc8e71a63c4b5907e97d8ce18"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/footer.rs",
              "sha256": "62351b631e5bcaafb049b8e0697c5eda99792e189ab6cc812c27e938628df259"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-tui-bottom-pane-view",
          "sectionId": "section-tui-bottom",
          "slug": "tui-bottom-pane-view",
          "name": "BottomPaneView defines a modal contract",
          "description": "`tui/src/bottom_pane/bottom_pane_view.rs` describes the trait for all bottom panel widgets: `handle_key_event`, `handle_paste`, `cursor_pos` And `on_ctrl_c` allow overlays to control events without knowledge of external state, `is_complete` signals when the stack should remove the widget, and `try_consume_approval_request` gives you a chance to capture another `ApprovalRequest`. Thanks to a single API `BottomPane` can dynamically switch between composer, approval overlay and popup forms, requesting a redraw after each call.",
          "tags": [
            "interface",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/bottom_pane_view.rs",
              "sha256": "34f5300e97fb2bed5395d9df0576215ce9003d6c5a850c32a5dbcf7c91d50c4b"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/bottom_pane_view.rs",
              "sha256": "34f5300e97fb2bed5395d9df0576215ce9003d6c5a850c32a5dbcf7c91d50c4b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-tui-composer-history",
          "sectionId": "section-tui-bottom",
          "slug": "tui-composer-history",
          "name": "ChatComposerHistory synchronizes input history",
          "description": "`tui/src/bottom_pane/chat_composer_history.rs` produces a shell-like story: `record_local_submission` filters empty and duplicates, `should_handle_navigation` checks the cursor and the last inserted text, and `navigate_up/down` combines local records and lazily loads Persisted JSONL via `Op::GetHistoryEntryRequest`. Replies are being processed `on_entry_response`to update `fetched_history` and return text only for the current cursor. Tests `navigation_with_async_fetch` guarantee that the queue `AppEvent::CodexOp` and asynchronous responses don't lose focus.",
          "tags": [
            "history",
            "interface",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/chat_composer_history.rs",
              "sha256": "7428b308cd892befff02cf16e32b26ccb6ae5a76722666ffd19db9ada017331d"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/chat_composer_history.rs",
              "sha256": "7428b308cd892befff02cf16e32b26ccb6ae5a76722666ffd19db9ada017331d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-tui-list-selection-view",
          "sectionId": "section-tui-bottom",
          "slug": "tui-list-selection-view",
          "name": "ListSelectionView builds search selection popup",
          "description": "`tui/src/bottom_pane/list_selection_view.rs` draws a generic selector: `SelectionViewParams` sets the title, tooltip and `SelectionItem` with actions, `apply_filter` supports search by `search_value`, preserves selection and limits list growth `MAX_POPUP_ROWS`. The key handler supports arrows, numbers (without search), text input and Esc, and `accept` calls the chain `SelectionAction` and closes the popup `dismiss_on_select`. Renderer uses `measure_rows_height`, `render_rows` and dim hints, snapshots check spacing and search string.",
          "tags": [
            "interface",
            "shortcuts",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/list_selection_view.rs",
              "sha256": "c08b2d0024a4d8d42494ce822bfcb53f45d512550de902aa3c113a469f920263"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/list_selection_view.rs",
              "sha256": "c6f3fe9c1d55e673bdb0308b4adf54bafcad894deaca7dcb2f6a57594354adcf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-tui-popup-consts",
          "sectionId": "section-tui-bottom",
          "slug": "tui-popup-consts",
          "name": "Popup constants align UX tooltips",
          "description": "`tui/src/bottom_pane/popup_consts.rs` stores general modal settings: `MAX_POPUP_ROWS = 8` limits the height of any lists, and `standard_popup_hint_line()` builds a typical prompt \"Enter  confirm / Esc  back\" via `key_hint`. A single source eliminates discrepancies between approval overlay, selection view and custom forms.",
          "tags": [
            "interface",
            "shortcuts",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/popup_consts.rs",
              "sha256": "e77974d30f1afafef236a6f15a0c4d195c5ac907fdddb7c47f2be3d4e75b2836"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/popup_consts.rs",
              "sha256": "e77974d30f1afafef236a6f15a0c4d195c5ac907fdddb7c47f2be3d4e75b2836"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.32
        },
        {
          "id": "aspect-clipboard-paste-support",
          "sectionId": "section-tui-bottom",
          "slug": "clipboard-paste-support",
          "name": "Support for inserting images and paths",
          "description": "`tui/src/clipboard_paste.rs` reads images via arboard, encodes PNG payloads, and normalizes pasted paths (`file://`, UNC, shell-quoted). Under WSL, `try_wsl_clipboard_fallback` invokes Windows PowerShell to dump the clipboard image to a temporary file and converts the Windows path into a WSL path; `normalize_pasted_path` also rewrites Windows paths when running under WSL. The same logic is mirrored in TUI2 for the new UI stack.",
          "tags": [
            "interface",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/clipboard_paste.rs",
              "sha256": "f96e8759a5261bd4cbee35f553da6a249132766400c2a0dccfae0afa50706adc"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/clipboard_paste.rs",
              "sha256": "f96e8759a5261bd4cbee35f553da6a249132766400c2a0dccfae0afa50706adc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-tui-file-search-manager",
          "sectionId": "section-tui-bottom",
          "slug": "tui-file-search-manager",
          "name": "TUI file search debounce manager",
          "description": "`tui/src/file_search.rs` holds `FileSearchManager`: `on_user_query` updates `latest_query`, cancels active search if input is not a prefix, starts debounce `FILE_SEARCH_DEBOUNCE` and waits for cleaning `active_search`. `spawn_file_search` launches `codex_file_search::run` in a separate thread with `NUM_FILE_SEARCH_THREADS` And `MAX_FILE_SEARCH_RESULTS`, transmits `AppEvent::FileSearchResult` and resets the state only if `cancellation_token` matches. This way TUI produces results even when typing quickly and does not interfere with competing searches.",
          "tags": [
            "interface",
            "search",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/file_search.rs",
              "sha256": "baa51c69159c65afff3834979be739cd59bf9bfa8743b8895f0a83d2a6f68314"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/file_search.rs",
              "sha256": "baa51c69159c65afff3834979be739cd59bf9bfa8743b8895f0a83d2a6f68314"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "sectionId": "section-tui-bottom",
          "id": "aspect-tui-key-hints",
          "slug": "tui-key-hints",
          "name": "KeyHint formats combinations",
          "description": "`codex-rs/tui/src/key_hint.rs` normalizes key hints: `KeyBinding` holds `KeyCode` plus `KeyModifiers` and filters press/repeat, and helpers `plain`/`ctrl`/`alt` simplify advertisements. Implementation `From<KeyBinding> for Span` lowers case, replaces arrows with symbols and adds dim style to make status tips consistent.",
          "tags": [
            "interface",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/key_hint.rs",
              "sha256": "0754b017e870ffc27f23c1bed0fd3196f9cee305555afb42917e9c38b62432ea"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/key_hint.rs",
              "sha256": "12bd6760ef8adaea7ab40725b5e10a52ef653c62d59481fecaeda2c842deac3d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.28
        },
        {
          "id": "aspect-tui-chat-composer",
          "sectionId": "section-tui-bottom",
          "slug": "tui-chat-composer",
          "name": "ChatComposer manages TUI input",
          "description": "`tui/src/bottom_pane/chat_composer.rs` collects all input field states: `ChatComposer` holds `TextArea`, command history, pop-ups (`CommandPopup`, `FileSearchPopup`), `PasteBurst` for quick insertion detection and a list of attached images. `desired_height` And `layout_areas` adjust the height to the footer and active popup, and control methods save placeholder, key hints and custom prompts from `$CODEX_HOME/prompts`. The composer sends events via `AppEventSender`, so TUI switches flexibly between input modes.",
          "tags": [
            "interface",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/chat_composer.rs",
              "sha256": "865018d9560a119b54d3f4b11419f3114c0055febd461e362bb2f15f414eecda"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/chat_composer.rs",
              "sha256": "ba52ac82cc6089631973b84daa6d212636437b2fdc6269f9d7812a1ae81ee733"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-tui-file-search-popup",
          "sectionId": "section-tui-bottom",
          "slug": "tui-file-search-popup",
          "name": "FileSearchPopup displays search results",
          "description": "`tui/src/bottom_pane/file_search_popup.rs` stores `display_query` And `pending_query`, flag `waiting` and results `FileMatch`. `set_query` decides whether previous matches can be left, `set_matches` synchronizes scrolling via `ScrollState`, A `render_ref` gives up to `MAX_POPUP_ROWS` lines through `render_rows`, highlighting the match indices. This provides a responsive file selection pop-up on top of the chat composer.",
          "tags": [
            "interface",
            "search",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/file_search_popup.rs",
              "sha256": "1d876a4cc3619c0cf8edb627273914ea6cfcedc7c4e6563f4e1beb7797daf241"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/file_search_popup.rs",
              "sha256": "f9122d4f709397153d22d95481952cf2657217b4e9eeb153d3a0cf46b3819d54"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-tui-paste-burst",
          "sectionId": "section-tui-bottom",
          "slug": "tui-paste-burst",
          "name": "PasteBurst catches fast pastes",
          "description": "`tui/src/bottom_pane/paste_burst.rs` detects insertion by timing: three quick symbols trigger `BeginBuffer`, the buffer stores text until `PASTE_ENTER_SUPPRESS_WINDOW`, `flush_if_due` returns `FlushResult::Paste` or a single character, and `newline_should_insert_instead_of_submit` blocks sending while insertion is in progress. This eliminates UI flickering and random submissions on large inserts.",
          "tags": [
            "interface",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/paste_burst.rs",
              "sha256": "482aa888f735c4e6cfa0b4bb0f7baf1bac091296170abb986c1a9c0f20c1b7db"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/paste_burst.rs",
              "sha256": "482aa888f735c4e6cfa0b4bb0f7baf1bac091296170abb986c1a9c0f20c1b7db"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-command-popup-fuzzy",
          "sectionId": "section-tui-bottom",
          "slug": "command-popup-fuzzy",
          "name": "Command popup ranks slash commands and prompts",
          "description": "`tui/src/bottom_pane/command_popup.rs` keeps building the palette `/` commands: `CommandPopup::new` filters prompts whose names match builtin, `on_composer_text_change` retrieves the token after the first `/`, `filtered` causes `fuzzy_match` for teams and `prompts:name`, sorting by count, and `rows_from_matches` generates lines with highlighting and descriptions. Tests cover priority `/init`, custom prompts and collisions.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/command_popup.rs",
              "sha256": "18577343d034bd8150f789bf0371db8bf4ef557f9819a5ca0ecbf295375af57e"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/command_popup.rs",
              "sha256": "0f12ffcdb8937aa96d08f248d505d32b50cc50629f89fe055441df722cc7b544"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-popup-row-renderer",
          "sectionId": "section-tui-bottom",
          "slug": "popup-row-renderer",
          "name": "General TUI popup list renderer",
          "description": "`tui/src/bottom_pane/selection_popup_common.rs` renders popup lists: `compute_desc_col` looks for the width of the description column, `build_full_line` highlights matches and truncates the name with ``, `render_rows` wraps text through `word_wrap_line` and transfers descriptions with alignment, `measure_rows_height` calculates how many lines are needed for the result. A common renderer guarantees the same layout for all TUI popups.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/selection_popup_common.rs",
              "sha256": "ffad0a5caf6f11152525bdc9c2a7e52700101add9d97c3ef78ffe9ae13d96484"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/selection_popup_common.rs",
              "sha256": "3fada8d8898ce07608d2ba5dade978858418ffd58f7106893359bfb8b627651e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-popup-scroll-state",
          "sectionId": "section-tui-bottom",
          "slug": "popup-scroll-state",
          "name": "ScrollState provides wrap navigation",
          "description": "`tui/src/bottom_pane/scroll_state.rs` implements list navigation: `move_up_wrap`/`move_down_wrap` move the cursor cyclically, `clamp_selection` And `ensure_visible` support `scroll_top`so that the selection remains in the window `visible_rows`. Unit tests cover wrap-around and scroll adjustments, so popups always show the selected element.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/scroll_state.rs",
              "sha256": "9e9c92f36f81d7f41102fca1f5c7203a70d11297093354c8a6a7eba50199ec5f"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/scroll_state.rs",
              "sha256": "9e9c92f36f81d7f41102fca1f5c7203a70d11297093354c8a6a7eba50199ec5f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-bottom-pane-textarea",
          "sectionId": "section-tui-bottom",
          "slug": "bottom-pane-textarea",
          "name": "TextArea handles graphemes and input height",
          "description": "`tui/src/bottom_pane/textarea.rs` -- chat editor taking into account graphemes: stores `wrap_cache`, calculates the cursor position via `cursor_pos_with_state`, inserts are used `unicode_segmentation` And `clamp_pos_to_nearest_boundary`, `desired_height` limits growth to 8 lines. With replace, the ranges are expanded to the boundaries of elements (inserts, highlights) so that the UI does not break inline widgets.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/textarea.rs",
              "sha256": "e8498f14154f5a6bc44a460b3ce24e2ad11aad0ad8e543e7c02ad2fdeca39c58"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/textarea.rs",
              "sha256": "e8498f14154f5a6bc44a460b3ce24e2ad11aad0ad8e543e7c02ad2fdeca39c58"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-custom-prompt-view",
          "sectionId": "section-tui-bottom",
          "slug": "custom-prompt-view",
          "name": "CustomPromptView collects custom instructions",
          "description": "`tui/src/bottom_pane/custom_prompt_view.rs` builds a modal \"Custom prompt\": wraps `TextArea`, reacts to `Enter`/`Esc`, saves scroll to `TextAreaState`, draws left `` gutter and placeholder, shows tooltip `standard_popup_hint_line`. Callback `on_submit` called only when the text is non-empty and the cursor is reflected in the popup's coordinates.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/custom_prompt_view.rs",
              "sha256": "7d7ad1ee21b56471d273b52e229e632f4da60460c541c6b4f1c31494f69e2cdd"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/custom_prompt_view.rs",
              "sha256": "7d7ad1ee21b56471d273b52e229e632f4da60460c541c6b4f1c31494f69e2cdd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-custom-prompt-args",
          "sectionId": "section-tui-bottom",
          "slug": "custom-prompt-args",
          "name": "Argument parser for ",
          "description": "`tui/src/bottom_pane/prompt_args.rs` parses `/prompts:name` commands: `parse_slash_name` And `parse_positional_args` use `Shlex`, `prompt_argument_names` pulls out `$VARS`, A `parse_prompt_inputs` validates `key=value`, issuing `PromptArgsError`. `expand_custom_prompt` checks for missing required arguments and replaces placeholders, preserving `$ARGUMENTS`. Errors are translated into clear messages for the user.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-bottom-pane"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/bottom_pane/prompt_args.rs",
              "sha256": "09e83edd35dee05158ca68e5d419ea943bfee061f00268aa33a8309123ca9305"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/bottom_pane/prompt_args.rs",
              "sha256": "09e83edd35dee05158ca68e5d419ea943bfee061f00268aa33a8309123ca9305"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.57
        }
      ]
    },
    {
      "id": "section-tui-rendering",
      "slug": "tui-rendering",
      "title": "TUI Rendering",
      "entries": [
        {
          "id": "aspect-tui-rendering-index",
          "sectionId": "section-tui-rendering",
          "slug": "tui-rendering-index",
          "name": "TUI rendering index",
          "description": "`tui/src/render/mod.rs` collects widget registers, and `tui/src/wrapping.rs` sets the transfer strategy: these files control the layout and width calculation for all subsequent components (markdown, status, diff). The node links the other aspects in the section and reminds you to update the base utilities when new renders are added.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/render/mod.rs",
              "sha256": "b98ebae6f22602d29dd9b9d7a4fe9990761cb2b7b2f097de166abf04dc7cec17"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/render/mod.rs",
              "sha256": "b98ebae6f22602d29dd9b9d7a4fe9990761cb2b7b2f097de166abf04dc7cec17"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/wrapping.rs",
              "sha256": "3844e3528fb0fd8b183b58d3fe6ae2fbc390f04464c0cf8508dadf3fb276cc0b"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/wrapping.rs",
              "sha256": "c6bb04dbe387041ac58ed8500044bc6e4e361f8d658a75071755906df7778823"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.43
        },
        {
          "id": "aspect-codex-overlay-pager",
          "sectionId": "section-tui-rendering",
          "slug": "overlay-pager-engine",
          "name": "Overlay pager engine",
          "description": "`tui/src/pager_overlay.rs` describes the Overlay engine: `Overlay::Transcript` builds `PagerView` on top `HistoryCell` and lighting, `Overlay::Static` accepts diff renders. `PagerView` is responsible for scrolling, key tips and percentage of progress, and `render_content` And `ensure_chunk_visible` control height and wrap for long chunks. This is the core of viewing diffs, logs and history, on which approval and diff screens are based.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/pager_overlay.rs",
              "sha256": "56c925eeb886769aa6ec8b806df278cda35cc8f1518ad484f83f3e1022e09211"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/pager_overlay.rs",
              "sha256": "126e60125f70b7ecacbb5910b05f366f47942b7b1721fd436fc1e3bdb9ebd0e1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-tui-line-utils",
          "sectionId": "section-tui-rendering",
          "slug": "tui-line-utils",
          "name": "LineUtils clones and prefixes Ratatui lines",
          "description": "`tui/src/render/line_utils.rs` provides common helpers for overlay and footer: `line_to_static` And `push_owned_lines` convert borrowed `Line<'a>` V `'static`so that widgets can cache text without the TUI lifecycle, `is_blank_line_spaces_only` distinguishes empty blocks (used in pager) and `prefix_lines` adds different prefixes to the first and subsequent lines. Thanks to this, diff/pager and footer can add indicators and padding without copy-pasting Ratatui patterns.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/render/line_utils.rs",
              "sha256": "d70b45bb430e5a10de6f4e5893fda4c86238bf7596762da6d6a09cfc5d5eccac"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/render/line_utils.rs",
              "sha256": "d70b45bb430e5a10de6f4e5893fda4c86238bf7596762da6d6a09cfc5d5eccac"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-tui-markdown-citations",
          "sectionId": "section-tui-rendering",
          "slug": "tui-markdown-citations",
          "name": "append_markdown rewrites quotes and saves code",
          "description": "`tui/src/markdown.rs` wraps `render_markdown_text_with_citations`: `MarkdownCitationContext` pulls `UriBasedFileOpener` And `cwd` from `Config`, `append_markdown_with_opener_and_cwd` passes the diagram into quotes and pushes the lines through `line_utils::push_owned_lines`. Tests confirm that links of the form `F:pathL1-L2` are rewritten outside the code blocks, but plain text and numbered lists retain the format. This ensures that agent responses with Markdown are rendered in the TUI with working links and without code corruption.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/markdown.rs",
              "sha256": "54439a267ce2cfecdb93caca753986ba967e84c3b1a19bbcf86c7e3ac51a51c4"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/markdown.rs",
              "sha256": "54439a267ce2cfecdb93caca753986ba967e84c3b1a19bbcf86c7e3ac51a51c4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-tui-citation-regex",
          "sectionId": "section-tui-rendering",
          "slug": "tui-citation-regex",
          "name": "Citations render as plain text",
          "description": "`tui/src/markdown.rs` and `tui2/src/markdown.rs` use `append_markdown` to render markdown lines, and tests assert that citation markers (file/line references like `F:/x.rsL1`) stay plain text. This keeps file citations visible in both TUI stacks without special parsing.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/markdown.rs",
              "sha256": "54439a267ce2cfecdb93caca753986ba967e84c3b1a19bbcf86c7e3ac51a51c4"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/markdown.rs",
              "sha256": "54439a267ce2cfecdb93caca753986ba967e84c3b1a19bbcf86c7e3ac51a51c4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.33
        },
        {
          "id": "aspect-tui-style-user-message",
          "sectionId": "section-tui-rendering",
          "slug": "tui-style-user-message",
          "name": "user_message_style selects the background according to the terminal palette",
          "description": "`tui/src/style.rs` calculates the background of user messages: `user_message_style_for` receives `(r,g,b)` from `terminal_palette::default_bg`, through `user_message_bg` And `best_color(blend(...))` selects a contrasting shade and returns `Style` with the right `bg`. This allows TUI to adapt the user's bubble to light and dark themes without manual settings.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/style.rs",
              "sha256": "782aac77aaff0d70a5f351c317f32dbdea70c09c4fb46364b3c49c83886a9fc2"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/style.rs",
              "sha256": "782aac77aaff0d70a5f351c317f32dbdea70c09c4fb46364b3c49c83886a9fc2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.34
        },
        {
          "id": "aspect-tui-text-formatting",
          "sectionId": "section-tui-rendering",
          "slug": "tui-text-formatting",
          "name": "format_and_truncate_tool_result carefully cuts JSON and paths",
          "description": "`tui/src/text_formatting.rs` responsible for compact output of tools: `format_and_truncate_tool_result` calculates the grapheme limit and, if JSON is valid, calls `format_json_compact`to add spaces for Ratatui wrap. `truncate_text` cuts into graphemes with the addition `...`, A `center_truncate_path` preserves the beginning and end of paths, shortening middle segments and handling root slashes correctly. These utilities are used by chat widgets and status to fit long replies and paths into limited panels.",
          "tags": [
            "interface",
            "truncate",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/text_formatting.rs",
              "sha256": "7147114ad94ff3022552cffed228e07d05d608411c6a39eb67aa2ac4a6399de8"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/text_formatting.rs",
              "sha256": "7147114ad94ff3022552cffed228e07d05d608411c6a39eb67aa2ac4a6399de8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "id": "aspect-tui-ui-consts",
          "sectionId": "section-tui-rendering",
          "slug": "tui-ui-consts",
          "name": "LIVE_PREFIX_COLS synchronizes the padding of live cells",
          "description": "`tui/src/ui_consts.rs` defines uniform layout constants: `LIVE_PREFIX_COLS` (2 columns) describes the width of the left \"\" prefix, and `FOOTER_INDENT_COLS`      . These are read by chat composer, status and history, so message borders and tooltips are aligned between pane and history regardless of the window width.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/ui_consts.rs",
              "sha256": "a082bd81d1a53219136755ad59bf287d13e8dc1a4b8cf7ec7926801e3aabb060"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/ui_consts.rs",
              "sha256": "a082bd81d1a53219136755ad59bf287d13e8dc1a4b8cf7ec7926801e3aabb060"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.3
        },
        {
          "id": "aspect-tui-exec-cell-rendering",
          "sectionId": "section-tui-rendering",
          "slug": "tui-exec-cell-rendering",
          "name": "ExecCell combines exploring and run output",
          "description": "`tui/src/exec_cell/model.rs` stores `ExecCell` with chain `ExecCall`: `with_added_call` adds readings only if the entire cell is in exploring mode, `complete_call` And `mark_failed` close unfinished calls, and `is_exploring_cell`/`is_active` determine the state. Render (`exec_cell/render.rs`) creates active calls through `new_active_exec_command`, formats stdout/stderr `output_lines()` with limits (`TOOL_CALL_MAX_LINES`, ellipsis) and fumbles `spinner()` between exploring and running. Implementation `HistoryCell` chooses `exploring_display_lines` - aggregating sequential `Read`/`List`/`Search` and making wrap through `RtOptions` - or `command_display_lines`that builds the \"Running/Ran\" hat, trims the sequels (`limit_lines_from_start`, `truncate_lines_middle`) and prefixes blocks `EXEC_DISPLAY_LAYOUT`. This ensures that exec cells in chat show status, commands, and trimmed output consistently.",
          "tags": [
            "execution",
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/exec_cell/model.rs",
              "sha256": "2eadfa1d8842771c3359bea4de0f9748185e0ecea3ff6d9700a107e6e1ab6116"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/exec_cell/render.rs",
              "sha256": "f3d15d224256de9d8c7a0e3efb5dee846f4bd2ce01211a51d17103a856c71853"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/exec_cell/mod.rs",
              "sha256": "14f28df0a84dc251eae32145abb3419cacd056bfa5d982eca4d4523030a23a77"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/exec_cell/model.rs",
              "sha256": "2eadfa1d8842771c3359bea4de0f9748185e0ecea3ff6d9700a107e6e1ab6116"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/exec_cell/render.rs",
              "sha256": "f3d15d224256de9d8c7a0e3efb5dee846f4bd2ce01211a51d17103a856c71853"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/exec_cell/mod.rs",
              "sha256": "14f28df0a84dc251eae32145abb3419cacd056bfa5d982eca4d4523030a23a77"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-tui-diff-renderer",
          "sectionId": "section-tui-rendering",
          "slug": "tui-diff-renderer",
          "name": "DiffSummary rendering in TUI",
          "description": "`tui/src/diff_render.rs` turns `FileChange` in readable blocks: `DiffSummary::new` stores changes along paths, `collect_rows` counts added/deleted lines and notices `move_path`, A `render_changes_block` builds a header with a summary and a list of files. `render_change` highlights `+`/`-` color, uses `prefix_lines` for indentation and shows renaming. It is this module that forms a diff widget in TUI with a brief summary and detailed hunks.",
          "tags": [
            "diff",
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/diff_render.rs",
              "sha256": "722e0daa14ec29d6d95b233f5fc71b6c3b74e6f2da5c7be2140b5ebc6568cac2"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/diff_render.rs",
              "sha256": "7f925e4ce3e0d14ec59f2ac16111f6761bdb0c2a4026d621e2b4b32190d20ef0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-tui-bash-highlight",
          "sectionId": "section-tui-rendering",
          "slug": "tui-bash-highlighter",
          "name": "Tree-sitter bash highlighting for exec",
          "description": "`tui/src/render/highlight.rs` uses tree-sitter to highlight commands: `highlight_bash_to_lines` lazily iterates `Highlighter`, collects `Line`/`Span` and applies styles `BashHighlight` (statements and lines are made dim). The configuration is loaded once per `OnceLock`, and errors return the original text without highlighting. This makes exec output and tooltips in the TUI readable and resistant to multi-line scripts.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/render/highlight.rs",
              "sha256": "075567c95fd2c435cdf70663c5e3111115bd49edb198d7c52068da2fe80abcb1"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/render/highlight.rs",
              "sha256": "075567c95fd2c435cdf70663c5e3111115bd49edb198d7c52068da2fe80abcb1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-tui-exec-command-display",
          "sectionId": "section-tui-rendering",
          "slug": "tui-exec-command-display",
          "name": "Exec command display helpers",
          "description": "`tui/src/exec_command.rs` provides command mapping utilities: `escape_command` securely concatenates argv via `shlex::try_join`, `strip_bash_lc_and_escape` removes the shell `bash -lc` for compact output, and `relativize_to_home` replaces absolute paths with `~/...` if they are under `$HOME`. These functions are used in TUI status lines to make commands shorter and clearer to the user.",
          "tags": [
            "exec",
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/exec_command.rs",
              "sha256": "82280738ad8bc84be1bdcfd5eace9807cc58c0c29d8bbc8c2484ffb183cfc02d"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/exec_command.rs",
              "sha256": "82280738ad8bc84be1bdcfd5eace9807cc58c0c29d8bbc8c2484ffb183cfc02d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-tui-markdown-renderer",
          "sectionId": "section-tui-rendering",
          "slug": "tui-markdown-renderer",
          "name": "TUI markdown renderer and wrapping",
          "description": "`tui/src/markdown_render.rs` builds `Writer`which handles pulldown-cmark events: supports stacks `IndentContext`, numbered/bulleted lists, blockquotes and inline styles, and at a given width uses `word_wrap_line` while maintaining indentations. `render_markdown_text_with_citations` rewrites links to files via `rewrite_file_citations_with_scheme`, does not cut off code blocks and tests guarantee the correct wrapping of lists, quotes and nested structures.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/markdown_render.rs",
              "sha256": "7ac784decdef86cb40249de6cd3ebed575cf455ac9c966aab7c79c508bbcd36d"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/markdown_render.rs",
              "sha256": "a6438e1c8e159674a945265b8c3ff02a19398c7d06e765cd1a2976d2a86e77e9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.43
        },
        {
          "id": "aspect-ansi-escape-normalization",
          "sectionId": "section-tui-rendering",
          "slug": "ansi-escape-normalization",
          "name": "ANSI helpers normalize transcript output",
          "description": "`codex-rs/ansi-escape/src/lib.rs` expands tabs through `expand_tabs`, replacing them with four spaces before rendering the TUI, and `ansi_escape_line` warns if the line contains multiple lines and returns only the first one. `ansi_escape` uses `ansi_to_tui::IntoText` and panics at `NomError`/`Utf8Error`, so Codex catches unexpected ANSI output before it hits the UI.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/ansi-escape/src/lib.rs",
              "sha256": "722214c42c4c680324e5d8c49622c8ac0c53e46c786940bed703c7220cb2d8ee"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.44
        },
        {
          "sectionId": "section-tui-rendering",
          "id": "aspect-tui-shimmer-status",
          "slug": "tui-shimmer-status",
          "name": "Shimmer status lighting TUI",
          "description": "`codex-rs/tui/src/shimmer.rs` animates status headers: `PROCESS_START` fixes the first `Instant`, `shimmer_spans` moves the cosine spot across the characters, mixing the palette through `blend` with the support of truecolor and using `color_for_level` (dim/bold) as a fallback. Widgets are ready-made animated `Span` without its own timer logic.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/shimmer.rs",
              "sha256": "0f5aa63917a400b72008f13db42c9862d1fdcbd4ab1206dc18930c6983180909"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/shimmer.rs",
              "sha256": "0f5aa63917a400b72008f13db42c9862d1fdcbd4ab1206dc18930c6983180909"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.31
        },
        {
          "sectionId": "section-tui-rendering",
          "id": "aspect-tui-status-indicator",
          "slug": "tui-status-indicator",
          "name": "TUI status tracks progress",
          "description": "`codex-rs/tui/src/status_indicator_widget.rs` draws a live status bar: `StatusIndicatorWidget` stores a spinning indicator, header, message queue and timer, requesting a redraw via `FrameRequester::schedule_frame_in`. `interrupt()` sends `AppEvent::CodexOp(Op::Interrupt)`, pause methods control `elapsed_running`, A `render_ref` wraps messages up to three lines, adds hints and uses `shimmer_spans` to highlight the title.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/status_indicator_widget.rs",
              "sha256": "12241276eefabb98707a46793d77a550014685f20b53df4ef8d815a40c154b21"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status_indicator_widget.rs",
              "sha256": "9ee690ceec6d73c904e89fdfc21927c7441046ca2762927bfd89673d0e520dbd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "sectionId": "section-tui-rendering",
          "id": "aspect-tui-ascii-animation",
          "slug": "tui-ascii-animation",
          "name": "ASCII animations synchronized by FrameRequester",
          "description": "`codex-rs/tui/src/ascii_animation.rs` serves ASCII animations: `AsciiAnimation` stores sets of frames from `frames::ALL_VARIANTS`, synchronizes updates with `FRAME_TICK_DEFAULT` and through `schedule_next_frame` requests a redraw according to the uptime of the process. `current_frame()` calculates the index in milliseconds, and `pick_random_variant` changes the plot without repetition, so pop-ups and onboarding share one engine.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/ascii_animation.rs",
              "sha256": "8fd63bea45dec7c5c0bd09bfd7ce9cfe9f586a70a0a81c1bc40346bece16488a"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/frames.rs",
              "sha256": "80b7216038985cab95d0d3983cfca55cb83eec4aa12cd70d9b8579846583ed1b"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/ascii_animation.rs",
              "sha256": "8fd63bea45dec7c5c0bd09bfd7ce9cfe9f586a70a0a81c1bc40346bece16488a"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/frames.rs",
              "sha256": "80b7216038985cab95d0d3983cfca55cb83eec4aa12cd70d9b8579846583ed1b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.29
        },
        {
          "sectionId": "section-tui-rendering",
          "id": "aspect-terminal-palette-probing",
          "slug": "terminal-palette-probing",
          "name": "TUI calculates terminal palette",
          "description": "`codex-rs/tui/src/terminal_palette.rs` probes the terminal palette: `default_colors()` caches OSC responses `]10`/`]11` through `OnceLock<Mutex<Cache>>`, `requery_default_colors()` updates them upon request, and `best_color()` selects the closest color - either truecolor via `Color::Rgb`, or index xterm-256 by `perceptual_distance`, falling back to basic ANSI with a limited palette.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/terminal_palette.rs",
              "sha256": "bcb8f524812e4c54f4c019ebd2162c2c37111949cc8080f1a09a0db138977be8"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/terminal_palette.rs",
              "sha256": "540fbc962af7f2581141ee595bb7325d56120e10721351daded617107b8fd566"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.37
        },
        {
          "sectionId": "section-tui-rendering",
          "id": "aspect-custom-terminal-flush",
          "slug": "custom-terminal-flush",
          "name": "Custom Terminal optimizes diff flush",
          "description": "`codex-rs/tui/src/custom_terminal.rs` forks Ratatui `Terminal`: when switched on `use_custom_flush` `flush()` compares buffers via `diff_buffers`, groups commands and updates `last_known_cursor_pos`to prevent the TUI from flashing. The wrapper leaves the frame API (e.g. `Frame::set_cursor_position`), can switch to regular backend-diff and stores viewport/alias dev shell settings.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/custom_terminal.rs",
              "sha256": "88b84fb71e3322befdb30a99bb2687b4848ae5318dc6897352b078e090bcd01c"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/custom_terminal.rs",
              "sha256": "88b84fb71e3322befdb30a99bb2687b4848ae5318dc6897352b078e090bcd01c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-tui-rate-limit-status",
          "sectionId": "section-tui-rendering",
          "slug": "tui-rate-limit-status",
          "name": "StatusRateLimit displays model limits",
          "description": "`tui/src/status/rate_limits.rs` transforms `RateLimitSnapshot` in UI: `RateLimitWindowDisplay::from_window` calculates the reset moment and the window signature, `compose_rate_limit_data` collects the lines \"5h limit\"/\"Weekly limit\", and `render_status_limit_progress_bar` draws progress from 20 segments. The widget shows usage percentage and reset time directly in the TUI status bar.",
          "tags": [
            "interface",
            "observability",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/status/rate_limits.rs",
              "sha256": "868b76db22cd580923744c2fc9880e8d0bd06cfddef7a242b9dd6afd7b2f4fe7"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/rate_limits.rs",
              "sha256": "868b76db22cd580923744c2fc9880e8d0bd06cfddef7a242b9dd6afd7b2f4fe7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-ansi-escape-line-render",
          "sectionId": "section-tui-rendering",
          "slug": "ansi-escape-line-render",
          "name": "ANSI escape single-line renderer",
          "description": "`codex-rs/ansi-escape/src/lib.rs` first normalizes tabs through `expand_tabs`, then `ansi_escape` converts ANSI sequences to `ratatui::Text`, A `ansi_escape_line` guarantees a single line, logging a warning on multiple lines and cloning only the first one `Line`. This keeps the TUI/CLI broadcast in a predictable format.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/ansi-escape/src/lib.rs",
              "sha256": "722214c42c4c680324e5d8c49622c8ac0c53e46c786940bed703c7220cb2d8ee"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.5
        },
        {
          "id": "aspect-tui-status-card",
          "sectionId": "section-tui-rendering",
          "slug": "tui-status-card",
          "name": "StatusHistoryCell displays the /status card",
          "description": "`tui/src/status/card.rs` collects `CompositeHistoryCell` for the team `/status`using `status/helpers.rs` (model, account, AGENTS.md, directory) and `status/format.rs` (FieldFormatter aligns captions and continuations). `status/rate_limits.rs` adds limit lines, and `status/account.rs` And `status/mod.rs` export the final `StatusHistoryCell`. The card guarantees consistent sandbox/approval signatures, tokens and limits regardless of configuration.",
          "tags": [
            "interface",
            "status",
            "tui",
            "tui-rendering",
            "observability"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/status/card.rs",
              "sha256": "67fea63e640bcdb06cab859dd54cc01984ccb13f4c56930ff519083ce54fa2f2"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/status/account.rs",
              "sha256": "a807966a13130080ab102720605d3773764ac0561c13e15da6b15a1546a3e6ab"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/status/helpers.rs",
              "sha256": "bf86d871579d6df7748d80b69daac40b7c3c6a4ae66c794624d6b1ea543c828c"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/status/format.rs",
              "sha256": "c7f0a48a9d1d621480eebc4bd0e71c56aa345fbb4a935358b388d7050224574e"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/status/mod.rs",
              "sha256": "086be02b235ca1f4ada057c0cc12d4f096f02ee4824c9f6f57f6280fb29fbc49"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/status/rate_limits.rs",
              "sha256": "868b76db22cd580923744c2fc9880e8d0bd06cfddef7a242b9dd6afd7b2f4fe7"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/card.rs",
              "sha256": "971df30770604fffa74dd3f1170a9c160aa94055c1155ae793d3d2c05e5f4b04"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/account.rs",
              "sha256": "a807966a13130080ab102720605d3773764ac0561c13e15da6b15a1546a3e6ab"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/helpers.rs",
              "sha256": "bf86d871579d6df7748d80b69daac40b7c3c6a4ae66c794624d6b1ea543c828c"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/format.rs",
              "sha256": "c7f0a48a9d1d621480eebc4bd0e71c56aa345fbb4a935358b388d7050224574e"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/mod.rs",
              "sha256": "086be02b235ca1f4ada057c0cc12d4f096f02ee4824c9f6f57f6280fb29fbc49"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/rate_limits.rs",
              "sha256": "868b76db22cd580923744c2fc9880e8d0bd06cfddef7a242b9dd6afd7b2f4fe7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-tui-renderable-combinators",
          "sectionId": "section-tui-rendering",
          "slug": "tui-renderable-combinators",
          "name": "Renderable combines columns and padding",
          "description": "`tui/src/render/renderable.rs` specifies the trait layer `Renderable`: Provides adapters for `&str`, `Paragraph`, `Option` And `Arc`, A `ColumnRenderable`/`RowRenderable`/`InsetRenderable` assemble compositions with automatic height calculations. This allows bottom pane and story widgets to describe layouts declaratively.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/render/renderable.rs",
              "sha256": "b8e2cacc7a0aa27b3db3de784387212c1ebe567a8a917904b7600e50aaad8d67"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/render/renderable.rs",
              "sha256": "b8e2cacc7a0aa27b3db3de784387212c1ebe567a8a917904b7600e50aaad8d67"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-tui-render-insets",
          "sectionId": "section-tui-rendering",
          "slug": "tui-render-insets",
          "name": "Insets and RectExt provide a single inset() for layout",
          "description": "`tui/src/render/mod.rs` declares layout utilities: `Insets::tlbr` And `Insets::vh` describe the indentations, and `RectExt::inset` reduces `Rect`, keeping `saturating_sub` for width/height. These helpers use bottom pane, popup and history to align content and not duplicate padding calculations.",
          "tags": [
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/render/mod.rs",
              "sha256": "b98ebae6f22602d29dd9b9d7a4fe9990761cb2b7b2f097de166abf04dc7cec17"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/render/mod.rs",
              "sha256": "b98ebae6f22602d29dd9b9d7a4fe9990761cb2b7b2f097de166abf04dc7cec17"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.32
        },
        {
          "id": "aspect-tui-insert-history-lines",
          "sectionId": "section-tui-rendering",
          "slug": "tui-insert-history-lines",
          "name": "insert_history_lines prints old messages in scrollback",
          "description": "`tui/src/insert_history.rs` directly operates crossterm backend to insert log on top of inline viewport: before output `word_wrap_lines_borrowed` re-wraps `Line`, `SetScrollRegion` And `ResetScrollRegion` limit the scrolling area, and if there is not enough space, the area scrolls through `Reverse Index`. The function merges line styles with spans and updates `viewport_area`/`last_known_cursor_pos`so that TUI stays in sync with the real scrollback. This allows you to display the message history above the current window without jerking the cursor.",
          "tags": [
            "history",
            "interface",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/insert_history.rs",
              "sha256": "d4dfe934b6fa61b76cf9eee0cd0e21e809fc1772b78a9977b8b82e1c59fe0e53"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/insert_history.rs",
              "sha256": "6525644a90aec5656994956682d55f22b9f3e90bb346721e62bc842b0b354882"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-live-wrap-row-builder",
          "sectionId": "section-tui-rendering",
          "slug": "live-wrap-row-builder",
          "name": "RowBuilder streams text",
          "description": "`tui/src/live_wrap.rs` implements a stream wrapper for strings: `RowBuilder::push_fragment` buffers text until `\n`, `wrap_current_line` cuts graphemes to width, `drain_commit_ready` returns frozen rows, preserving the \"fragmentation does not affect the output\" invariant. The tests cover emoji/CJK, changing widths and handling long tokens.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/live_wrap.rs",
              "sha256": "00e1b82e52e17ad0f31058bf9f48595552ebd185db68d410e0a2e066975894ce"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/live_wrap.rs",
              "sha256": "00e1b82e52e17ad0f31058bf9f48595552ebd185db68d410e0a2e066975894ce"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "id": "aspect-tui-wrapping-options",
          "sectionId": "section-tui-rendering",
          "slug": "tui-wrapping-options",
          "name": "RtOptions and wrap_ranges define wraps",
          "description": "`tui/src/wrapping.rs` expands `textwrap`: `RtOptions` sets the width, padding and algorithm `OptimalFit` with an infinite penalty for overflow, `wrap_ranges`/`wrap_ranges_trim` return the ranges of the original string, and `word_wrap_line` collects `Line` preserving styles and indentations. These utilities are used by all TUI components for consistent layout.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/wrapping.rs",
              "sha256": "3844e3528fb0fd8b183b58d3fe6ae2fbc390f04464c0cf8508dadf3fb276cc0b"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/wrapping.rs",
              "sha256": "c6bb04dbe387041ac58ed8500044bc6e4e361f8d658a75071755906df7778823"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-history-cell-architecture",
          "sectionId": "section-tui-rendering",
          "slug": "history-cell-architecture",
          "name": "HistoryCell describes the elements of history",
          "description": "`tui/src/history_cell.rs` describes `HistoryCell` -- basic interface of story elements: `display_lines` And `desired_height` take into account `Wrap`, `UserHistoryCell` applies user style and prefix ``, `ReasoningSummaryCell` wraps markdown in gray italics and supports transcript-only mode. So ChatWidget can mix messages, reasoning and tool results in one list.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/history_cell.rs",
              "sha256": "453fba557f96505c1f5733b4c9bf3c2dc30e4ecfeea4231e1d2940c83d66bce5"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/history_cell.rs",
              "sha256": "fa4bb4596f2b038deef1d818baa39a2e6f3e0604a32568d9896b4549945010d3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.59
        },
        {
          "id": "aspect-tui-color-utils",
          "sectionId": "section-tui-rendering",
          "slug": "tui-color-utils",
          "name": "Color utilities estimate brightness and distance",
          "description": "`tui/src/color.rs` provides color utilities: `is_light` calculates the brightness by YIQ coefficients, `blend` mixes fg/bg with alpha, `perceptual_distance` converts colors to Lab (sRGB->XYZ->Lab) and returns CIE76 distance. These functions feed the palette and readability selection in the terminal.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/color.rs",
              "sha256": "0d702ecfbebf9fc83fb41b812c6fdf91705b748b15f3d31af1fcef13a2f61b76"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/color.rs",
              "sha256": "0d702ecfbebf9fc83fb41b812c6fdf91705b748b15f3d31af1fcef13a2f61b76"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-markdown-stream-collector",
          "sectionId": "section-tui-rendering",
          "slug": "markdown-stream-collector",
          "name": "MarkdownStreamCollector commits only completed strings",
          "description": "`tui/src/markdown_stream.rs` performs newline-gated markdown rendering: `push_delta` accumulates SSE chunks, `commit_complete_lines` parses the buffer to the last `\n` and returns only new lines, `finalize_and_drain` adds temporary `\n` and resets the state. Logs and tests confirm that quote blocks and lists are colored correctly and unterminated lines are not prematurely output.",
          "tags": [
            "interface",
            "rust",
            "tui",
            "tui-rendering"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/markdown_stream.rs",
              "sha256": "f808dbda5af5f3acba77530d8c35e6227f8bdb2dacff72242384ab139de29c35"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/markdown_stream.rs",
              "sha256": "9eb5a838174495e7b5aee1609946224ae6acbaff1871d2c9fddc0cdd432b4cf8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        }
      ]
    },
    {
      "id": "section-tui-cloud-tasks",
      "slug": "tui-cloud-tasks",
      "title": "TUI Cloud Tasks",
      "entries": [
        {
          "id": "aspect-cloud-tasks-app",
          "sectionId": "section-tui-cloud-tasks",
          "slug": "cloud-tasks-app",
          "name": "Status of Codex Cloud Tasks in TUI",
          "description": "`codex-rs/cloud-tasks/src/app.rs` expands `App`: in addition to tasks and selection, the structure stores `spinner_start`, flags `refresh_inflight`/`apply_inflight`, `list_generation` And `HashSet in_flight`to ignore outdated part loads. `EnvModalState`, `ApplyModalState` And `BestOfModalState` hold the cursor and selected modal values, `env_last_loaded`/`env_error` allow you to show the freshness of the environments, and `new_task` along with `best_of_n` synchronizes the task creation form with modal switches.",
          "tags": [
            "interface",
            "tui",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/app.rs",
              "sha256": "638c02f45c40c9ad7e6232f084406c90ee67a20d37fe8a3f84c8b4bccae8bedc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-cloud-tasks-scroll-diff",
          "sectionId": "section-tui-cloud-tasks",
          "slug": "cloud-tasks-scroll-diff",
          "name": "ScrollableDiff with Smart Line Wrap",
          "description": "`cloud_tasks::ScrollableDiff` caches wrapped strings and indexes of the original ones, recalculating them only when the width changes. Tabs are replaced by four spaces, hyphens are preferred to spaces and punctuation, and `scroll_by` And `percent_scrolled` guarantee accurate diff navigation within TUI.",
          "tags": [
            "interface",
            "tui",
            "diff",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/scrollable_diff.rs",
              "sha256": "87d7238e23bb3605f71b9a473e78725278fba17999620af1a1a5fd021d06f5ba"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.55
        },
        {
          "id": "aspect-cloud-tasks-env-autodetect",
          "sectionId": "section-tui-cloud-tasks",
          "slug": "cloud-tasks-env-autodetect",
          "name": "Automatic environment selection Codex Cloud",
          "description": "`cloud_tasks::env_detect::autodetect_environment_id` collects git origins via `git config` (fallback `git remote -v`), goes to `/environments/by-repo`, logs the responses and selects pinned or the environment with the maximum `task_count`, otherwise the first element. Both paths supported `/api/codex` And `/wham`, so TUI quickly sets up a suitable environment.",
          "tags": [
            "interface",
            "tui",
            "git",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/env_detect.rs",
              "sha256": "45bc38ab82f5a4907fa18adcf33f0b006d704fc32deb1a21a970be35916864a5"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.62
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-ui-layout",
          "slug": "cloud-tasks-ui-layout",
          "name": "Cloud Tasks UI manages overlays",
          "description": "`codex-rs/cloud-tasks/src/ui.rs` controls the Codex Cloud layout: `draw` divides the frame into a list and a footer, switching `draw_new_task_page` And `draw_list` depending on `App::new_task`. It highlights the selected environment, dims the list when modals are active, and renders overlays (diff/env/best-of/apply) through a generic rounded frame, with the footer printing key combinations and scroll progress.",
          "tags": [
            "interface",
            "tui",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/ui.rs",
              "sha256": "20d85b0a7a9e845d40f05488576a1811d9f8eaae112e621b6b23e6432a29542b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-new-task",
          "slug": "cloud-tasks-new-task",
          "name": "Cloud new task composer",
          "description": "`codex-rs/cloud-tasks/src/new_task.rs` creates `ComposerInput` with hints /Shift+/Ctrl+O/Ctrl+N and stores `env_id` along with `best_of_n`. During the cycle `run_main` page uses `composer.flush_paste_burst_if_due()` And `recommended_flush_delay()` for smooth insertion of multiline text, and the flag `submitting` blocks repeated sendings until `AppEvent::NewTaskSubmitted`, preserving the UX form of TUI itself.",
          "tags": [
            "interface",
            "tui",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/new_task.rs",
              "sha256": "d3baa38dbfc91a9d86057746a1ae2934634a763c200782192849a321cf1a2b43"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.35
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-cli-entry",
          "slug": "cloud-tasks-cli-entry",
          "name": "codex cloud CLI parser",
          "description": "`codex-rs/cloud-tasks/src/cli.rs` holds clap parser for `codex cloud`: `Cli` delegates `CliConfigOverrides` to `run_main` loaded the config with the same -c overrides, maintaining a single mechanism with the rest of the subcommands.",
          "tags": [
            "cli",
            "tui",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/cli.rs",
              "sha256": "f7efde05ffbac80d0877d02ef74fcd5d6b85311840e66ada9ed0158f799ea9b6"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.3
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-run-main",
          "slug": "cloud-tasks-run-main",
          "name": "Cloud tasks TUI run loop",
          "description": "`codex-rs/cloud-tasks/src/lib.rs` configures the terminal for TUI: enables raw mode, alternate screen, bracketed paste and `KeyboardEnhancementFlags` (to differentiate Shift+Enter) before creating `Terminal`. Frames are coalesced through a couple of channels `frame_tx`/`redraw_tx`: spinner and paste-burst schedule redraw at 600ms intervals until `refresh_inflight`, `details_inflight` or apply flags are active. Main `tokio::select!` listens at the same time `EventStream`, `AppEvent` and redraw, resets `spinner_start` and calls `render_if_needed`, making the task list remain responsive without a fixed timer.",
          "tags": [
            "interface",
            "tui",
            "cli",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/lib.rs",
              "sha256": "cb87fdb42b6fa09a012c5f67960b24311df9dcc1df25b0b8e73d5226eca545ca"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-util-headers",
          "slug": "cloud-tasks-util-headers",
          "name": "Cloud tasks util headers",
          "description": "`codex-rs/cloud-tasks/src/util.rs` collects auxiliary utilities: `set_user_agent_suffix` notes clients, `append_error_log` writes timestamped lines to `error.log`, `normalize_base_url` leads ChatGPT URL to `/backend-api`, A `build_chatgpt_headers` pulls up the bearer token and `ChatGPT-Account-Id` through `AuthManager`. These functions allow TUI to synchronize headers with the backend without duplicating logic.",
          "tags": [
            "interface",
            "tui",
            "auth",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/util.rs",
              "sha256": "905bde9ac96c44883053e081d02461a06d847c7716b6628405293e342dfffd6a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-mock-backend",
          "slug": "cloud-tasks-mock-backend",
          "name": "Cloud tasks mock backend",
          "description": "`codex-rs/cloud-tasks-client/src/mock.rs` implements `CloudBackend` for offline modes: `list_tasks` generates deterministic lists by env, `mock_diff_for` And `count_from_unified` collect unified diff and metrics, and `apply_task`/`apply_task_preflight` return success without side effects. The mock serves TUI and tests when there is no real backend.",
          "tags": [
            "interface",
            "tui",
            "cli",
            "cloud-tasks"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks-client/src/mock.rs",
              "sha256": "9d1359e3e5ae0ab2ee983aa7e554b37976a17e6909e8ddf5e4bb6c54454b06b0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-diff-overlay",
          "slug": "cloud-tasks-diff-overlay",
          "name": "DiffOverlay controls retrieval options",
          "description": "`projects/Codex/codex-rs/cloud-tasks/src/app.rs` manages `DiffOverlay`: constructor accepts `attempt_total_hint`, creates `ScrollableDiff` and collection `AttemptView`. Methods `step_attempt` cyclically switch attempts, `apply_selection_to_fields` synchronizes `diff_lines`/`text_lines`/`prompt`, A `current_can_apply` checks availability `diff_raw`. This gives TUI full visibility into multiple attempts and control whether a patch can be applied.",
          "tags": [
            "cloud-tasks",
            "tui",
            "diff"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/app.rs",
              "sha256": "638c02f45c40c9ad7e6232f084406c90ee67a20d37fe8a3f84c8b4bccae8bedc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-app-events",
          "slug": "cloud-tasks-app-events",
          "name": "AppEvent synchronizes background operations",
          "description": "`projects/Codex/codex-rs/cloud-tasks/src/app.rs` lists `AppEvent` -- messages from background tasks: `TasksLoaded`, `EnvironmentsLoaded`, `EnvironmentAutodetected`, `DetailsDiffLoaded`/`DetailsMessagesLoaded`, `AttemptsLoaded`, `ApplyPreflightFinished`, `ApplyFinished` And `NewTaskSubmitted`. Separating events allows threads to update state while the main UI spins spinners, without racing for `App`.",
          "tags": [
            "cloud-tasks",
            "tui",
            "concurrency"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/app.rs",
              "sha256": "638c02f45c40c9ad7e6232f084406c90ee67a20d37fe8a3f84c8b4bccae8bedc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-apply-modal",
          "slug": "cloud-tasks-apply-modal",
          "name": "ApplyModalState stores the application total",
          "description": "`projects/Codex/codex-rs/cloud-tasks/src/app.rs` describes `ApplyModalState`: she keeps `task_id`, `title`, levels `ApplyResultLevel` (`Success`/`Partial`/`Error`), lists `skipped_paths`/`conflict_paths` And `diff_override`. The UI uses these fields to show the user the pre-flight and final result of the application, signaling conflicts and detours.",
          "tags": [
            "cloud-tasks",
            "tui",
            "apply-patch"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/app.rs",
              "sha256": "638c02f45c40c9ad7e6232f084406c90ee67a20d37fe8a3f84c8b4bccae8bedc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.51
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-new-task-layout",
          "slug": "cloud-tasks-new-task-layout",
          "name": "draw_new_task_page configures the composer",
          "description": "`projects/Codex/codex-rs/cloud-tasks/src/ui.rs` function `draw_new_task_page` draws a task creation modal: dynamically collects the title with the selected env and `best_of_n`, calculates the composer height from the terminal size and anchors the cursor using `Layout` And `Clear`. Thanks to this, Cloud Tasks get a reusable editor with tooltips and hotkeys.",
          "tags": [
            "cloud-tasks",
            "tui",
            "interface"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/ui.rs",
              "sha256": "20d85b0a7a9e845d40f05488576a1811d9f8eaae112e621b6b23e6432a29542b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.49
        },
        {
          "sectionId": "section-tui-cloud-tasks",
          "id": "aspect-cloud-tasks-composer-input",
          "slug": "cloud-tasks-composer-input",
          "name": "ComposerInput exports the chat composer",
          "description": "`projects/Codex/codex-rs/tui/src/public_widgets/composer_input.rs` exports `ComposerInput` - thin adapter above `ChatComposer`: `input` gives `ComposerAction::Submitted`, `handle_paste` And `flush_paste_burst_if_due` reuse paste heuristics, `set_hint_items` changes the clues, and `recommended_flush_delay` exports timing. This allows cloud-tasks and other crates to connect to a mature multiline composer without duplicating code.",
          "tags": [
            "cloud-tasks",
            "tui",
            "interface"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/public_widgets/composer_input.rs",
              "sha256": "de319342127bfe13f3fa24a2a21da4ebd972661e991c60e19970e3bc9a50ac48"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/public_widgets/mod.rs",
              "sha256": "2be24202285455331b0d6fb6fb8fc701f43a6936c0284f7f88a0dcaec270aac6"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/public_widgets/composer_input.rs",
              "sha256": "de319342127bfe13f3fa24a2a21da4ebd972661e991c60e19970e3bc9a50ac48"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/public_widgets/mod.rs",
              "sha256": "2be24202285455331b0d6fb6fb8fc701f43a6936c0284f7f88a0dcaec270aac6"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-cloud-tasks-best-of-modal",
          "sectionId": "section-tui-cloud-tasks",
          "slug": "cloud-tasks-best-of-modal",
          "name": "Best-of modal and shortcut",
          "description": "`app.best_of_modal` stores `BestOfModalState::selected`, and the handler in `cloud_tasks::lib` opens the modal with Ctrl+N: numbers `1``4` and the arrows change the selected number of attempts, Enter moves it to `app.best_of_n` And `NewTaskPage`, Esc closes the window without changes. `ui::draw_best_of_modal` marks the active option and shows a hint while `frame_tx.send` schedules a redraw, so composer instantly reflects the change `best-of`.",
          "tags": [
            "cloud-tasks",
            "tui",
            "input",
            "rust",
            "shortcuts"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/lib.rs",
              "sha256": "cb87fdb42b6fa09a012c5f67960b24311df9dcc1df25b0b8e73d5226eca545ca"
            },
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/ui.rs",
              "sha256": "20d85b0a7a9e845d40f05488576a1811d9f8eaae112e621b6b23e6432a29542b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-cloud-tasks-env-modal",
          "sectionId": "section-tui-cloud-tasks",
          "slug": "cloud-tasks-env-modal",
          "name": "Environment picker modal",
          "description": "The Ctrl+O handler creates an EnvModalState, closes active overlays, and optionally runs list_environments in a separate task, including the app.env_loading flag. While the list is loading, ui::draw_env_modal shows the spinner, then filters environments by substring (label/id/repo hints) and allows you to select All Environments or a specific id with restarting background task updates.",
          "tags": [
            "cloud-tasks",
            "tui",
            "env",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/lib.rs",
              "sha256": "cb87fdb42b6fa09a012c5f67960b24311df9dcc1df25b0b8e73d5226eca545ca"
            },
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/ui.rs",
              "sha256": "20d85b0a7a9e845d40f05488576a1811d9f8eaae112e621b6b23e6432a29542b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-cloud-tasks-global-shortcuts",
          "sectionId": "section-tui-cloud-tasks",
          "slug": "cloud-tasks-global-shortcuts",
          "name": "Global shortcut handling",
          "description": "IN `cloud_tasks::lib` the global key handler only takes into account `KeyEventKind::Press`: Ctrl+C closes modals, Ctrl+O/N switches env- and best-of windows, Esc resets diff/apply overlay, and `needs_redraw` exhibited for later `render_if_needed`. After each branch he sends `frame_tx.send(Instant::now())`so that the UI instantly matches the new state and does not lose spinners.",
          "tags": [
            "cloud-tasks",
            "tui",
            "shortcuts",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/lib.rs",
              "sha256": "cb87fdb42b6fa09a012c5f67960b24311df9dcc1df25b0b8e73d5226eca545ca"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-cloud-tasks-footer",
          "sectionId": "section-tui-cloud-tasks",
          "slug": "cloud-tasks-footer",
          "name": "Dynamic footer and spinner",
          "description": "`codex-rs/cloud-tasks/src/ui.rs::draw_footer` builds two columns: the left one collects hints depending on the state (diff overlay, new task, apply), the right one shows the spinner and `app.status`. During active background operations, the footer remains `app.spinner_start` and asks for the next frame, and the status line is truncated to 2000 characters so that long messages from `append_error_log` did not clutter the interface.",
          "tags": [
            "cloud-tasks",
            "tui",
            "status",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/ui.rs",
              "sha256": "20d85b0a7a9e845d40f05488576a1811d9f8eaae112e621b6b23e6432a29542b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        }
      ]
    },
    {
      "id": "section-tui-onboarding",
      "slug": "tui-onboarding",
      "title": "TUI onboarding",
      "entries": [
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-screen",
          "slug": "tui-onboarding-screen",
          "name": "Onboarding screen step orchestration",
          "description": "`tui/src/onboarding/onboarding_screen.rs` sequences Windows/Welcome/Auth/Trust steps, keeps completed steps visible while only the first `InProgress` step handles input, and records `windows_install_selected` when exit shortcuts are used. `tui2/src/onboarding/onboarding_screen.rs` builds Welcome/Auth/Trust based on `show_login_screen`/`show_trust_screen`, defaults trust to `Trust` for git repos, routes events to Welcome plus the active step, and sets `should_exit` when auth is canceled. Both share a `FrameRequester` to schedule redraws and return an `OnboardingResult` with trust decisions.",
          "tags": [
            "interface",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/mod.rs",
              "sha256": "a757d0137edc4e44f31f18e21ca553d2219b0dce98e937efcbf8a255345eafe0"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/mod.rs",
              "sha256": "a757d0137edc4e44f31f18e21ca553d2219b0dce98e937efcbf8a255345eafe0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-windows-onboarding",
          "slug": "tui-windows-onboarding",
          "name": "Windows sandbox enable prompt",
          "description": "`tui/src/chatwidget.rs` and `tui2/src/chatwidget.rs` drive the Windows sandbox enable flow when selecting Agent mode: `open_windows_sandbox_enable_prompt` presents legacy or elevated setup paths, and actions dispatch `BeginWindowsSandboxElevatedSetup` or `EnableWindowsSandboxForAgentMode`. This replaces the old WSL onboarding step with an in-app Windows sandbox prompt.",
          "tags": [
            "interface",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget.rs",
              "sha256": "69d514ad4e18fadf3c4f62d2948f45b99eabff1d484d97dc4dd8d266ce6aa654"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget.rs",
              "sha256": "5fc938c9a489eeb37c2b8f1d5d811d1fdf0da04776fd5d9c6d3b49b5a14e446f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-trust-directory",
          "slug": "tui-trust-directory",
          "name": "Trust directory onboarding choice",
          "description": "`tui/src/onboarding/trust_directory.rs` and `tui2/src/onboarding/trust_directory.rs` build the trust selection with numbered options and `key_hint::plain` hints, adapting wording for git repos vs bare folders. Key handlers ignore `KeyEventKind::Release`, accept arrows/`hj`/`y`/`n`/`1`/`2`, and resolve the root via `resolve_root_git_project_for_trust` before writing trust: TUI1 uses `set_project_trusted`, while TUI2 calls `set_project_trust_level` with `TrustLevel::Trusted/Untrusted` and reports errors in red.",
          "tags": [
            "interface",
            "tui",
            "security",
            "onboarding",
            "shortcuts"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/trust_directory.rs",
              "sha256": "fea35a05739715becc645c8716fbb356fccb8a1c5d912d5e95006829a9dce141"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/trust_directory.rs",
              "sha256": "fea35a05739715becc645c8716fbb356fccb8a1c5d912d5e95006829a9dce141"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-auth",
          "slug": "tui-onboarding-auth",
          "name": "Auth mode onboarding widget",
          "description": "`tui/src/onboarding/auth.rs` and `tui2/src/onboarding/auth.rs` keep `AuthModeWidget` with a shared `SignInState` state machine (PickMode, ContinueInBrowser, DeviceCode, Success, ApiKeyEntry/Configured), routing arrows/`hj`, `1`/`2`, Enter, Esc and paste events to switch modes or cancel. Headless environments use `headless_chatgpt_login.rs` to request device codes, fall back to `run_login_server` when needed, and schedule frames as the state changes. Successful API key entry runs `login_with_api_key`, calls `auth_manager.reload()`, and transitions to the configured state.",
          "tags": [
            "interface",
            "tui",
            "auth",
            "onboarding",
            "shortcuts"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/auth.rs",
              "sha256": "4ca7c02024a0facea3f7629cb0d0b0d42b63daacb2afd568122bbaab31eda711"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/auth/headless_chatgpt_login.rs",
              "sha256": "92cc354084426bd7cebd5a4d19983b80fdfa8a5807ef8d00a8550266051c1cf9"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/auth.rs",
              "sha256": "bc04a90c44f90a08c1074a45f0ec11a86a802a651988800b24e2918bf0c04a55"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/auth/headless_chatgpt_login.rs",
              "sha256": "92cc354084426bd7cebd5a4d19983b80fdfa8a5807ef8d00a8550266051c1cf9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-welcome-widget",
          "slug": "tui-welcome-widget",
          "name": "Welcome animation onboarding",
          "description": "`codex-rs/tui/src/onboarding/welcome.rs` and `tui2/src/onboarding/welcome.rs` clear the rectangle via `Clear`, call `AsciiAnimation::schedule_next_frame()` and show the frame only if the viewport is large enough, otherwise skip the art so as not to cut off the ASCII. `handle_key_event` reacts to `KeyEventKind::Press` Ctrl+. and through `pick_random_variant` switches the background. Unit tests check that the first frame is actually drawn and that Ctrl+. changes `current_frame`, insuring the greeting animation from regressions.",
          "tags": [
            "interface",
            "tui",
            "onboarding",
            "shortcuts"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/welcome.rs",
              "sha256": "f254f513c8d1df9e88fd54682a8d1dd1faa546644ae3c9c45d87b02ccde33ed1"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/welcome.rs",
              "sha256": "f254f513c8d1df9e88fd54682a8d1dd1faa546644ae3c9c45d87b02ccde33ed1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.32
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-exit-shortcuts",
          "slug": "tui-onboarding-exit-shortcuts",
          "name": "Hotkeys for exiting onboarding",
          "description": "`OnboardingScreen::handle_key_event` reacts only to events `KeyEventKind::Press`, so holding Ctrl+C/Ctrl+D doesn't repeat the exit. After installation `is_done` (or commits `windows_install_selected`) method calls `FrameRequester::schedule_frame`so that the render loop sees the update without waiting for the next key. This allows you to instantly close onboarding and correctly remove raw-mode even with a quick series of hotkeys.",
          "tags": [
            "interface",
            "tui",
            "onboarding",
            "shortcuts"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-success-cleanup",
          "slug": "tui-onboarding-success-cleanup",
          "name": "Clearing the terminal after ChatGPT login",
          "description": "`run_onboarding_app` keeps an eye on `SignInState::ChatGptSuccessMessage`: calls once `crossterm::execute!(SetAttribute::Reset, )` and does `tui.terminal.clear()` before redrawing. This removes dangling underlines/colors and returns a blank screen after a successful browser login.",
          "tags": [
            "interface",
            "tui",
            "onboarding",
            "auth"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.38
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-paste-routing",
          "slug": "tui-onboarding-paste-routing",
          "name": "Routing an insert to an active step",
          "description": "`OnboardingScreen::handle_paste` ignores empty lines and takes `current_steps_mut().last()`to pass the buffer only to the current widget (auth/trust). After the call `handle_paste` inside the step the method resets guard and calls `request_frame.schedule_frame()`, so that new characters are immediately rendered even while previous steps remain displayed at the top.",
          "tags": [
            "interface",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-layout-measure",
          "slug": "tui-onboarding-layout-measure",
          "name": "Dynamic marking of onboarding steps",
          "description": "`render_ref` For `OnboardingScreen` first clears the rectangle via `Clear`, then renders each active step into a temporary `Buffer::empty` and measures height `used_rows`, which looks for the last non-blank line and adds two lines of indentation. The resulting rectangle is cleared again and redrawn by the real widget, so no step overwrites its neighbor and the text is not cut off when the terminal shrinks.",
          "tags": [
            "interface",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-result",
          "slug": "tui-onboarding-result",
          "name": "Returning onboarding solutions to the CLI",
          "description": "`run_onboarding_app` twists `tui.event_stream()` Bye `OnboardingScreen::is_done()` will not return true: each Draw event clears the terminal once after `SignInState::ChatGptSuccessMessage`to remove the underscores, and calls again `frame.render_widget_ref`. Returns after the cycle `OnboardingResult` With `directory_trust_decision()` and flag `windows_install_selected`, which is set only if the Windows step requested WSL installation. The CLI gets a serialized solution without unnecessary side effects.",
          "tags": [
            "interface",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-auto-complete",
          "slug": "tui-onboarding-auto-complete",
          "name": "Auto-complete onboarding based on step status",
          "description": "`OnboardingScreen::is_done` returns true if `self.is_done` already marked with a hotkey or if no step is in `StepState::InProgress`. This allows the loop to end immediately after the last modal has disappeared (`StepState::Hidden`), without an additional event from the user.",
          "tags": [
            "interface",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.33
        },
        {
          "sectionId": "section-tui-onboarding",
          "id": "aspect-tui-onboarding-welcome-events",
          "slug": "tui-onboarding-welcome-events",
          "name": "Always active WelcomeWidget events",
          "description": "`OnboardingScreen::handle_key_event` searches first `Step::Welcome` and passes the event to it before processing the active step, so Ctrl+. continues to switch animation even when the focus is on entering an API key or trust modal. This ensures that the greeting remains interactive in parallel with the rest of the onboarding.",
          "tags": [
            "interface",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/onboarding_screen.rs",
              "sha256": "a65da4686cd2c58b6fe4e65f4adcbf0e6dfd0b48413c67673e097f3c975ab410"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/onboarding_screen.rs",
              "sha256": "19fa3bb9453e31597d6b062b815cfe6eaab80b86b5f4638ea899986e0ab0be40"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.32
        },
        {
          "id": "aspect-tui-auth-mode-render",
          "sectionId": "section-tui-onboarding",
          "slug": "tui-auth-mode-render",
          "name": "Auth mode pick screen layout",
          "description": "`render_pick_mode` V `codex-rs/tui/src/onboarding/auth.rs` builds a list of login options: `create_mode_item` displays numbers `1`/`2`, highlights the selected `AuthMode` color `Color::Cyan` and makes the description dim. The \"Press Enter to continue\" hint is added as a separate line, and errors are displayed in red. This layout immediately shows the user which branch (ChatGPT or API key) is active and that it can be switched with keys.",
          "tags": [
            "interface",
            "tui",
            "onboarding",
            "shortcuts"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/auth.rs",
              "sha256": "4ca7c02024a0facea3f7629cb0d0b0d42b63daacb2afd568122bbaab31eda711"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/auth.rs",
              "sha256": "bc04a90c44f90a08c1074a45f0ec11a86a802a651988800b24e2918bf0c04a55"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.34
        },
        {
          "id": "aspect-tui-browser-login-prompt",
          "sectionId": "section-tui-onboarding",
          "slug": "tui-browser-login-prompt",
          "name": "Browser login prompt animation",
          "description": "`render_continue_in_browser` uses `shimmer_spans` And `request_frame.schedule_frame_in(Duration::from_millis(100))`to animate the line \"Finish signing in via your browser\". If `SignInState::ChatGptContinueInBrowser` carries `auth_url`, the widget prints a clickable link (cyan+underline) and ends the block with the hint \"Press Esc to cancel\". This gives explicit UX for browser confirmation and allows you to instantly cancel login with a hotkey.",
          "tags": [
            "interface",
            "tui",
            "onboarding",
            "auth",
            "shortcuts"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/auth.rs",
              "sha256": "4ca7c02024a0facea3f7629cb0d0b0d42b63daacb2afd568122bbaab31eda711"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/auth.rs",
              "sha256": "bc04a90c44f90a08c1074a45f0ec11a86a802a651988800b24e2918bf0c04a55"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        },
        {
          "id": "aspect-tui-api-key-entry-panel",
          "sectionId": "section-tui-onboarding",
          "slug": "tui-api-key-entry-panel",
          "name": "API key entry panel layout",
          "description": "`render_api_key_entry` divides the area into three zones through `Layout::vertical`, draws a frame `Block::default().title(\"API key\")` with a rounded border and shows either the placeholder or the entered key. When found `prepopulated_from_env` the warning \"Detected OPENAI_API_KEY...\" is added, and the footer prints \"Press Enter to save\" and errors in red. This way the user immediately sees that the key is stored locally and how to exit back via Esc.",
          "tags": [
            "interface",
            "tui",
            "onboarding",
            "auth",
            "input"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/auth.rs",
              "sha256": "4ca7c02024a0facea3f7629cb0d0b0d42b63daacb2afd568122bbaab31eda711"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/auth.rs",
              "sha256": "bc04a90c44f90a08c1074a45f0ec11a86a802a651988800b24e2918bf0c04a55"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-tui-chatgpt-success-copy",
          "sectionId": "section-tui-onboarding",
          "slug": "tui-chatgpt-success-copy",
          "name": "ChatGPT success message copy",
          "description": "`render_chatgpt_success_message` displays a green check mark, a list of recommendations and two OSC-8 hyperlinks to Codex documentation and training data settings (`https://github.com/openai/codex`, `https://chatgpt.com/#settings`). The final line \"Press Enter to continue\" is highlighted `Color::Cyan`, emphasizing the completion of the browser login. The content explains the autonomy of Codex and reminds you to check the commands after a successful login.",
          "tags": [
            "interface",
            "tui",
            "onboarding",
            "auth",
            "status"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/onboarding/auth.rs",
              "sha256": "4ca7c02024a0facea3f7629cb0d0b0d42b63daacb2afd568122bbaab31eda711"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/onboarding/auth.rs",
              "sha256": "bc04a90c44f90a08c1074a45f0ec11a86a802a651988800b24e2918bf0c04a55"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.33
        }
      ]
    },
    {
      "id": "section-configuration",
      "slug": "configuration",
      "title": "Configuration",
      "entries": [
        {
          "id": "aspect-approval-presets",
          "sectionId": "section-configuration",
          "slug": "approval-presets",
          "name": "Built-in approval presets",
          "description": "`common/src/approval_presets.rs` describes `ApprovalPreset` and function `builtin_approval_presets()`, which returns a fixed set of bundles AskForApprovalSandboxPolicy (`read-only`, `auto`, `full-access`). This data is shared between the CLI, TUI and MCP so that the UI shows the same labels and texts, and switching a preset is guaranteed to change both the approval policy and the sandbox mode without duplicating the configuration.",
          "tags": [
            "configuration",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/approval_presets.rs",
              "sha256": "d9fffb6ada9c290f8957761a3e86f4b13bc97d98a06e1bab80d159dfc2fb4b7c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-child-spawn",
          "sectionId": "section-configuration",
          "slug": "child-process-spawn",
          "name": "Child process spawn safeguards",
          "description": "`core/src/spawn.rs` forms `Command` for shell tool exec: `spawn_child_async` cleans the environment, applies env from `ShellEnvironmentPolicy`, puts down `CODEX_SANDBOX` And `CODEX_SANDBOX_NETWORK_DISABLED` with limited access and on Linux registers prctl(PR_SET_PDEATHSIG) in `pre_exec` for cascaded SIGTERM. This ensures that child processes inherit the sandbox and do not hang after Codex dies.",
          "tags": [
            "configuration",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/spawn.rs",
              "sha256": "f49b0b9f7a3fde72e878e1719989bac830f3cc77a2ff58578e37b2e5a52e2c24"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.73
        },
        {
          "id": "aspect-codex-cli-config-overrides",
          "sectionId": "section-configuration",
          "slug": "cli-config-overrides",
          "name": "CLI config overrides parsing",
          "description": "`common/src/config_override.rs` implements `CliConfigOverrides` For `-c key=value`: `parse_overrides` splits on the first '=', tries to parse the value as TOML (which allows JSON-compatible structures), otherwise saves the string. `apply_on_value` creates intermediate tables and replaces the target path in `toml::Value`, A `parse_toml_value` wraps literals in sentry `_x_`. Thanks to this, all Codex CLI tools can safely patch `config.toml`, including nested fields and arrays, without manual TOML parsing.",
          "tags": [
            "cli",
            "config-core",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/config_override.rs",
              "sha256": "f72a0aca706efd0d2608a46439968e4e11830b903ed736e9bac46ddd2cea4754"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-config-layers",
          "sectionId": "section-configuration",
          "slug": "config-layers",
          "name": "Config layering and sandbox policy",
          "description": "Critical: `codex_core::Config` loaded via `load_with_cli_overrides`: code pulls up layers `config.toml`, managed settings and CLI overrides, then holds key launch parameters (model, approval_policy, sandbox_policy, notify, history, MCP servers, etc.) in the structure. This determines how the agent reads AGENTS.md, applies sandbox modes and where to look for state (`~/.codex`).",
          "tags": [
            "config-core",
            "configuration",
            "rust",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.8
        },
        {
          "id": "aspect-config-schema-generator",
          "sectionId": "section-configuration",
          "slug": "config-schema-generator",
          "name": "Config.toml JSON Schema fixture",
          "description": "`core/src/config/schema.rs` builds a Draft 7 JSON Schema for `ConfigToml`, overriding `[features]` to allow only known + legacy keys and `[mcp_servers]` to use raw MCP server shapes; `config_schema_matches_fixture` asserts the generated schema matches `core/config.schema.json`. `core/src/bin/config_schema.rs` exposes `codex-write-config-schema` to write the fixture, and `projects/Codex/justfile` wires `just write-config-schema` for regeneration.",
          "tags": [
            "config-core",
            "configuration",
            "schema",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/schema.rs",
              "sha256": "839c5ca9f8e68e6b01d83bc8cb5e75b267963fe42edb71960425fd4d22203bfc"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/bin/config_schema.rs",
              "sha256": "bf18fc4bde5d1270fdf28f2b9bfc907aefa15c31eeac87c5523d8461036e7078"
            },
            {
              "path": "projects/Codex/codex-rs/core/config.schema.json",
              "sha256": "fdde25773029bbefc7aaafa339951e94619ecb8c4684cc2fcff5929d4a7dc126"
            },
            {
              "path": "projects/Codex/justfile",
              "sha256": "c2eb3f32dfa13799b71a9d1196c9524d8a3479d355448ee32bee637da6776484"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-config-requirements-constraints",
          "sectionId": "section-configuration",
          "slug": "config-requirements-constraints",
          "name": "Config requirements constraints",
          "description": "`core/src/config_loader/config_requirements.rs` defines `ConfigRequirementsToml` (allowed approval policies, sandbox modes, MCP server identities) and tags every value with a `RequirementSource` (MDM, system requirements, legacy). `ConfigRequirementsWithSources::merge_unset_fields` merges the first non-empty source and `TryFrom<...>` builds `Constrained` approval/sandbox policies, enforcing `read-only` as the default sandbox and returning `ConstraintError` that names the originating requirement source when a value is invalid.",
          "tags": [
            "config-core",
            "configuration",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config_loader/config_requirements.rs",
              "sha256": "9dda84f078a5e624456b5cd1b6416fe694c6f3c34964d278a08c17c1041cf570"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-skills-pipeline",
          "sectionId": "section-configuration",
          "slug": "skills-pipeline",
          "name": "Skill discovery and injection pipeline",
          "description": "`core/src/skills/system.rs` installs embedded system skills into `$CODEX_HOME/skills/.system` using an include_dir fingerprint marker. `skills/loader.rs` scans repo/user/system/admin roots derived from the config layer stack, enforces SKILL.md YAML frontmatter and length limits, and optionally reads `SKILL.toml` interface metadata (icons under `assets/`, `#RRGGBB` brand colors). `skills/manager.rs` caches `SkillLoadOutcome` per cwd and reloads via config-layer state, while `skills/injection.rs` turns explicit `UserInput::Skill` items into `ResponseItem` instructions by reading the SKILL.md content and collecting warnings on failures. `skills/render.rs` builds the `## Skills` markdown block (list plus usage rules) used when rendering instruction payloads.",
          "tags": [
            "config-core",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/skills/system.rs",
              "sha256": "dccf59f42b9861d85ddb447945763f91113a7b68900a694e4e2c0e69fd33c1da"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/skills/loader.rs",
              "sha256": "b54c22b81cd074a0fa607c52f4ae7bde62888d2bebea7da2263a96ad650b41b4"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/skills/manager.rs",
              "sha256": "2a94266e69866a467cc1813372aff6fa2df864e5ea590ad223506edbd48055c5"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/skills/injection.rs",
              "sha256": "864791579a5e4ee8875498a076c4c13d96f7c4da00c48faf1d4fd9f48e440f9d"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/skills/model.rs",
              "sha256": "8a3ca505f7b76559d0128136895865d68a9c2e2535147c668e01c31afab0e3cf"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/skills/render.rs",
              "sha256": "3685c37f256a822496ce5c678e09f621590e5657766085c00fbac10f3fb6ced3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-config-managed-layers",
          "sectionId": "section-configuration",
          "slug": "config-managed-layers",
          "name": "Config loader managed layers",
          "description": "`core/src/config_loader/mod.rs` loads `config.toml`, systemic `managed_config` and (on macOS) profile preferences: `load_config_layers_internal` searches for files in `~/.codex` And `/etc/codex`, parses TOML and combines them via `merge_toml_values`, A `apply_managed_layers` Applies overlays on top of a custom layer. Branch `macos.rs` can decode a base64 profile via CFPreferences and returns a table, so corporate policies and MDM settings automatically override local values.",
          "tags": [
            "config-core",
            "configuration",
            "macos",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config_loader/mod.rs",
              "sha256": "ecfd89054b2ead66a77c59f4eb835bd3246993b6e82740f8b0e5161ec66d4148"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/config_loader/macos.rs",
              "sha256": "d35ee7d42e014e1455379415d86ef30aa36f84a23b628bcadd7e82f502964e4d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-config-persist-overrides",
          "sectionId": "section-configuration",
          "slug": "config-persist-overrides",
          "name": "Config.toml edit persistence",
          "description": "In `core/src/config/edit.rs`, `ConfigEdit` enumerates discrete config mutations (model, notices, MCP servers, trust levels, dotted paths). `apply_blocking` loads and merges the TOML (respecting the active profile), applies edits, and writes through `NamedTempFile::persist` to avoid partial writes.",
          "tags": [
            "config-core",
            "configuration",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/edit.rs",
              "sha256": "47d17d3181fa15cc68a7f7db79f5d7a8aba690340bddcb23c8758a5c4c2e74d2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-config-profile-bridge",
          "sectionId": "section-configuration",
          "slug": "config-profile-bridge",
          "name": "ConfigProfile exported to app-server",
          "description": "In `core/src/config/profile.rs`, `ConfigProfile` collects profile-scoped options (model/provider, approval and sandbox modes, reasoning, verbosity, experimental files, tool toggles, features). The `From<ConfigProfile> for codex_app_server_protocol::Profile` implementation exports the subset used by JSON-RPC so profiles appear in the UI without extra mapping.",
          "tags": [
            "config-core",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/profile.rs",
              "sha256": "f352ffaca6a629b1883508ad4778f79b3f29ad3a79c3c03d646d7b5ae1b268e3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-web-search-mode-config",
          "sectionId": "section-configuration",
          "slug": "web-search-mode-config",
          "name": "Web search mode configuration",
          "description": "`protocol/src/config_types.rs` defines `WebSearchMode` (`disabled`/`cached`/`live`) for config and profile settings. `core/src/config/mod.rs::resolve_web_search_mode` selects explicit profile or config values and otherwise falls back to feature flags (`WebSearchCached`/`WebSearchRequest`). `core/src/tools/spec.rs` then registers the `web_search` tool with `external_web_access=false` for cached mode, `true` for live mode, and omits the tool when disabled.",
          "tags": [
            "configuration",
            "search",
            "tools",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/config_types.rs",
              "sha256": "009307eb3f9c8f32d51a03e497f5e53edf50f35f4de249168168fee2bc741f16"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-config-summary",
          "sectionId": "section-configuration",
          "slug": "config-summary",
          "name": "Effective config summary entries",
          "description": "`common/src/config_summary.rs` generates key/value pairs for configuration output: `create_config_summary_entries` collects cwd, model, provider, approval and sandbox, and for Responses API adds reasoning effort and summaries. This is used by the TUI/CLI to show the actual settings after applying overrides - one place forms a human-readable slice without duplicating logic.",
          "tags": [
            "configuration",
            "interface",
            "observability",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/config_summary.rs",
              "sha256": "22033cb0ae1f544a20876889c41d3d72ca0846a0968e29d57f4b2652d5ecafee"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "id": "aspect-configuration-index",
          "sectionId": "section-configuration",
          "slug": "configuration-index",
          "name": "Configuration core index",
          "description": "Critical: `common/src/config_override.rs` and `config_summary.rs` parse `-c key=value` overrides into layered entries and a `ConfigSummary`, while `core/src/config/mod.rs::Config::load_with_cli_overrides` merges managed config, `config.toml`, profiles, and CLI parameters into the active `Config`. These files are the entry point for any configuration change.",
          "tags": [
            "config-core",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/config_override.rs",
              "sha256": "f72a0aca706efd0d2608a46439968e4e11830b903ed736e9bac46ddd2cea4754"
            },
            {
              "path": "projects/Codex/codex-rs/common/src/config_summary.rs",
              "sha256": "22033cb0ae1f544a20876889c41d3d72ca0846a0968e29d57f4b2652d5ecafee"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.78
        },
        {
          "id": "aspect-custom-prompts-discovery",
          "sectionId": "section-configuration",
          "slug": "custom-prompts-discovery",
          "name": "Search for custom items",
          "description": "`codex_core::custom_prompts` scans `$CODEX_HOME/prompts` on `.md`, skipping directories and excluded names, reads the YAML-like frontmatter (`description`, `argument-hint`) and sorts the list. Returnable `CustomPrompt` objects connect custom slash commands without interfering with the code.",
          "tags": [
            "configuration",
            "interface"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/custom_prompts.rs",
              "sha256": "5221634d8f62cb821f1b497688f736c42852c1521c48ed1f13a3f3698aca46c3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-environment-context",
          "sectionId": "section-configuration",
          "slug": "environment-context",
          "name": "Environment context serialization",
          "description": "`core/src/environment_context.rs` generates an XML fragment of the environment for the model: `EnvironmentContext::new` raises cwd, AskForApproval and SandboxPolicy from `TurnContext`, calculates the network mode and list of writable roots, and `serialize_to_xml` wraps them in `<environment_context/>` block. Converter to `ResponseItem` adds a message to the history so that the model sees the current restrictions.",
          "tags": [
            "config-core",
            "configuration",
            "rust",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/environment_context.rs",
              "sha256": "02bd56155bf595abc417ef56cf830388a323c9d0faf40d76ec93ef893dd96f78"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.67
        },
        {
          "id": "aspect-json-to-toml",
          "sectionId": "section-configuration",
          "slug": "json-to-toml",
          "name": "json_to_toml normalizes config values",
          "description": "`codex-rs/utils/json-to-toml/src/lib.rs` converts `serde_json::Value` V `toml::Value`: integers and floats fall into the corresponding TOML types, arrays and objects are traversed recursively, and `Null` becomes the empty string, which is compatible with Codex TOML parameters. The test suite covers numbers, nested objects, and mixed arrays, ensuring stability when generating `config.toml`.",
          "tags": [
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/json-to-toml/src/lib.rs",
              "sha256": "43c9e3ace92ad8bcdd7439f79b8e5b604d73f257d332bef0c46398a710f62eb4"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.37
        },
        {
          "id": "aspect-codex-mcp-config",
          "sectionId": "section-configuration",
          "slug": "mcp-config",
          "name": "MCP server registry and validation",
          "description": "`core/src/config/mod.rs::load_global_mcp_servers` loads MCP servers from merged TOML, rejects inline `bearer_token`, and normalizes into `McpServerConfig`. `core/src/config/edit.rs` serializes `ReplaceMcpServers` with explicit tables, sorted env/args, and transport-specific fields, keeping MCP server persistence consistent and safe.",
          "tags": [
            "configuration",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/config/edit.rs",
              "sha256": "47d17d3181fa15cc68a7f7db79f5d7a8aba690340bddcb23c8758a5c4c2e74d2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "id": "aspect-model-family-flags",
          "sectionId": "section-configuration",
          "slug": "model-family-flags",
          "name": "Model capability flags",
          "description": "`core/src/models_manager/model_info.rs` sets per-model capabilities: base instructions, apply_patch tool type, shell tool type, verbosity support, and `supports_parallel_tool_calls`/`supports_reasoning_summaries` flags. These switches determine which tools and prompts the agent enables for each model slug.",
          "tags": [
            "configuration",
            "architecture",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/models_manager/model_info.rs",
              "sha256": "8d0b7accce27ece0ed6e7af0e153f374f297bea06935d911f1760cc16da03b1f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-model-presets",
          "sectionId": "section-configuration",
          "slug": "model-presets",
          "name": "Model presets with reasoning effort",
          "description": "`core/src/models_manager/model_presets.rs` defines the static `PRESETS` list of `ModelPreset` entries with ids, descriptions, default reasoning effort presets, and upgrade metadata. `builtin_model_presets` clones this list for config/UI pickers so the CLI, TUI, and Responses routing share one catalog.",
          "tags": [
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/models_manager/model_presets.rs",
              "sha256": "f5c498cf34976dad46740c2da76c31a2a9866f68a45d8a9dfff2181b7ff887f3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.51
        },
        {
          "id": "aspect-codex-openai-model-info",
          "sectionId": "section-configuration",
          "slug": "openai-model-metadata",
          "name": "OpenAI model metadata lookup",
          "description": "`core/src/models_manager/model_info.rs` builds `ModelInfo` for known slugs via `find_model_info_for_slug` and applies `Config` overrides (context window, auto-compaction, truncation policy, reasoning summaries). This drives model limits and instruction templates when no remote metadata is available.",
          "tags": [
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/models_manager/model_info.rs",
              "sha256": "8d0b7accce27ece0ed6e7af0e153f374f297bea06935d911f1760cc16da03b1f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-otel-config-overview",
          "sectionId": "section-configuration",
          "slug": "otel-config-overview",
          "name": "OTEL configuration summary builder",
          "description": "`otel/src/config.rs` describes `OtelSettings` and exporters (gRPC/HTTP/none), and `core/src/otel_init.rs` mapit `Config::telemetry` to these structures by adding environment variables and standard headers. This links CLI settings with observability: one point forms the OTEL endpoint, protocol and service metadata before launching the provider.",
          "tags": [
            "configuration",
            "observability",
            "telemetry",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/config.rs",
              "sha256": "cf18609b5b32b47d828abf1feed57ad7569cd11bc9207e59d55b4a77bb9a5640"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/otel_init.rs",
              "sha256": "0f4d133dff12dc2cc68104e897effb0f50f4cdf059a765b1c1f6ba3e7a730170"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-otel-export",
          "sectionId": "section-configuration",
          "slug": "otel-export",
          "name": "OpenTelemetry exporter wiring",
          "description": "`core/src/otel_init.rs` built by the OTEL provider: `build_provider` reads `config.otel`, mapit `OtelExporterKind` to HTTP/GRPC `codex_otel::OtelExporter`, transmits headers and endpoint, and `codex_export_filter` only lets through `codex_otel` targets. This links the configuration to telemetry and sets the service name via `default_client::originator()`.",
          "tags": [
            "configuration",
            "observability",
            "rust",
            "telemetry"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/otel_init.rs",
              "sha256": "0f4d133dff12dc2cc68104e897effb0f50f4cdf059a765b1c1f6ba3e7a730170"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-project-docs",
          "sectionId": "section-configuration",
          "slug": "project-docs",
          "name": "Project doc aggregation",
          "description": "`codex_core::project_doc` controls the search for AGENTS.md: `discover_project_doc_paths` goes up to git root, collects the chain `AGENTS.md` and fallback files and trims the total size to `project_doc_max_bytes`. `get_user_instructions` stitches found documents with user instructions through a separator `--- project-doc ---`. This determines which hints actually make it into Codex queries under different working directories.",
          "tags": [
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/project_doc.rs",
              "sha256": "81b91576004f5634c6a07d5554fe4d01ca1e7a4303ccd2e6016998d35faabf57"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "sectionId": "section-configuration",
          "id": "aspect-protocol-config-types",
          "slug": "protocol-config-types",
          "name": "Protocol config enums",
          "description": "`codex-rs/protocol/src/config_types.rs` contains serializable Responses API configuration enums: `ReasoningEffort`, `ReasoningSummary` And `Verbosity` map to lowercase values, and `SandboxMode` stores `read-only`/`workspace-write`/`danger-full-access`. Everything derive `TS` And `EnumIter`, which synchronizes Rust and TypeScript schemas for the UI and SDK.",
          "tags": [
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/config_types.rs",
              "sha256": "009307eb3f9c8f32d51a03e497f5e53edf50f35f4de249168168fee2bc741f16"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-protocol-custom-prompts",
          "sectionId": "section-configuration",
          "slug": "protocol-custom-prompts",
          "name": "Custom prompt protocol types",
          "description": "`codex_protocol::custom_prompts` describes `PROMPTS_CMD_PREFIX` and structure `CustomPrompt` with description, hint on arguments and path. Derive `TS` synchronizes the JSON format with VS Code and MCP, so slash commands and dialogs see the same description fields.",
          "tags": [
            "configuration",
            "schema",
            "interface"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/custom_prompts.rs",
              "sha256": "1d7d8fac486af0dbc0e54352be189dcaa223fcb276623dcd859fb1f6b6cd6f0e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-sandbox-summary",
          "sectionId": "section-configuration",
          "slug": "sandbox-summary",
          "name": "Sandbox policy text summary",
          "description": "`common/src/sandbox_summary.rs` turns `SandboxPolicy` to a readable string: for workspace-write lists writable roots (`workdir`, `/tmp`, `$TMPDIR`, additional directories) and marks enabled network access. Other modes (`read-only`, `danger-full-access`) are returned as short slugs. These lines go to TUI and events to quickly understand the real boundaries of the sandbox without manually parsing the structure.",
          "tags": [
            "config-core",
            "configuration",
            "rust",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/sandbox_summary.rs",
              "sha256": "d539c0dc29d7ecf7a45a569f4e0f7e977168cae0b7e32e4eec418135c5ffb903"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-codex-shell-env-policy",
          "sectionId": "section-configuration",
          "slug": "shell-environment-policy",
          "name": "Shell environment policy filtering",
          "description": "`core/src/exec_env.rs` implements `ShellEnvironmentPolicy`: `create_env` causes `populate_env`, which applies inherit mode (All/Core/None), excludes secrets by masks, imposes `exclude`/`include_only` And `set` overrides and then returns the map for `Command::envs`. The tests check the core set and pattern matching. This ensures that running commands only receive whitelisted variables.",
          "tags": [
            "config-core",
            "configuration",
            "rust",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec_env.rs",
              "sha256": "7ac1bd5fc8b28af261d348f18e8738551f61c36532f1f00531c02047255eaecd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.69
        }
      ]
    },
    {
      "id": "section-security",
      "slug": "security",
      "title": "Safety",
      "entries": [
        {
          "id": "aspect-security-core-index",
          "sectionId": "section-security",
          "slug": "security-core-index",
          "name": "Security core index",
          "description": "`core/src/config/mod.rs` `Config::load_with_cli_overrides` merges config.toml, managed layers, and CLI overrides into the effective `Config` (approval_policy, sandbox_policy, shell_environment_policy, notify/history, MCP servers, model reasoning limits, user instructions, OAuth store settings). `process-hardening/src/lib.rs` applies `prctl`/`setrlimit` and strips LD/DYLD variables before main so the hardening and policy take effect early.",
          "tags": [
            "security",
            "security-core",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            },
            {
              "path": "projects/Codex/codex-rs/process-hardening/src/lib.rs",
              "sha256": "8d591d42b929dd567534502b5c6c66cd18ac4bc1e517d3ee6ced867070cd8803"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-core-no-stdout",
          "sectionId": "section-security",
          "slug": "core-no-stdout",
          "name": "Core crate forbids direct stdout/stderr",
          "description": "`codex-rs/core/src/lib.rs` prohibits `clippy::print_stdout` And `print_stderr`, so library code cannot write directly to the terminal and must use TUI, `tracing` or structured events. The file also centralizes re-export `ModelProviderInfo`, protocol and sandbox helpers, giving the rest of the crates secure facades without access to low-level calls.",
          "tags": [
            "security",
            "observability",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/lib.rs",
              "sha256": "b2f23d29da01f779149892efc02af9c02d1beb5313c2eb1022e2fcd6c67212cc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-cwd-trust-evaluation",
          "sectionId": "section-security",
          "slug": "cwd-trust-evaluation",
          "name": "Assessing trust in the working directory",
          "description": "`ConfigToml::get_active_project` in `core/src/config/mod.rs` checks `[projects]` for the resolved cwd and falls back to `resolve_root_git_project_for_trust` so worktrees inherit trust from the repo root. The resulting `ProjectConfig` drives sandbox and approval defaults.",
          "tags": [
            "security",
            "git"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-set-project-trusted",
          "sectionId": "section-security",
          "slug": "set-project-trusted",
          "name": "Updating trust_level in config.toml",
          "description": "`core/src/config/mod.rs::set_project_trust_level` uses `ConfigEditsBuilder` to rewrite `[projects]` into explicit tables and set `trust_level` for the target path, then atomically persists `config.toml`. This is the canonical path for toggling trusted/untrusted state.",
          "tags": [
            "security",
            "configuration"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-git-root-trust-resolution",
          "sectionId": "section-security",
          "slug": "git-root-trust-resolution",
          "name": "Defining git root for trust",
          "description": "`resolve_root_git_project_for_trust` performs `git rev-parse --git-common-dir`, canonizes the path (closing `/private/var` And `..`) and returns the parent directory. Trust check always relies on the master working copy.",
          "tags": [
            "git",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "sectionId": "section-security",
          "id": "aspect-trust-flow-detection",
          "slug": "trust-flow-detection",
          "name": "Trust flow skip heuristics",
          "description": "`codex-rs/tui/src/lib.rs` function `determine_repo_trust_state` reads first `ConfigToml::get_config_profile`, and if the selected profile already specifies `approval_policy`, the trust screen is skipped. Likewise, the master screen is ignored when sandbox/approval is overridden by the CLI or directly in `config.toml`. Only if there are no settings and untrusted `cwd` modal is shown, otherwise `is_cwd_trusted` automatically sets `AskForApproval::OnRequest` And `SandboxPolicy::new_workspace_write_policy` for trusted projects.",
          "tags": [
            "security",
            "tui",
            "onboarding",
            "configuration"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/lib.rs",
              "sha256": "cd1e831b60ded137c43e257af6841effb25a04a9ccf2b87cc9eca6bdce514f91"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/lib.rs",
              "sha256": "72927e17cadb5115b046f638ed2e35b595b970647ffe89e5578aaeaf17a017b7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "sectionId": "section-security",
          "id": "aspect-trust-decision-policies",
          "slug": "trust-decision-policies",
          "name": "Trust decision sets default policies",
          "description": "`codex-rs/tui/src/lib.rs` after `run_onboarding_flow` checks `directory_trust_decision`: choice `Trust` automatically records `config.approval_policy = AskForApproval::OnRequest` and applies `SandboxPolicy::new_workspace_write_policy`. This is how TUI synchronizes trust with secure Codex profiles without manually editing configs.",
          "tags": [
            "security",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/lib.rs",
              "sha256": "cd1e831b60ded137c43e257af6841effb25a04a9ccf2b87cc9eca6bdce514f91"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/lib.rs",
              "sha256": "72927e17cadb5115b046f638ed2e35b595b970647ffe89e5578aaeaf17a017b7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-tui-dangerous-bypass-flag",
          "sectionId": "section-security",
          "slug": "dangerous-bypass-flag",
          "name": "Dangerous bypass flag requires explicit consent",
          "description": "Critical: `codex-rs/tui/src/cli.rs` announces `--dangerously-bypass-approvals-and-sandbox` (alias `--yolo`) With `conflicts_with_all` For `--ask-for-approval` And `--full-auto`, so sandbox-free mode cannot be enabled next to soft policies. IN `tui/src/lib.rs` branch `cli.dangerously_bypass_approvals_and_sandbox` forcibly exposes `SandboxMode::DangerFullAccess` And `AskForApproval::Never`, otherwise standard logic is applied `--full-auto` and CLI overrides. Additionally `cli/src/main.rs` in the handler `resume_merges_dangerously_bypass_flag` moves the flag from `codex resume`so that resumed sessions remain without sandbox. Link with `security-sandbox` And `/cli` aspects ensures that full access is enabled only by explicit decision and is not lost during transitions.",
          "tags": [
            "security",
            "sandbox",
            "cli",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/cli.rs",
              "sha256": "a6ffe3613743b90cd61be8b27380d5e0d8c8ad4bf7b97ac21672c2147a45f4ad"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/lib.rs",
              "sha256": "cd1e831b60ded137c43e257af6841effb25a04a9ccf2b87cc9eca6bdce514f91"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/cli.rs",
              "sha256": "f561d9bd61601f8f7dc7468fdda1b5ecb87e3783342bf0af6fd4606749ff5574"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/lib.rs",
              "sha256": "72927e17cadb5115b046f638ed2e35b595b970647ffe89e5578aaeaf17a017b7"
            },
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "id": "aspect-codex-process-hardening",
          "sectionId": "section-security",
          "slug": "process-hardening-pre-main",
          "name": "Pre-main process hardening",
          "description": "`codex-rs/process-hardening/src/lib.rs` performs protection before entering `main`: `pre_main_hardening` on Linux/Android calls `prctl(PR_SET_DUMPABLE, 0)` And `setrlimit(RLIMIT_CORE, 0)`, clears variables `LD_*`; on macOS it is prohibited `ptrace(PT_DENY_ATTACH)` and deletes `DYLD_*`. Errors terminate the process with codes 5-7. The library is connected via `#[ctor::ctor]`, so Codex release binaries start without the possibility of a memory dump and without dangerous environment variables.",
          "tags": [
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/process-hardening/src/lib.rs",
              "sha256": "8d591d42b929dd567534502b5c6c66cd18ac4bc1e517d3ee6ced867070cd8803"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "id": "aspect-sandbox-policy-derivation",
          "sectionId": "section-security",
          "slug": "sandbox-policy-derivation",
          "name": "Derived sandbox policy",
          "description": "Critical: `ConfigToml::derive_sandbox_policy` combines CLI overrides, active profile and `config.toml`to select `SandboxPolicy` for all modes. For `workspace-write` it copies `writable_roots`, `network_access`, `exclude_tmpdir_env_var` And `exclude_slash_tmp`, and in other cases returns ready-made read-only or DangerFullAccess presets. This logic directly feeds the section's decisions `security-sandbox` - the error immediately breaks the checks `assess_*_safety` and apply_patch pipeline.",
          "tags": [
            "sandbox",
            "configuration",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/config/mod.rs",
              "sha256": "01f835f803d9c9d19ea526114dcc09cce14c889b3b20eedcd89efe49dc639d84"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "sectionId": "section-security",
          "id": "aspect-onboarding-trust-gating",
          "slug": "onboarding-trust-gating",
          "name": "Onboarding gating prioritizes trust",
          "description": "`codex-rs/tui/src/lib.rs` functions `should_show_onboarding` And `should_show_login_screen` decide the order of the screens: trust and Windows WSL widgets are shown first, regardless of login status, and the login screen is drawn only when `model_provider.requires_openai_auth` returns true. This ensures that the user first asserts trust in the directory and environment before the CLI prompts for login.",
          "tags": [
            "security",
            "tui",
            "onboarding"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/lib.rs",
              "sha256": "cd1e831b60ded137c43e257af6841effb25a04a9ccf2b87cc9eca6bdce514f91"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/lib.rs",
              "sha256": "72927e17cadb5115b046f638ed2e35b595b970647ffe89e5578aaeaf17a017b7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-responses-proxy-prehardening",
          "sectionId": "section-security",
          "slug": "responses-proxy-prehardening",
          "name": "Responses proxy runs pre_main hardening",
          "description": "`codex-rs/responses-api-proxy/src/main.rs` connects `#[ctor::ctor] fn pre_main`which causes `codex_process_hardening::pre_main_hardening()` before launch `main`: on Linux/macOS it clears ptrace, turns off core dumps and cleans up `LD_*`/`DYLD_*` variables. After that `main` only parses `ResponsesApiProxyArgs` and delegates to `run_main`, so even the auxiliary proxy starts in hardened mode before reading the API key from stdin.",
          "tags": [
            "security",
            "rust",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/responses-api-proxy/src/main.rs",
              "sha256": "388f518f5f57c056891550bd843a96e840723cd38cbfe2aa5f083b97b4b661c0"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.65
        },
        {
          "id": "aspect-run-container-sanitization",
          "sectionId": "section-security",
          "slug": "run-container-sanitization",
          "name": "Container runner domain hardening",
          "description": "`codex-cli/scripts/run_in_container.sh` normalizes the name `codex_<path>` (only [A-Za-z0-9_-]), hangs `trap cleanup` and requires non-empty `OPENAI_ALLOWED_DOMAINS`. The domain is checked by regex, saved in `/etc/codex/allowed_domains.txt` with rights 0444 and owner root, after which the script runs `/usr/local/bin/init_firewall.sh` and immediately removes it from the container. `docker run` creates `sleep infinity` With `--cap-add=NET_ADMIN/NET_RAW`, mounting the working directory to the same path, and the actual command is executed via `docker exec ... codex --full-auto`. This gives an isolated environment without dangling containers and without reusing the firewall binary.",
          "tags": [
            "security",
            "sandbox",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/run_in_container.sh",
              "sha256": "5a8db0b726e806ed950f769feb6c028bd6dccc598fbd84d075af0193d8892699"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        }
      ]
    },
    {
      "id": "section-security-auth",
      "slug": "security-auth",
      "title": "Authentication and Tokens",
      "entries": [
        {
          "id": "aspect-login-local-server",
          "sectionId": "section-security-auth",
          "slug": "login-local-server",
          "name": "Local OAuth server for browser login",
          "description": "Critical: `codex_login::run_login_server` tiny_http starts on localhost, generates PKCE/state, opens the browser with the authorize URL and holds the stream until received `/auth/callback`. `tokio::select!` simultaneously listens to the channel and `ShutdownHandle`, `ResponseAndExit` exits correctly `/success` And `/cancel`, A `send_response_with_disconnect` ensures the socket is closed. Tokens are processed through `exchange_code_for_tokens`, after which the server carefully collapses.",
          "tags": [
            "auth",
            "security",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "id": "aspect-device-code-login",
          "sectionId": "section-security-auth",
          "slug": "device-code-login",
          "name": "Device-code login without browser",
          "description": "Critical: `login::run_device_code_login` asks for user code `/deviceauth/usercode`, prints a yellow warning to stdout and provides instructions to the user. `poll_for_token` respects `interval`, waits up to 15 minutes and continues on 403/404, and after success collects PKCE and calls `exchange_code_for_tokens`. Tokens and refresh are saved via `persist_tokens_async`, so headless scripts get the same guarantees as browser input.",
          "tags": [
            "auth",
            "security",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/device_code_auth.rs",
              "sha256": "589b97c410b431d5da8ec64adeb5ead9cd87d5d1a1d187b3568f84ae080f151e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.8
        },
        {
          "id": "aspect-rmcp-oauth-login",
          "sectionId": "section-security-auth",
          "slug": "rmcp-oauth-login",
          "name": "perform_oauth_login hosts local callback",
          "description": "`codex-rs/rmcp-client/src/perform_oauth_login.rs` raises `tiny_http::Server` on `127.0.0.1:0`, forms `redirect_uri` and starts `OAuthState::start_authorization`by typing the URL and trying to open the browser. The callback is read from the oneshot channel `spawn_callback_server`, `parse_oauth_callback` pulls out `code`/`state`, A `tokio::time::timeout` limits the wait to 300 seconds. Received credits are packaged into `StoredOAuthTokens` and saved via `save_oauth_tokens`, providing secure local OAuth for RMCP.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/perform_oauth_login.rs",
              "sha256": "d0918a143123e6e98473022c7b84e0bfe00fb52d2a45f0bfdc55823ace689307"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "sectionId": "section-security-auth",
          "id": "aspect-login-pkce-generator",
          "slug": "login-pkce-generator",
          "name": "Login PKCE generator",
          "description": "`codex-rs/login/src/pkce.rs` generates PKCE pairs: `generate_pkce` creates a random 64byte verifier, URL-safe encodes it without padding and counts `Sha256` challenge, returning `PkceCodes`. Uses both CLI and onboarding to ensure that all OAuth flows perform S256.",
          "tags": [
            "auth",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/pkce.rs",
              "sha256": "e0136b6334791842adbc981df89d0b6aa74781bf2626708ac499363fbaaecc74"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.6
        },
        {
          "id": "aspect-rmcp-auth-status",
          "sectionId": "section-security-auth",
          "slug": "rmcp-auth-status",
          "name": "Determining the auth status of the MCP server",
          "description": "`rmcp-client/src/auth_status.rs` defines `McpAuthStatus`: if bearer env is passed - immediately `BearerToken`, otherwise it looks for the presence of saved OAuth tokens and tries RFC 8414 well-known discovery (`/.well-known/oauth-authorization-server`) with title `MCP-Protocol-Version`. Errors are logged to `debug`, and the result returns `Unsupported`, `NotLoggedIn` or `OAuth`. This allows the CLI to honestly show the user whether login is required.",
          "tags": [
            "mcp",
            "security",
            "auth"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/auth_status.rs",
              "sha256": "6b827a848730459d644bf52760273a7afcf1174e608728f2b2b04ceb1b89ecf2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-rmcp-oauth-credentials-store",
          "sectionId": "section-security-auth",
          "slug": "rmcp-oauth-credentials-store",
          "name": "Storing OAuth MCP tokens",
          "description": "`rmcp-client/src/oauth.rs` manages saving `StoredOAuthTokens`: at `Auto` first reads keyring via `keyring::Entry`, if there is an error, it logs and crashes back to `CODEX_HOME/.credentials.json`. `OAuthPersistor` synchronizes tokens with `AuthorizationManager`, A `CredentialStoreError` expands user messages. This ensures that RMCP login works on macOS Keychain, Windows Credential Manager and Linux Secret Service.",
          "tags": [
            "mcp",
            "auth",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/oauth.rs",
              "sha256": "bd72309f4637d2fddb2aaadbcfd157383c09dfdbe40db7565245afa1d13b5c49"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-user-info-email",
          "sectionId": "section-security-auth",
          "slug": "user-info-email",
          "name": "userInfo email extraction",
          "description": "`app-server/tests/suite/user_info.rs` writes down `auth.json` With `IdTokenInfo` and encodes the JWT via `base64::URL_SAFE_NO_PAD`, then calls `userInfo`. Test pending `alleged_user_email` and thereby insures the reading/decoding of tokens during IDE requests.",
          "tags": [
            "auth",
            "testing",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/user_info.rs",
              "sha256": "c45405159f2d58644c2a371c1960a58ab5be9c03d8585abe376b6f0a3bd94de3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-login-server-disconnect",
          "sectionId": "section-security-auth",
          "slug": "login-server-disconnect",
          "name": "Login server closes keep-alive",
          "description": " the function manually writes an HTTP response: it removes foreign headers, forcibly adds and , and then directly writes the body to the socket. This bypasses the tiny_http keep-alive and ensures that after a successful login the socket is closed and the next server startup will not hang on the old connection.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-login-bind-retry",
          "sectionId": "section-security-auth",
          "slug": "login-bind-retry",
          "name": "Login server releases a busy port",
          "description": "  tries to raise tiny_http to 127.0.0.1 and calls it once (GET with a timeout of 2 seconds), then waits 200 ms and repeats up to 10 times. If the port is never freed, returns an explicit error. This allows the new login session to securely hijack the old server instead of running a double OAuth flow.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-login-success-claims",
          "sectionId": "section-security-auth",
          "slug": "login-success-claims",
          "name": "Success redirect transfers plan and onboarding",
          "description": "  extracts stamps , , , from ID and access tokens and calculates them for organization owners. The generated one passes these parameters to the TUI to decide whether to show onboarding and what tariff the user has.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-login-api-key-exchange",
          "sectionId": "section-security-auth",
          "slug": "login-api-key-exchange",
          "name": "Login exchanges id_token for API key",
          "description": "  does OAuth token exchange: POST with , and . A successful response is returned as an API key, otherwise it is generated so that the CLI does not continue without a valid key.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-login-persist-account",
          "sectionId": "section-security-auth",
          "slug": "login-persist-account",
          "name": "Persist tokens save account_id",
          "description": "  transfers the entry to , creates directories under , parses id_token via , extracts from JWT, installs a fresh one and calls . Errors are carried to the main thread as \"persist task failed\", so the loss of tokens is not hidden.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-login-jwt-claims",
          "sectionId": "section-security-auth",
          "slug": "login-jwt-claims",
          "name": "JWT claims in the login server",
          "description": "  splits the JWT into three parts, decodes the payload to URL-safe base64 and returns a . Any problems (broken base64, incorrect JSON, missing key) are logged via , and the function returns an empty map so that the calculation does not lead to panic.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-login-generate-state",
          "sectionId": "section-security-auth",
          "slug": "login-generate-state",
          "name": "PKCE state is generated as 32 bytes",
          "description": "  fills the array with 32 random bytes and encodes them in base64 URL_SAFE without padding. This state goes into the authorize URL and is then checked into , closing the window for CSRF between login retries.",
          "tags": [
            "auth",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/src/server.rs",
              "sha256": "d4618bd03fff3ee851c3f675edbbe136b0c6df25c9d08fac1ae2702a83d2948c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        }
      ]
    },
    {
      "id": "section-security-secrets",
      "slug": "security-secrets",
      "title": "Secrets Management",
      "entries": [
        {
          "id": "aspect-codex-auth-refresh",
          "sectionId": "section-security-secrets",
          "slug": "auth-token-refresh",
          "name": "Auth token refresh persistence",
          "description": "`core/src/auth.rs` stores `CodexAuth` along with `auth.json`: `refresh_token` And `get_token_data` launch `try_refresh_token` when out of date (28 days), update the file after `update_tokens` and cache the structure under the mutex. The manager supports ChatGPT and API keys by reading secrets from env (`CODEX_API_KEY`, `OPENAI_API_KEY`). Understanding the logic ensures that the CLI can extend access and does not lose tokens.",
          "tags": [
            "security",
            "auth",
            "rust",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/auth.rs",
              "sha256": "7f3059247a1427990a2b20517c70eb4204b4387a485e08f4db9a79873873ded4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "id": "aspect-codex-auth-manager-cache",
          "sectionId": "section-security-secrets",
          "slug": "auth-manager-cache",
          "name": "AuthManager cached snapshot semantics",
          "description": "`core/src/auth.rs` describes `AuthManager`: `new`/`shared` read `auth.json` (or `CODEX_API_KEY`, If `enable_codex_api_key_env`) and put `CachedAuth` V `RwLock`. `auth()` produces a clone of the current one `CodexAuth`, `reload()` rereads the file and replaces the cache only when changed, `refresh_token()` pulls `CodexAuth::refresh_token` and immediately updates the state, and `logout()` deletes the file and resets memory. These guarantees allow services to securely share a link to the manager and synchronously pick up token updates.",
          "tags": [
            "security",
            "auth",
            "rust",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/auth.rs",
              "sha256": "7f3059247a1427990a2b20517c70eb4204b4387a485e08f4db9a79873873ded4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.74
        },
        {
          "id": "aspect-responses-api-key-reader",
          "sectionId": "section-security-secrets",
          "slug": "responses-api-key-reader",
          "name": "Safely reading an API key from stdin",
          "description": "`responses-api-proxy/src/read_api_key.rs` reads the token directly via `read(2)` to the stack buffer 1024 bytes, adding a prefix `Bearer `. The function deletes `\\r/\\n`, checks ASCII via `validate_auth_header_bytes`and then `mlock_str` locks pages and resets buffer `zeroize`. On Windows, the same validation remains, which prevents OPENAI_API_KEY from leaking when the proxy is started.",
          "tags": [
            "security",
            "auth",
            "cli",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/responses-api-proxy/src/read_api_key.rs",
              "sha256": "b157260dd1db445c1ad08e6f38af6510266e383f4e988084200cdc9dc56094e4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-auth-write-auth-json",
          "sectionId": "section-security-secrets",
          "slug": "auth-write-auth-json",
          "name": "write_auth_json creates auth.json with permissions 0600",
          "description": "  Serializes to pretty JSON, creates parent directories and on Unix exposes them before writing. Terminates , so it appears with minimal rights and no unwritten tokens.",
          "tags": [
            "auth",
            "security",
            "configuration",
            "rust",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/auth.rs",
              "sha256": "7f3059247a1427990a2b20517c70eb4204b4387a485e08f4db9a79873873ded4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-auth-env-api-key",
          "sectionId": "section-security-secrets",
          "slug": "auth-env-api-key",
          "name": "Env API key is trimmed before use",
          "description": "  and read environment variables, trim whitespace and discard empty lines. This protects against accidental spaces/hyphens from CI secrets and helps distinguish between a missing key and an invalid value.",
          "tags": [
            "auth",
            "security",
            "configuration",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/auth.rs",
              "sha256": "7f3059247a1427990a2b20517c70eb4204b4387a485e08f4db9a79873873ded4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-token-data-claims",
          "sectionId": "section-security-secrets",
          "slug": "token-data-claims",
          "name": "TokenData JWT claim extraction",
          "description": "`core/src/token_data.rs` disassembles `auth.json`: `parse_id_token` decodes JWT, extracts email and `chatgpt_plan_type`, and serialization/deserialization `IdTokenInfo` saves the original token. These structures allow the CLI to understand the user's tariff and decide when a refresh is needed without manually parsing JSON.",
          "tags": [
            "auth",
            "security",
            "rust",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/token_data.rs",
              "sha256": "b5004c8473eccd4fe3974318fd8385a25fa6dc6efdbcbb46b613cafb40fd82c8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-chatgpt-token-cache",
          "sectionId": "section-security-secrets",
          "slug": "chatgpt-token-cache",
          "name": "ChatGPT token cache",
          "description": "`chatgpt/src/chatgpt_token.rs` stores the token in `LazyLock<RwLock<Option<TokenData>>`: `init_chatgpt_token_from_auth` reads `auth.json` through `CodexAuth`, `set_chatgpt_token_data` updates the cache and `get_chatgpt_token_data` gives a clone without blocking the entire structure. This allows `chatgpt_client` reuse the token in multiple requests without reloading files.",
          "tags": [
            "auth",
            "security",
            "cli",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/chatgpt/src/chatgpt_token.rs",
              "sha256": "c3916f04153614b30f3da0b28e86978c976c0939ec005855a1ab33b5213a0e48"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        }
      ]
    },
    {
      "id": "section-security-sandbox",
      "slug": "security-sandbox",
      "title": "Sandboxes and hardening",
      "entries": [
        {
          "id": "aspect-codex-safety-gates",
          "sectionId": "section-security-sandbox",
          "slug": "safety-gates",
          "name": "Safety gates for commands and patches",
          "description": "`codex_core::safety` evaluates patches and commands: `assess_patch_safety` normalizes ApplyPatchAction paths and checks them against writable roots, autoapplying only if there is a Seatbelt or Landlock or an explicit DangerFullAccess. `assess_command_safety` skips \"known safe\" or explicitly approved commands, and `assess_safety_for_untrusted_command` takes into account `with_escalated_permissions` and forces you to ask if the user has not allowed unconditional execution. `get_platform_sandbox` selects Seatbelt on macOS and seccomp on Linux, otherwise forces you to ask or decline.",
          "tags": [
            "sandbox",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/safety.rs",
              "sha256": "44026d403c6740eb5f91424ed27ded3f145a8bf855ae6312446bd0baad490e0f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.78
        },
        {
          "id": "aspect-sandbox-writable-roots",
          "sectionId": "section-security-sandbox",
          "slug": "sandbox-writable-roots",
          "name": "Workspace-write default writable roots",
          "description": "`protocol/src/protocol.rs` method `SandboxPolicy::get_writable_roots_with_cwd` generates an actual list of allowed directories: always includes `cwd`, if available adds `/tmp` (if not `exclude_slash_tmp`) And `$TMPDIR`, and each root marks `.git` as a read-only subdirectory. For DangerFullAccess and ReadOnly, returns an empty list to prevent sandboxes from opening unnecessary paths. This ensures that workspace-write mode does not lose standard temporary directories while protecting git metadata.",
          "tags": [
            "sandbox",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/protocol.rs",
              "sha256": "b177fe47ab5e8bb18528049d8a4d96089f2678ea624ea49fd1894b0085108b4a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-seatbelt-sandbox",
          "sectionId": "section-security-sandbox",
          "slug": "seatbelt-sandbox",
          "name": "macOS Seatbelt command sandboxing",
          "description": "`core/src/seatbelt.rs` wraps processes through `/usr/bin/sandbox-exec`: `create_seatbelt_command_args` mixes base SBPL (`seatbelt_base_policy.sbpl`) with deny-by-default, adds `-DWRITABLE_ROOT_*` for permitted paths and excludes `.git`. `spawn_command_under_seatbelt` exposes `CODEX_SANDBOX=seatbelt`, forwards stdio and spawns the command. This pipeline gives macOS the same rigidity as Linux Landlock, without the increased permissions.",
          "tags": [
            "sandbox",
            "security",
            "rust",
            "macos"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/seatbelt.rs",
              "sha256": "a8f63864108ac2608a131c1435ea8ddf042d9a1b5b32cbe0ade43548a8ab51f8"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/seatbelt_base_policy.sbpl",
              "sha256": "f330d7627000c121a6f0b22c1f1032755dbe00d2d5bd3477797a2d821f5f970d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.74
        },
        {
          "id": "aspect-codex-landlock-sandbox",
          "sectionId": "section-security-sandbox",
          "slug": "landlock-sandbox",
          "name": "Linux landlock + seccomp sandboxing",
          "description": "`codex-rs/linux-sandbox` runs as a separate binary: `linux_run_main.rs` parses `LandlockCommand`, applies the policy to the current thread and `execvp` the target process. `landlock.rs` sets `PR_SET_NO_NEW_PRIVS`, installs a seccomp filter that blocks non-AF_UNIX network calls, and builds Landlock rules with writable roots from `SandboxPolicy`. `mounts.rs` adds read-only bind-mount helpers for protected subpaths (including `.git` pointer targets) by unsharing mount/user namespaces and remounting paths read-only. Together these pieces enforce Linux workspace-write semantics.",
          "tags": [
            "sandbox",
            "security",
            "rust",
            "linux"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/linux-sandbox/src/linux_run_main.rs",
              "sha256": "0bd6afbf503262e739bfadda9b03a943b9884674c9a453ba4040c69f67057b90"
            },
            {
              "path": "projects/Codex/codex-rs/linux-sandbox/src/landlock.rs",
              "sha256": "2d0cde1944f3a5d6801c72c04bd69a882cfbde6c12528368a35203abb1c2182d"
            },
            {
              "path": "projects/Codex/codex-rs/linux-sandbox/src/mounts.rs",
              "sha256": "fee2c6854d22be9f76625e26b0e7cd65d2c137001b37048bf4586d9ede02fb70"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.76
        },
        {
          "id": "aspect-codex-apply-patch-gate",
          "sectionId": "section-security-sandbox",
          "slug": "apply-patch-gating",
          "name": "Apply patch sandbox escalation",
          "description": "`core/src/apply_patch.rs` decides how to execute `apply_patch`: `assess_patch_safety` compares the action with the sandbox and cwd policy, `InternalApplyPatchInvocation` selects manual execution or delegation to `exec` (with argument `--codex-run-as-apply-patch`). At `SafetyCheck::AskUser` session calls `request_patch_approval` and processes the response via `ReviewDecision`, A `convert_apply_patch_to_protocol` translates the patch to `FileChange` for further logs. This determines when Codex can auto-apply a patch and how verification is escalated.",
          "tags": [
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/apply_patch.rs",
              "sha256": "689bbcdfbeb8ba0f959e1d4331173fb429ecf51f238c8eaca027e38851d1b9b7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.74
        },
        {
          "id": "aspect-codex-execpolicy-default",
          "sectionId": "section-security-sandbox",
          "slug": "execpolicy-default",
          "name": "Execpolicy rules loading order",
          "description": "`core/src/exec_policy.rs::load_exec_policy` walks the config layer stack, collecting `rules/*.rules` files in precedence order and parsing them into a `Policy`. `default_policy_path` points to `~/.codex/rules/default.rules`, which is updated when users approve new prefixes.",
          "tags": [
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec_policy.rs",
              "sha256": "1694d411103d9f1d087e72b5d2e59bdde753a3b8eb1b0999030fef9488e48524"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-bash-word-only-guard",
          "sectionId": "section-security-sandbox",
          "slug": "bash-word-only-guard",
          "name": "Tree-sitter guard for bash -lc",
          "description": "`core/src/bash.rs` limits scenarios `bash -lc`: `try_parse_word_only_commands_sequence` allows only plain commands and operators `&&`, `||`, `;`, `|`, cutting off brackets, redirects, substitutions, etc., and `parse_bash_lc_plain_commands` returns a sequence of words for subsequent checks. Thanks to this, Codex sees all subprocesses and can safely analyze the chains before running them in the sandbox.",
          "tags": [
            "security",
            "shell",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/bash.rs",
              "sha256": "bf53e9679ef0e972d2030957c08064d553b6fc0baf3d4653c4cab10653dd1d61"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-command-dangerous-heuristics",
          "sectionId": "section-security-sandbox",
          "slug": "command-dangerous-heuristics",
          "name": "Heuristics for dangerous commands",
          "description": "`command_safety::command_might_be_dangerous` blocks `git reset`, `git rm` And `rm -f/-rf`, even if they are hidden behind `sudo` or nested in `bash -lc`. The function expands plain commands from the parser, checks the first token and recursively looks at nested sequences so as not to miss dangerous operations before Codex autorun.",
          "tags": [
            "security",
            "shell",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/command_safety/is_dangerous_command.rs",
              "sha256": "2448bf3ad001431bb0ee95f61d83fdb2f5caf7a7f64f3a52bea1c1d9bb340429"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-command-safe-allowlist",
          "sectionId": "section-security-sandbox",
          "slug": "command-safe-allowlist",
          "name": "Known-safe command allowlist",
          "description": "`core/src/command_safety/is_safe_command.rs` lists allowed auto commands: `is_safe_to_call_with_exec` whitelists `ls`, `grep`, `git status`, `sed -n` and secure options `find`/`rg`, and the Windows branch connects `windows_safe_commands`. `is_known_safe_command` only passes chains `bash -lc`, which consist of the following plain commands and operators `&&/||/;|`using `parse_bash_lc_plain_commands`. Any attempt to add a redirection, subshell, or disabled flag results in failure, so automatic runs are limited to a safe subset.",
          "tags": [
            "security",
            "shell",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/command_safety/is_safe_command.rs",
              "sha256": "402cb22d1c0fa93bce3a5ebbf4be164ce17c3e87aae5f1f6b76a4cde7f8088a2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-execpolicy-sed-guard",
          "sectionId": "section-security-sandbox",
          "slug": "execpolicy-sed-guard",
          "name": "Safe sed heuristics",
          "description": "`core/src/command_safety/is_safe_command.rs` special-cases `sed -n` and validates the range via `is_valid_sed_n_arg` so only read-only `N` or `N,Mp` forms are treated as safe. This prevents unsafe `sed` invocations from slipping through safety heuristics.",
          "tags": [
            "sandbox",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/command_safety/is_safe_command.rs",
              "sha256": "402cb22d1c0fa93bce3a5ebbf4be164ce17c3e87aae5f1f6b76a4cde7f8088a2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-windows-safe-commands",
          "sectionId": "section-security-sandbox",
          "slug": "windows-safe-commands",
          "name": "Windows read-only command whitelist",
          "description": "`core/src/command_safety/windows_safe_commands.rs` implements `is_safe_command_windows`: it parses PowerShell via `try_parse_powershell_command_sequence`/`parse_powershell_invocation`, rejects unknown flags, redirects and call operator, and collects pipelines `split_into_commands`. Tests check allowed git/rg scripts and block destructive cmdlets.",
          "tags": [
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/command_safety/windows_safe_commands.rs",
              "sha256": "a18dc219f71ed8c1dd4cd7afe5178e2f383c3eb8de81d861462f0468967b8246"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-execpolicy-errors",
          "sectionId": "section-security-sandbox",
          "slug": "execpolicy-error-codes",
          "name": "Execpolicy error taxonomy",
          "description": "`execpolicy/src/error.rs` describes the enum being serialized `Error` with branches `NoSpecForProgram`, `OptionMissingValue`, `LiteralValueDidNotMatch`, `SedCommandNotProvablySafe`, path checks, etc. Fields use `PathBuf` And `serde_with::DisplayFromStr`, so the CLI returns structured failure reasons when checking commands.",
          "tags": [
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/error.rs",
              "sha256": "6a103cc2f232a6b28776232e26274ceccb9a5edaf2376366e0c39aee12173f53"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-execpolicy-cli-check",
          "sectionId": "section-security-sandbox",
          "slug": "execpolicy-cli-check",
          "name": "Execpolicy CLI safety checks",
          "description": "`execpolicy/src/main.rs` generates CLI: `Args` read `--require-safe` and subcommands `check`/`check-json`, `check_command` wraps `Policy::check`, returning `Output::{Safe,Match,Forbidden,Unverified}` and matching them with exit codes 0/12/13/14. `ExecArg` parses JSON via `deserialize_from_json` And `FromStr`, so automations can safely issue exec calls.",
          "tags": [
            "security",
            "sandbox",
            "cli",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/main.rs",
              "sha256": "d6988ae9a85aba4375eb81d1b8c966ab8d2dce9403f7c909a6220966c17c3a2a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-execpolicy-opt-meta",
          "sectionId": "section-security-sandbox",
          "slug": "execpolicy-opt-meta",
          "name": "Execpolicy Starlark builtins",
          "description": "`execpolicy/src/parser.rs` registers `policy_builtins` and implements `prefix_rule`, turning Starlark patterns into `PrefixRule`/`PatternToken` entries, parsing `decision`, `justification`, and match/not_match examples. This is the binding layer between Starlark policy files and the internal rule set.",
          "tags": [
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/parser.rs",
              "sha256": "7fd3fb4161a6bf2e930b3f713748ffff896b50a915875ad244562f6f8e237ce7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-linux-sandbox-entrypoint",
          "sectionId": "section-security-sandbox",
          "slug": "linux-sandbox-entrypoint",
          "name": "codex-linux-candbox is only available on Linux",
          "description": " exports only when and panics on other platforms, but simply calls it. The binary thus refuses to run on unsupported OSes and leaves no loopholes without Landlock/seccomp.",
          "tags": [
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/linux-sandbox/src/lib.rs",
              "sha256": "07bb4946ed10df51dbb852df84b76b4fbc42b19d0794b2e7a626fcd84336c66b"
            },
            {
              "path": "projects/Codex/codex-rs/linux-sandbox/src/main.rs",
              "sha256": "2f651dbee68304879781808734a2f0ef82707fa9511bc6ec1f8878c2edec2834"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-exec-top-cli-override",
          "sectionId": "section-security-sandbox",
          "slug": "exec-top-cli-override",
          "name": "codex-exec main merges overrides",
          "description": " enters, which parses the globals and combines them with the internal flags before calling . Through the same binary it acts as , preserving the general overrides and sandbox policy when switching.",
          "tags": [
            "exec",
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/main.rs",
              "sha256": "e0ff7f6ab599167bf5063782f48eeea921d940348f82e8778a6448fbeb615db4"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.63
        },
        {
          "id": "aspect-app-server-arg0-sandbox",
          "sectionId": "section-security-sandbox",
          "slug": "app-server-arg0-sandbox",
          "name": "App server shares binary with sandbox",
          "description": " applies: standard launch starts the JSON-RPC app server, and alias redirects execution to sandbox-runner with the same . One binary supplies both roles without reducing restrictions.",
          "tags": [
            "app-server",
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/src/main.rs",
              "sha256": "02eb5ba41d114768b64b1fb98709099295744beb890f6fd658c7eba742bba84a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-mcp-server-arg0-sandbox",
          "sectionId": "section-security-sandbox",
          "slug": "mcp-server-arg0-sandbox",
          "name": "MCP server shares sandbox alias",
          "description": "`codex-rs/mcp-server/src/main.rs` also uses `arg0_dispatch_or_else`: ordinary `codexmcp` starts the MCP JSON-RPC server, and launches through `codex-linux-sandbox` executes the sandbox command, preserving the general overrides. This prevents MCP processes from running outside of the Seatbelt/Landlock.",
          "tags": [
            "mcp",
            "security",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/main.rs",
              "sha256": "3fefcdbf62a0bbe44449b25eecffa026bfe7a9bd1dd0935c899f5eb4e9e18b5d"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.55
        },
        {
          "id": "aspect-seatbelt-base-policy",
          "sectionId": "section-security-sandbox",
          "slug": "seatbelt-base-policy",
          "name": "Basic SBPL Seatbelt policy",
          "description": " sets the deny-by-default policy of the macOS Seatbelt: allows reading the necessary ones, for writing, lookup and POSIX semaphores, blocking the rest until expanded by Writable roots rules. This file serves as the foundation for and eliminates unnecessary privileges.",
          "tags": [
            "security",
            "sandbox",
            "macos"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/seatbelt_base_policy.sbpl",
              "sha256": "f330d7627000c121a6f0b22c1f1032755dbe00d2d5bd3477797a2d821f5f970d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        }
      ]
    },
    {
      "id": "section-sessions",
      "slug": "sessions",
      "title": "Sessions and history",
      "entries": [
        {
          "id": "aspect-codex-rollout-recorder",
          "sectionId": "section-sessions",
          "slug": "rollout-jsonl-recorder",
          "name": "Rollout JSONL recorder",
          "description": "`core/src/rollout/recorder.rs` controls the persister: `RolloutRecorder::new` creates JSONL in `~/.codex/sessions`, writes SessionMeta with cwd and originator, spawns a tokio task for recording; `record_items` filters through `is_persisted_response_item` and streams events, `flush` And `list_conversations` allow you to synchronize a file and scroll through the history. This is the basis for resuming and auditing sessions.",
          "tags": [
            "sessions",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/recorder.rs",
              "sha256": "eb154810aaefa5f60c8cda863e5e9013badb5f6639b48e3e6580150c1cab6700"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-codex-conversation-history",
          "sectionId": "section-sessions",
          "slug": "conversation-history-filter",
          "name": "Thread history filtering",
          "description": "`core/src/context_manager/history.rs` `ContextManager::record_items` keeps only API messages (and ghost snapshots) while applying truncation, and `for_prompt` normalizes the history and drops ghost snapshots before sending to the model. This ensures stored history matches the turn semantics and remains safe for prompt assembly.",
          "tags": [
            "sessions",
            "history",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/context_manager/history.rs",
              "sha256": "b7d12a8941f4a4f1072e830814e7f50941cd8f21aa9ced2b1145426e9b6f0d04"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-codex-session-state-cache",
          "sectionId": "section-sessions",
          "slug": "session-state-cache",
          "name": "SessionState history and token cache",
          "description": "`core/src/state/session.rs` transfers mutable data to `SessionState`: `new` creates fresh `ConversationHistory`, `record_items` And `replace_history` synchronize events, and `update_token_info_from_usage` And `set_rate_limits` support `TokenUsageInfo` and the latest `RateLimitSnapshot`. `set_token_usage_full`   ,  UI   . Thanks to this, Session keeps history, tokens and rate limits in one thread-safe storage.",
          "tags": [
            "sessions",
            "history",
            "telemetry",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/state/session.rs",
              "sha256": "66c4550aced62ee43be8b804989120ea5cc6cdc17100b3b37fcd1df3800bb436"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-active-turn-state",
          "sectionId": "section-sessions",
          "slug": "active-turn-state",
          "name": "ActiveTurn task and approval tracking",
          "description": "`core/src/state/turn.rs` describes turn-local control: `ActiveTurn` stores `IndexMap` tasks with `AbortHandle`, supports `add_task`/`drain_tasks`, A `TurnState` under a mutex buffers pending approvals and `ResponseInputItem`. Methods `clear_pending`, `try_clear_pending_sync` And `take_pending_input` allow you to interrupt or complete a move without leaks, saving pending review decisions and user input.",
          "tags": [
            "sessions",
            "concurrency",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/state/turn.rs",
              "sha256": "cf741577c8f51d09e5a2ac4d9f17846ccad0bfa5bb6c39dbf3bbd1b94896b344"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-codex-session-task-runner",
          "sectionId": "section-sessions",
          "slug": "session-task-runner",
          "name": "Session task runner lifecycle",
          "description": "`core/src/tasks/mod.rs` manages Regular/Review/Compact tasks: `Session::spawn_task` replaces the active move through `abort_all_tasks`, creates `SessionTaskContext`, launches `tokio::spawn` and registers `RunningTask` V `ActiveTurn`. `handle_task_abort` causes `AbortHandle::abort`, then publishes `TurnAbortedEvent`, A `on_task_finished` removes `ActiveTurn`, sending `TaskCompleteEvent` with the agent's last message. This ensures that each Codex subtask completes uniformly and does not leave behind background tasks when switching operations.",
          "tags": [
            "sessions",
            "concurrency",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tasks/mod.rs",
              "sha256": "153bf158f91799d108b04f4305522061db68fbeec7d20a1e7d3067fe0a60a58c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-session-services",
          "sectionId": "section-sessions",
          "slug": "session-services-registry",
          "name": "SessionServices dependency bundle",
          "description": "`core/src/state/service.rs` sets `SessionServices`: holds `McpConnectionManager`, `ExecSessionManager`, `UnifiedExecSessionManager`, `UserNotifier`, optional `RolloutRecorder` under `Mutex`, selected shell and `Executor`. The structure is created when `Codex::spawn` and transfers all services to the turn-pipeline so that approvals, MCP and unified exec reuse the same managers within the session.",
          "tags": [
            "sessions",
            "architecture",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/state/service.rs",
              "sha256": "2ef916a0b9932571b963e2e4a9d65aba6b0c1013d649581adc3e4336976e1a33"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-codex-message-history-jsonl",
          "sectionId": "section-sessions",
          "slug": "message-history-jsonl",
          "name": "Message history JSONL persistence",
          "description": "`core/src/message_history.rs` writes chat history in `~/.codex/history.jsonl`: `append_entry` respects `HistoryPersistence`, creates a directory, writes a JSON string to one system `write` under advisory-lock and retries, and `ensure_owner_only_permissions` monitors chmod 600. Auxiliary `history_metadata` And `lookup` allow inode+offset to be read safely and writes to be raised without asynchronous races, so the CLI can store and display global history without corruption.",
          "tags": [
            "sessions",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/message_history.rs",
              "sha256": "1a27f93a7ef1d61da3e156ae45d2b2dd376dee142d81cca3f132d93edd30a13b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-auto-compaction",
          "sectionId": "section-sessions",
          "slug": "auto-compaction-pipeline",
          "name": "Auto-compact collapses session history",
          "description": "`core/src/compact.rs` runs auto-compaction: `run_compact_task`/`run_inline_auto_compact_task` build a compacting prompt, stream a summarization turn, replace history with compacted items, and persist a `Compacted` rollout item. The pipeline handles truncation retries and emits `ContextCompacted`/warning events.",
          "tags": [
            "sessions",
            "history",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/compact.rs",
              "sha256": "2435dca731d13842616798c3a272e5de126f2062b971535a21328ea53af8440b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-rollout-list",
          "sectionId": "section-sessions",
          "slug": "rollout-conversation-list",
          "name": "Pagination of rollout files",
          "description": "`core/src/rollout/list.rs` drives paginated discovery of JSONL sessions: `get_conversations` walks `~/.codex/sessions` through `collect_dirs_desc`, respecting `MAX_SCAN_FILES`, sorting files newest-first, and filtering by `allowed_sources`. `Cursor::serialize` encodes `<timestamp>|<uuid>` so callers can resume listings, while `traverse_directories_for_paths` streams head/tail snippets (capped by `HEAD_RECORD_LIMIT`/`TAIL_RECORD_LIMIT`) and reports `num_scanned_files` plus `reached_scan_cap`.",
          "tags": [
            "sessions",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/list.rs",
              "sha256": "b9426178cf13ce8f43d7920ae5d1910d196695a507887e196843eba9153e200b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-rollout-policy",
          "sectionId": "section-sessions",
          "slug": "rollout-persistence-policy",
          "name": "Filter for saved rollout events",
          "description": "`core/src/rollout/policy.rs` defines which rollout elements survive to disk: `is_persisted_response_item` always keeps `Compacted`, `TurnContext`, and `SessionMeta` markers, and delegates other payloads to `should_persist_response_item`/`should_persist_event_msg`. Messages, reasoning, tool calls, token counts, and review mode transitions are recorded, while deltas, stream noise, approvals, exec telemetry, and `SessionConfigured` are dropped so restored sessions carry only actionable context.",
          "tags": [
            "sessions",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/policy.rs",
              "sha256": "f18d505d926f9fac03fdb92ef26a267360fc9cbc267ff6aeef9e9a1491ada15f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-rollout-truncation",
          "sectionId": "section-sessions",
          "slug": "rollout-truncation",
          "name": "Rollout truncation at user boundaries",
          "description": "`core/src/rollout/truncation.rs` finds user-message boundaries by parsing `ResponseItem::Message` through `event_mapping::parse_turn_item`, applies `ThreadRolledBack` markers to rewind the effective history, and `truncate_rollout_before_nth_user_message_from_start` returns the prefix strictly before the nth user message (handling `usize::MAX` and out-of-range cases). This lets forks and resume flows trim sessions along user turns.",
          "tags": [
            "sessions",
            "history",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/truncation.rs",
              "sha256": "87293cb22a7a763161692b31afac7edac3a5afd11aaa371db303c9b5fe55dfbe"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-rollout-layout",
          "sectionId": "section-sessions",
          "slug": "rollout-directory-layout",
          "name": "Rollout directory layout and sources",
          "description": "`core/src/rollout/mod.rs` centralizes rollout storage: constants `SESSIONS_SUBDIR`/`ARCHIVED_SESSIONS_SUBDIR` map Codex state into `~/.codex/sessions` and `archived_sessions`, and `INTERACTIVE_SESSION_SOURCES` restricts listings to CLI/VSCode. The module re-exports `RolloutRecorder` and `find_conversation_path_by_id_str`, keeping session persistence entry points in one place.",
          "tags": [
            "sessions",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/mod.rs",
              "sha256": "74f31b88719023c7e65310e9841053fd6e9420bbed78da5295bab0ec12b9a386"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-rollout-init-errors",
          "sectionId": "section-sessions",
          "slug": "rollout-init-errors",
          "name": "Session init errors map to rollout hints",
          "description": "`core/src/rollout/error.rs` maps session-init IO failures to actionable `CodexErr::Fatal` messages: `map_session_init_error` walks the error chain, matches `ErrorKind` (permission, missing, already exists, invalid data, wrong path type) and injects hints about fixing `~/.codex/sessions` ownership, creating directories, or clearing corrupt data, otherwise falling back to a generic fatal error.",
          "tags": [
            "sessions",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/error.rs",
              "sha256": "d4c5c32dbb09bce17b8876fc4fbd199d89b41b20d9ed5f49265ec596175a7d9d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-codex-session-parallel-startup",
          "sectionId": "section-sessions",
          "slug": "session-parallel-bootstrap",
          "name": "Session::new parallel bootstrap",
          "description": "`core/src/codex.rs` V `Session::new` checks that `cwd` is absolute, and for new/forked sessions it collects `RolloutRecorderParams`. Through `tokio::join!` raises in parallel `RolloutRecorder::new`, `McpConnectionManager::new`, `shell::default_user_shell` And `message_history::history_metadata`, accumulating errors in `post_session_configured_error_events`. Then initializes `OtelEventManager`, builds `ModelClient`, `TurnContext` And `SessionServices` (including `Executor::new` with the current sandbox) before sending the first `SessionConfigured`. This shortens the start of the session and stores all the context in one place.",
          "tags": [
            "sessions",
            "conversation",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-codex-session-initial-history",
          "sectionId": "section-sessions",
          "slug": "session-initial-history-replay",
          "name": "Initial history replay and rollout sync",
          "description": "`core/src/codex.rs` `Session::record_initial_history` distinguishes `InitialHistory::New`, `Resumed` And `Forked`: collects for new moves `build_initial_context` (instructions + `EnvironmentContext`) and immediately writes to history and rollout. For renewals reads `RolloutItem`'s, through `reconstruct_history_from_rollout` replays `ResponseItem`, restores compacts `build_compacted_history` and during a fork, additionally saves events through `persist_rollout_items`. This gives the session full context regardless of the source of the story.",
          "tags": [
            "sessions",
            "history",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-conversation-manager",
          "sectionId": "section-sessions",
          "slug": "conversation-manager-lifecycle",
          "name": "ThreadManager lifecycle control",
          "description": "`core/src/thread_manager.rs` uses `spawn_thread`/`resume_thread_from_rollout`/`fork_thread` to create threads with `InitialHistory` and `Codex::spawn`. `finalize_thread_spawn` requires the first event to be `SessionConfigured` (with `INITIAL_SUBMIT_ID`) before registering the `CodexThread`, so the thread map only stores fully configured sessions.",
          "tags": [
            "sessions",
            "conversation",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/thread_manager.rs",
              "sha256": "5c0d578814bfe9841e2d192c416b5461d32eea5f97079c34da99f12ec2c726f8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-conversation-fork",
          "sectionId": "section-sessions",
          "slug": "conversation-fork-prefix-trim",
          "name": "Fork truncates before nth user message",
          "description": "`core/src/thread_manager.rs` helper `truncate_before_nth_user_message` calls `truncation::truncate_rollout_before_nth_user_message_from_start` to cut the rollout strictly before the nth user message, returning `InitialHistory::New` when the prefix is empty. This keeps forked threads aligned to user-turn boundaries.",
          "tags": [
            "sessions",
            "history",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/thread_manager.rs",
              "sha256": "5c0d578814bfe9841e2d192c416b5461d32eea5f97079c34da99f12ec2c726f8"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/truncation.rs",
              "sha256": "87293cb22a7a763161692b31afac7edac3a5afd11aaa371db303c9b5fe55dfbe"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        },
        {
          "id": "aspect-codex-session-approval-request",
          "sectionId": "section-sessions",
          "slug": "session-approval-spool",
          "name": "Approval requests latch on active turn",
          "description": "`core/src/codex.rs` `Session::request_command_approval` And `request_patch_approval` create `oneshot`-channel, register it in `ActiveTurn::turn_state.insert_pending_approval` By `sub_id` and immediately publish `EventMsg::ExecApprovalRequest` or `ApplyPatchApprovalRequest`. When the task is canceled, the wait ends `ReviewDecision::Denied`, so the UI doesn't freeze and approvals are always tied to a specific move.",
          "tags": [
            "sessions",
            "concurrency",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-session-approval-notify",
          "sectionId": "section-sessions",
          "slug": "session-approval-notify",
          "name": "notify_approval removes pending decisions",
          "description": "`core/src/codex.rs` `Session::notify_approval` takes off waiting `tx_approve` from `ActiveTurn` through `turn_state.remove_pending_approval` and sends the solution to the model. If the entry is not found, throws a warning via `warn!`, helping to catch inconsistent frontend responses.",
          "tags": [
            "sessions",
            "concurrency",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-session-initial-context",
          "sectionId": "section-sessions",
          "slug": "session-initial-context",
          "name": "Initial context message composition",
          "description": "`core/src/codex.rs` `Session::build_initial_context` adds to the story `UserInstructions::new` (if custom instructions are specified) and `EnvironmentContext::new`, which fixes `cwd`, current `approval_policy`, `sandbox_policy` and selected `user_shell`. These elements are then written by rollout so that any client can see the original move configuration.",
          "tags": [
            "sessions",
            "conversation",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-session-user-rollout",
          "sectionId": "section-sessions",
          "slug": "session-user-message-rollout",
          "name": "User message persistence pipeline",
          "description": "`core/src/codex.rs` `record_input_and_rollout_usermsg` turns `ResponseInputItem` V `ResponseItem`, writes it through `record_conversation_items`and then using `map_response_item_to_event_messages` filters only `EventMsg::UserMessage` and saves them `persist_rollout_items`. This way, history and JSONL always contain user replicas without duplicating other events.",
          "tags": [
            "sessions",
            "history",
            "persistence",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-session-token-telemetry",
          "sectionId": "section-sessions",
          "slug": "session-token-telemetry",
          "name": "Token and rate-limit telemetry",
          "description": "`core/src/codex.rs` `update_token_usage_info`, `update_rate_limits` And `set_total_tokens_full` synchronize `SessionState`: update `TokenUsageInfo` from the model response, save `RateLimitSnapshot`, exhibit `set_token_usage_full` when the window is full and after each call they send `EventMsg::TokenCount` with current counters. This provides UI and SDK realtime indicators of token consumption.",
          "tags": [
            "sessions",
            "telemetry",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.57
        },
        {
          "id": "aspect-codex-session-pending-input",
          "sectionId": "section-sessions",
          "slug": "session-pending-input",
          "name": "Pending input queue for live turns",
          "description": "`core/src/codex.rs` `turn_input_with_history` returns the concatenation of the current history and temporary messages, `inject_input` adds additional `InputItem` V `TurnState::push_pending_input`, A `get_pending_input` issues and clears the accumulated buffer. If there is no task, `inject_input` returns the original vector. This allows thread completion of progress and graceful handling of user input between events.",
          "tags": [
            "sessions",
            "concurrency",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        },
        {
          "id": "aspect-codex-session-background-events",
          "sectionId": "section-sessions",
          "slug": "session-background-events",
          "name": "Background and stream error helpers",
          "description": "`core/src/codex.rs` `notify_background_event` And `notify_stream_error` wrap messages in `EventMsg::BackgroundEvent` And `EventMsg::StreamError` and give them away through `send_event`so that rollout and clients receive synchronous notifications about diagnostics and thread failures. Unification of helpers simplifies logging and reuse of messages in the executor.",
          "tags": [
            "sessions",
            "telemetry",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.49
        },
        {
          "id": "aspect-codex-session-mcp-bridge",
          "sectionId": "section-sessions",
          "slug": "session-mcp-bridge",
          "name": "Session MCP tool bridge",
          "description": "`core/src/codex.rs` `parse_mcp_tool_name` And `call_tool` delegate `McpConnectionManager`: resolve qualified name `server__tool` and perform RPCs with configuration timeouts. Thanks to this, MCP calls go through a single Codex session, reusing already raised connections.",
          "tags": [
            "sessions",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-core-test-prompt-caching",
          "sectionId": "section-sessions",
          "slug": "core-prompt-caching-test",
          "name": "Prompt caching request payload tests",
          "description": "`core/tests/suite/prompt_caching.rs` checks Requests API payloads: `codex_mini_latest_tools` ensures that tools and instructions are sent once and reused, and `send_user_turn_with_changes_sends_environment_context` confirms that changing sandbox/model adds a new one `<environment_context>` block.",
          "tags": [
            "testing",
            "sessions",
            "history",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/prompt_caching.rs",
              "sha256": "b5eb9903de6797e1779059c846871944ce77a040a3a74f834e37b4fc7fb88af3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-exec-test-resume",
          "sectionId": "section-sessions",
          "slug": "exec-resume-test",
          "name": "CLI resume rollout persistence tests",
          "description": "`exec/tests/suite/resume.rs` looks for JSONL stories with markers and makes sure that `resume --last` And `resume <id>` append the same file, saving configuration overrides (model, sandbox) and reflecting them in stderr.",
          "tags": [
            "testing",
            "sessions",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/resume.rs",
              "sha256": "e9e3afd8322ed94e2477f038911cddb56a04fa8087ec7f37f9bf5642b061a415"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-auto-compact-sse-tests",
          "sectionId": "section-sessions",
          "slug": "auto-compact-sse-tests",
          "name": "Auto-compaction SSE regression tests",
          "description": "Integrations into `project/Codex/codex-rs/core/tests/suite/compact.rs` simulate Responses API and test `Op::Compact`: `summarize_context_three_requests_and_instructions` makes sure the second request contains `SUMMARIZATION_PROMPT` and text about exceeding tokens, `retry_compact_drops_oldest_history_item` checks for history truncation before retray, and `auto_compact_allows_multiple_attempts_when_interleaved_with_other_turn_events` ensures that auto-collapse does not emit unnecessary lifecycle events. This ensures that the context is correctly collapsed before the next moves.",
          "tags": [
            "history",
            "sessions",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact.rs",
              "sha256": "bde9c482ee7cc3e3c82a8429a982302d527619b7c6370ef620f5ae70ee753789"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-compact-resume-fork-tests",
          "sectionId": "section-sessions",
          "slug": "compact-resume-fork-tests",
          "name": "Compact  resume  fork history tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/compact_resume_fork.rs` runs the script compact -> resume -> fork. `compact_resume_and_fork_preserve_model_history_view` compares contents `input` in three requests to the mock server, confirming that the history after the summary and fork remains the prefix of the compacted version, and `mount_second_compact_flow` checks for refolding after branching. Helpers `resume_conversation` And `fork_conversation` read `ConversationPathResponseEvent`to operate with rollout files. Tests ensure the consistency of history during restores and branches.",
          "tags": [
            "history",
            "sessions",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact_resume_fork.rs",
              "sha256": "2691cd60dea4628204258d74980c1870030d65f35a6aecf892942f89cb55e6b9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-fork-conversation-tests",
          "sectionId": "section-sessions",
          "slug": "fork-conversation-tests",
          "name": "Fork thread tests",
          "description": "`core/tests/suite/fork_thread.rs` exercises `ThreadManager::fork_thread`, reads rollout JSONL, and verifies that forks truncate history before the requested user message. The test confirms branching behavior for the thread-based API.",
          "tags": [
            "history",
            "sessions",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/fork_thread.rs",
              "sha256": "e910638531a58aa1ae421813503e90d621965337443d09fe40bd868293bf91e2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-responses-stream-error-retry",
          "sectionId": "section-sessions",
          "slug": "responses-stream-error-retry",
          "name": "Responses stream error recovery",
          "description": "`core/tests/suite/stream_error_allows_next_turn.rs` mock Responses API: first call `responses` returns 500, then successful SSE. The provider was created with `request_max_retries=1` And `stream_idle_timeout`. The test is waiting `EventMsg::Error`, `EventMsg::TaskComplete`, after which the second call succeeds, confirming that Codex clears the turn state and does not block subsequent requests after a network failure.",
          "tags": [
            "sessions",
            "testing",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/stream_error_allows_next_turn.rs",
              "sha256": "670a00ecb5efe715ccbb1c1015cb1e593a6bef22efdefc568ac1c559c76b290d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-responses-incomplete-retry",
          "sectionId": "section-sessions",
          "slug": "responses-incomplete-retry",
          "name": "Responses SSE retry on incomplete stream",
          "description": "`core/tests/suite/stream_no_completed.rs` uses `SeqResponder`, which first gives SSE without `response.completed`, then a full stream. The provider is configured with `stream_max_retries=1`. The test makes sure that the first attempt completes without `TaskComplete`, after the retray comes `EventMsg::TaskComplete`, so Codex correctly restarts Responses requests when a stream is closed early.",
          "tags": [
            "sessions",
            "testing",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/stream_no_completed.rs",
              "sha256": "52dfdddda9da486e823a6332f262bb76829044f78313db1449a0bf1f188fbd42"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-interrupt-turn-abort-test",
          "sectionId": "section-sessions",
          "slug": "interrupt-turn-abort-test",
          "name": "Interrupt long tool emits TurnAborted",
          "description": "IN `core/tests/suite/abort_tasks.rs` the mocked Responses thread calls the function `shell` With `sleep 60`. The test is waiting `EventMsg::ExecCommandBegin`, sends `Op::Interrupt` and checks what comes `EventMsg::TurnAborted`. This ensures that long tools release the session after cancellation and do not leave `Task` frozen.",
          "tags": [
            "sessions",
            "testing",
            "exec"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/abort_tasks.rs",
              "sha256": "e035893caf5b2f590f6526058ba718e98af44b6dced7fb79ec28de13e490c082"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.57
        },
        {
          "id": "aspect-list-resume-pagination",
          "sectionId": "section-sessions",
          "slug": "list-resume-pagination",
          "name": "List/resume pagination integration",
          "description": "`app-server/tests/suite/list_resume.rs` generates three rollout files, calls `listConversations` with pagination, checks sorting (newest first) and continuation cursor. Next `resumeConversation` with overrides model awaits `sessionConfigured` and validates the UUID. The test closes the UX IDE upon selection and continuation of sessions.",
          "tags": [
            "sessions",
            "testing",
            "persistence"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/list_resume.rs",
              "sha256": "411da5c8ea241c2e954087a850fab2cd6f5614db080a4a91d593730c1eeb3ff4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-conversation-id-type",
          "sectionId": "section-sessions",
          "slug": "conversation-id-type",
          "name": "ThreadId (ConversationId alias)",
          "description": "`protocol/src/thread_id.rs` defines `ThreadId` as a UUID v7 wrapper with Display/Serialize/Deserialize and JsonSchema support; `ConversationId` is a deprecated type alias for backward compatibility. This keeps thread identifiers consistent across protocols and storage.",
          "tags": [
            "sessions",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/thread_id.rs",
              "sha256": "06c448aed0b21448c4847bb02bd10e59fe2caffb81f05ad11e4f937a3fa70eff"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        }
      ]
    },
    {
      "id": "section-tools",
      "slug": "tools",
      "title": "Tools",
      "entries": [
        {
          "id": "aspect-tools-index",
          "sectionId": "section-tools",
          "slug": "tools-index",
          "name": "Tools core index",
          "description": " manages the registration of tools, and  defines the execpolicy policy. The entry serves as an input to the update of instrumental subsystems and approvals.",
          "tags": [
            "tooling-core",
            "tools",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/mod.rs",
              "sha256": "395098987bd4340d36d1fde68ca463a7460066454d61df07fcec0a557f0666dd"
            },
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/lib.rs",
              "sha256": "28803d505603ac95c345c79e279d2938faa7f05c6a57468f9f931e632f3fb7d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-tool-router",
          "sectionId": "section-tools",
          "slug": "tool-router",
          "name": "Tool router dispatch",
          "description": "`core/src/tools/router.rs` builds tool calls: `from_config` collects `ConfiguredToolSpec` And `ToolRegistry`, `build_tool_call` distinguishes MCP (`session.parse_mcp_tool_name`), `unified_exec` And `local_shell`, forming `ToolPayload`. `dispatch_tool_call` wraps execution by returning `ResponseInputItem` or synthetic error. The layer routes every function and command in the model.",
          "tags": [
            "mcp",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/router.rs",
              "sha256": "7b483edc04bd1bc10bbae2c78b58543c63ec7c74e3e60b20ff12d4133b31c4bf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-tool-registry",
          "sectionId": "section-tools",
          "slug": "tool-registry",
          "name": "Tool registry telemetry guard",
          "description": "`core/src/tools/registry.rs` registers handlers: `ToolRegistry::dispatch` checks payload via `ToolHandler::matches_kind`, logs execution via OTEL (`log_tool_result`) and converts `ToolOutput` V `ResponseInputItem`. Builder manages `ConfiguredToolSpec` and warns about name collisions. The circuit ensures that only supported instruments are played and tracked.",
          "tags": [
            "rust",
            "telemetry",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/registry.rs",
              "sha256": "b26e9072249dc6a83158cad9fce985e4651fe2d21c8e688d50a44509db5c4e05"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-codex-exec-stream-handler",
          "sectionId": "section-tools",
          "slug": "exec-stream-handler",
          "name": "Exec stream function bridge",
          "description": "`core/src/exec.rs` emits `ExecCommandOutputDelta` events while reading stdout/stderr with caps, and `core/src/unified_exec/async_watcher.rs` streams PTY output, emitting deltas and a final ExecCommandEnd event from the aggregated transcript. This replaces the old exec_stream handler for both shell and unified_exec.",
          "tags": [
            "exec",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec.rs",
              "sha256": "4549d2f8028167f6aaa6767d25f16d3c67d8ee9f6afd30a0eca17fa367136cbf"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/unified_exec/async_watcher.rs",
              "sha256": "6304f7089aa712aeba3559f9911b32992473618368e34c64b13db17185565dd0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-codex-unified-exec-handler",
          "sectionId": "section-tools",
          "slug": "unified-exec-handler",
          "name": "Unified exec handler serialization",
          "description": "`core/src/tools/handlers/unified_exec.rs` adapts `ToolPayload::UnifiedExec`: deserializes input/session_id/timeout, validates `session_id`, causes `session.run_unified_exec_request` and serializes `UnifiedExecResult` in JSON. Errors are returned in `FunctionCallError::RespondToModel`, which closes the unified exec loop for the model.",
          "tags": [
            "exec",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/unified_exec.rs",
              "sha256": "8971bfd84b1b844953078492351505235411937d1a6dc8207972450b29ca79a1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-codex-plan-handler",
          "sectionId": "section-tools",
          "slug": "plan-handler",
          "name": "Structured plan update handler",
          "description": "`core/src/tools/handlers/plan.rs` describes a function `update_plan`: `PLAN_TOOL` publishes JSON Schema for a list of steps with statuses, and `PlanHandler::handle` parses `UpdatePlanArgs` and sends `EventMsg::PlanUpdate` per session. This allows clients to display the model plan and track progress.",
          "tags": [
            "plan",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/plan.rs",
              "sha256": "0322c91167b8181231c896d0a284b4060f02a0c0b79df7833d041ba5ebc8f24f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-read-file-handler",
          "sectionId": "section-tools",
          "slug": "read-file-handler",
          "name": "Indentation-aware read_file tool",
          "description": "`core/src/tools/handlers/read_file.rs` implements `read_file`: arguments support `mode` Slice/Indentation, absolute path and limit validation. In indentation mode `indentation::read_block` draws out a block around the anchor, taking into account padding, comments and maximum depth. The returned text is trimmed to line lengths, allowing the agent to see the context of the function without unnecessary noise.",
          "tags": [
            "filesystem",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/read_file.rs",
              "sha256": "1112638974d0b6cdcea644ea5abed62a1ed0769d03ed056da079b72dee697772"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-list-dir-handler",
          "sectionId": "section-tools",
          "slug": "list-dir-handler",
          "name": "Recursive list_dir formatter",
          "description": "`core/src/tools/handlers/list_dir.rs` traverses directories using BFS mode: `collect_entries` collects maximum `depth` levels, sorts and forms a display tree with indent=2 spaces and a name limit of 500 bytes. The arguments check for absolute path, 1-index offset, and limit. A summary with a title is returned `Absolute path`, which gives the agent stable navigation through the project.",
          "tags": [
            "filesystem",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/list_dir.rs",
              "sha256": "468e6f6f47d78806240e531ca6ca78e5a584c3366e6e1d2121578a4f980c3d69"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.59
        },
        {
          "id": "aspect-codex-grep-files-handler",
          "sectionId": "section-tools",
          "slug": "grep-files-handler",
          "name": "ripgrep-backed grep_files tool",
          "description": "`core/src/tools/handlers/grep_files.rs` launches `rg --files-with-matches` with 30 second timeout: normalizes `pattern`, limits results `MAX_LIMIT=2000`, supports `--glob` include and `turn.resolve_path`. Returns in case of errors `FunctionCallError::RespondToModel`, in case of timeout - a separate message. This gives the model a quick index of the matches in the project.",
          "tags": [
            "rust",
            "search",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/grep_files.rs",
              "sha256": "31b709517e2851cbe1c212a963eff00a7c860b5f87514b22fb6df38909e4504a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-shell-handler",
          "sectionId": "section-tools",
          "slug": "shell-handler",
          "name": "Shell handler env policy bridge",
          "description": "`core/src/tools/handlers/shell.rs` transforms `ShellToolCallParams` V `ExecParams`: resolves the working directory via `TurnContext`, collects env via `create_env` and calls `handle_container_exec_with_params` for Function and LocalShell payload. Combines processing of JSON arguments and local shell calls, preserving the escalation and sandbox policy.",
          "tags": [
            "exec",
            "rust",
            "shell",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/shell.rs",
              "sha256": "3a24950e161fbba8c8675ef8f1ce267c2ad96f08f24d71757ef0b8bfbf2fc4d2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-codex-tool-context",
          "sectionId": "section-tools",
          "slug": "tool-context",
          "name": "Tool payload/output telemetry shaping",
          "description": "`core/src/tools/context.rs` describes `ToolInvocation`, `ToolPayload` And `ToolOutput`: `log_payload`/`log_preview` cut off lines through `TELEMETRY_PREVIEW_*`, `into_response` converts to `ResponseInputItem`, following the Custom vs Function answer. This is the central layer that logs calls, limits noise and ensures correct telemetry.",
          "tags": [
            "rust",
            "telemetry",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/context.rs",
              "sha256": "5f9812870316475f4f575b9f1cbc674227bdff53c9438a46f8702e496903296a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.67
        },
        {
          "id": "aspect-codex-tool-parallel-runtime",
          "sectionId": "section-tools",
          "slug": "tool-parallel-runtime",
          "name": "Tool parallelism coordinator",
          "description": "`core/src/tools/parallel.rs` enters `ToolCallRuntime`: determines whether the tool supports parallel operation (`tool_supports_parallel`) and through `tokio_util::either::Either` takes read or write lock (`RwLock`) for serialization. Wraps tasks in `AbortOnDropHandle`, turning errors into `CodexErr`. This prevents races between tools that require exclusive access.",
          "tags": [
            "concurrency",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/parallel.rs",
              "sha256": "27913bf0bc7ac1c533538e4b16465d6ada267bea829872f3ef95d01c041107bd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-codex-file-search-ranking",
          "sectionId": "section-tools",
          "slug": "file-search-ranking",
          "name": "Fuzzy file search ranking engine",
          "description": "`codex-rs/file-search/src/lib.rs` uses `ignore::WalkBuilder` And `nucleo_matcher` for fuzz search: `run` creates by worker `BestMatchesList`, parallel tree traversal (hidden included, git optional) and maintains a global heap `BinaryHeap<Reverse<(score, path)>>` with a limit. At `compute_indices = true` recalculates UTF-32 indexes via `Pattern::indices`, sorts and deduplicates. `cancel_flag` is checked every 1024 files, so the request can be instantly canceled when the line changes.",
          "tags": [
            "rust",
            "search",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/file-search/src/lib.rs",
              "sha256": "f5f7ec9a542b767467d639aabd5cf1a87a44d54a8f40eac20f1b2f5f1b99154a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-codex-view-image-tool",
          "sectionId": "section-tools",
          "slug": "view-image-tool",
          "name": "View_image pins local images",
          "description": "`core/src/tools/handlers/view_image.rs` accepts `ToolPayload::Function`, parses JSON into `ViewImageArgs` and through `turn.resolve_path` checks that the path leads to an existing file. A successful call makes `session.inject_input` With `InputItem::LocalImage`, after which it publishes `EventMsg::ViewImageToolCall` with call_id and path. Errors are serialized to `FunctionCallError::RespondToModel`so that the model receives a clear explanation for the failure.",
          "tags": [
            "filesystem",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/view_image.rs",
              "sha256": "6428591601b3cdb6d50b8fb3d25d039025b3dda945a097d73c9388e1e3a2d813"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-test-sync-tool",
          "sectionId": "section-tools",
          "slug": "test-sync-tool",
          "name": "Test_sync coordinates test synchronization",
          "description": "`core/src/tools/handlers/test_sync.rs` disassembles `TestSyncArgs` (delay and barrier) and uses `OnceLock<Mutex<HashMap>>` for storing barriers by id. `wait_on_barrier` creates `tokio::sync::Barrier`, monitors the coincidence of expected participants and removes the recording if the current call is a leader. Timeouts and invalid arguments return immediately `FunctionCallError::RespondToModel`, which turns the tool into a reliable primitive for integration tests.",
          "tags": [
            "concurrency",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/test_sync.rs",
              "sha256": "b807967e2919ec237443851c9af079ee903a35f25be2f49bf8990ca799498c5c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.33
        },
        {
          "id": "aspect-codex-mcp-tool-handler",
          "sectionId": "section-tools",
          "slug": "mcp-tool-handler",
          "name": "MCP handler delegates calls to handle_mcp_tool_call",
          "description": "`core/src/tools/handlers/mcp.rs` accepts only `ToolPayload::Mcp` and sends server/tool/raw_arguments to `handle_mcp_tool_call`. Responses from the kernel are translated into `ToolOutput::Mcp` or `ToolOutput::Function`, and unexpected options collapse into `FunctionCallError::RespondToModel`. Thanks to this, all MCP tools pass through a single adapter and receive the correct events in the session.",
          "tags": [
            "mcp",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/mcp.rs",
              "sha256": "6be7dca7ced94448946ed82b40fe0aafe37f078a27eeb9b107d1c32e307db4dc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-collab-tools",
          "sectionId": "section-tools",
          "slug": "collab-tools",
          "name": "Collab tool specs and handler",
          "description": "`core/src/tools/spec.rs` defines the collab tool schemas (`spawn_agent`, `send_input`, `wait`, `close_agent`): `spawn_agent` accepts `message` and optional `agent_type`, `wait` exposes `timeout_ms` with defaults from `DEFAULT_WAIT_TIMEOUT_MS` and caps at `MAX_WAIT_TIMEOUT_MS`, and `build_specs` registers the collab handler only when `collab_tools` is enabled. `core/src/tools/handlers/collab.rs` parses function payloads, emits `Collab*` begin/end events, applies `AgentRole` overrides when spawning, and uses `agent_control` to spawn, interrupt/send prompts, wait with timeouts, and close agents while translating errors to `FunctionCallError`.",
          "tags": [
            "tools",
            "concurrency",
            "configuration",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/collab.rs",
              "sha256": "1ca7645cb9158a4c7ca3899a5fe77e4979f7e04597f05f88e9b598f0100d82d8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-shell-tool-schema",
          "sectionId": "section-tools",
          "slug": "shell-tool-schema",
          "name": "Shell tool schema for escalations",
          "description": "`create_shell_tool` (`projects/Codex/codex-rs/core/src/tools/spec.rs`) describes freeform shell as a Responses API function: required array `command`, optional `workdir` And `timeout_ms`, plus flags `with_escalated_permissions`/`justification`, requiring an approved explanation for escalation. This makes the CLI command contract explicit and synchronized with the approval policy.",
          "tags": [
            "schema",
            "shell",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-unified-exec-schema",
          "sectionId": "section-tools",
          "slug": "unified-exec-tool-schema",
          "name": "Unified_exec tool function schema",
          "description": "`create_unified_exec_tool` publishes `unified_exec` like function-call: parameter `input` -- array of strings for argv or stdin, `session_id` allows you to reuse PTY, `timeout_ms` limits the wait for output. The same spec is connected to `build_specs`, so the Responses API and TUI receive a single description of the interactive exec.",
          "tags": [
            "pty",
            "schema",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-read-file-schema",
          "sectionId": "section-tools",
          "slug": "read-file-tool-schema",
          "name": "Read_file schema with indentation mode",
          "description": "`create_read_file_tool` defines the scheme `read_file`: required `file_path`, optional `offset`/`limit`, mode `mode` and nested object `indentation` With `anchor_line`, `max_levels`, `include_siblings`, `include_header`, `max_lines`. This allows Codex to highlight rich arguments without manual description in tooltips.",
          "tags": [
            "filesystem",
            "schema",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-list-dir-schema",
          "sectionId": "section-tools",
          "slug": "list-dir-tool-schema",
          "name": "List_dir schema with pagination knobs",
          "description": "`create_list_dir_tool` generates JSON Schema for `list_dir`: `dir_path` required, `offset`, `limit`, `depth` document pagination and depth limitation. Spec is embedded via `builder.push_spec_with_parallel_support`, providing a single API for CLI and cloud clients.",
          "tags": [
            "filesystem",
            "schema",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-codex-grep-files-schema",
          "sectionId": "section-tools",
          "slug": "grep-files-tool-schema",
          "name": "Grep_files tool schema",
          "description": "`create_grep_files_tool` announces `grep_files` like a function tool with fields `pattern`, optional `include`, `path`, `limit`. This scheme allows the Responses API to validate regex requests and explains to the agent how to limit the search by mask and directory.",
          "tags": [
            "schema",
            "search",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-codex-test-sync-schema",
          "sectionId": "section-tools",
          "slug": "test-sync-tool-schema",
          "name": "Test_sync tool schema",
          "description": "`create_test_sync_tool` documents official `test_sync_tool`: global `sleep_before_ms`/`sleep_after_ms` are complemented by a nested object `barrier` with mandatory `id`, `participants` and optional `timeout_ms`. This contract keeps integration tests and parallel agents in sync.",
          "tags": [
            "concurrency",
            "schema",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-codex-view-image-schema",
          "sectionId": "section-tools",
          "slug": "view-image-tool-schema",
          "name": "View_image function schema",
          "description": "`create_view_image_tool` fixes `view_image`: single parameter `path` is described as a local file and the spec disallows additional properties. This ensures that the UI only waits for safe local attachments before calling the handler.",
          "tags": [
            "interface",
            "schema",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.38
        },
        {
          "id": "aspect-codex-tool-build-specs",
          "sectionId": "section-tools",
          "slug": "tool-build-specs",
          "name": "Tool registry build_specs orchestration",
          "description": "`build_specs` collects `ToolRegistryBuilder`: depending on `ToolsConfig` chooses `shell`/`LocalShell`/streamable pairs, connects plan, apply_patch (freeform or function), experimental `grep_files`/`read_file`/`list_dir`/`test_sync_tool`, web_search and view_image. MCP tools are sorted by name and registered by the same handler, so the set of available tools is always consistent with the model config.",
          "tags": [
            "architecture",
            "rust",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-mcp-tool-conversion",
          "sectionId": "section-tools",
          "slug": "mcp-tool-conversion",
          "name": "MCP tool conversion and schema sanitizing",
          "description": "`mcp_tool_to_openai_tool` adapts MCP descriptions: creates an empty one `properties`, serializes `input_schema`, drives through `sanitize_json_schema` (restores `type`, fills `items`/`properties`, processes `oneOf`/`anyOf`) and returns `ResponsesApiTool`. This allows slightly incorrect schemas from third party MCP servers to be accepted without a serialization error.",
          "tags": [
            "mcp",
            "schema",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-codex-tools-json-export",
          "sectionId": "section-tools",
          "slug": "tools-json-export",
          "name": "Tool JSON export for API modes",
          "description": "`create_tools_json_for_responses_api` serializes `ToolSpec` directly, and `create_tools_json_for_chat_completions_api` filters only functions and repackages them into {\"type\":\"function\",\"function\":...} format. A single Codex spec source serves both API modes without duplicating descriptions.",
          "tags": [
            "integrations",
            "schema",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-tool-experimental-gating",
          "sectionId": "section-tools",
          "slug": "tool-experimental-gating",
          "name": "Experimental Instrument Whitelists",
          "description": "List `experimental_supported_tools` decides whether to add `grep_files`, `read_file`, `list_dir` And `test_sync_tool`: If the tool is whitelisted, builder creates the specifications, enables parallel support, and binds the appropriate handlers.",
          "tags": [
            "configuration",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-stdio-to-uds-bridge",
          "sectionId": "section-tools",
          "slug": "stdio-to-uds-bridge",
          "name": "STDIO to Unix socket bridge",
          "description": "`codex-rs/stdio-to-uds/src/lib.rs` connects to a Unix-domain socket, spawns a reader thread to copy socket output to stdout, streams stdin into the socket, shuts down the write side, and waits for the reader to finish. `cli/src/main.rs` exposes a hidden `stdio-to-uds` subcommand that runs the bridge in a blocking task. This allows MCP servers listening on UDS to be used via stdio.",
          "tags": [
            "tools",
            "cli",
            "mcp"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/stdio-to-uds/src/lib.rs",
              "sha256": "5182b5c2c0df0c819475816446f40e4d6ed4ffc650c0aa9e97fda449c7bbeef6"
            },
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        }
      ]
    },
    {
      "id": "section-execution",
      "slug": "execution",
      "title": "Execution of commands",
      "entries": [
        {
          "id": "aspect-codex-executor-runner",
          "sectionId": "section-execution",
          "slug": "executor-runner",
          "name": "Tool orchestrator pipeline",
          "description": "`core/src/tools/orchestrator.rs` is the unified execution pipeline: it requests approvals, chooses the initial sandbox via `SandboxManager::select_initial`, runs the tool runtime, and retries without sandbox on denial when policy allows. `core/src/tools/sandboxing.rs` supplies `ToolRuntime` and `ExecApprovalRequirement` so shell, unified_exec, and apply_patch share one approval + sandbox flow.",
          "tags": [
            "execution",
            "exec",
            "sandbox",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/orchestrator.rs",
              "sha256": "6f49bd28f0c51fd98a6e85798ba17a4d571bd23a0b5ed1f72aee0bcc3494f93e"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/sandboxing.rs",
              "sha256": "ac32927a6b828136e3340b8a23fe5b0838396a070001fc06a4f9df7b0ce76e80"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.76
        },
        {
          "id": "aspect-codex-unified-exec-session",
          "sectionId": "section-execution",
          "slug": "unified-exec-session-manager",
          "name": "Unified exec session manager",
          "description": "`core/src/unified_exec/mod.rs` implements reusable PTY sessions: `UnifiedExecSessionManager::handle_request` highlights `ManagedUnifiedExecSession`, clamps timeout to 60,000 ms, buffers output to `OutputBufferState` (up to 128 KiB) and returns `UnifiedExecResult`. Streams through `Notify` and broadcast allow you to stream stdout, resume sessions by ID, and cleanly complete tasks.",
          "tags": [
            "execution",
            "exec",
            "rust",
            "pty"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/unified_exec/mod.rs",
              "sha256": "4032b8102fc1398ddaa0214bd38ab2ada168806eaca6c6c0645f7c63cd368476"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.69
        },
        {
          "id": "aspect-codex-exec-session-manager",
          "sectionId": "section-execution",
          "slug": "exec-session-manager",
          "name": "Unified exec session manager",
          "description": "`core/src/unified_exec/process_manager.rs` implements `UnifiedExecProcessManager::exec_command` and `write_stdin`: allocate process IDs, open a sandboxed PTY session, stream output, truncate responses, and register exit watchers. `core/src/unified_exec/mod.rs` defines the request/response structs and process store for active sessions.",
          "tags": [
            "execution",
            "exec",
            "pty",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/unified_exec/process_manager.rs",
              "sha256": "357a1ee8450e8eaf7f86d6da8a59be4587b9598e87d37ba95929bcbcb2e41bd3"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/unified_exec/mod.rs",
              "sha256": "4032b8102fc1398ddaa0214bd38ab2ada168806eaca6c6c0645f7c63cd368476"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-codex-sandbox-decision",
          "sectionId": "section-execution",
          "slug": "sandbox-decision",
          "name": "Sandbox decision engine",
          "description": "`core/src/safety.rs` evaluates patch safety and returns `SafetyCheck` (auto-approve, prompt, reject) based on writable roots and approval policy, while `core/src/tools/orchestrator.rs` selects the initial sandbox and handles escalation on denial. Together they decide when to run inside a sandbox vs request user approval.",
          "tags": [
            "execution",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/safety.rs",
              "sha256": "44026d403c6740eb5f91424ed27ded3f145a8bf855ae6312446bd0baad490e0f"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/orchestrator.rs",
              "sha256": "6f49bd28f0c51fd98a6e85798ba17a4d571bd23a0b5ed1f72aee0bcc3494f93e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.75
        },
        {
          "id": "aspect-codex-executor-backends",
          "sectionId": "section-execution",
          "slug": "execution-backends",
          "name": "Execution backend adapters",
          "description": "`core/src/tools/runtimes/shell.rs` defines `ShellRuntime`, building `CommandSpec`, applying shell snapshots/PowerShell UTF-8 fixes, and executing through `execute_env`. `core/src/tools/runtimes/apply_patch.rs` builds a self-invocation `codex --codex-run-as-apply-patch` with a minimal environment and reuses orchestrator approvals, replacing the old backend adapters.",
          "tags": [
            "execution",
            "apply-patch",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/runtimes/shell.rs",
              "sha256": "6a61b212b48d1917e8e3b1738ce5b9983196cb7d9755d7cfdec777dd0f4b77da"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/runtimes/apply_patch.rs",
              "sha256": "d2a77c73e10b2539e2fd5cc948911ff9b7a84146c62ac2f6509e52b305b34e65"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-container-exec-bridge",
          "sectionId": "section-execution",
          "slug": "container-exec-bridge",
          "name": "handle_container_exec bridge logic",
          "description": "`core/src/tools/mod.rs` function `handle_container_exec_with_params` checks escalation request against `AskForApproval`, recognizes apply_patch via `maybe_parse_apply_patch_verified`, builds `ExecutionMode` Shell/ApplyPatch and runs `run_exec_with_events`. Responses are formatted `format_exec_output_apply_patch`, errors are trimmed `truncate_function_error`. This links the shell tool to the executor and approval pipeline.",
          "tags": [
            "execution",
            "exec",
            "tools",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/mod.rs",
              "sha256": "395098987bd4340d36d1fde68ca463a7460066454d61df07fcec0a557f0666dd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-exec-command-session",
          "sectionId": "section-execution",
          "slug": "exec-command-session",
          "name": "ExecCommandSession lifecycle guards",
          "description": "`core/src/unified_exec/process.rs` wraps `codex_utils_pty::ExecCommandSession` to manage output buffers, exit handling, and sandbox-denial checks for unified exec processes. `utils/pty/src/lib.rs` exposes both PTY and pipe spawn helpers while aliasing `ProcessHandle` as `ExecCommandSession`, so unified exec can track either interactive or piped sessions through the same handle.",
          "tags": [
            "execution",
            "pty",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/unified_exec/process.rs",
              "sha256": "4e22373bbde32cf3e8d39c79b8cb8b9e3f61a89fd760c983fca1985d506a180e"
            },
            {
              "path": "projects/Codex/codex-rs/utils/pty/src/lib.rs",
              "sha256": "95de1ab7ed09a406fa19a90cfbc0c3dd6abf14e8dc32c46c283d6dca391c9f9a"
            },
            {
              "path": "projects/Codex/codex-rs/utils/pty/src/pipe.rs",
              "sha256": "beafbe4c66400b21927b581b9a68d30b860f621c56d998873a21e480ed246c6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-codex-exec-events-schema",
          "sectionId": "section-execution",
          "slug": "exec-events-schema",
          "name": "codex exec JSONL events",
          "description": "`codex-rs/exec/src/exec_events.rs` captures the JSONL format of the stream `codex exec`: enum `ThreadEvent` tags events `thread.*`, `turn.*`, `item.*` And `error`, structures `Usage` And `ThreadItemDetails` set payload for commands, MCP calls, patches and reasoning, and derive `TS` synchronously generates types for the SDK. This is a single source of truth so that the CLI and external clients parse the stream without any discrepancies.",
          "tags": [
            "exec",
            "rust",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/exec_events.rs",
              "sha256": "c71c0cc25e2f2c568b757518d17eff25aac388170033b16f6ba316c02cae1ecd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-exec-jsonl-processor",
          "sectionId": "section-execution",
          "slug": "exec-jsonl-processor",
          "name": "JSONL event processor codex exec",
          "description": "`exec/src/event_processor_with_jsonl_output.rs` transforms `Event` kernels in ThreadEvents: `collect_thread_events` causes `handle_*` processors that start/close `ThreadItem` for commands, MCP calls, patches and reasoning, storing state in maps `running_commands`, `running_mcp_tool_calls` And `running_todo_list`. `handle_plan_update` builds a todo-list from `UpdatePlanArgs`, `handle_session_configured` creates `ThreadStartedEvent`, and completing tasks adds `TurnCompletedEvent` with usage. This is the layer that turns internal Codex events into readable JSONL for the CLI and SDK.",
          "tags": [
            "execution",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/event_processor_with_jsonl_output.rs",
              "sha256": "25055eed5f9eb48b26267f20bba352740a7f2e9a545c727f99c962e1513bf8c4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-command-summary-parser",
          "sectionId": "section-execution",
          "slug": "command-summary-parser",
          "name": "Command summary parser for event stream",
          "description": "`parse_command` normalizes arbitrary commands in `ParsedCommand`: inflates `bash -lc` in flat steps, cuts out auxiliary `cd`, filters `yes`/`printf`, extracts `rg` And `grep` queries with paths, and formatting ones `head`/`tail` marks as reading identical files. This feeds the UX summary of executions and helps Codex explain its actions.",
          "tags": [
            "execution",
            "shell",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/parse_command.rs",
              "sha256": "55dcf0c8068fe3a2b80efde33e6c01beed47671b481c47b942a822e52a4ef655"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.61
        },
        {
          "id": "aspect-codex-exec-sandbox-dispatch",
          "sectionId": "section-execution",
          "slug": "exec-sandbox-dispatch",
          "name": "Exec tool sandbox dispatcher",
          "description": "`core/src/exec.rs` routes `process_exec_tool_call`: By `SandboxType` selects direct launch, Seatbelt or landlock binary, creates child via `spawn_command_under_*`and then reads stdout/stderr streamed through `consume_truncated_output` with a limit `MAX_EXEC_OUTPUT_DELTAS_PER_CALL`. Code normalizes `ExitStatus`, marks timeouts `EXEC_TIMEOUT_EXIT_CODE`, and through `is_likely_sandbox_denied` detects sandbox failure using signals and text. Thanks to this, the tool `exec` gives consistent errors and supports different sandboxes without duplicating logic.",
          "tags": [
            "execution",
            "exec",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec.rs",
              "sha256": "4549d2f8028167f6aaa6767d25f16d3c67d8ee9f6afd30a0eca17fa367136cbf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "id": "aspect-codex-exec-command-defaults",
          "sectionId": "section-execution",
          "slug": "exec-command-defaults",
          "name": "Exec command default parameters",
          "description": "`core/src/tools/handlers/unified_exec.rs` sets defaults for `exec_command` arguments: `yield_time_ms` defaults to 10000, `login` defaults to true, `tty` to false, and `write_stdin` defaults to a 250ms poll. These defaults keep unified exec behavior stable when the model omits optional fields.",
          "tags": [
            "execution",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/unified_exec.rs",
              "sha256": "8971bfd84b1b844953078492351505235411937d1a6dc8207972450b29ca79a1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-prepared-exec-linker",
          "sectionId": "section-execution",
          "slug": "prepared-exec-linker",
          "name": "Tool invocation and output glue",
          "description": "`core/src/tools/context.rs` defines `ToolInvocation` (session, turn, tracker, call id, tool name, payload) and `ToolOutput`, with `into_response` converting tool results into `ResponseInputItem` while preserving custom tool outputs. This links tool execution to response events without duplicating assembly logic.",
          "tags": [
            "execution",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/context.rs",
              "sha256": "5f9812870316475f4f575b9f1cbc674227bdff53c9438a46f8702e496903296a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-exec-begin-events",
          "sectionId": "section-execution",
          "slug": "exec-begin-events",
          "name": "Exec command begin event emission",
          "description": "`core/src/codex.rs` `on_exec_command_begin` distinguishes between shell and `apply_patch`: for patch marks `auto_approved` and passes the diff to `TurnDiffTracker::on_patch_begin`, for a regular command publishes `EventMsg::ExecCommandBegin` With `command_for_display`, `cwd` and analysis `parse_command`.        ,   stdout.",
          "tags": [
            "execution",
            "exec",
            "telemetry",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-run-exec-events",
          "sectionId": "section-execution",
          "slug": "run-exec-events",
          "name": "run_exec_with_events wraps executor output",
          "description": "`core/src/codex.rs` `run_exec_with_events` emits begin-event, calls `Executor::run`, normalizes the result through `normalize_exec_result` and always sends `ExecCommandEnd` or `PatchApplyEnd`, complementing apply_patch with a unit `TurnDiff` if there is unified diff. The original is returned `ExecToolCallOutput`/error, so the event pipeline and data for the model are synchronized.",
          "tags": [
            "execution",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-codex-shell-translation",
          "sectionId": "section-execution",
          "slug": "exec-shell-translation",
          "name": "Shell argv derivation and snapshot wrap",
          "description": "`core/src/shell.rs` `Shell::derive_exec_args` builds argv for POSIX shells (`-c`/`-lc`), PowerShell, and cmd based on the selected shell type. `core/src/tools/runtimes/mod.rs` `maybe_wrap_shell_lc_with_snapshot` rewrites `-lc` to source a shell snapshot before executing, keeping login-shell semantics and snapshots aligned.",
          "tags": [
            "execution",
            "shell",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/shell.rs",
              "sha256": "cb2cdf46ecae0b5898d105a0f1629877a04ca2c9270d3f57e2dd9c8a25d34430"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/runtimes/mod.rs",
              "sha256": "e8b5b3908249057a0249d8c169a373534efeb19db34ad0b2a1b600485f0d3012"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-normalize-exec",
          "sectionId": "section-execution",
          "slug": "normalize-exec-result",
          "name": "normalize_exec_result synthesizes failures",
          "description": "`core/src/exec.rs::finalize_exec_result` normalizes raw exec output into `ExecToolCallOutput`, turns timeouts into `SandboxErr::Timeout`, and flags likely sandbox denials via `is_likely_sandbox_denied`. This keeps exec end events consistent with errors and aggregated output.",
          "tags": [
            "execution",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec.rs",
              "sha256": "4549d2f8028167f6aaa6767d25f16d3c67d8ee9f6afd30a0eca17fa367136cbf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-exec-delta-stream",
          "sectionId": "section-execution",
          "slug": "exec-output-deltas",
          "name": "Exec output delta streaming cap",
          "description": "`core/src/exec.rs` structure `StdoutStream` And `read_capped` send `EventMsg::ExecCommandOutputDelta` marked stdout/stderr until the counter reaches `MAX_EXEC_OUTPUT_DELTAS_PER_CALL = 10_000`. In parallel, each read is buffered in `aggregate_tx`so that the final `ExecToolCallOutput` contained the full text. The limit protects the UI and the network from endless streams without losing the final result.",
          "tags": [
            "execution",
            "exec",
            "telemetry",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec.rs",
              "sha256": "4549d2f8028167f6aaa6767d25f16d3c67d8ee9f6afd30a0eca17fa367136cbf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-codex-executor-env-update",
          "sectionId": "section-execution",
          "slug": "executor-env-update",
          "name": "Shell environment policy filtering",
          "description": "`core/src/exec_env.rs` `create_env` applies `ShellEnvironmentPolicy` (inherit mode, default secret filters, custom excludes, include_only, and overrides) to build the env map passed to child processes after `env_clear`. This controls which variables leak into exec runs.",
          "tags": [
            "execution",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec_env.rs",
              "sha256": "7ac1bd5fc8b28af261d348f18e8738551f61c36532f1f00531c02047255eaecd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-execpolicy-arg-resolver",
          "sectionId": "section-execution",
          "slug": "execpolicy-arg-resolver",
          "name": "Pattern parsing and example validation",
          "description": "`execpolicy/src/parser.rs` resolves pattern tokens and example commands: `parse_pattern` enforces non-empty tokens, `parse_examples` uses `shlex` to split string examples, and errors are raised for invalid token types. This is the argument-resolution layer for Starlark-defined rules.",
          "tags": [
            "sandbox",
            "security",
            "execution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/parser.rs",
              "sha256": "7fd3fb4161a6bf2e930b3f713748ffff896b50a915875ad244562f6f8e237ce7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-execpolicy-starlark-parser",
          "sectionId": "section-execution",
          "slug": "execpolicy-starlark-parser",
          "name": "Starlark parser execpolicy",
          "description": "`execpolicy/src/parser.rs` parses rule files using a Starlark dialect with `prefix_rule` builtins, builds `PrefixRule` structures, and validates `match`/`not_match` examples before producing a `Policy`.",
          "tags": [
            "execution",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/parser.rs",
              "sha256": "7fd3fb4161a6bf2e930b3f713748ffff896b50a915875ad244562f6f8e237ce7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-execpolicy-program-spec",
          "sectionId": "section-execution",
          "slug": "execpolicy-program-spec",
          "name": "Execpolicy rule evaluation",
          "description": "`execpolicy/src/policy.rs` groups rules by program and evaluates commands into an `Evaluation` with a `Decision` and matched rules, using prefix rules keyed by the first token. `execpolicy/src/decision.rs` defines the Allow/Prompt/Forbidden ordering used to aggregate results.",
          "tags": [
            "execution",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/policy.rs",
              "sha256": "c933f355f7f50a03f6641645f69036b7c2a1e017346c39a86b537feb48ac2772"
            },
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/decision.rs",
              "sha256": "b0b82fff854a73c4ab95b330d51cfa65e77f4a13ab4d5eaa9e01e08e70ed59c2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.75
        },
        {
          "id": "aspect-execpolicy-arg-matchers",
          "sectionId": "section-execution",
          "slug": "execpolicy-arg-matchers",
          "name": "Prefix rule matchers",
          "description": "`execpolicy/src/rule.rs` defines `PatternToken` (single or alternatives), `PrefixPattern` matching, and `RuleMatch` payloads with optional justification. It also validates example matches to ensure rules cover allowed and forbidden command examples.",
          "tags": [
            "execution",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/rule.rs",
              "sha256": "58fe201c0b2eb91f3305ad3278b341d01bfb868c38c36f7c37d66bba871a96ed"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-execpolicy-execv-checker",
          "sectionId": "section-execution",
          "slug": "execpolicy-execv-checker",
          "name": "Execpolicy manager and amendments",
          "description": "`core/src/exec_policy.rs` loads `.rules` files, evaluates commands, and maps `Decision` into `ExecApprovalRequirement` (including proposed execpolicy amendments). `execpolicy/src/amend.rs` appends `prefix_rule` entries to `default.rules` with file locking so approved commands persist.",
          "tags": [
            "execution",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/exec_policy.rs",
              "sha256": "1694d411103d9f1d087e72b5d2e59bdde753a3b8eb1b0999030fef9488e48524"
            },
            {
              "path": "projects/Codex/codex-rs/execpolicy/src/amend.rs",
              "sha256": "30df14952acb04a5890f7d192a6d7749bbbdcbcbd3d40956bd71351b0236d2dc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.75
        },
        {
          "id": "aspect-core-test-exec-stream-events",
          "sectionId": "section-execution",
          "slug": "core-exec-stream-events-test",
          "name": "Unified exec stream event tests",
          "description": "`core/tests/suite/unified_exec.rs` exercises `ExecCommandBegin`, `ExecCommandOutputDelta`, `TerminalInteraction`, and `ExecCommandEnd` events for unified exec sessions, asserting process ids, streamed markers, and end-state metadata. It also validates behavior across write_stdin polling and timeouts.",
          "tags": [
            "testing",
            "execution",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/unified_exec.rs",
              "sha256": "b3150a88f81f1dc633261078858d22c47c5dcf383dfe2dc2479b9a2a5af3f4c9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.57
        },
        {
          "id": "aspect-exec-test-output-schema",
          "sectionId": "section-execution",
          "slug": "exec-output-schema-test",
          "name": "Output schema request formatting test",
          "description": "`exec/tests/suite/output_schema.rs` creates `schema.json`, launches `codex-exec --output-schema` and checks the request body that `text.format` contains a strict descriptor `codex_output_schema` with the passed JSON Schema.",
          "tags": [
            "testing",
            "execution",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/output_schema.rs",
              "sha256": "0fd257ae28d062ff39d17a2e888789f9ea4000189b32a7bf0b3240d190d24f52"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        },
        {
          "id": "aspect-unified-exec-tool-tests",
          "sectionId": "section-execution",
          "slug": "unified-exec-tool-tests",
          "name": "Unified exec tool session tests",
          "description": "IN `project/Codex/codex-rs/core/tests/suite/unified_exec.rs` The unified_exec experimental tool is being tested. `unified_exec_reuses_session_via_stdin` feeds empty stdin to the second function and makes sure the response contains the same `session_id`, A `unified_exec_timeout_and_followup_poll` simulates a timeout and subsequent `poll`, capturing the empty output of the first call and the contents of the second. Helpers `collect_tool_outputs` And `extract_output_text` validate the correct JSON, which protects multi-calls to unified_exec.",
          "tags": [
            "execution",
            "testing",
            "tools",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/unified_exec.rs",
              "sha256": "b3150a88f81f1dc633261078858d22c47c5dcf383dfe2dc2479b9a2a5af3f4c9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-execpolicy-legacy-default",
          "sectionId": "section-execution",
          "slug": "execpolicy-legacy-default",
          "name": "Legacy execpolicy parser and defaults",
          "description": "`codex-rs/execpolicy-legacy/src/lib.rs` re-exports the older Starlark-based policy engine (arg matchers, program specs, `ExecvChecker`) and exposes `get_default_policy`, which parses the embedded `default.policy` via `PolicyParser`. This keeps the legacy matcher and default policy available alongside the newer execpolicy implementation.",
          "tags": [
            "execution",
            "exec",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy-legacy/src/lib.rs",
              "sha256": "4aeed1b241866eefa610a4d646f768dbd0f47b200442c15b9f5097ceae462cfe"
            },
            {
              "path": "projects/Codex/codex-rs/execpolicy-legacy/src/default.policy",
              "sha256": "f5cd2c753c661804e93c698f806a9ac9eea29a088840b02793fff413d271e41a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        }
      ]
    },
    {
      "id": "section-integrations",
      "slug": "integrations",
      "title": "Integrations",
      "entries": [
        {
          "id": "aspect-codex-app-server-protocol",
          "sectionId": "section-integrations",
          "slug": "app-server-protocol",
          "name": "App server JSON-RPC protocol",
          "description": "`app-server-protocol/src/protocol/common.rs` defines the `client_request_definitions!` macro that generates `ClientRequest` and exports TS schemas, while `protocol/v2.rs` declares the v2 request/response types shared with the IDE. These files are the Rust/TypeScript contract for app-server JSON-RPC.",
          "tags": [
            "app-server",
            "integrations",
            "rust",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/common.rs",
              "sha256": "e77676433444c4fe1ecb0ce2d11990401b3b383d7c68bfbda309967fce7d93a0"
            },
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v2.rs",
              "sha256": "20f05d1df52e83d18418e05d6e8ba8c6cae5da7c03f665b8c7e86ce364be91ca"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-backend-client-path-style",
          "sectionId": "section-integrations",
          "slug": "backend-client-path-style",
          "name": "Backend client path style detection",
          "description": "`codex-rs/backend-client/src/client.rs` normalizes base_url and HTTP headers: `Client::new` adds `/backend-api` for ChatGPT hosts, calculates `PathStyle` and builds `reqwest::Client`. `headers()` injectitis `USER_AGENT`, bearer token and `ChatGPT-Account-Id`. Methods `list_tasks`, `get_task_details_with_body`, `create_task` choose `/api/codex/...` or `/wham/...`, throw limit/filter and check the status in `exec_request`/`decode_json`. This is how the CLI talks correctly to both Codex and the ChatGPT backend.",
          "tags": [
            "backend-sdk",
            "cli",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/backend-client/src/client.rs",
              "sha256": "8fb2865b4d5bb539aff1e886f3ff69617c6cc3b1301f9e73344be9ec3f921881"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-backend-task-turn-parser",
          "sectionId": "section-integrations",
          "slug": "backend-task-turn-parser",
          "name": "Cloud task turn parser helpers",
          "description": "`backend-client/src/types.rs` expands the complex responses of Cloud Tasks: `CodeTaskDetailsResponse` stores active user/assistant/diff turn, `Turn` And `TurnItem` are deserialized tolerantly but through `deserialize_vec`, A `ContentFragment::text` filters empty chunks. Extension `CodeTaskDetailsResponseExt` pulls out unified diff, assistant texts, user prompt and errors (`TurnError::summary`) so that the CLI can quickly show the diff and diagnosis of a problem without manually crawling the JSON.",
          "tags": [
            "backend-client",
            "cli",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/backend-client/src/types.rs",
              "sha256": "6f64eb61896561c409b32d32bdac0c0d0a61d3a8b695dde590e36b5918e54919"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.51
        },
        {
          "id": "aspect-chat-completions-bridge",
          "sectionId": "section-integrations",
          "slug": "chat-completions-bridge",
          "name": "Chat Completions compatibility bridge",
          "description": "`core/src/client.rs::stream_chat_completions` builds a chat-completions prompt, converts tool specs with `create_tools_json_for_chat_completions_api`, and maps the stream into the same `ResponseStream` shape as Responses API (aggregated or streaming depending on config). This is the compatibility bridge for Chat providers.",
          "tags": [
            "backend-sdk",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-codex-chatgpt-direct-client",
          "sectionId": "section-integrations",
          "slug": "chatgpt-direct-client",
          "name": "ChatGPT backend direct client",
          "description": "`chatgpt/src/chatgpt_client.rs` implements `chatgpt_get_request`: initializes the token via `init_chatgpt_token_from_auth`, extracts `account_id` from `get_chatgpt_token_data`, creates `reqwest` client and sends a request to `chatgpt_base_url`adding a bearer and a header `chatgpt-account-id`. Deserialization and status errors unfold in `anyhow::Context`, so the CLI receives expanded messages on failures and a prompt to re-login if the token is missing.",
          "tags": [
            "auth",
            "backend-client",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/chatgpt/src/chatgpt_client.rs",
              "sha256": "765ad78c99194c3d909e144b62a0922b41934d3484601aa379b4ffc9344c3d75"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "sectionId": "section-integrations",
          "id": "aspect-cloud-tasks-api-contract",
          "slug": "cloud-tasks-api-contract",
          "name": "CloudBackend trait describes a REST contract",
          "description": "`codex-rs/cloud-tasks-client/src/api.rs` describes the client contract: transfers `TaskStatus`/`AttemptStatus` normalize the backend, `TaskSummary` And `ApplyOutcome` carry diff metrics and messages, and the trait `CloudBackend` methods like `list_tasks`, `apply_task_preflight`, `get_task_diff` And `create_task`. The CLI implements this trait for both HTTP and mocks.",
          "tags": [
            "cli",
            "cloud-tasks",
            "cloud-tasks-client",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks-client/src/api.rs",
              "sha256": "744a192de390df0a9da4961d6279ef99f7419bfcded9fe23ed2acebc8bd84a62"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-cloud-tasks-http-client",
          "sectionId": "section-integrations",
          "slug": "cloud-tasks-http-client",
          "name": "HttpClient bridges Codex Cloud Tasks",
          "description": "`codex-rs/cloud-tasks-client/src/http.rs` wraps `backend::Client`: methods `with_bearer_token`/`with_chatgpt_account_id` clone the client with new headers, and `Tasks::list` causes `backend.list_tasks` and converts the strings to `TaskSummary` through `map_task_list_item_to_summary`. `details_with_body` picks up `CodeTaskDetailsResponseExt`, extracts unified diff or text from JSON body, `extract_assistant_messages_from_body` works on top `output_items`, and errors are logged in `error.log` through `append_error_log`. Thus, the CLI receives diff and messages even when the backend schema changes.",
          "tags": [
            "cloud-tasks",
            "cloud-tasks-client",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks-client/src/http.rs",
              "sha256": "1dde59b3c1d34b53bc3a03b77fca7a2c35d55b6b658c12642a553ab25469a6ea"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-integrations-index",
          "sectionId": "section-integrations",
          "slug": "integrations-index",
          "name": "Integrations core overview",
          "description": "Critical: `core/src/model_provider_info.rs` connects Responses/Chat providers with CLI configuration, `backend-client/src/lib.rs` holds the Codex HTTP client, and `cloud-tasks/src/lib.rs` covers Cloud Tasks integration. `ollama/src/lib.rs` and `lmstudio/src/lib.rs` describe local OSS providers and bootstrapping. This index records where provider schemas and gateways live when adding or updating integrations.",
          "tags": [
            "integrations",
            "backend-client",
            "backend-sdk",
            "responses-api",
            "cloud-tasks",
            "ollama",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/model_provider_info.rs",
              "sha256": "97f99372ce6ed05fbeba2ba4398e09799de0a33aadd55e01c32eeaec7b490130"
            },
            {
              "path": "projects/Codex/codex-rs/backend-client/src/lib.rs",
              "sha256": "0bccd68b3e5b5600b8b8cb55880a384d5b16f901777e8c1dce95f992f3079fa8"
            },
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/src/lib.rs",
              "sha256": "cb87fdb42b6fa09a012c5f67960b24311df9dcc1df25b0b8e73d5226eca545ca"
            },
            {
              "path": "projects/Codex/codex-rs/ollama/src/lib.rs",
              "sha256": "56e0a1783344426f573300360aa1ca42502ae5feb80bf21ddc1a1cf51c07f301"
            },
            {
              "path": "projects/Codex/codex-rs/lmstudio/src/lib.rs",
              "sha256": "30d110d5a2ecb416cd8d1703cb0028b09553efb3d7b5ab19d74d3f23bc8a6eab"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.85
        },
        {
          "id": "aspect-model-provider-registry",
          "sectionId": "section-integrations",
          "slug": "model-provider-registry",
          "name": "Model provider registry and headers",
          "description": "`ModelProviderInfo` describes the providers: `create_request_builder` substitutes API keys, OAuth tokens and custom headers (including values from environment variables), `get_full_url` selects Responses or Chat endpoint and automatically switches ChatGPT to `/backend-api/codex`, A `is_azure_responses_endpoint` detects Azure signatures. This is the core of extensible connections to model APIs.",
          "tags": [
            "backend-sdk",
            "configuration",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/model_provider_info.rs",
              "sha256": "97f99372ce6ed05fbeba2ba4398e09799de0a33aadd55e01c32eeaec7b490130"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-ollama-base-url-normalizer",
          "sectionId": "section-integrations",
          "slug": "ollama-base-url",
          "name": "Ollama base URL normalizer",
          "description": "`codex-rs/ollama/src/url.rs` highlights utilities for hybrid providers: `is_openai_compatible_base_url` checks if the address ends with `/v1`, A `base_url_to_host_root` trims `/v1` and tail `/`, returning the root host. Thanks to this, the CLI can use a single config for Responses-compatible and native Ollama endpoints, without duplicating trim logic in clients.",
          "tags": [
            "integrations",
            "ollama",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/ollama/src/url.rs",
              "sha256": "6cf6227b2314d49dab20db259159356b12f7c734ac2de020230392367e6c72e0"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.4
        },
        {
          "id": "aspect-ollama-client-probe",
          "sectionId": "section-integrations",
          "slug": "ollama-client-probe",
          "name": "Ollama Client and Availability Check",
          "description": "`codex_ollama::OllamaClient::try_from_oss_provider` gets the base URL from `Config`, features an OpenAI-compatible API, creates a reqwest client with a timeout of 5 seconds and calls `probe_server` (`/v1/models` or `/api/tags`). Errors turn into hints about `ollama serve`, A `pull_model_stream` parses JSON events `PullEvent`, forming the UX of downloading models.",
          "tags": [
            "ollama",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/ollama/src/client.rs",
              "sha256": "3d988c8779c02902df07fc064de43ca9756df5a5e48cf0e44901539c112bf83e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-ollama-oss-readiness",
          "sectionId": "section-integrations",
          "slug": "ollama-oss-readiness",
          "name": "ensure_oss_ready prepares local OSS mode",
          "description": "`codex-rs/ollama/src/lib.rs` function `ensure_oss_ready` checks `Config::model`: creates `OllamaClient::try_from_oss_provider`, pings the local server and calls `fetch_models`. If default `DEFAULT_OSS_MODEL` missing, starts `pull_with_reporter` with CLI progress; discovery errors are logged with a warning, but do not block the CLI. So mode `--oss` ensures that Ollama is up and the model is downloaded before starting the agent.",
          "tags": [
            "integrations",
            "ollama",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/ollama/src/lib.rs",
              "sha256": "56e0a1783344426f573300360aa1ca42502ae5feb80bf21ddc1a1cf51c07f301"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-ollama-pull-event-parser",
          "sectionId": "section-integrations",
          "slug": "ollama-pull-event-parser",
          "name": "Ollama download event parser",
          "description": "`ollama/src/parser.rs` parses JSON events `/api/pull`, A `ollama/src/pull.rs` through `CliProgressReporter`/`TuiProgressReporter` aggregates throughput and re-draws progress lines. One node forms `PullEvent::{Status,ChunkProgress,Success}`, the second one calculates the speed and shares the implementation with TUI so that model loading appears the same in the CLI and UI.",
          "tags": [
            "integrations",
            "interface",
            "ollama",
            "rust",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/ollama/src/parser.rs",
              "sha256": "f48936af8fd4632e5143feb96d0bbad7d6052f7ea6316537f34e7ab039627ac5"
            },
            {
              "path": "projects/Codex/codex-rs/ollama/src/pull.rs",
              "sha256": "f71ec872f941d75dbb389226b253cdc63cc122439a666927f95af34b5d40d22a"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.5
        },
        {
          "id": "aspect-lmstudio-oss-bootstrap",
          "sectionId": "section-integrations",
          "slug": "lmstudio-oss-bootstrap",
          "name": "LM Studio OSS bootstrap",
          "description": "`codex-rs/lmstudio/src/lib.rs` defines `ensure_oss_ready`: picks `Config.model` or `DEFAULT_OSS_MODEL`, instantiates `LMStudioClient::try_from_provider`, fetches local models and downloads missing ones, then spawns a background `load_model`. `client.rs` validates the provider base_url, probes `/models`, parses model IDs, and shells out to `lms get --yes <model>` (PATH or `~/.lmstudio/bin/lms(.exe)`) for downloads, with `/responses` used to warm-load the model. This is the local LM Studio path behind `--oss`.",
          "tags": [
            "integrations",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/lmstudio/src/lib.rs",
              "sha256": "30d110d5a2ecb416cd8d1703cb0028b09553efb3d7b5ab19d74d3f23bc8a6eab"
            },
            {
              "path": "projects/Codex/codex-rs/lmstudio/src/client.rs",
              "sha256": "9ea4c8817af32158e317f175045d867a34ae174c8db3aa010a0c9d618e65a5a3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-client-http-transport",
          "sectionId": "section-integrations",
          "slug": "codex-client-http-transport",
          "name": "codex-client HTTP transport and retries",
          "description": "`codex-rs/codex-client/src/default_client.rs` wraps reqwest in `CodexHttpClient`/`CodexRequestBuilder`, injects OpenTelemetry headers via `trace_headers`, and logs method/url/status on `send`. `retry.rs` defines `RetryPolicy`/`RetryOn` with jittered exponential backoff for 429/5xx/transport failures, while `sse.rs` forwards SSE `data:` frames with idle timeouts to an mpsc channel. This crate provides the shared HTTP+SSE transport used by higher-level API clients.",
          "tags": [
            "backend-client",
            "integrations",
            "telemetry",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-client/src/default_client.rs",
              "sha256": "113850eccca22f4bd9431c9aeff5d1716d5eb56b184e41c2513915cc170af588"
            },
            {
              "path": "projects/Codex/codex-rs/codex-client/src/retry.rs",
              "sha256": "b6cdb5109fffc215ceaec6f168574a839d4b7bf20fd996e9b46add59afcacd73"
            },
            {
              "path": "projects/Codex/codex-rs/codex-client/src/sse.rs",
              "sha256": "b7d2b02a4c99ce98abfb4ca6bdba488dc6bff35caf7c23c54adda176ea6c0b62"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        }
      ]
    },
    {
      "id": "section-integrations-mcp",
      "slug": "integrations-mcp",
      "title": "MCP Integrations",
      "entries": [
        {
          "id": "aspect-codex-mcp-client-stdio",
          "sectionId": "section-integrations-mcp",
          "slug": "mcp-client-stdio",
          "name": "RMCP client lifecycle",
          "description": "`rmcp-client/src/rmcp_client.rs` implements `RmcpClient` on top of the official rmcp SDK: `new_stdio_client` launches a child process with `env_clear`, `initialize` performs the MCP handshake with timeouts, and the client routes requests through `RunningService` with request IDs and pending tracking. This is now the stdio/HTTP MCP client path.",
          "tags": [
            "integrations",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/rmcp_client.rs",
              "sha256": "c462c4f0c470fa228688b607ad0f5055429c2f4d99fe5f97661338334f1b6ada"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-mcp-connection-manager",
          "sectionId": "section-integrations-mcp",
          "slug": "mcp-connection-manager",
          "name": "Aggregated MCP connection manager",
          "description": "`core/src/mcp_connection_manager.rs` launches clients for everyone `mcp_servers`: `McpConnectionManager::new` validates the name, simultaneously spawns STDIO or HTTP transport (via `McpClientAdapter`) and collects errors in `ClientStartErrors`. `list_all_tools` polls servers `JoinSet`-om, `qualify_tools` adds suffixes and SHA1, removing collisions and limiting the name to 64 characters. `call_tool` reuses timeouts from the configuration. Thanks to this, Codex sees the unified catalog of MCP tools and can access them by fully-qualified name `server__tool`.",
          "tags": [
            "integrations",
            "mcp",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/mcp_connection_manager.rs",
              "sha256": "efb17c19ae3123b6092683a5a654e3d7dfc2707e8281b82bfd08c04153758d6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.61
        },
        {
          "id": "aspect-codex-mcp-exec-approval",
          "sectionId": "section-integrations-mcp",
          "slug": "mcp-exec-approval",
          "name": "MCP exec approvals",
          "description": "`codex-rs/mcp-server/src/exec_approval.rs` converts requests to run commands into MCP-elicitation: `handle_exec_approval_request` generates payload with command, cwd and identifiers, sends `ElicitRequest` through `OutgoingMessageSender`, A `on_exec_approval_response` parses the response (otherwise rejects it) and publishes it `Op::ExecApproval` V `CodexConversation`. Thanks to this popup negotiation IDE synchronously manages the agent's shell commands.",
          "tags": [
            "mcp",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/exec_approval.rs",
              "sha256": "956a377f25747ab4921499d7e45116479c6145fa17f13c6cf9a7d4591a24208f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-mcp-patch-approval",
          "sectionId": "section-integrations-mcp",
          "slug": "mcp-patch-approval",
          "name": "MCP patch approvals",
          "description": "`codex-rs/mcp-server/src/patch_approval.rs` handles patch confirmation: `handle_patch_approval_request` collects reason/grant_root and `codex_changes`, sends `ElicitRequest`, A `on_patch_approval_response` for a response (or error) it sends it to the kernel `Op::PatchApproval`. Any serialization error results in Denied, providing a single approval UX for apply_patch.",
          "tags": [
            "mcp",
            "security",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/patch_approval.rs",
              "sha256": "9a12565a53605065385fbebc003f30b6a7741da88950f05742fa9c0de4048575"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-types-generator",
          "slug": "mcp-types-generator",
          "name": "generate_mcp_types.py synchronizes schema",
          "description": "`codex-rs/mcp-types/generate_mcp_types.py` rebuilds MCP types according to the JSON schema: the script loads definitions into `DEFINITIONS`, generates Rust structures/enums with `TS` derive, collects lists of requests/notifications for `TryFrom<JSONRPC*>` impulses and, if necessary, launches `cargo fmt`. Flag `--check` renders the file into a temporary directory and compares it with the working copy, allowing CI to catch discrepancies.",
          "tags": [
            "mcp",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-types/generate_mcp_types.py",
              "sha256": "38fe1f1fcab3385cb4722e2d716c0f56ffec043b25fc38d6f55f4c4e44559ce4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-codex-tool-config",
          "slug": "mcp-codex-tool-config",
          "name": "Codex tool-call config schema",
          "description": "`codex-rs/mcp-server/src/codex_tool_config.rs` specifies the JSON schema `codex` tool: `CodexToolCallParam` includes prompt, model, sandbox/approval policies and CLI overrides, and `create_tool_for_codex_tool_call_param` converts `schemars` diagram in `ToolInputSchema`. `into_config` converts overrides to `Config::load_with_cli_overrides`, adding `json_to_toml`, and returns the initial prompt along with the full prompt `Config` for the session.",
          "tags": [
            "mcp",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/codex_tool_config.rs",
              "sha256": "c68267e49ec9d7dc0528d2880590f1e7b68c7b7432610a36bf5d9f92191f8e3a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-codex-tool-runner",
          "slug": "mcp-codex-tool-runner",
          "name": "Codex tool-call runner",
          "description": "`codex-rs/mcp-server/src/codex_tool_runner.rs` runs Codex inside MCP: `run_codex_tool_session` creates a session via `ConversationManager::new_conversation`, streams `EventMsg` How `codex/event`, and at `ExecApprovalRequestEvent`/`ApplyPatchApprovalRequestEvent` Calls the appropriate approval handlers. `running_requests_id_to_codex_uuid` keeps the connection `RequestId``ConversationId`, A `run_codex_tool_session_reply` reuses it for `codex-reply` requests.",
          "tags": [
            "integrations",
            "mcp",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/codex_tool_runner.rs",
              "sha256": "8364e633f8cda793e032f5db393fea7dd45ff8738173e8cc5a77690924321326"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-error-codes",
          "slug": "mcp-error-codes",
          "name": "MCP error code constants",
          "description": "`codex-rs/mcp-server/src/error_code.rs` centralizes JSON-RPC error codes (-32600 and -32603) for the server so that `MessageProcessor` And `OutgoingMessageSender` returned consistent responses on re-initializes or internal failures.",
          "tags": [
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/error_code.rs",
              "sha256": "60981f1dd57a92e37d14a65125265943651b7bb83fe53772e1f243daf2517338"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.25
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-message-processor",
          "slug": "mcp-message-processor",
          "name": "MCP message processor",
          "description": "`codex-rs/mcp-server/src/message_processor.rs` processes JSON-RPC from MCP client: `handle_initialize` exhibits once `USER_AGENT_SUFFIX`, returns capabilities with `tools/list_changed`, `handle_list_tools` publishes diagrams `codex`/`codex-reply`, A `handle_call_tool` serializes arguments to `CodexToolCallParam` and starts the session asynchronously. `handle_cancelled_notification` turns cancellation into `Op::Interrupt` and clears the request map, ensuring the correct lifecycle.",
          "tags": [
            "integrations",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/message_processor.rs",
              "sha256": "98cf0566443de61a972d36b3af20abc74de07bfaaffd7a4300ffda406867a5e8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.78
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-responses-bridge",
          "slug": "mcp-responses-bridge",
          "name": "MCP bridge to Responses sessions",
          "description": "`mcp-server/src/message_processor.rs` routes MCP `tools/call` to Codex sessions: `handle_call_tool` dispatches `codex` and `codex-reply`, parses `CodexToolCallParam`, and tracks `running_requests_id_to_codex_uuid` for session routing. `core/src/client.rs` supplies the Responses API client used to stream events back over MCP.",
          "tags": [
            "integrations",
            "mcp",
            "responses-api",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/message_processor.rs",
              "sha256": "98cf0566443de61a972d36b3af20abc74de07bfaaffd7a4300ffda406867a5e8"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-outgoing-sender",
          "slug": "mcp-outgoing-sender",
          "name": "MCP outgoing sender",
          "description": "`codex-rs/mcp-server/src/outgoing_message.rs` manages outgoing messages: `OutgoingMessageSender::send_request` issues `RequestId::Integer` from `AtomicI64`, puts oneshot in `request_id_to_callback`, `send_event_as_notification` forms `codex/event` With `_meta`, A `send_response`/`send_error` serialize responses and fallback to `INTERNAL_ERROR_CODE`. All entries go through `OutgoingMessage`, which transforms into `JSONRPCMessage` before writing to stdout.",
          "tags": [
            "integrations",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/outgoing_message.rs",
              "sha256": "a2fe376250214e3bf62c24e80408d94b34f04ba0a76878560982a67783dd0e4d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-server-run-main",
          "slug": "mcp-server-run-main",
          "name": "MCP server run_main",
          "description": "`codex-rs/mcp-server/src/lib.rs` connects the STDIO server: `run_main` reads JSON-RPC strings from stdin into a bounded channel for 128 messages, loads `Config::load_with_cli_overrides`, creates `MessageProcessor` and separate tasks for reading, processing and writing. `tokio::join!` waits for completion, and serialization errors are logged via `tracing`, so that the standalone MCP server exits safely at EOF.",
          "tags": [
            "integrations",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/lib.rs",
              "sha256": "7e32698c6a9bbf0005426d1f1753993920b64c406d71af4a200ce131e16d1edd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "sectionId": "section-integrations-mcp",
          "id": "aspect-mcp-client-cli",
          "slug": "mcp-client-cli",
          "name": "MCP CLI management commands",
          "description": "`cli/src/mcp_cmd.rs` defines `codex mcp` subcommands (list/get/add/remove/login/logout), validates server names, loads config overrides, and persists MCP server entries via `ConfigEditsBuilder`. OAuth login/logout is delegated to `codex_rmcp_client`, enabling CLI-based MCP auth and configuration.",
          "tags": [
            "mcp",
            "cli",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/mcp_cmd.rs",
              "sha256": "0652859cfa4b27d744b8e310e0a993d8276c68e47918bbd8002094c88da0c4b5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-protocol-ts-generator",
          "sectionId": "section-integrations-mcp",
          "slug": "protocol-ts-generator",
          "name": "App-server protocol TS/JSON export",
          "description": "`app-server-protocol/src/export.rs` exports `ClientRequest`/`ServerRequest` and notifications to TypeScript, emits JSON Schemas, and bundles them into `codex_app_server_protocol.schemas.json`. `app-server-protocol/src/bin/export.rs` exposes this as a CLI with `--out` and optional `--prettier` formatting.",
          "tags": [
            "integrations",
            "mcp",
            "rust",
            "schema",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/export.rs",
              "sha256": "00b96172c8a4caa946e14ac679056901ae620853bd7676dd68fb75bdc32a209d"
            },
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/bin/export.rs",
              "sha256": "9aa961f33c46a724cb42aeac4b768b36da827d102df7b63fa0076c963c95fc5d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-rmcp-client-transports",
          "sectionId": "section-integrations-mcp",
          "slug": "rmcp-client-transports",
          "name": "RMCP client with stdio and HTTP transports",
          "description": "`rmcp-client/src/rmcp_client.rs` builds `RmcpClient` on top of the official rmcp SDK: `new_stdio_client` spawns a child process with cleared ENV and asynchronously logs stderr, `new_streamable_http_client` loads bearer or OAuth tokens and selects HTTP or `AuthClient`. `initialize` intercepts timeout, stores `RunningService` And `OAuthPersistor`, A `list_tools`/`call_tool` wrap rmcp types in mcp-types. This way Codex talks to MCP servers over two transports without duplicating logic.",
          "tags": [
            "mcp",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/rmcp_client.rs",
              "sha256": "c462c4f0c470fa228688b607ad0f5055429c2f4d99fe5f97661338334f1b6ada"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-rmcp-client-utils",
          "sectionId": "section-integrations-mcp",
          "slug": "rmcp-client-utils",
          "name": "RMCP Client Utilities",
          "description": "`rmcp-client/src/utils.rs` combines auxiliary functions: `run_with_timeout` wraps RPC in `tokio::time::timeout`, `convert_call_tool_result` complements the empty one `content` and converts structures between rmcp and mcp-types, and `create_env_for_mcp_server` copies whitelisted variables (`PATH`, `HOME`, `TZ`) plus custom overrides. These helpers are used by all client calls to ensure the correct JSON and environment.",
          "tags": [
            "mcp",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/utils.rs",
              "sha256": "ae49bb1ce38b5fe6b76c2819d4afd3a18ffddd5ff569800323db653099823823"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        },
        {
          "id": "aspect-app-server-test-mcp-process",
          "sectionId": "section-integrations-mcp",
          "slug": "app-server-mcp-process-test",
          "name": "McpProcess JSON-RPC harness",
          "description": "`app-server/tests/common/mcp_process.rs` raises `codex-app-server` for integration tests: `McpProcess::new_with_env` looking for a binary via `cargo_bin`, includes `kill_on_drop` and proxy stderr, `initialize` performs a handshake, and `read_stream_until_response_message`/`read_stream_until_notification_message` manage the notification queue so that tests catch events specifically.",
          "tags": [
            "testing",
            "interface",
            "mcp",
            "rust",
            "app-server"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/common/mcp_process.rs",
              "sha256": "1985bf104d9939f9a514fd8a94b3a66de49c5aec43dc432f60cc6c0de738eef8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-app-server-test-create-conversation",
          "sectionId": "section-integrations-mcp",
          "slug": "app-server-create-conversation-test",
          "name": "newConversation integration test",
          "description": "`app-server/tests/suite/create_thread.rs` spins up `McpProcess`, calls `NewConversation`, attaches a listener, and sends `SendUserMessage` with `InputItem::Text`. It asserts the outbound Responses request includes the selected model and user text.",
          "tags": [
            "testing",
            "interface",
            "mcp",
            "app-server"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/create_thread.rs",
              "sha256": "d0650c48289862f55e4fb736298c147c14ea3b2d7b5770b46ba6d89654affa27"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-app-server-test-send-message",
          "sectionId": "section-integrations-mcp",
          "slug": "app-server-send-message-test",
          "name": "sendUserMessage success/error tests",
          "description": "`app-server/tests/suite/send_message.rs` makes sure that `sendUserMessage` returns OK, sends `codex/event/task_complete` and that the re-call works; the second case sends a message to an unknown `ConversationId` and expects a JSON-RPC error.",
          "tags": [
            "testing",
            "interface",
            "mcp",
            "app-server"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/send_message.rs",
              "sha256": "5d4c4f4c3477ae5a7c8145638eb51a95de68e07792cc0b59e20347ef2042fe70"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-rmcp-client-integration-tests",
          "sectionId": "section-integrations-mcp",
          "slug": "rmcp-client-integration-tests",
          "name": "RMCP client stdio/HTTP tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/rmcp_client.rs` covers both RMCP transports: `stdio_server_round_trip` raises binary `codex-rmcp-client` and checks that `McpToolCallBegin`/`End` come with correct `server`/`tool`, and the function body contains echo and the passed environment variable. `streamable_http_tool_call_round_trip` And `streamable_http_with_oauth_round_trip` run HTTP+OAuth server, write tokens via `write_fallback_oauth_tokens` and make sure that Codex recreates the session and reuses refresh. This guarantees an RMCP client implementation for stdio and streamable HTTP.",
          "tags": [
            "integrations",
            "mcp",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/rmcp_client.rs",
              "sha256": "8d468018752365ab493f3eb1fabb3273504c8fc7f7be8615b959923e231226af"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-mcp-codex-tool-tests",
          "sectionId": "section-integrations-mcp",
          "slug": "mcp-codex-tool-tests",
          "name": "Codex MCP tool approval tests",
          "description": "`project/Codex/codex-rs/mcp-server/tests/suite/codex_tool.rs` picks up the MCP process and checks approvals: `test_shell_command_approval_triggers_elicitation` makes Codex prompt `ExecApprovalElicitRequestParams`, expects JSONRPC `ElicitRequest` with the command and working directory and sends `ExecApprovalResponse`. `test_apply_patch_request_rewrites_changes` And `test_patch_approval_rejects_decline` check the structure `PatchApprovalElicitRequestParams` and reaction to rejection. The file also records the transmission of user instructions via `base_instructions`. This protects the contract MCP Codex tools.",
          "tags": [
            "integrations",
            "mcp",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/tests/suite/codex_tool.rs",
              "sha256": "22f32bf51dfa7461c975cd35bea7d64733501e49ff2284e5171c7be31d2f0737"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-mcp-types-lib",
          "sectionId": "section-integrations-mcp",
          "slug": "mcp-types-lib",
          "name": "MCP types schema bundle",
          "description": "`codex-rs/mcp-types/src/lib.rs` (generated `generate_mcp_types.py`) fixes `MCP_SCHEMA_VERSION`, declares traits `ModelContextProtocolRequest/Notification` and deriving `TS` for all structures (`CallToolRequest`, `ClientCapabilities`, `ContentBlock`, ...). This is a common framework that synchronizes RMCP, Codex MCP server and TypeScript clients on schema version 2025-06-18.",
          "tags": [
            "mcp",
            "schema",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-types/src/lib.rs",
              "sha256": "a513a09e76ba0a75190ba8f0364db4397d5c6892928501b030803865f0154798"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-mcp-integrations-overview",
          "sectionId": "section-integrations-mcp",
          "slug": "mcp-integrations-overview",
          "name": "Codex MCP architecture",
          "description": "Critical: `core/src/mcp_connection_manager.rs` orchestrates server registration and routing of tool-calls, `mcp-server/src/lib.rs` accepts JSON-RPC over stdIO/HTTP and delegates them `message_processor`, A `rmcp-client/src/lib.rs` builds a client with transport fallback. Together they provide login, tool invocation and streaming Responses within the MCP ecosystem.",
          "tags": [
            "integrations",
            "mcp",
            "schema",
            "responses-api",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/mcp_connection_manager.rs",
              "sha256": "efb17c19ae3123b6092683a5a654e3d7dfc2707e8281b82bfd08c04153758d6c"
            },
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/lib.rs",
              "sha256": "7e32698c6a9bbf0005426d1f1753993920b64c406d71af4a200ce131e16d1edd"
            },
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/message_processor.rs",
              "sha256": "98cf0566443de61a972d36b3af20abc74de07bfaaffd7a4300ffda406867a5e8"
            },
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/lib.rs",
              "sha256": "30362cc2b1586b12cd4b304a4ae401a5c7a54722a163a3b3d1a7350c84e495be"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.85
        },
        {
          "id": "aspect-exec-server-mcp-shell",
          "sectionId": "section-integrations-mcp",
          "slug": "exec-server-mcp-shell",
          "name": "Exec-server MCP shell tool",
          "description": "`codex-rs/exec-server/src/posix.rs` describes the execve interception flow: a patched Bash runs in a sandbox, each exec triggers `codex-execve-wrapper`, and messages travel over `CODEX_ESCALATE_SOCKET` so the MCP process can allow, prompt, or escalate via execpolicy (policy-driven decisions request `SandboxPermissions::RequireEscalated`). `posix/mcp.rs` implements the MCP `shell` tool (command/workdir/timeout/login), keeps sandbox state via `codex/sandbox-state/update`, and invokes `EscalateServer` to run the command. This is the MCP-backed shell tool with fine-grained escalation.",
          "tags": [
            "mcp",
            "exec",
            "sandbox",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec-server/src/posix.rs",
              "sha256": "4f54f3e24e4a7230de26511d56ff3dfe33470d892640196faa885ee9dd6bc479"
            },
            {
              "path": "projects/Codex/codex-rs/exec-server/src/posix/mcp.rs",
              "sha256": "b860134ebdd2cf35dcef6739194f1df4eed7c222e87e5aa8fa20c610fe43c4d0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-shell-tool-mcp-wrapper",
          "sectionId": "section-integrations-mcp",
          "slug": "shell-tool-mcp-wrapper",
          "name": "Node wrapper for the shell MCP server",
          "description": "`shell-tool-mcp/src/index.ts` resolves the platform/arch to a vendor triple, locates `codex-exec-mcp-server` and `codex-execve-wrapper`, selects a patched Bash via `resolveBashPath`, and spawns the server with `--execve`/`--bash` while forwarding signals and mirroring exit codes. `bashSelection.ts`, `osRelease.ts`, and `platform.ts` parse `/etc/os-release` and map Linux/Darwin variants so the correct vendor Bash bundle is chosen. This is the Node launcher shipped in the MCP shell tool package.",
          "tags": [
            "mcp",
            "node",
            "typescript",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/shell-tool-mcp/src/index.ts",
              "sha256": "1c07c16479ab0fe1bac3cd0eb635af43d9ad8628536629c1f092a1e077b0a9dd"
            },
            {
              "path": "projects/Codex/shell-tool-mcp/src/bashSelection.ts",
              "sha256": "2d938a429ea476a987ca156f54bc91425599aa9a048e99ca488cc166aef3a3bb"
            },
            {
              "path": "projects/Codex/shell-tool-mcp/src/osRelease.ts",
              "sha256": "d84271e607defe532caf4fe8537d7503dd0a444b1385c499452a96fbbb36695c"
            },
            {
              "path": "projects/Codex/shell-tool-mcp/src/platform.ts",
              "sha256": "1221f473047b13a4a6982ad024c1a0876d97444c2d9c3cff2b47140a219cd351"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        }
      ]
    },
    {
      "id": "section-responses-api",
      "slug": "responses-api",
      "title": "Responses API Integration",
      "entries": [
        {
          "id": "aspect-codex-backend-openapi-models",
          "sectionId": "section-responses-api",
          "slug": "codex-backend-openapi-models",
          "name": "Custom export of OpenAPI models",
          "description": "`codex-backend-openapi-models` holding with his hands an edited list of types: `lib.rs` just re-export `models`, A `models/mod.rs` leaves only `CodeTaskDetailsResponse`, `TaskListItem`, `PaginatedListTaskListItem` and related entities that the workspace actually uses. This eliminates cumbersome auto-generation and keeps the binary lightweight when updating backend schemas.",
          "tags": [
            "responses-api",
            "rust",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/lib.rs",
              "sha256": "c3e51fc843db3ff4fc6b727a9149ab171aef8cb5b02f9afb33e30c3b2ffc1960"
            },
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/models/mod.rs",
              "sha256": "1305ac50bd4a3b6d24b8ca5afd77d5790fa1eb2d0cad0e78916f4680a2316abe"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-exec-responses-api",
          "sectionId": "section-responses-api",
          "slug": "exec-responses-api-tools",
          "name": "Exec tools schema for Responses API",
          "description": "`core/src/tools/spec.rs` defines `create_exec_command_tool` and `create_write_stdin_tool` with JSON Schema (cmd/workdir/tty/yield time, session_id/chars) and converts tool specs to Responses API format. This is the canonical schema for exec tools advertised to the Responses API.",
          "tags": [
            "responses-api",
            "schema",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-responses-sse-fixtures",
          "sectionId": "section-responses-api",
          "slug": "responses-sse-fixtures",
          "name": "SSE fixtures for Responses tests",
          "description": "`core/tests/common/lib.rs` functions `load_sse_fixture` And `load_sse_fixture_with_id` turn the JSON array of events into an SSE string (`event:`/`data:`) and allow you to substitute unique `response_id` before parsing. This simplifies testing of Responses streaming: integrations receive real-time sequences without manual serialization and can reuse templates for different identifiers.",
          "tags": [
            "responses-api",
            "events",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/common/lib.rs",
              "sha256": "e4d090dff5ede47169d9331ae949f9e9373d8bb1cf8c192958228e5cdd4f8a9c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-responses-api-proxy",
          "sectionId": "section-responses-api",
          "slug": "responses-api-proxy",
          "name": "Mini-proxy Responses API",
          "description": "`responses_api_proxy::run_main` reads bearer from stdin, binds `tiny_http` to 127.0.0.1 (ephemeral port), with `--server-info` writes `{\"port\":, \"pid\":}` and at `--http-shutdown` processes `GET /shutdown`. Each request is processed in a separate thread: only `POST /v1/responses`, the rest gets 403. Headers are reassembled without `Authorization`/`Host`, is added `Authorization: Bearer ` And `Host: api.openai.com`, A `reqwest::blocking::Client` with the timeout disabled, streams the response, discarding hop-by-hop headers. Before starting, the proxy calls `read_auth_header_from_stdin`, which validates the ASCII and mlock buffer so the CLI does not leave the API key in memory when proxying.",
          "tags": [
            "responses-api",
            "rust",
            "secrets"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/responses-api-proxy/src/lib.rs",
              "sha256": "e558a84374bdf8ca242b40358106c449331ad3bc82ad359b8aeaaaa4a38d22dd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-responses-provider-routing",
          "sectionId": "section-responses-api",
          "slug": "responses-provider-routing",
          "name": "ModelProviderInfo routes Responses API traffic",
          "description": "`core/src/model_provider_info.rs` describes the Responses/Chat provider: the structure stores the name, `base_url`, `wire_api` (`responses` or `chat`), env variable (`env_key`) and a hint `env_key_instructions`, as well as static `http_headers`, `env_http_headers` And `query_params`. `create_request_builder` combines `CodexAuth` with an API key, substitutes bearer, applies headers and calls `client.post`. `get_full_url` switches `/v1/responses` or `/v1/chat/completions`, `is_azure_responses_endpoint` recognizes Azure by name/URL, and `request_max_retries`, `stream_max_retries` And `stream_idle_timeout_ms` are limited `MAX_*`, so that the configs do not break repeated attempts. This is the core of Responses API routing and ChatGPT login.",
          "tags": [
            "backend-client",
            "configuration",
            "responses-api",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/model_provider_info.rs",
              "sha256": "97f99372ce6ed05fbeba2ba4398e09799de0a33aadd55e01c32eeaec7b490130"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "id": "aspect-responses-test-harness",
          "sectionId": "section-responses-api",
          "slug": "responses-test-harness",
          "name": "Responses API test harness",
          "description": "`project/Codex/codex-rs/core/tests/common/responses.rs` provides general utilities for mocking the Responses API: `ResponseMock` accumulates requests, `mount_sse_sequence` And `mount_sse_once_match` give prepared SSE, and helpers `ev_apply_patch_function_call`, `ev_local_shell_call`, `ev_completed` generate protocol events. This is the core for most integration tests, ensuring a single contract with the Responses API.",
          "tags": [
            "responses-api",
            "rust",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/common/responses.rs",
              "sha256": "8b982a954fe867505eb97efb9e4aa586035a413f883591830c111b612dd63aae"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-responses-azure-item-ids",
          "sectionId": "section-responses-api",
          "slug": "responses-azure-item-ids",
          "name": "Azure Responses store workaround",
          "description": "`core/src/client.rs` V `stream_responses` recognizes Azure Responses via `ModelProviderInfo::is_azure_responses_endpoint`, forcibly puts `store: true` and after serialization calls `attach_item_ids`to return `id` into elements `ResponseItem` (reasoning, tool calls, messages). This is a workaround for Azure restrictions where `store=false` breaks IDs, and ensures that Codex and Responses continue to reference the same story elements.",
          "tags": [
            "responses-api",
            "configuration",
            "backend-client"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-responses-stream-retry",
          "sectionId": "section-responses-api",
          "slug": "responses-stream-retry",
          "name": "Responses stream retry envelope",
          "description": "`ModelClient::attempt_stream_responses` collects `OpenAI-Beta=responses=experimental` request and through `otel_event_manager` fixes `cf-ray`; handles errors `Retry-After`, refreshes OAuth at 401 and distinguishes `usage_limit_reached` And `usage_not_included` in the JSON body. Class `StreamAttemptError` translates HTTP/transport errors to `CodexErr` and calculates exponential backoff to repeat the Responses API call without losing context.",
          "tags": [
            "responses-api",
            "backend-client",
            "telemetry"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-responses-sse-forwarding",
          "sectionId": "section-responses-api",
          "slug": "responses-sse-forwarding",
          "name": "Responses SSE incremental forwarding",
          "description": "`process_sse` reads the stream through `eventsource_stream`, logs timeouts and immediately sends `ResponseEvent::OutputItemDone` And `ResponseEvent::OutputTextDelta` for events `response.output_item.done` And `response.output_text.delta`. The comment in the code records what was expected before `response.completed`, getting delays and doubles `function_call_output`; Now incremental events are broadcast immediately, preserving the realtime stream and the chain of Responses IDs.",
          "tags": [
            "responses-api",
            "telemetry"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.74
        },
        {
          "id": "aspect-responses-rate-limits",
          "sectionId": "section-responses-api",
          "slug": "responses-rate-limit-headers",
          "name": "Responses rate limit header parser",
          "description": "`parse_rate_limit_snapshot` And `parse_rate_limit_window` pull out headlines `x-codex-*-used-percent`, `x-codex-*-window-minutes` And `x-codex-*-reset-after-seconds`, ignore null values and collect `RateLimitSnapshot`. This translates the Cloudflare rate limit Responses API telemetry into a structure that Codex then passes to the UI and SDK.",
          "tags": [
            "responses-api",
            "configuration",
            "telemetry"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-responses-text-controls",
          "sectionId": "section-responses-api",
          "slug": "responses-text-controls",
          "name": "Responses reasoning/text controls builder",
          "description": "`core/src/client_common.rs` generates the Responses parameters of the request: `create_reasoning_param_for_request` enables reasoning only for summary-enabled families and transmits the selected force, and `create_text_param_for_request` builds `text.controls` With `verbosity` and JSON Schema (strong name `codex_output_schema`). Thanks to this, the Responses API only receives format and reasoning when the CLI enables them.",
          "tags": [
            "responses-api",
            "schema",
            "configuration"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client_common.rs",
              "sha256": "dba47bc2bfe58f4a1ee0d99dec085eeaa396af4e6baa11d2e03937081454c97e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-responses-chatgpt-headers",
          "sectionId": "section-responses-api",
          "slug": "responses-chatgpt-headers",
          "name": "Responses request headers for ChatGPT",
          "description": "IN `attempt_stream_responses` before sending the Codex prescribes `OpenAI-Beta: responses=experimental`, duplicates `conversation_id` And `session_id`, and with ChatGPT OAuth adds `chatgpt-account-id`. These headers ensure that the Responses backend matches the stream to the Codex session and user account, even when proxying through the CLI.",
          "tags": [
            "responses-api",
            "auth",
            "backend-client"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-api-responses-client",
          "sectionId": "section-responses-api",
          "slug": "codex-api-responses-client",
          "name": "codex-api Responses client",
          "description": "`codex-rs/codex-api/src/endpoint/responses.rs` implements `ResponsesClient` on top of `StreamingClient`, building `ResponsesRequest` via `ResponsesRequestBuilder` with options (reasoning/include/prompt_cache_key/text/store/conversation/session_source/extra headers) and mapping compression to `RequestCompression` before streaming with `spawn_response_stream`. `provider.rs` defines `Provider`/`WireApi` and `RetryConfig`, building URLs with query params and detecting Azure Responses endpoints. This crate centralizes Responses API request construction and streaming.",
          "tags": [
            "responses-api",
            "backend-client",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-api/src/endpoint/responses.rs",
              "sha256": "742d5e1a55241ca6315d4912105efd18070fe3b29c0b3c563965db34018ffea5"
            },
            {
              "path": "projects/Codex/codex-rs/codex-api/src/provider.rs",
              "sha256": "b61654699abb4ef012e2cb2ebce90b1d9dbd8dc86c36ee73a264ca0a79cbab62"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        }
      ]
    },
    {
      "id": "section-sdk",
      "slug": "sdk",
      "title": "SDK and integrations",
      "entries": [
        {
          "id": "aspect-sdk-ts-basic-stream",
          "sectionId": "section-sdk",
          "slug": "sdk-basic-streaming",
          "name": "TypeScript sample: streaming thread runner",
          "description": "`sdk/typescript/samples/basic_streaming.ts` demonstrates `Codex.startThread().runStreamed`: creates readline-loop, calls `thread.runStreamed(input)` and handles events `ThreadEvent` -- prints reasoning, command status and file changes, and when `turn.completed` displays token usage. The script shows how clients can interactively listen to Response events without TUI.",
          "tags": [
            "sdk",
            "typescript",
            "threads"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/samples/basic_streaming.ts",
              "sha256": "c0745301dd6588063cbcb5c9f61304563ccc39babeef665935afb5e91f9ecf27"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.45
        },
        {
          "id": "aspect-sdk-structured-output-sample",
          "sectionId": "section-sdk",
          "slug": "sdk-structured-output-sample",
          "name": "TypeScript sample: structured output schema",
          "description": "`sdk/typescript/samples/structured_output.ts` creates `Codex` With `codexPathOverride`, generates JSON Schema c `summary`/`status` and calls `thread.run(..., { outputSchema })`. Example prints `turn.finalResponse`, demonstrating how the Responses API returns a validated object according to the schema and how it can be parsed in CLI integrations.",
          "tags": [
            "sdk",
            "typescript",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/samples/structured_output.ts",
              "sha256": "7f2a8b3d29c455fa549535402ea2c1c22bbc43cba455444f9596603099b4ec70"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.45
        },
        {
          "id": "aspect-sdk-codex-path-helper",
          "sectionId": "section-sdk",
          "slug": "sdk-codex-path-helper",
          "name": "Sample helper for local Codex binary path",
          "description": "`sdk/typescript/samples/helpers.ts` exports `codexPathOverride()`: reads first `CODEX_EXECUTABLE`, otherwise builds a path to `../../codex-rs/target/debug/codex` from the current cwd. This ensures that SDK examples can connect to a local build without manually entering paths and allows you to override the binary via env.",
          "tags": [
            "sdk",
            "typescript",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/samples/helpers.ts",
              "sha256": "b963344223d7fd63d98cfa9143a743c4fffd81b9dc9404a2e7643c3aa471519a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-codex-sdk-exec",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-exec",
          "name": "TypeScript SDK streaming exec",
          "description": "`sdk/typescript/src/exec.ts` provides a client flow: `CodexExec.run` collects `codex exec --experimental-json`, passes the baseUrl/API key through env, writes prompt to stdin and asynchronously iterates stdout lines through `readline`. Processes the exit code and autodetect the binary by triple (`findCodexPath`). This allows integrations to stream Codex responses without TUI.",
          "tags": [
            "sdk",
            "typescript",
            "exec"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/exec.ts",
              "sha256": "62b4ec20a59a4169379d33ae0a7771f2e71bebb7973bf4e4a89be64ef4faae2d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-sdk-core",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-core",
          "name": "TypeScript SDK thread orchestrator",
          "description": "`sdk/typescript/src/codex.ts` describes a class `Codex`: the constructor creates `CodexExec`, and methods `startThread` And `resumeThread` return `Thread`, passing options (sandbox, override paths, threadId). This is the main input of the SDK, which links Node integrations to the CLI without directly calling the binary.",
          "tags": [
            "sdk",
            "typescript",
            "threads"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/codex.ts",
              "sha256": "ef61127de26d1f2f20287d5a97003215cc23b5b48f718276b283e7c492393744"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-sdk-thread-runner",
          "sectionId": "section-sdk",
          "slug": "typescript-thread-runner",
          "name": "Thread runner streaming API",
          "description": "`sdk/typescript/src/thread.ts` implements threaded execution: `Thread.runStreamed` creates a temporary file via `createOutputSchemaFile`, transmits to `CodexExec.run` current `threadId`, model and sandbox from `ThreadOptions`, and the generator parses each JSONL string into `ThreadEvent`, updating `_id` at `thread.started`. `run` accumulates `ThreadItem`, fixes `Usage` By `turn.completed` and throws an error on `turn.failed`, providing a high-level API on top of the CLI.",
          "tags": [
            "sdk",
            "typescript",
            "threads"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/thread.ts",
              "sha256": "dd9784e352564cac3568befa868b0f95a2ec3c2dc8ab84e6beba6f1b64dd9e5c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-sdk-events",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-events",
          "name": "TypeScript SDK thread events",
          "description": "`sdk/typescript/src/events.ts` describes JSONL events from `codex exec`: types `ThreadStartedEvent`, `TurnCompletedEvent`, `ItemStartedEvent` and others record thread boundaries, usage tokens and element statuses combined into a union `ThreadEvent`. Types give SDKs and integrations type-safe stream access without manual string parsing.",
          "tags": [
            "sdk",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/events.ts",
              "sha256": "f501d2ffb8bf2c34947bf855faaec641e5d075ff47f08911dc4f9990569ae631"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-sdk-items",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-items",
          "name": "TypeScript SDK thread items typing",
          "description": "`sdk/typescript/src/items.ts` describes payload for a JSONL stream: `CommandExecutionItem`, `FileChangeItem`, `McpToolCallItem`, `TodoListItem`, `AgentMessageItem` And `ReasoningItem` record fields, statuses and enum values (`CommandExecutionStatus`, `PatchChangeKind`, `McpToolCallStatus`). Union `ThreadItem` combines all options and is used in `ThreadEvent`, so integrations get strong types for commands, patches, reasoning and tasks without manual JSON casting.",
          "tags": [
            "sdk",
            "typescript",
            "threads"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/items.ts",
              "sha256": "b4accbe02026624308b115fa95920489bcd9f016cb22e93a40fe4c707166a9ef"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-codex-sdk-output-schema",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-output-schema",
          "name": "TypeScript SDK temporary output schema",
          "description": "`sdk/typescript/src/outputSchemaFile.ts` supports structured output: `createOutputSchemaFile` checks that the schema is a JSON object, creates tempdir via `fs.mkdtemp`, writes `schema.json` and returns `cleanup`, which deletes the directory even if there is a write error. This allows Node integrations to pass temporary JSON Schema to `codex exec` and do not leave garbage on the disk.",
          "tags": [
            "sdk",
            "typescript",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/outputSchemaFile.ts",
              "sha256": "c5faa36dd07ee38f08f5ae9f9597615e258c744c90e8a55ad2d9348ca170ee63"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-codex-sdk-packaging",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-packaging",
          "name": "TypeScript SDK packaging pipeline",
          "description": "`sdk/typescript/package.json` arranges the package `@openai/codex-sdk` as ESM:field `type` sets the value `module`, `exports` And `types` lead to `dist/index.*`, A `sideEffects: false` gives tree-shaking. Scripts run `tsup` (build/watch/prepare), Jest, ESLint and Prettier, `engines.node` requires >=18, devDependencies include `zod` to generate circuits. This commits to building and publishing the TypeScript SDK.",
          "tags": [
            "sdk",
            "typescript",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/package.json",
              "sha256": "6fb74e72205c8fa4cac9f1d76f3ab4b132283a4505c8f856185ee46948c4c2d0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-sdk-responses-proxy",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-responses-proxy",
          "name": "TypeScript SDK responses test proxy",
          "description": "`sdk/typescript/tests/responsesProxy.ts` raises a local HTTP proxy for Responses API unit tests: `startResponsesTestProxy` writes SSE responses from given ones `responseBodies`, logs incoming requests and returns `url`/`close`. Helpers `responseStarted`, `assistantMessage`, `responseCompleted`, `responseFailed` construct fictitious events, and `sse(...)` collects JSONL. This allows tests to play a Codex stream without a real backend.",
          "tags": [
            "sdk",
            "typescript",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/tests/responsesProxy.ts",
              "sha256": "97f87878edc1e97f558ae9a6ce6a7c601a583051277f430baaf25fd6c0a84861"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-sdk-exec-spy",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-exec-spy",
          "name": "Codex exec spawn spy",
          "description": "`sdk/typescript/tests/codexExecSpy.ts` wraps `child_process.spawn` via Jest: `codexExecSpy` saves run arguments `codex` and provides `restore` to return the original implementation. So tests `run.test.ts` And `runStreamed.test.ts` check what the CLI receives `--output-schema`, `--cd`, `--skip-git-repo-check` and other flags without running the actual binary.",
          "tags": [
            "sdk",
            "typescript",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/tests/codexExecSpy.ts",
              "sha256": "24ad1ed54248603f82df681c6905f719ede478f10a676c804488a2216a6d100e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-codex-sdk-run-tests",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-run-tests",
          "name": "Thread.run integration tests",
          "description": "`sdk/typescript/tests/run.test.ts` covers `Thread.run`: through `startResponsesTestProxy` emulates SSE responses, verifies the build `result.items`, moving threadId between calls, passing previous messages to the new call, and enforcing a git check (error without `skipGitRepoCheck`). Tests document work `--output-schema`, `--cd` and Originator header using `codexExecSpy` to control spawn arguments.",
          "tags": [
            "sdk",
            "typescript",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/tests/run.test.ts",
              "sha256": "52acf3dcfb9563e1fde2dd99ad5041c986a4324e74896b900eb312b2b92e372e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-sdk-run-streamed-tests",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-run-streamed-tests",
          "name": "Thread.runStreamed streaming tests",
          "description": "`sdk/typescript/tests/runStreamed.test.ts` checks the streaming version: `runStreamed` gives events `thread.started`  `turn.started`  `item.completed`  `turn.completed`, supports renewal via `resumeThread` and retransmission of history. The test confirms that `outputSchema` falls into `requests[0].json.text.format` and that several streams in a row reuse the threadId.",
          "tags": [
            "sdk",
            "typescript",
            "testing",
            "threads"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/tests/runStreamed.test.ts",
              "sha256": "a907c9a34efd8dec7345741d20650313db823a9cf753a3d2609d59c7a20fa8f0"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.52
        },
        {
          "id": "aspect-typescript-sdk-codex-options",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-codex-options",
          "name": "TypeScript SDK CodexOptions overrides",
          "description": "`sdk/typescript/src/codexOptions.ts` defines `CodexOptions`: callers can set `codexPathOverride` to point at a custom Codex binary and inject `baseUrl`/`apiKey` for remote services. `Codex` wires these through to `CodexExec`, letting SDK integrations override where the CLI lives and which backend host the session targets.",
          "tags": [
            "sdk",
            "typescript",
            "configuration"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/codexOptions.ts",
              "sha256": "52317ca9268635f780a7625f020430fdbdb6e71426c21f76c78726871dd85830"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-typescript-sdk-thread-options",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-thread-options",
          "name": "TypeScript SDK thread session options",
          "description": "`sdk/typescript/src/threadOptions.ts` exposes per-thread controls: `ApprovalMode` enumerates (`never`, `on-request`, `on-failure`, `untrusted`) and `SandboxMode` mirrors CLI (`read-only`, `workspace-write`, `danger-full-access`). `ThreadOptions` carries these plus `model`, `workingDirectory`, and `skipGitRepoCheck`, which `Thread.runStreamed` forwards into `codex exec` so Node integrations can mirror CLI launch knobs.",
          "tags": [
            "sdk",
            "typescript",
            "threads",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/threadOptions.ts",
              "sha256": "8a03d05e5d634542daf23961a066d91defaf7ccf6604313176a03350270721f2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-typescript-sdk-turn-options",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-turn-options",
          "name": "TypeScript SDK turn output schema",
          "description": "`sdk/typescript/src/turnOptions.ts` adds `TurnOptions` with optional `outputSchema`. When provided, `Thread.runStreamed` routes it to `createOutputSchemaFile`, which writes a temp schema JSON and points `CodexExec` at it for the current turn. This lets integrations request structured response validation without mutating default session settings.",
          "tags": [
            "sdk",
            "typescript",
            "threads",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/turnOptions.ts",
              "sha256": "16543004601caad856b939c320200889f8b0400e8a8dcd1d9b7486f2081fa330"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-typescript-sdk-originator-override",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-originator-override",
          "name": "SDK puts originator",
          "description": "`CodexExec.run` substitutes `CODEX_INTERNAL_ORIGINATOR_OVERRIDE=codex_sdk_ts`, if the variable is not set, and throws `OPENAI_BASE_URL`/`CODEX_API_KEY` before `spawn`. SDK calls receive their own originator and can go to a custom backend.",
          "tags": [
            "sdk",
            "telemetry",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/exec.ts",
              "sha256": "62b4ec20a59a4169379d33ae0a7771f2e71bebb7973bf4e4a89be64ef4faae2d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-typescript-sdk-output-schema-file",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-output-schema-file",
          "name": "Temporary output schema file",
          "description": "`createOutputSchemaFile` checks that the schema is a plain JSON object, creates a temporary directory in `os.tmpdir()`, writes `schema.json`, returns the path and `cleanup`, which silently deletes a directory even on errors. The assistant safely prepares the file for `--output-schema`.",
          "tags": [
            "sdk",
            "schema",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/outputSchemaFile.ts",
              "sha256": "c5faa36dd07ee38f08f5ae9f9597615e258c744c90e8a55ad2d9348ca170ee63"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-typescript-sdk-structured-output-zod",
          "sectionId": "section-sdk",
          "slug": "typescript-sdk-structured-output-zod",
          "name": "Example of structured output with Zod",
          "description": "`sdk/typescript/samples/structured_output_zod.ts` shows Zod+ bundle`zod-to-json-schema`: the circuit is built through `z.object`, converted from `target=\"openAi\"` and is transmitted to `thread.run` How `outputSchema`. The example documents the recommended path to structured output.",
          "tags": [
            "sdk",
            "schema",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/samples/structured_output_zod.ts",
              "sha256": "d8515897863689e78a85f23b3028435d3a900f11ba61b89362cb24405a0a28d9"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.34
        },
        {
          "id": "aspect-ts-sdk-tsup-config",
          "sectionId": "section-sdk",
          "slug": "ts-sdk-tsup-config",
          "name": "tsup SDK config",
          "description": "`sdk/typescript/tsup.config.ts` builds the package as pure ESM: `entry: src/index.ts`, `target: node18`, generates d.ts and sourcemap, disables minify and enables `clean`. This is canon for `pnpm run build`so that the publication of the SDK gives a ready-made `dist`.",
          "tags": [
            "sdk",
            "typescript",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/tsup.config.ts",
              "sha256": "f55d4c5403821dc605db53b886ff5c63e517c49628ce42a09f04e428222bea66"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.44
        },
        {
          "id": "aspect-ts-sdk-jest-config",
          "sectionId": "section-sdk",
          "slug": "ts-sdk-jest-config",
          "name": "Jest SDK configuration",
          "description": "`sdk/typescript/jest.config.cjs` uses `ts-jest` in ESM mode: reassigns `.js` imports to `.ts`, limits tests `tests/**/*.test.ts`, ignores diagnostics `TS1343` and connects `ts-jest-mock-import-meta` for correct `import.meta.url`. This gives stable unit tests to the SDK.",
          "tags": [
            "sdk",
            "typescript",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/jest.config.cjs",
              "sha256": "e782f7c21072fdd20bfb31ea4781ec433799ba7be81d53843f94fdda342d7908"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.46
        },
        {
          "id": "aspect-ts-sdk-eslint-config",
          "sectionId": "section-sdk",
          "slug": "ts-sdk-eslint-config",
          "name": "ESLint SDK settings",
          "description": "`sdk/typescript/eslint.config.js` combines `@eslint/js` And `typescript-eslint`, connects `eslint-plugin-node-import` and includes the rule `node-import/prefer-node-protocol`, demanding `node:` prefixes. This is the basic lint policy for the SDK.",
          "tags": [
            "sdk",
            "typescript",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/eslint.config.js",
              "sha256": "e0f842761e0b954bb301e73b6ac360646f229d0f30cc449fb7e5eb687712bbfb"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-ts-sdk-tsconfig",
          "sectionId": "section-sdk",
          "slug": "ts-sdk-tsconfig",
          "name": "tsconfig hardcodes declaration",
          "description": "`sdk/typescript/tsconfig.json` exposes `moduleResolution: bundler`, `target: ES2022`, includes `declaration`/`declarationMap` And `noUncheckedIndexedAccess`, connects types `node` And `jest`, and also excludes `dist`. This guarantees strict assembly and correct `.d.ts` for a published package.",
          "tags": [
            "sdk",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/tsconfig.json",
              "sha256": "9214d31477533cbe2ba87e984a2a856846f4260a41ead34e51185a4aac0d43db"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.48
        },
        {
          "id": "aspect-sdk-typescript-index",
          "sectionId": "section-sdk",
          "slug": "sdk-typescript-index",
          "name": "TypeScript SDK entrypoint exports",
          "description": "`sdk/typescript/src/index.ts` aggregates the package's public API: re-exports `Codex`, `Thread`, types `ThreadEvent`, `ThreadItem` and options (`ThreadOptions`, `ApprovalMode`, `SandboxMode`). Thanks to this `@openai/codex-sdk` exposes all top-level types without direct paths to internal files and simplifies tree-shaking.",
          "tags": [
            "sdk",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/sdk/typescript/src/index.ts",
              "sha256": "0c79885abccd95ae76acc44b7abb92d49ca59374b1f5ab2a517b4e974496b64b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        }
      ]
    },
    {
      "id": "section-change-tracking",
      "slug": "change-tracking",
      "title": "Track changes",
      "entries": [
        {
          "id": "aspect-codex-turn-diff-tracker",
          "sectionId": "section-change-tracking",
          "slug": "turn-diff-tracker",
          "name": "TurnDiffTracker unified diff aggregator",
          "description": "`core/src/turn_diff_tracker.rs` stores baseline files and UUIDs for renaming: `on_patch_begin` takes snapshots, tracks move_path and caches git roots. Generates a unified diff based on `similar` And `git_blob_sha1_hex_bytes`so that approvals and diff screens show the latest changes even without git.",
          "tags": [
            "diff",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/turn_diff_tracker.rs",
              "sha256": "4ba3878af0c57cded3dcb6369c20934b15dec4ec39f0036f0f0c4a35aba94092"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.74
        },
        {
          "id": "aspect-codex-truncate-middle",
          "sectionId": "section-change-tracking",
          "slug": "truncate-middle",
          "name": "UTF-8 safe middle truncation",
          "description": "`core/src/truncate.rs` implements `truncate_middle`: divides budget into head/tail, prefers line boundaries, inserts a bullet `N tokens truncated` and token valuation (len/4). The function preserves UTF-8 integrity, avoids spurious characters, and is used when outputting exec results and diff tracker logs.",
          "tags": [
            "diff",
            "truncate",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/truncate.rs",
              "sha256": "3e4b4bfcbbef9a0b276ea2dc4ae265ba049d5548800d6defc84030e9b3634619"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-git-ghost-commits",
          "sectionId": "section-change-tracking",
          "slug": "git-ghost-commits",
          "name": "Git ghost commit snapshots",
          "description": "`utils/git/src/ghost_commits.rs` creates and restores ghost snapshots: options control commit message, force-included paths, and thresholds for ignoring large untracked files/dirs. The module captures reports of ignored items so undo/snapshots remain predictable without ballooning storage.",
          "tags": [
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/ghost_commits.rs",
              "sha256": "b7d5fbada9ac31c0d0371556c39f0ce2c7bfb06404db78e99bd186e93fddb831"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-codex-change-git-errors",
          "sectionId": "section-change-tracking",
          "slug": "git-tooling-errors",
          "name": "Git tooling error types",
          "description": "`utils/git/src/errors.rs` defines `GitToolingError` for git command failures, non-UTF8 output, repository/path violations, walkdir failures, and IO errors. These errors are shared by snapshot and apply helpers.",
          "tags": [
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/errors.rs",
              "sha256": "9d860c5609be36c5077ca1fc5b26b2034f8e01c568fbde8955ff804d01502950"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-codex-change-symlink",
          "sectionId": "section-change-tracking",
          "slug": "git-symlink-support",
          "name": "Cross-platform symlink creation",
          "description": "`utils/git/src/platform.rs` implements `create_symlink` using Unix `symlink` or Windows `symlink_dir`/`symlink_file` based on source metadata, keeping worktree snapshots portable.",
          "tags": [
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/platform.rs",
              "sha256": "0f486a0bf89b2ec780a01a54932f1f294da8a5c8bec148c84b79d665820c6063"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        },
        {
          "id": "aspect-codex-change-patch-events",
          "sectionId": "section-change-tracking",
          "slug": "patch-approval-events",
          "name": "Protocol patch events transmit changes",
          "description": "`project/Codex/codex-rs/protocol/src/protocol.rs` describes the patch flow: `ApplyPatchApprovalRequestEvent` And `PatchApplyBegin` carry `HashMap<PathBuf, FileChange>` with diff content, `PatchApplyEnd` returns stdout/stderr and a success flag, and `TurnDiffEvent`   unified diff. These types are serialized into the Responses API, so the CLI and SDK know which files to change and how to show the results of applying the patch.",
          "tags": [
            "diff",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/protocol.rs",
              "sha256": "b177fe47ab5e8bb18528049d8a4d96089f2678ea624ea49fd1894b0085108b4a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-chatgpt-apply-command",
          "sectionId": "section-change-tracking",
          "slug": "chatgpt-apply-command",
          "name": "Loading diff from ChatGPT tasks",
          "description": "`chatgpt/src/apply_command.rs` parses flags via `CliConfigOverrides`, initializes the token `init_chatgpt_token_from_auth`, causes `get_task` and looking for `OutputItem::Pr` With `output_diff`. `apply_diff_from_task` sends the patch to `codex_git_apply::apply_git_patch`, checks `exit_code` and prints the summary. `get_task.rs` limits JSON to diff-turn fields. This is the way `codex chatgpt apply <task>` to play the patch locally.",
          "tags": [
            "change-tracking",
            "diff",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/chatgpt/src/apply_command.rs",
              "sha256": "ff2fd1c3aaade7911380c099fa752147f647dd9cae961613b663e1e817c49e65"
            },
            {
              "path": "projects/Codex/codex-rs/chatgpt/src/get_task.rs",
              "sha256": "70af7b61cb0e9900d230ae7898d5044d351dbc5942480573750baa503922ffc9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-git-repo-root-scan",
          "sectionId": "section-change-tracking",
          "slug": "git-repo-root-scan",
          "name": "Finding Git root without a binary",
          "description": "`project/Codex/codex-rs/core/src/git_info.rs` implements `get_git_repo_root`: the function climbs the parent directories and searches `.git` file or directory without accessing `git`. This allows Codex to quickly determine the root repository even in limited sandboxes; exception - worktree outside checkout, for which a flag is provided `--allow-no-git-exec`.",
          "tags": [
            "git",
            "change-tracking",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-git-info-timeouts",
          "sectionId": "section-change-tracking",
          "slug": "git-info-timeouts",
          "name": "Git metadata collection with timeouts",
          "description": "IN `collect_git_info` (`project/Codex/codex-rs/core/src/git_info.rs`) given `GIT_COMMAND_TIMEOUT = 5s`: `git rev-parse HEAD`, `rev-parse --abbrev-ref HEAD` And `remote get-url origin` run in parallel via `tokio::join!`, and for any timeouts/errors, the function returns `None`. This is how Codex gets commit, branch and origin without the risk of hanging on large repositories.",
          "tags": [
            "git",
            "change-tracking",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-git-commit-summary",
          "sectionId": "section-change-tracking",
          "slug": "git-commit-summary",
          "name": "List of recent commits for hints",
          "description": "`recent_commits` V `project/Codex/codex-rs/core/src/git_info.rs` checks that the directory is a git repository, then runs `git log -n <limit> --pretty=format:%H\\\\x1f%ct\\\\x1f%s` and shapes `CommitLogEntry` (sha, timestamp, subject). The entry point works with the same timeouts, filters empty lines and provides data for tooltips and UI.",
          "tags": [
            "git",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-git-remote-diff-baseline",
          "sectionId": "section-change-tracking",
          "slug": "git-remote-diff-baseline",
          "name": "Diff to the nearest remote SHA",
          "description": "`git_diff_to_remote` (`project/Codex/codex-rs/core/src/git_info.rs`) finds the nearest remote commit: collects a list of candidates via `branch_ancestry`, calculates the distance in `find_closest_sha`, A `diff_against_sha` builds diff and adds untracked files (`git diff --no-index /dev/null|NUL`). This gives Codex a complete picture of discrepancies with origin for approvals and reviews.",
          "tags": [
            "git",
            "change-tracking",
            "diff"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-git-default-branch",
          "sectionId": "section-change-tracking",
          "slug": "git-default-branch-resolution",
          "name": "Determining the default branch",
          "description": "Method `get_default_branch` V `project/Codex/codex-rs/core/src/git_info.rs` reads first `refs/remotes/<remote>/HEAD` for the first remote (origin is put first), then parses the output `git remote show`, and only after that checks local `main`/`master`. This degradation covers mirrors and non-standard default settings.",
          "tags": [
            "git",
            "repository",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-git-branch-ancestry",
          "sectionId": "section-change-tracking",
          "slug": "git-branch-ancestry",
          "name": "History of branches around HEAD",
          "description": "`branch_ancestry` (`project/Codex/codex-rs/core/src/git_info.rs`) combines the current branch, the default branch and all remote branches that contain HEAD (`git for-each-ref --contains=HEAD`). The list without duplicates is used when choosing a diff base and handles local forks correctly.",
          "tags": [
            "git",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-git-remote-distance",
          "sectionId": "section-change-tracking",
          "slug": "git-remote-distance-selector",
          "name": "Selecting the nearest remote SHA",
          "description": "`branch_remote_and_distance` And `find_closest_sha` (`project/Codex/codex-rs/core/src/git_info.rs`) for each branch they look for a remote ref, check its availability and count how many commits HEAD is ahead (`git rev-list <branch>..HEAD`). The shortest distance determines the base SHA, and branches with errors or missing remote refs are skipped to avoid blocking Codex.",
          "tags": [
            "git",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-git-trust-root-worktree",
          "sectionId": "section-change-tracking",
          "slug": "git-trust-root-worktree",
          "name": "Root of trust for worktree",
          "description": "`resolve_root_git_project_for_trust` (`project/Codex/codex-rs/core/src/git_info.rs`) causes `git rev-parse --git-common-dir`, normalizes the path and canonizes it (eliminating discrepancies like `/var``/private/var`),        worktree. The value is used by trust policies and prevents patches from being referenced outside the project.",
          "tags": [
            "git",
            "change-tracking",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-codex-git-local-branches",
          "sectionId": "section-change-tracking",
          "slug": "git-local-branches",
          "name": "Local branch inventory with default first",
          "description": "`local_git_branches` (`projects/Codex/codex-rs/core/src/git_info.rs`) starts `git branch --format=%(refname:short)`, filters empty lines, sorts and lifts `get_default_branch_local` to the beginning of the list. Returns clean `Vec<String>`, even if git is not available - in this case, an empty set is returned so the UI can safely render the branch selection.",
          "tags": [
            "git",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-git-current-branch",
          "sectionId": "section-change-tracking",
          "slug": "git-current-branch",
          "name": "Current branch resolution with timeout",
          "description": "`current_branch_name` causes `git branch --show-current` through `run_git_command_with_timeout`, returning trimmed name or `None` with detached HEAD/error. This gives change-tracking access to the current branch without hanging in large repositories.",
          "tags": [
            "git",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-codex-turn-diff-git-root-cache",
          "sectionId": "section-change-tracking",
          "slug": "turn-diff-git-root-cache",
          "name": "TurnDiffTracker git root cache",
          "description": "`TurnDiffTracker::find_git_root_cached` caches paths `.git`, recognizes worktree and on Windows stops at the root of the disk/UNC. `relative_to_git_root_str` then prints the paths in diff relative to the found root and normalizes the `\\\\`  `/`so that the output matches git even outside the repository.",
          "tags": [
            "diff",
            "git",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/turn_diff_tracker.rs",
              "sha256": "4ba3878af0c57cded3dcb6369c20934b15dec4ec39f0036f0f0c4a35aba94092"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-turn-diff-blob-oid",
          "sectionId": "section-change-tracking",
          "slug": "turn-diff-blob-oid",
          "name": "TurnDiffTracker blob oid fallback",
          "description": "`TurnDiffTracker::git_blob_oid_for_path` causes `git -C <root> hash-object -- <rel>`, and in case of error `get_file_diff` falls back to local sha1 (`git_blob_sha1_hex_bytes`). So diff the headers `index <left>..<right>` are the same as git, but work without git installed.",
          "tags": [
            "diff",
            "git",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/turn_diff_tracker.rs",
              "sha256": "4ba3878af0c57cded3dcb6369c20934b15dec4ec39f0036f0f0c4a35aba94092"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.56
        },
        {
          "id": "aspect-codex-turn-diff-file-modes",
          "sectionId": "section-change-tracking",
          "slug": "turn-diff-file-modes",
          "name": "TurnDiffTracker file mode detection",
          "description": "`file_mode_for_path` And `blob_bytes` analyze metadata: on Unix, symlinks and execution bits are taken into account; on Windows, the label is always Regular. Symlink content is read via `read_link`. This guarantees the correct `new file mode`/`deleted file mode` strings and correct blob hashes for links.",
          "tags": [
            "diff",
            "filesystem",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/turn_diff_tracker.rs",
              "sha256": "4ba3878af0c57cded3dcb6369c20934b15dec4ec39f0036f0f0c4a35aba94092"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-turn-diff-headers",
          "sectionId": "section-change-tracking",
          "slug": "turn-diff-diff-headers",
          "name": "TurnDiffTracker diff headers",
          "description": "`get_file_diff` combines snapshot and current file: prints `diff --git a/... b/...`, adds `new file mode`/`deleted file mode`/`old mode`/`new mode`, indicates `index` and throws it away `DEV_NULL` for absent parties. UTF-8 content is diffed directly, otherwise changes are skipped, making the aggregated diff git-compatible.",
          "tags": [
            "diff",
            "change-tracking"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/turn_diff_tracker.rs",
              "sha256": "4ba3878af0c57cded3dcb6369c20934b15dec4ec39f0036f0f0c4a35aba94092"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.48
        },
        {
          "id": "aspect-tui-get-git-diff",
          "sectionId": "section-change-tracking",
          "slug": "tui-get-git-diff",
          "name": "TUI get_git_diff merges tracked and untracked changes",
          "description": "`tui/src/get_git_diff.rs` returns `(is_repo, diff)` for chat widget: first `inside_git_repo()` checks `git rev-parse --is-inside-work-tree`, then run in parallel `git diff --color` And `git ls-files --others --exclude-standard`. For each uncommitted file, a `git diff --no-index /dev/null <file>`; errors `NotFound` are ignored so that the deletion race does not crash. `run_git_capture_diff` accepts code 1 as a signal \"there is a change\" and returns stdout. This allows TUI to show full color diff even before `git add`.",
          "tags": [
            "git",
            "change-tracking",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/get_git_diff.rs",
              "sha256": "39e90033834a9eede19efc5b80db07413dfbb82165bfb9bbbe7ec7de28aa2a92"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/get_git_diff.rs",
              "sha256": "39e90033834a9eede19efc5b80db07413dfbb82165bfb9bbbe7ec7de28aa2a92"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        }
      ]
    },
    {
      "id": "section-apply-patch",
      "slug": "apply-patch",
      "title": "Apply Patch pipeline",
      "entries": [
        {
          "id": "aspect-apply-patch-index",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-index",
          "name": "Apply Patch pipeline index",
          "description": "`apply-patch/src/lib.rs` aggregates parser, filesystem write and git-preflight steps, and `core/tests/suite/tool_harness.rs` checks the script via tool-approval harness. The node connects the other aspects of the section and serves as an entry point when changing the apply_patch pipeline.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "repo-maintenance",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            },
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/tool_harness.rs",
              "sha256": "b7e84f996cc4656b5d444e115ec7baba3d0910cae4ef1dd956da2d3aa5bf3fe8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-codex-git-apply-engine",
          "sectionId": "section-apply-patch",
          "slug": "git-apply-engine",
          "name": "apply_patch engine",
          "description": "`apply-patch/src/lib.rs` parses unified diffs into hunks, computes `ApplyPatchAction` changes, and applies or validates patches with detailed `ApplyPatchError` reporting. This is the engine used by the apply_patch tool and its standalone executable.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-apply-patch-safety",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-safety-gate",
          "name": "Security gate apply_patch",
          "description": "`core/src/apply_patch.rs` gates `apply_patch` execution: `apply_patch` calls `assess_patch_safety` and returns either `InternalApplyPatchInvocation::DelegateToExec` (wrapping `ApplyPatchExec` with whether the user explicitly approved) or `Output` with a `FunctionCallError`. When `SafetyCheck::AskUser`, it awaits `Session::request_patch_approval`, maps `ReviewDecision` outcomes, and on rejection surfaces `patch rejected`. `convert_apply_patch_to_protocol` then turns each `ApplyPatchAction` change into protocol `FileChange` payloads for downstream events.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "rust",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/apply_patch.rs",
              "sha256": "689bbcdfbeb8ba0f959e1d4331173fb429ecf51f238c8eaca027e38851d1b9b7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-apply-patch-tool",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-tool-spec",
          "name": "apply_patch tool specification",
          "description": "`core/src/tools/handlers/apply_patch.rs` exposes the apply_patch tool across invocation styles: `ApplyPatchHandler::handle` accepts either function-call JSON or freeform payload, deserializes `ApplyPatchToolArgs`, and executes `handle_container_exec_with_params` with `ExecParams` targeting `apply_patch`. `create_apply_patch_freeform_tool` publishes the Lark grammar bundled in `APPLY_PATCH_LARK_GRAMMAR`, while `create_apply_patch_json_tool` assembles a `ResponsesApiTool` schema so structured and freeform clients share one specification.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/apply_patch.rs",
              "sha256": "fe31a745a52d47b2d4f51e20dcccea0c9e1a7b6c32f3ffa0e4d38fdb9353cb08"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-codex-apply-patch-parser",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-parser",
          "name": "Parser and verification apply_patch",
          "description": "`codex-rs/apply-patch/src/lib.rs` verifies patches before execution: `maybe_parse_apply_patch_verified` rejects implicit bodies, resolves cwd, and upgrades parsed hunks into an `ApplyPatchAction` with absolute paths. `extract_apply_patch_from_bash` uses a guarded tree-sitter Bash query to allow only single-statement heredocs, and `unified_diff_from_chunks` builds diff output for `ApplyPatchFileChange::Update`, so only well-formed patches reach exec.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "diff",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "sectionId": "section-apply-patch",
          "id": "aspect-apply-patch-seek-sequence",
          "slug": "apply-patch-seek-sequence",
          "name": "Seek sequence normalizes the context",
          "description": "`codex-rs/apply-patch/src/seek_sequence.rs` searches for patch context with decreasing severity: first an exact match, then a comparison without trailing spaces, then with both `trim`. The final pass normalizes the typography (em dashes, quotes, non-breaking spaces) and only then gives up. The function returns early `None`, If `pattern.len() > lines.len()`, eliminating the previous panic when the file is too short.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/seek_sequence.rs",
              "sha256": "73a1e6fc0094e1909cbe54e9e81527d7b036a2873f781b2c96c7585f6fd67433"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.52
        },
        {
          "sectionId": "section-apply-patch",
          "id": "aspect-apply-patch-standalone-cli",
          "slug": "apply-patch-standalone-cli",
          "name": "Standalone apply_patch reads stdin",
          "description": "`codex-rs/apply-patch/src/standalone_executable.rs` implements a separate binary `apply_patch`: `run_main` accepts exactly one argument (or stdin), checks for UTF-8, fails for extra parameters, and delegates to `crate::apply_patch`. Once successfully applied, it will force flush stdout for pipes and return codes 0/1/2 for success, error, or invalid call.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/standalone_executable.rs",
              "sha256": "9b383fba1a3b0ea4660a40e89c628558b86792473698a97bb6ec04a9c847ef42"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.44
        },
        {
          "id": "aspect-git-apply-preflight",
          "sectionId": "section-apply-patch",
          "slug": "git-apply-preflight",
          "name": "apply_patch preflight parsing",
          "description": "`apply-patch/src/invocation.rs` detects `apply_patch` invocations in direct argv or shell heredocs, uses tree-sitter Bash to extract the patch body, and returns `MaybeApplyPatchVerified` to reject implicit patch bodies before execution.",
          "tags": [
            "apply-patch-flow",
            "diff",
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/invocation.rs",
              "sha256": "fb167463da2c84f8d78f3c9cbd4c1df680166aa9c2780639d8e06024fa0efaca"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-git-apply-env-config",
          "sectionId": "section-apply-patch",
          "slug": "git-apply-env-config",
          "name": "CODEX_APPLY_GIT_CFG for git apply",
          "description": "In `utils/git/src/apply.rs`, `apply_git_patch` reads `CODEX_APPLY_GIT_CFG`, splits `key=value` pairs into `-c` arguments, and includes them in the rendered git command. This allows tuning `git apply` behavior without rebuilding.",
          "tags": [
            "apply-patch-flow",
            "configuration",
            "diff",
            "git"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/apply.rs",
              "sha256": "802c387dbd3e83afa61027c78751fbb7af871f6b21a69a1f3c36ad19a1b3b202"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-git-apply-revert-staging",
          "sectionId": "section-apply-patch",
          "slug": "git-apply-revert-staging",
          "name": "Pre-git add before revert",
          "description": "In `utils/git/src/apply.rs`, `apply_git_patch` calls `stage_paths` when `revert` is true (and not preflight), staging diff paths before `git apply -R` to avoid index mismatch errors.",
          "tags": [
            "apply-patch-flow",
            "diff",
            "git"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/apply.rs",
              "sha256": "802c387dbd3e83afa61027c78751fbb7af871f6b21a69a1f3c36ad19a1b3b202"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-git-apply-output-parser",
          "sectionId": "section-apply-patch",
          "slug": "git-apply-output-parser",
          "name": "git apply output parser",
          "description": "`utils/git/src/apply.rs` `parse_git_apply_output` merges stdout/stderr, uses regex matches to classify applied, skipped, and conflicted paths, and returns structured lists for reporting.",
          "tags": [
            "apply-patch-flow",
            "diff",
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/apply.rs",
              "sha256": "802c387dbd3e83afa61027c78751fbb7af871f6b21a69a1f3c36ad19a1b3b202"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-apply-patch-lenient-parser",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-lenient-parser",
          "name": "Lenient apply_patch parser",
          "description": "`project/Codex/codex-rs/apply-patch/src/parser.rs` implements `parse_patch` with Strict/Lenient modes: `ParseMode::Lenient` tolerates heredoc `<<EOF` and extra spaces, collects `UpdateFileChunk` (context, old/new lines, end-of-file flag) and resolve paths through `Hunk::resolve_path`. Tests `parse_patch_lenient_allows_heredoc_marker`, `test_parse_one_hunk` And `test_update_file_chunk` capture error texts and differences between strict and soft parsing, so Codex correctly accepts apply_patch output even from gpt-4.1 models.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "change-tracking",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/parser.rs",
              "sha256": "b1c423481128c3137f073ba471ed937b351df24eb697249be0ccfb8010d177b5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.72
        },
        {
          "id": "aspect-tool-apply-patch-grammar",
          "sectionId": "section-apply-patch",
          "slug": "tool-apply-patch-grammar",
          "name": "Grammar freeform apply_patch",
          "description": "`core/src/tools/handlers/tool_apply_patch.lark` requires `*** Begin Patch`/`*** End Patch`, describes blocks `Add/Delete/Update/Move` and hunks `@@` with strings `+`, `-` or space. Tough grammar protects freeform `apply_patch` from arbitrary shell input.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "schema",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/handlers/tool_apply_patch.lark",
              "sha256": "ce2574fac05867f519a0ce3bdae50ce7d68b6d2e5f68d3c0c7e75518142d89b3"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.59
        },
        {
          "id": "aspect-codex-apply-patch-filesystem-writes",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-filesystem-writes",
          "name": "apply_hunks filesystem writes",
          "description": "apply_hunks_to_files traverses each Hunk: AddFile creates the parent directories and writes the content, DeleteFile removes the path, and UpdateFile uses derive_new_contents_from_chunks and moves the file via move_path if necessary. The returned AffectedPaths separates added, modified and deleted files, and errors are wrapped in anyhow::Context for the exact messages in stderr.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "fs",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-apply-patch-compute-replacements",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-compute-replacements",
          "name": "Replacement search algorithm",
          "description": "compute_replacements looks for a chunk position: first applies seek_sequence to change_context, then matches old_lines, discarding the trailing empty element for end-of-file edits. The resulting pairs (start, len, new_lines) are sorted and apply_replacements are applied in reverse order, which preserves the correct placement of multiline replacements and the final line feed.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "diff",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-apply-patch-diff-preview",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-diff-preview",
          "name": "Unified diff preview builder",
          "description": "derive_new_contents_from_chunks reads the source file, removes the extra tail after splitting on newlines, and uses compute_replacements to generate new_contents with a guaranteed trailing newline. unified_diff_from_chunks_with_context builds TextDiff::unified_diff with the desired context, allowing a git-like preview to be shown before the patch is actually written.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "diff",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-apply-patch-detection",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-command-detection",
          "name": "apply_patch command detection pipeline",
          "description": "`maybe_parse_apply_patch` recognizes two syntaxes: direct call `apply_patch`/`applypatch` with body and heredoc via `bash -lc`, A `extract_apply_patch_from_bash` additionally pulls out `cd <path> &&` to calculate `workdir`. Unrecognized forms are returned `MaybeApplyPatch::NotApplyPatch` or `ShellParseError`, which protects against false triggers.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "cli",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-apply-patch-summary",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-summary-output",
          "name": "apply_patch success summary",
          "description": "`print_summary` accepts `AffectedPaths` and prints the title `Success...` with line marks `A/M/D <path>`. Since `apply_hunks` calls it after a successful write, the CLI immediately sees the resulting affected files without reading diff.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "cli",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-apply-patch-errors",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-error-reporting",
          "name": "apply_patch error reporting",
          "description": "`apply_patch` catches `ParseError::InvalidPatch`/`InvalidHunkError` and writes clear messages to stderr before returning an error, and `apply_hunks` wraps around failures `apply_hunks_to_files`: writes error text, translates `std::io::Error` V `ApplyPatchError::IoError` and preserves context. The user receives the exact reason without being stuck on `anyhow` traces.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-apply-patch-file-change-model",
          "sectionId": "section-apply-patch",
          "slug": "apply-patch-file-change-model",
          "name": "ApplyPatchAction file change model",
          "description": "`ApplyPatchFileChange` encodes options `Add` (content), `Delete` (saved content) and `Update` (ready unified diff, `move_path`, `new_content`), A `ApplyPatchAction` stores `changes`, `patch` and final `cwd`. `maybe_parse_apply_patch_verified` populates this structure before execution so that the approval pipeline can show the exact changes.",
          "tags": [
            "apply-patch",
            "apply-patch-flow",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/src/lib.rs",
              "sha256": "6eb8f681b99a8bbee3e813942052eb992bc23b7d0e92ba07681ec7a7aec7b594"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        }
      ]
    },
    {
      "id": "section-repository",
      "slug": "repository",
      "title": "Repository",
      "entries": [
        {
          "id": "aspect-repo-maintenance-index",
          "sectionId": "section-repository",
          "slug": "repo-maintenance-index",
          "name": "Repo maintenance index",
          "description": "`ci-monorepo-pipeline`, `codespell-config`, `prettier-config` And `pnpm-workspace-structure` form housekeeping: CI workflow runs npm/pnpm staging, JSON/Markdown linters check documentation, codespell/prettier configs set the style, and `package.json` stores scripts. This node links recipes `repo-maintenance`so that new changes do not forget about repository hygiene.",
          "tags": [
            "ci",
            "repo-maintenance",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/ci.yml",
              "sha256": "bceee0a1592ac44ba937752c3e98bf98c7f2f2155bd9382cf7da40f2caca417f"
            },
            {
              "path": "projects/Codex/package.json",
              "sha256": "96b65fd9f3f262b04a4bf2702ab8793bfba8ab3484d6942aef25926c6768b6ea"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-ci-monorepo",
          "sectionId": "section-repository",
          "slug": "ci-monorepo-pipeline",
          "name": "Monorepo CI packaging pipeline",
          "description": "`.github/workflows/ci.yml` drives Node/pnpm pipeline to PR and push to main: raises pnpm without install, installs Node 22, calls `scripts/stage_npm_packages.py` via DotSlash, puts the assembly into artifact, runs it `asciicheck.py` And `readme_toc.py` for README (root and `codex-cli/`), completes `pnpm run format`. This ensures that front-line artifacts and documentation are tested before being merged.",
          "tags": [
            "ci",
            "node",
            "repo-maintenance",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/ci.yml",
              "sha256": "bceee0a1592ac44ba937752c3e98bf98c7f2f2155bd9382cf7da40f2caca417f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-cla-workflow",
          "sectionId": "section-repository",
          "slug": "cla-workflow",
          "name": "CLA Assistant workflow",
          "description": "`project/Codex/.github/workflows/cla.yml` launches contributor-assistant when `pull_request_target` and comments `recheck` or CLA signatures: action `contributor-assistant/github-action@v2.6.1` reads a document by URL `docs/CLA.md`, writes signatures in `signatures/cla.json` branches `cla-signatures`, updates statuses and ignores `dependabot[bot]`. Rights issued `actions/contents/statuses: write`, so the CLA check assigns statuses without manual participation.",
          "tags": [
            "automation",
            "ci"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/cla.yml",
              "sha256": "c97da2b89dceca3e8aeeadb24a4c36f2f713d960d942c6a737fcbecf042a5443"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-codespell-ci-workflow",
          "sectionId": "section-repository",
          "slug": "codespell-ci-workflow",
          "name": "Workflow codespell",
          "description": "`.github/workflows/codespell.yml` runs spell-check on push/PR in `main`, connects problem matcher for annotations and uses `.codespellignore`. Spelling errors are caught on CI before the merge.",
          "tags": [
            "ci",
            "repo-maintenance",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/codespell.yml",
              "sha256": "ce48e5504b4b1bdec2e6a1b7c6e614b2a358b2e2ad512ae45401f785b1939b32"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-codespell-config",
          "sectionId": "section-repository",
          "slug": "codespell-config",
          "name": "codespell configuration",
          "description": "`.codespellrc` includes `check-hidden=true`, skips `.git*`, `vendor`, lock files, JSONL and `frame*.txt`, ignores lines like `\"image/...\"` and the word `afterAll`, as well as whitelists `ratatui, ser`. The config removes spell-checker noise for artifacts and tests.",
          "tags": [
            "ci",
            "linting",
            "repo-maintenance",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/.codespellrc",
              "sha256": "9f8ee8e13aeb1ec74bd09cbec83ebe8fc1a1cf7152818abbcb09146d502a3ee5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.32
        },
        {
          "id": "aspect-codespell-ignore-words",
          "sectionId": "section-repository",
          "slug": "codespell-ignore-words",
          "name": "Codespell-ignore for branded words",
          "description": "`.codespellignore` contains `iTerm`, so that codespell action does not flag the brand name as a typo. The list is connected to `.github/workflows/codespell.yml`, so CI maintains strict spell checking without noise from legitimate words.",
          "tags": [
            "ci",
            "repo-maintenance",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/.codespellignore",
              "sha256": "e1fea2e945f3744d1619d0a18c6d1e14be0bc5aed4fa29cd7164c5b9e5d0c0ff"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.3
        },
        {
          "id": "aspect-codex-cli-dockerfile",
          "sectionId": "section-repository",
          "slug": "codex-cli-dockerfile",
          "name": "Dockerfile builds codex-cli image",
          "description": "`project/Codex/codex-cli/Dockerfile` starts from `node:24-slim`, installs cli tools (gh, git, jq, ripgrep, iptables/ipset), clears apt cache and runs as user `node`. Plastic bag `codex` installed from `dist/codex.tgz`, the npm cache is deleted and `CODEX_UNSAFE_ALLOW_NO_SANDBOX` exhibited for the container. Script `init_firewall.sh` copied under root with 500 rights, which makes the image ready for CLI launches with a pre-configured sandbox.",
          "tags": [
            "repository",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/Dockerfile",
              "sha256": "2ee3c8c41d96d85efd665c994b74b8034ef16fc24c9f5ea427d6f0e243d5d89f"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.4
        },
        {
          "id": "aspect-dependabot-updates-matrix",
          "sectionId": "section-repository",
          "slug": "dependabot-updates-matrix",
          "name": "Matrix of Dependabot updates",
          "description": "`dependabot.yaml` weekly updates ecosystems: `bun` action, `cargo` (root and subrates), `devcontainers`, `docker`, `github-actions` And `rust-toolchain`. The setup brings security patches to all parts of the monorepository.",
          "tags": [
            "automation",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/dependabot.yaml",
              "sha256": "40e6678fa268f12cedd3c2d0d095e61131ad779a976c316034db9a9599427832"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.45
        },
        {
          "id": "aspect-dotslash-release-lookup",
          "sectionId": "section-repository",
          "slug": "dotslash-release-lookup",
          "name": "DotSlash artifact map",
          "description": "`.github/dotslash-config.json` describes what `.zst` archives correspond to binaries `codex` And `codex-responses-api-proxy` on each platform and what filename to expect inside. DotSlash uses the map to download the correct builds.",
          "tags": [
            "distribution",
            "automation"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/dotslash-config.json",
              "sha256": "e1aab41138a9dde012b6b75df23ac3852dc6f168cce5827c64c0483fe32b9450"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.43
        },
        {
          "id": "aspect-ghost-commit-wrapper",
          "sectionId": "section-repository",
          "slug": "ghost-commit-wrapper",
          "name": "GhostCommit wrapper",
          "description": "`utils/git/src/lib.rs` defines `GhostCommit` with commit id, parent id, and preexisting untracked paths, plus Display accessors. It is the lightweight wrapper returned by ghost snapshot operations.",
          "tags": [
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/lib.rs",
              "sha256": "9b7970b4039efce240be39ec9353150150ae21619ca412d65533dc8edf2fbef7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-codex-git-cliff-config",
          "sectionId": "section-repository",
          "slug": "git-cliff-config",
          "name": "git-cliff config for changelog",
          "description": "`project/Codex/cliff.toml` sets the generation of releases: section `[changelog]` writes the title and group pattern by `commit.group`, adding emoji (Features/Bug Fixes/Release/Other) and auto-cleaning. IN `[git]` included conventional commits and `commit_parsers`who map `^feat`, `^fix`, `^bump` into groups, the rest falls into \"Other\". The file provides reproducible `codex` changelogs straight from Git history.",
          "tags": [
            "repository",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/cliff.toml",
              "sha256": "d025e1dd476c6a73d187ba4c0b620db1ae836c1c2247edabdebe23c81d0340c1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-codex-git-info",
          "sectionId": "section-repository",
          "slug": "git-context-collection",
          "name": "Git context collection with timeouts",
          "description": "`core/src/git_info.rs` collects the repository context: `collect_git_info` checks git via `rev-parse`, loads hash/branch/url in parallel with a timeout of 5 s; `recent_commits` And `git_diff_to_remote` use `run_git_command_with_timeout`, `branch_ancestry` and diff for closest remote SHA. This populates rollouts with metadata and works safely in large repos.",
          "tags": [
            "repository",
            "git",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/git_info.rs",
              "sha256": "5380595843fc2f5dbd7a5c6dad63e8bc67333b84501b654285f9bda9d48f701d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.57
        },
        {
          "id": "aspect-codex-git-operations",
          "sectionId": "section-repository",
          "slug": "git-tooling-operations",
          "name": "Git tooling operations",
          "description": "`utils/git/src/operations.rs` provides repository helpers such as `ensure_git_repository`, `resolve_head`, `resolve_repository_root`, `normalize_relative_path`, and `run_git_*` wrappers with consistent error handling.",
          "tags": [
            "git",
            "repository",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/git/src/operations.rs",
              "sha256": "ad9be5f9556463a18f427f74938210a44abcd54d6b7b286f68e532b8006720d8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-github-release-automation",
          "sectionId": "section-repository",
          "slug": "github-release-automation",
          "name": "Rust release automation workflow",
          "description": "`.github/workflows/rust-release.yml` builds tagged `rust-v*` releases across macOS/Linux/Windows, signs artifacts, and packages DMGs or binaries. `rust-release-prepare.yml` runs on schedule/manual dispatch to refresh `core/models.json` and open a PR, keeping release inputs current.",
          "tags": [
            "automation",
            "repository",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/rust-release.yml",
              "sha256": "63eaa31c81c55f11ee8dd0fcf46fd3ac8b494752c95b10ea9c5c8abb0da2d607"
            },
            {
              "path": "projects/Codex/.github/workflows/rust-release-prepare.yml",
              "sha256": "a525fa4ed5114795650c53c4310b97d51950301f0572c1402bd3a5de7458bafa"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-issue-dedup",
          "sectionId": "section-repository",
          "slug": "issue-deduplicator",
          "name": "Issue deduplication action",
          "description": "`.github/workflows/issue-deduplicator.yml` responds to new/tagged issues: script `gh issue list/view` prepares JSON, after which `openai/codex-action` (model gpt-5, output-schema) searches for up to five duplicates and returns a rationale. Next step through `actions/github-script` comments with links and removes label `codex-deduplicate`. Automation reduces noise in the issue tracker without manual triage.",
          "tags": [
            "repository",
            "automation"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/issue-deduplicator.yml",
              "sha256": "4c4f747d06c74976891840ace223c89e832b5cd5c9011c046cbb93acf4064388"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-issue-labeler-workflow",
          "sectionId": "section-repository",
          "slug": "issue-labeler-workflow",
          "name": "Issue label on Codex Action",
          "description": "`project/Codex/.github/workflows/issue-labeler.yml` when opening an issue or adding a shortcut `codex-label` launches `openai/codex-action@main`: prompt lists valid tags (bug, enhancement, windows-os, mcp, codex-web, azure, documentation, model-behavior, etc.) and generates JSON `labels`. Job `apply-labels` parses output via `jq`, causes `gh issue edit` to add shortcuts and removes the trigger `codex-label`. This automates the initial triage without manually reading the description.",
          "tags": [
            "automation",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/issue-labeler.yml",
              "sha256": "f7a688d1685b11cd74ddf0d480adfe99ee65d1f4dfba15729de5a1459395b6e3"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-issue-template-bug",
          "sectionId": "section-repository",
          "slug": "issue-template-bug",
          "name": "Issue templates for bugs and extensions",
          "description": "`project/Codex/.github/ISSUE_TEMPLATE/2-bug-report.yml` And `5-vs-code-extension.yml` set forms with required fields: Codex version/extension, model, platform (including command `uname` or PowerShell), reproduction steps, expected and actual behavior. Templates automatically tag `bug` or `extension` and remind you to update to the latest version. Thanks to them, triage receives diagnostic data without additional clarifying questions.",
          "tags": [
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/ISSUE_TEMPLATE/2-bug-report.yml",
              "sha256": "125e5fdea5373b98d6792fbed829ae3bf11585f2c67ca08ab6ee5055de7fac25"
            },
            {
              "path": "projects/Codex/.github/ISSUE_TEMPLATE/5-vs-code-extension.yml",
              "sha256": "37e3e08313091bf747d242c41b593604628346b36c5bffbcde14f16b1d52c326"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "sectionId": "section-repository",
          "id": "aspect-monorepo-prettier-scripts",
          "slug": "monorepo-prettier-scripts",
          "name": "The root package.json runs Prettier",
          "description": "`Codex/package.json` contains mono-rep prettier scripts: `npm run format` checks JSON, Markdown, workflows and `**/*.js`, A `format:fix` rewrites them on the spot. This is a single launch point for CI and local stripping.",
          "tags": [
            "node",
            "repo-maintenance",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/package.json",
              "sha256": "96b65fd9f3f262b04a4bf2702ab8793bfba8ab3484d6942aef25926c6768b6ea"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.27
        },
        {
          "id": "aspect-codex-repo-flake",
          "sectionId": "section-repository",
          "slug": "nix-flake-devshell",
          "name": "Nix flake builds devShell and packages",
          "description": "`project/Codex/flake.nix` uses `flake-utils` And `rust-overlay`: for each system imports nixpkgs with Rust overlay, adds common `monorepo-deps` (pnpm, husky) and returns `codex-cli`/`codex-rs` like package, devShell and app. One flake ensures that the CLI and rust workspace receive the same environment and artifacts in Nix.",
          "tags": [
            "repository",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/flake.nix",
              "sha256": "d8eb8cb99b6ddec5b7d5eb5566660698ed0cddcd2a10fa49910debb4d3a7b3a8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-repo-npm-staging",
          "sectionId": "section-repository",
          "slug": "npm-stage-script",
          "name": "stage_npm_packages prepares releases",
          "description": "`project/Codex/scripts/stage_npm_packages.py` connects `codex-cli/scripts/build_npm_package.py`, collects a list of packages via `--package`, calculates a set of native components and, if necessary, downloads GitHub Actions artifacts (`resolve_release_workflow`, `install_native_components`). The script creates temporary staging directories, calls the build script with `--vendor-src` and saves `.tgz` V `dist/npm`, providing a reproducible path to publishing Codex npm packages.",
          "tags": [
            "distribution",
            "node",
            "repo-maintenance",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/scripts/stage_npm_packages.py",
              "sha256": "e9736faa43b77caf80f901bce66ce6aa016a28eae80fec843f049d30706311e8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-repo-pnpm",
          "sectionId": "section-repository",
          "slug": "pnpm-workspace-structure",
          "name": "PNPM workspace links docs and SDK",
          "description": "`project/Codex/pnpm-workspace.yaml` declares a monorepository for `docs` And `sdk/typescript`, A `ignoredBuiltDependencies` excludes `esbuild`so that pnpm doesn't try to rebuild it. This maintains single lock files and scripts for documentation and TypeScript SDK, avoiding dependency drift between packages.",
          "tags": [
            "node",
            "repo-maintenance",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/pnpm-workspace.yaml",
              "sha256": "ea949df06d1f804d51bcae3830bb34be17e55a5d0ec6f3cdb2653452732e530f"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "sectionId": "section-repository",
          "id": "aspect-prettier-config",
          "slug": "prettier-config",
          "name": "Prettier configuration fixes style",
          "description": "`Codex/.prettierrc.toml` sets formatting: width 80, `tabWidth` 2, `trailingComma = \"all\"`, `quoteProps = \"consistent\"`, `semi = true` And `proseWrap = \"preserve\"` for Markdown, so as not to break existing documentation.",
          "tags": [
            "node",
            "repo-maintenance",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/.prettierrc.toml",
              "sha256": "dfb488a85d84a286f74d90c222f0b97d154bbc777807c49158ed60f0c97dc369"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.24
        },
        {
          "id": "aspect-prettier-ignore-config",
          "sectionId": "section-repository",
          "slug": "prettier-ignore-config",
          "name": "Prettier ignores dist and prompts",
          "description": "`.prettierignore` excludes build artifacts (`/codex-cli/dist`, `/codex-cli/node_modules`), lock file `pnpm-lock.yaml` and text hints (`prompt.md`, `*_prompt.md`, `*_instructions.md`). This prevents generated or manually aligned materials from formatting on startup `npm run format` in the root package.json.",
          "tags": [
            "ci",
            "repo-maintenance",
            "repository"
          ],
          "sources": [
            {
              "path": "projects/Codex/.prettierignore",
              "sha256": "8ed3c7df39444201e9bdf4164efc8e3c8e2a1ab1ca8d819d4744593652a5de7d"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.3
        },
        {
          "id": "aspect-codex-repo-readme-toc",
          "sectionId": "section-repository",
          "slug": "readme-toc-lint",
          "name": "README ToC lint for markers",
          "description": "`project/Codex/scripts/readme_toc.py` checks the section between `<!-- Begin ToC -->` And `<!-- End ToC -->`: Ignores headers inside code blocks, collects levels H2-H6, normalizes slugs and compares the list with the current one. At `--fix` rewrites the file with the current list, so CI quickly catches the outdated ToC and the developer can fix it with one command.",
          "tags": [
            "repo-maintenance",
            "repository",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/scripts/readme_toc.py",
              "sha256": "a69858ea5306794c8794cec5d8cc0be0e404ee90da5182bf1fa6adb5f62f7c11"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.28
        },
        {
          "id": "aspect-codex-repo-asciicheck",
          "sectionId": "section-repository",
          "slug": "repo-ascii-lint",
          "name": "ASCII hygiene check script",
          "description": "`project/Codex/scripts/asciicheck.py` checks sources for unauthorized characters: `lint_utf8_ascii` reads file in UTF-8, marks any non-ASCII codes and whitelist `allowed_unicode_codepoints`, and with `--fix` replaces them according to the dictionary `substitutions` (non-breaking spaces, dashes, quotes). The script also shows the offset in case of a decoding error and can automatically rewrite files, so it is convenient for CI and manual Markdown/code cleaning.",
          "tags": [
            "repo-maintenance",
            "repository",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/scripts/asciicheck.py",
              "sha256": "e0c3b6924f0fa0b3152f0d3f6bf636f998724d2438cce0f517f07bf6e29b6614"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.35
        },
        {
          "id": "aspect-rust-ci-matrix",
          "sectionId": "section-repository",
          "slug": "rust-ci-matrix",
          "name": "Rust CI change-aware matrix",
          "description": "`.github/workflows/rust-ci.yml` starts with job `changed`, which through `git diff` determines whether affected `codex-rs/` or `.github/`. Starts when needed `general` (cargo fmt + codegen verification), `cargo_shear`, and matrix `lint_build_test` for 8 OS/targets in dev+release, with separate Cargo caches, musl toolchain, `cargo clippy`, per-crate `cargo check`, `cargo nextest`. Job `results` collects statuses and shortcuts if there are no relevant changes. Thus, CI gives a quick signal and covers all targets.",
          "tags": [
            "repository",
            "ci",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/rust-ci.yml",
              "sha256": "cd66e943f82e3d7df556134c95c5ab898b24b0ce2a835d5e59e319c08c3ff121"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-rust-release-workflow",
          "sectionId": "section-repository",
          "slug": "rust-release-workflow",
          "name": "Rust release automation",
          "description": "`.github/workflows/rust-release.yml` triggers on tags `rust-v*`: `tag-check` checks format and synchronization with `codex-rs/Cargo.toml`. Next is the matrix build `codex`/`codex-responses-api-proxy` for macOS, Linux (gnu/musl, x86/aarch64) and Windows, includes macOS signing/entitlements, packages tar/zip and assets. The release stage stages npm packages (codex, responses-api-proxy, sdk), publishes GitHub Release and DotSlash, and `publish-npm` uses OIDC trusted publishing. At the end `update-branch` moves `latest-alpha-cli`. The pipeline automates releases and distributes binaries/SDKs across channels.",
          "tags": [
            "repository",
            "distribution",
            "ci",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/rust-release.yml",
              "sha256": "63eaa31c81c55f11ee8dd0fcf46fd3ac8b494752c95b10ea9c5c8abb0da2d607"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.75
        },
        {
          "id": "aspect-sdk-workflow",
          "sectionId": "section-repository",
          "slug": "sdk-ci-workflow",
          "name": "SDK workflow gating",
          "description": "`.github/workflows/sdk.yml` on PR/main raises pnpm+Node 22, collects the binary `codex` (so that the SDK has a CLI), then executes `pnpm -r --filter ./sdk/typescript run build|lint|test`. Thus, the TypeScript SDK does not end up in main without assembly, lint and units.",
          "tags": [
            "repository",
            "sdk",
            "ci",
            "typescript"
          ],
          "sources": [
            {
              "path": "projects/Codex/.github/workflows/sdk.yml",
              "sha256": "a4d3ebc6b5a13c06b4a7244fadd2d6adf389e6c48b43a89032891651f78c00f4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        }
      ]
    },
    {
      "id": "section-cli",
      "slug": "cli",
      "title": "CLI wrappers",
      "entries": [
        {
          "id": "aspect-cli-core-index",
          "sectionId": "section-cli",
          "slug": "cli-core-index",
          "name": "CLI core index",
          "description": "`cli/src/main.rs` collects all subcommands through `MultitoolCli`, A `cli/src/lib.rs` initializes configuration, arguments and subcommands (exec, app-server, mcp, login). The entry serves as input when changing the kernel CLI and command routing.",
          "tags": [
            "cli",
            "cli-core",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            },
            {
              "path": "projects/Codex/codex-rs/cli/src/lib.rs",
              "sha256": "f1ad72f9f320e362e9aaa6a5913a5b392f32e7c9bd404f616f7cf028e584a4a8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-cli-exec-index",
          "sectionId": "section-cli",
          "slug": "cli-exec-index",
          "name": "CLI exec subcommands",
          "description": "`exec/src/cli.rs` defines `codex exec` options (model selection, sandbox policy, profiles, resume/review subcommands, output schema, json output) and shared CLI flags. `exec/src/lib.rs` wires `run_main` with the event processor and OTEL output so exec UX, approvals, and streaming behavior are centralized here.",
          "tags": [
            "cli",
            "exec",
            "cli-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/cli.rs",
              "sha256": "1d2799750ccedb63dc784e48c48512c0429015c75ec04339e2afd522db0ca157"
            },
            {
              "path": "projects/Codex/codex-rs/exec/src/lib.rs",
              "sha256": "6179dc3017cca28aeb267752c2e1035d5360c32301f2d56cb4e0d5d155172cf2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "id": "aspect-cli-app-server-index",
          "sectionId": "section-cli",
          "slug": "cli-app-server-index",
          "name": "CLI  app-server threads",
          "description": "`cli/src/main.rs` routes `codex app-server` plus tooling subcommands for TypeScript and JSON Schema generation, and exposes the analytics default flag used by first-party clients. `cli/src/login.rs` handles ChatGPT/API-key login and status used by the app-server startup flow.",
          "tags": [
            "cli",
            "app-server",
            "cli-core",
            "configuration"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            },
            {
              "path": "projects/Codex/codex-rs/cli/src/login.rs",
              "sha256": "5803388d39febdeb13424356cb300ba4cc8b020c2580936031298319ae209fac"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.8
        },
        {
          "id": "aspect-cli-mcp-index",
          "sectionId": "section-cli",
          "slug": "cli-mcp-index",
          "name": "CLI MCP control",
          "description": "`cli/src/mcp_cmd.rs` describes `codex mcp` (add/list/login/logout), and `cli/tests/mcp_add_remove.rs` And `mcp_list.rs` check stdio/HTTP scripts. The node suggests which files to update when finalizing the MCP configuration, authorization and server lists.",
          "tags": [
            "cli",
            "mcp",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/mcp_cmd.rs",
              "sha256": "0652859cfa4b27d744b8e310e0a993d8276c68e47918bbd8002094c88da0c4b5"
            },
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            },
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_list.rs",
              "sha256": "2d7b85c782121abdf8a92554a1469a93dbb0c1537fcf82544dc5db1951f79c6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.8
        },
        {
          "id": "aspect-codex-cli-wrapper",
          "sectionId": "section-cli",
          "slug": "codex-cli-wrapper",
          "name": "Node CLI wrapper and binary selection",
          "description": "`codex-cli/bin/codex.js` acts as an npm entrypoint: determines the target triple by `process.platform`/`arch`, collects the path to the vendor binary `codex`, completes PATH with directories `vendor/<triple>/path` and launches the binary via `spawn` with signal forwarding (SIGINT/SIGTERM/SIGHUP). Promise `childResult` mirrors the exit code/signal to make the npm package behave like a native CLI.",
          "tags": [
            "cli",
            "node",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/bin/codex.js",
              "sha256": "7b59e2f813771af216c27d44f7ac7c3043aba130d8b4357ffe42f56e8bb7f9f7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-responses-proxy-launcher",
          "sectionId": "section-cli",
          "slug": "responses-proxy-launcher",
          "name": "Responses proxy Node launcher",
          "description": "`codex-rs/responses-api-proxy/npm/bin/codex-responses-api-proxy.js` defines target triple (`linux`, `darwin`, `win32`  `x64`/`arm64`), builds a path `vendor/<triple>/codex-responses-api-proxy(.exe)` and launches the binary via `spawn`, inheriting stdio. Handler `child.on(\"exit\")` mirrors the exit code or signal back to the Node process. This allows the responses proxy npm package to automatically select the correct artifact without a shell.",
          "tags": [
            "cli",
            "node",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/responses-api-proxy/npm/bin/codex-responses-api-proxy.js",
              "sha256": "13d37206092330210088b1c1c329a1121a07203412b99c04f0275e81b75f17a2"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-cli-native-installer",
          "sectionId": "section-cli",
          "slug": "cli-native-installer",
          "name": "Native binary installer workflow",
          "description": "`codex-cli/scripts/install_native_deps.py` pulls up the Rust binaries Codex and ripgrep: `parse_args` allows you to set `--workflow-url` GitHub Actions and filter `--component`, `install_binary_components` unpacks artifacts (`codex`, `codex-responses-api-proxy`) V `vendor/<target>/...`, A `fetch_rg` reads the DotSlash manifesto `bin/rg`, simultaneously downloading archives for all supported platforms. The script ensures that the npm package includes ready-made native dependencies for Linux, macOS and Windows.",
          "tags": [
            "cli",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/install_native_deps.py",
              "sha256": "897c15f0e99aec2832fcc793a321a3132e8011e635fa011b587e193b1a768b3a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-arg0-dispatch",
          "sectionId": "section-cli",
          "slug": "arg0-dispatch",
          "name": "Arg0 dispatcher for helper CLIs",
          "description": "`codex_arg0::arg0_dispatch_or_else` routes a single binary via argv0: link `codex-linux-sandbox` immediately launches sandbox, aliases `apply_patch`/`applypatch` they pull the built-in binary, and the normal call loads `.env` without `CODEX_*`, adds a temporary directory with `apply_patch` in PATH and Tokio runtime starts before async main. This allows one executable to provide multiple CLIs on top of a common framework.",
          "tags": [
            "cli",
            "cli-core",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/arg0/src/lib.rs",
              "sha256": "64249c499591fc037bec77412dc7fde9fde9b87f8fb079d1186dcc94684084c9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.78
        },
        {
          "id": "aspect-tui-cli-entrypoint",
          "sectionId": "section-cli",
          "slug": "tui-cli-entrypoint",
          "name": "codex-tui main merges overrides and runs run_main",
          "description": "`projects/Codex/codex-rs/tui/src/main.rs` describes the top-level CLI: structure `TopCli` through `clap::Parser` glues `CliConfigOverrides` And `codex_tui::Cli`, `main()` turns into `arg0_dispatch_or_else`to support alias `codex-linux-sandbox`. Before the call `run_main` it prepends global overrides to the internal CLI and prints when finished `FinalOutput` with tokens if usage > 0. So a single TUI binary respects common flags and integrates with the argv0 sandbox redirection.",
          "tags": [
            "cli",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/main.rs",
              "sha256": "ce03885aefdbb74430b16be575280eef0d1235e433540ce84417471f279f291b"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/main.rs",
              "sha256": "204e02adfa273607b0c3ba3668b43ef8f422b969dde309f7516d69d3dbfb1f5e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        },
        {
          "id": "aspect-codex-debug-sandbox-cli",
          "sectionId": "section-cli",
          "slug": "debug-sandbox-cli",
          "name": "CLI debug sandbox launch",
          "description": "`codex-rs/cli/src/debug_sandbox.rs` implements `codex debug sandbox`: `run_command_under_sandbox` loads the config from CLI overrides, selects `SandboxMode::WorkspaceWrite` for mode `--full-auto`, collects the environment through `create_env` and spawns either `spawn_command_under_seatbelt`, or `spawn_command_under_linux_sandbox`, after which it waits for child and passes the status through `handle_exit_status`. The team allows engineers to reproducibly run processes under Seatbelt/Landlock and check the correctness of the sandbox policy.",
          "tags": [
            "cli",
            "sandbox",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/debug_sandbox.rs",
              "sha256": "78ae073abc4e7d14d31027e40b46ea37faf3917801b271b76d00cc7e9489598e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-cli-build-npm-package",
          "sectionId": "section-cli",
          "slug": "cli-build-npm-package",
          "name": "NPM staging and packaging workflow",
          "description": "`codex-cli/scripts/build_npm_package.py` prepares Codex npm tariffs: parses `--package`/`--version`, creates a staging directory, copies binary launchers and README, synchronizes `package.json`, pulls up `vendor` with native components and optionally runs `npm pack`. For `codex-sdk` the script automatically builds `pnpm run build` and adds `dist`+`vendor`. This is the main way to publish CLI, responses proxy and SDK without manually copying files.",
          "tags": [
            "cli",
            "distribution",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/build_npm_package.py",
              "sha256": "f2334ecbf7853a920ccc69fbc8e491c0984f0743571204b28f9858fd79d3f324"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.49
        },
        {
          "id": "aspect-cli-run-in-container",
          "sectionId": "section-cli",
          "slug": "cli-run-in-container",
          "name": "Workspace container runner script",
          "description": "`codex-cli/scripts/run_in_container.sh` deploys a Docker container of the same name based on the workspace path: calculates a unique name, mounts the working directory on the same path, writes the list of allowed domains to `/etc/codex/allowed_domains.txt`, drives inside `init_firewall.sh`and then runs `codex --full-auto` with the transmitted command. The script automatically cleans the container and prevents Codex from running without an explicit list of domains, which is convenient for local validation of a sandbox build.",
          "tags": [
            "cli",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/run_in_container.sh",
              "sha256": "5a8db0b726e806ed950f769feb6c028bd6dccc598fbd84d075af0193d8892699"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.43
        },
        {
          "id": "aspect-cli-init-firewall",
          "sectionId": "section-cli",
          "slug": "cli-init-firewall",
          "name": "Container firewall bootstrap",
          "description": "`codex-cli/scripts/init_firewall.sh` configures network restrictions inside the container: reads the list of domains, resets iptables/ipset, creates ipset `allowed-domains`, resolve IP via `dig`, adds rules for DNS, loopback and host network, denies everything else and responds with TCP reset/ICMP reject for blocked traffic. At the end the script checks that `api.openai.com` available and `example.com` - No. This ensures that the container Codex respects the list of allowed egress addresses.",
          "tags": [
            "cli",
            "security",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/init_firewall.sh",
              "sha256": "1cd87e915258c7c8c630f5000ef0d9170a8c5cbbce2ebb2e468d00e56b310e98"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.48
        },
        {
          "id": "aspect-cli-build-container",
          "sectionId": "section-cli",
          "slug": "cli-build-container",
          "name": "Local Docker image builder",
          "description": "`codex-cli/scripts/build_container.sh` prepares a Codex Docker image: enters the root of the project, executes `pnpm install` And `pnpm run build`, builds npm package `codex.tgz`, then calls `docker build -t codex -f Dockerfile .`. The script provides reproducible image generation with up-to-date CLI artifacts without manual copying or skipping build steps.",
          "tags": [
            "cli",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/build_container.sh",
              "sha256": "2e0b8f7312dbc9b5e5b0c597d8a5a18d9f26ba848102c656262932a3cbdb2b91"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.42
        },
        {
          "id": "aspect-cli-mcp-command",
          "sectionId": "section-cli",
          "slug": "cli-mcp-command",
          "name": "MCP command management subcommands",
          "description": "`codex-rs/cli/src/mcp_cmd.rs` implements a subcommand `codex mcp`: `run_add` validates the name, generates `McpServerTransportConfig` for stdio or streamable HTTP and writes to `~/.codex/config.toml`, `run_list`/`run_get` load the config with CLI overrides and output JSON with auth statuses, and `run_login`/`run_logout` use Responses OAuth via `perform_oauth_login` And `delete_oauth_tokens`. The CLI acts as a single interface for managing global MCP servers and their authorization.",
          "tags": [
            "cli",
            "mcp",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/mcp_cmd.rs",
              "sha256": "0652859cfa4b27d744b8e310e0a993d8276c68e47918bbd8002094c88da0c4b5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.57
        },
        {
          "id": "aspect-codex-exec-event-processor",
          "sectionId": "section-cli",
          "slug": "exec-event-processor",
          "name": "EventProcessor contract for codex exec",
          "description": "`exec/src/event_processor.rs` defines the output framework `codex exec`: enum `CodexStatus` signals continuation or termination of CLI, trait `EventProcessor` requires `print_config_summary`, `process_event` and optional `print_final_output`, A `handle_last_message`/`write_last_message_file` write the agent's last response to a file and warn if it is missing. Thanks to this, the CLI can implement both human-readable and JSONL output, replacing only the event handler.",
          "tags": [
            "cli",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/event_processor.rs",
              "sha256": "e530c00caf82748be32db23f5c6948fe27df046656f738c2b483682e8cd4f64f"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.36
        },
        {
          "id": "aspect-codex-exec-cli-flags",
          "sectionId": "section-cli",
          "slug": "exec-cli-flags",
          "name": "codex exec Clap interface",
          "description": "`codex-rs/exec/src/cli.rs` sets the Clap parser `Cli`: structure collects multiple images (`--image`), model via `--model` or `--oss`, profiles `--profile` and working directory `--cd`. Flags `--sandbox`/`-s` use `SandboxModeCliArg`, `--full-auto` And `--dangerously-bypass-approvals-and-sandbox` (alias `--yolo`) switch the sandbox, and `config_overrides: CliConfigOverrides` connects `-c key=value`. Additionally supported `--color`, `--json`, `--include-plan-tool`, `--output-schema`, `--output-last-message` and sub-team `resume` With `--last`, so knowledge of the file is critical to documenting the UX `codex exec` and automation on top of the CLI.",
          "tags": [
            "cli",
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/cli.rs",
              "sha256": "1d2799750ccedb63dc784e48c48512c0429015c75ec04339e2afd522db0ca157"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-codex-exec-human-output",
          "sectionId": "section-cli",
          "slug": "exec-human-output-renderer",
          "name": "Human-readable exec renderer",
          "description": "`exec/src/event_processor_with_human_output.rs` responsible for human readable mode `codex exec`: `create_with_ansi` adjusts styles to `--color`, `show_agent_reasoning` And `show_raw_agent_reasoning` take into account the configuration of thought hiding. Event handlers limit the stdout of commands and MCP calls `MAX_OUTPUT_LINES_FOR_EXEC_TOOL_CALL`, format durations through `format_duration`, apply_patch diff, web search and PlanUpdate are highlighted, and `print_final_output` displays the token total and the last replica. This layer defines how the CLI will report progress to the user without JSONL.",
          "tags": [
            "cli",
            "exec",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/event_processor_with_human_output.rs",
              "sha256": "79aaf8b57c219904e9707f5456cac40cc0fc88265717cc01622510355752b8e0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "sectionId": "section-cli",
          "id": "aspect-cli-sandbox-subcommands",
          "slug": "cli-sandbox-subcommands",
          "name": "Seatbelt/Landlock subcommands",
          "description": "`codex-rs/cli/src/lib.rs` describes subcommands `codex seatbelt` And `codex landlock`: structures `SeatbeltCommand` And `LandlockCommand` inherit `Parser`, throw `CliConfigOverrides` and collect trailing args into `command`.    entrypoint     Seatbelt  Landlock   `--full-auto`.",
          "tags": [
            "cli",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/lib.rs",
              "sha256": "f1ad72f9f320e362e9aaa6a5913a5b392f32e7c9bd404f616f7cf028e584a4a8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "sectionId": "section-cli",
          "id": "aspect-cli-exit-status",
          "slug": "cli-exit-status",
          "name": "CLI exit status bridge",
          "description": "`codex-rs/cli/src/exit_status.rs` normalizes the output codes of child processes: on Unix `handle_exit_status` takes into account `ExitStatusExt::signal()` and returns `128+signal`, on Windows only uses `status.code()`. The call ends the process `std::process::exit`, so that the CLI repeats the code/signal of the slave process.",
          "tags": [
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/exit_status.rs",
              "sha256": "4e868042c49f45b7621b268efcf168a09bb11f51dad27a75610b8c4fedcf8514"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.3
        },
        {
          "sectionId": "section-cli",
          "id": "aspect-cli-login-flows",
          "slug": "cli-login-flows",
          "name": "CLI login flows",
          "description": "`codex-rs/cli/src/login.rs` covers all modes `codex login`: `run_login_with_chatgpt` And `run_login_with_device_code` start local server (`ServerOptions`) and complete the process by success/error, `run_login_with_api_key` causes `login_with_api_key`, A `read_api_key_from_stdin` And `safe_format_key` carefully handle stdin. `load_config_or_exit` reuses `Config::load_with_cli_overrides`, so all login branches read the same configs.",
          "tags": [
            "cli",
            "auth"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/login.rs",
              "sha256": "5803388d39febdeb13424356cb300ba4cc8b020c2580936031298319ae209fac"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.7
        },
        {
          "id": "aspect-cli-completion-generator",
          "sectionId": "section-cli",
          "slug": "cli-completion-generator",
          "name": "completions generation subcommand",
          "description": "Sub-team `Completion` causes `print_completion`: she takes `MultitoolCli::command()` and through `clap_complete::generate` prints the completion script for the selected shell to stdout.",
          "tags": [
            "cli",
            "cli-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-cli-generate-ts-command",
          "sectionId": "section-cli",
          "slug": "cli-generate-ts-command",
          "name": "Hidden generate-ts",
          "description": "Hidden subcommand `GenerateTs` passes arguments to `codex_protocol_ts::generate_ts`, accepts `--out` and optional `--prettier`. It is used to rebuild TypeScript protocol bindings directly from the CLI.",
          "tags": [
            "cli",
            "mcp",
            "cli-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.38
        },
        {
          "id": "aspect-dotslash-rg-manifest",
          "sectionId": "section-cli",
          "slug": "dotslash-rg-manifest",
          "name": "DotSlash manifest for ripgrep",
          "description": "`codex-cli/bin/rg` describes the DotSlash manifest ripgrep: for macOS, Linux and Windows are listed `size`, `hash: blake3`, `digest` and the path to the executable file inside the archive. `install_native_deps.py` uses this list to download the appropriate archive and put `rg` V `vendor/<triple>`so the CLI always delivers compatible ripgrep without manually selecting a release.",
          "tags": [
            "cli",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/bin/rg",
              "sha256": "cd8dff1f11199aeeca4c5bc906899acf42d5e39e89ae3410646b12a680753a3d"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-cli-package",
          "sectionId": "section-cli",
          "slug": "codex-cli-package",
          "name": "Minimal package.json Codex CLI",
          "description": "`codex-cli/package.json` announces npm package `@openai/codex`: field `bin` mapit `codex` on `bin/codex.js`, `files` includes only `bin` And `vendor`, `type: module` And `engines.node >=16` secure the launch via ESM. `repository.directory` indicates `codex-cli`, so the build scripts copy exactly these directories to the tarball, and extra files do not end up in publication.",
          "tags": [
            "cli",
            "distribution",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/package.json",
              "sha256": "a1d66411ca8271ec6ed34a2d397078b13a51d1e23f1df9ea5d1221386af1340f"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.4
        },
        {
          "id": "aspect-cli-mcp-add-remove-tests",
          "sectionId": "section-cli",
          "slug": "cli-mcp-add-remove-tests",
          "name": "Integration tests `codex mcp add/remove`",
          "description": "`codex-rs/cli/tests/mcp_add_remove.rs` drives `codex mcp` against temporary `CODEX_HOME`: scripts check that `mcp add docs -- echo hello` writes `McpServerTransportConfig::Stdio` with command and arguments, `remove` clears the config and prints a hint, repeated remove returns \"No MCP server 'docs' found.\". Tests capture the order of the keys `--env`, support `StreamableHttp` without token, require explicit `--bearer-token-env-var` and guarantee that the removed flag `--with-bearer-token` results in an error. This way the CLI doesn't regress when MCP arguments change.",
          "tags": [
            "cli",
            "mcp",
            "integrations",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-cli-mcp-list-tests",
          "sectionId": "section-cli",
          "slug": "cli-mcp-list-tests",
          "name": "Tests `codex mcp list/get` output",
          "description": "`codex-rs/cli/tests/mcp_list.rs` makes sure that `codex mcp list` without servers prints \"No MCP servers configured yet.\", and then `mcp add` the table contains Name/Status/Auth columns with command and environment variables. `--json` returns a strongly typed array with transport `stdio`, A `mcp get docs --json` and text output include instructions `remove: codex mcp remove docs`. This protects the MCP list UX and JSON API.",
          "tags": [
            "cli",
            "mcp",
            "integrations",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_list.rs",
              "sha256": "2d7b85c782121abdf8a92554a1469a93dbb0c1537fcf82544dc5db1951f79c6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-exec-test-server-error-exit",
          "sectionId": "section-cli",
          "slug": "exec-server-error-exit-test",
          "name": "Exec server error exit regression",
          "description": "`exec/tests/suite/server_error_exit.rs` mounts SSE with `response.failed` and makes sure that `codex-exec --experimental-json` exits with code 1, allowing automations to catch Responses API errors.",
          "tags": [
            "cli",
            "exec",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/server_error_exit.rs",
              "sha256": "1432430b2f74af0088334e98d067ed7a77fff0c12af318b22480c8c44336296a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-exec-test-originator-header",
          "sectionId": "section-cli",
          "slug": "exec-originator-header-test",
          "name": "Exec originator header regression",
          "description": "`exec/tests/suite/originator.rs` checks that the Requests API receives the header `Originator: codex_exec`, and the variable `CODEX_INTERNAL_ORIGINATOR_OVERRIDE` allows you to set a custom value for the backend.",
          "tags": [
            "cli",
            "exec",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/originator.rs",
              "sha256": "9d4da4c0e0607d3abc909bf464bd90e089572bf7eddee6e11b14bb6598ef4207"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-cli-stream-exec-tests",
          "sectionId": "section-cli",
          "slug": "cli-stream-exec-tests",
          "name": "CLI streaming and config override tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/cli_stream.rs` launches `cargo run -p codex-cli exec` against mock endpoints. `chat_mode_stream_cli` checks streaming `hi` via SSE and what `RolloutRecorder::list_conversations` sees a new session, `exec_cli_applies_experimental_instructions_file` makes sure that `-c experimental_instructions_file=...` goes into the body of the request, and `collects_git_info_and_serializes` initializes a temporary git repository and validates serialization `GitInfo`. Tests confirm that the CLI correctly streams output and picks up config overrides.",
          "tags": [
            "cli",
            "exec",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/cli_stream.rs",
              "sha256": "96c4d1889c061495f7ac04713527f93fe52403e67bf84c67204cd4d241204cdc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-tool-shell-aliases",
          "sectionId": "section-cli",
          "slug": "tool-shell-aliases",
          "name": "Shell tool aliases",
          "description": "`build_specs` after selection the shell tool registers handlers `shell`, `container.exec` And `local_shell`pointing them to one `ShellHandler`. Aliases maintain backward compatibility between old tooltips and MCP.",
          "tags": [
            "tools",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/spec.rs",
              "sha256": "b5ac53b6a6c42afd23d9634f338d1614e51036abf9e04ce5f712dcdeddff3492"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-file-search-cli-parser",
          "sectionId": "section-cli",
          "slug": "file-search-cli-parser",
          "name": "file-search CLI parser",
          "description": "`codex_file_search::Cli` (V `file-search/src/cli.rs`) specifies the Clap interface: `--limit` And `--threads` stored as `NonZero<usize>` with default 64/2, `--compute-indices` controls the backlight, `--exclude` accumulates patterns, and `--json` includes machine output. This is the official parser for the search utility.",
          "tags": [
            "cli",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/file-search/src/cli.rs",
              "sha256": "0c0731ad619e2677b0186f4379bd10996eefe1e556b9587155e96f4b7650f97d"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.46
        },
        {
          "id": "aspect-file-search-stdout-reporter",
          "sectionId": "section-cli",
          "slug": "file-search-stdout-reporter",
          "name": "file-search stdout reporter",
          "description": "`file-search/src/main.rs` parses CLI, builds `StdioReporter` and calls `run_main`. Reporter writes JSON (via `serde_json`) or text highlighting matching indexes with ANSI sequences, as well as warnings about shortened results and an empty pattern. This is the UX layer of the utility, combining terminal and machine modes.",
          "tags": [
            "cli",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/file-search/src/main.rs",
              "sha256": "d4fec692b6582a824eba9b533f27e04b093436c8d1a492f3f4b5a1b9c7c86f76"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.46
        },
        {
          "id": "aspect-cli-approval-mode-enum",
          "sectionId": "section-cli",
          "slug": "cli-approval-mode-enum",
          "name": "CLI approval mode enum",
          "description": "`codex_common::approval_mode_cli_arg` describes the Clap enumeration `ApprovalModeCliArg` For `--approval-mode`: options `untrusted`, `on-failure`, `on-request` And `never` correspond `AskForApproval` and converted via `From`-implementation. This allows all Codex subcommands to share a single source of truth for escalation policies without manually parsing strings.",
          "tags": [
            "configuration",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/approval_mode_cli_arg.rs",
              "sha256": "996ac3891b725063daf80311c6f977b07960e4e19359d4fd16758e87e9d380e9"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.62
        },
        {
          "id": "aspect-cli-sandbox-mode-enum",
          "sectionId": "section-cli",
          "slug": "cli-sandbox-mode-enum",
          "name": "CLI sandbox mode enum",
          "description": "`codex_common::sandbox_mode_cli_arg` implements `SandboxModeCliArg` for the flag `--sandbox/-s`: values `read-only`, `workspace-write` And `danger-full-access` converted to `SandboxMode` without additional arguments. Type separates UI flag from advanced settings `workspace-write`, which are still given via `config.toml` or `-c` overrides.",
          "tags": [
            "configuration",
            "cli",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/sandbox_mode_cli_arg.rs",
              "sha256": "8d5401e488605505afa1172b3127630b81501da15f6108e287b5e150d08abac0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-cli-resume-override-merge",
          "sectionId": "section-cli",
          "slug": "cli-resume-override-merge",
          "name": "Merging settings for codex resume",
          "description": "`finalize_resume_interactive` along with `merge_resume_cli_flags` carry `session_id`/`--last`, overwrite only explicitly specified flags (model, sandbox, approvals, web-search) and add root `-c key=value` with lower priority. `codex resume` inherits interactive settings correctly.",
          "tags": [
            "cli",
            "configuration"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        }
      ]
    },
    {
      "id": "section-cli-distribution",
      "slug": "cli-distribution",
      "title": "CLI Distribution",
      "entries": [
        {
          "id": "aspect-codex-cli-build-container",
          "sectionId": "section-cli-distribution",
          "slug": "codex-cli-build-container",
          "name": "Building a codex container",
          "description": "`codex-cli/scripts/build_container.sh` runs from root CLI: with `set -euo pipefail` And `trap popd` goes into `codex-cli`, performs `pnpm install` And `pnpm run build`, cleanses `dist/openai-codex-*.tgz`, forms a new tarball `pnpm pack --pack-destination ./dist`, renames it to `codex.tgz` and completes `docker build -t codex -f Dockerfile`. The image always receives a fresh JS bundle and tarball without garbage.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/build_container.sh",
              "sha256": "2e0b8f7312dbc9b5e5b0c597d8a5a18d9f26ba848102c656262932a3cbdb2b91"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-cli-build-npm-package",
          "sectionId": "section-cli-distribution",
          "slug": "codex-cli-build-npm-package",
          "name": "Codex npm package stage",
          "description": "`codex-cli/scripts/build_npm_package.py` accepts `--package` (`codex`, `codex-responses-api-proxy`, `codex-sdk`) and version via `--version/--release-version`, prepares staging-dir and writes `package.json` with updated `version`. For `codex` and proxy it copies bin/README and, if available `--vendor-src`, reduces `vendor/<triple>/<component>` through `copy_native_binaries`so that Codex and ripgrep are included in the tarball. In the thread `codex-sdk` `stage_codex_sdk_sources` launches `pnpm install`/`build`, transfers `dist`, README and LICENSE. When released, the script displays a checklist of commands and, if specified `--pack-output`, causes `npm pack`, forming a tarball for publication.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/build_npm_package.py",
              "sha256": "f2334ecbf7853a920ccc69fbc8e491c0984f0743571204b28f9858fd79d3f324"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "id": "aspect-codex-cli-docker-image",
          "sectionId": "section-cli-distribution",
          "slug": "codex-cli-docker-image",
          "name": "Codex CLI Docker image",
          "description": "`codex-cli/Dockerfile` starts from `node:24-slim`, puts tools through `apt-get install --no-install-recommends` (aggregate, ca-certificates, curl, dnsutils, fzf, gh, git, gnupg2, iproute2, ipset, iptables, jq, less, man-db, procps, ripgrep, unzip, zsh) and immediately cleans `/var/lib/apt/lists`. npm prefix is moved to `/usr/local/share/npm-global` under user `node`, the directory is added to `PATH`, then `dist/codex.tgz` installed globally, after which the npm cache is cleared, `.cache`, `tests` And `docs`. The image exposes `CODEX_UNSAFE_ALLOW_NO_SANDBOX=1`, copies `init_firewall.sh` under root and gives him `chmod 500`, returning to the user `node`.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/Dockerfile",
              "sha256": "2ee3c8c41d96d85efd665c994b74b8034ef16fc24c9f5ea427d6f0e243d5d89f"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-cli-install-native-deps",
          "sectionId": "section-cli-distribution",
          "slug": "codex-cli-install-native-deps",
          "name": "Installing native Codex binaries",
          "description": "`codex-cli/scripts/install_native_deps.py` accepts `--workflow-url` And `--component`, by default sets `codex` And `rg`: extracts `workflow_id` from URL, runs `gh run download --repo openai/codex <id>` into a temporary directory and places the artifacts in `vendor/<target>/<component>` for all platforms. `install_binary_components` parallel targets through `ThreadPoolExecutor`, `_load_manifest` causes `dotslash -- parse bin/rg`, checks `providers`/`path`, A `extract_archive` supports `.zst`, `tar.gz` And `zip`, exposing `0o755` for Unix. `DEFAULT_WORKFLOW_URL` gives a stable fallback, and `--component` only knows how to choose `codex` or `codex-responses-api-proxy`.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "node",
            "gh-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/install_native_deps.py",
              "sha256": "897c15f0e99aec2832fcc793a321a3132e8011e635fa011b587e193b1a768b3a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.82
        },
        {
          "id": "aspect-codex-cli-run-in-container",
          "sectionId": "section-cli-distribution",
          "slug": "codex-cli-run-in-container",
          "name": "Running the codex dev container",
          "description": "`codex-cli/scripts/run_in_container.sh` normalizes the working directory (`--work_dir` or `WORKSPACE_ROOT_DIR`) to a unique name `codex_<path>`, removes the container of the same name in advance and raises `docker run` With `--cap-add=NET_ADMIN/NET_RAW`, mounting the directory on the same path (`/app<path>`). The script requires a non-empty `OPENAI_ALLOWED_DOMAINS`, validates each name, writes the list to `/etc/codex/allowed_domains.txt` (0444) and starts `init_firewall.sh` as root, after which it deletes the binary. The team throws through `codex --full-auto ` inside the container and `trap cleanup` guarantees the removal of the container, allowing you to quickly check the sandbox build.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "security"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/run_in_container.sh",
              "sha256": "5a8db0b726e806ed950f769feb6c028bd6dccc598fbd84d075af0193d8892699"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-codex-stage-npm-packages",
          "sectionId": "section-cli-distribution",
          "slug": "stage-npm-packages-script",
          "name": "Orchestration of staging npm packages",
          "description": "`project/Codex/scripts/stage_npm_packages.py` requires `--release-version` and one or more `--package`: collects `PACKAGE_NATIVE_COMPONENTS`, in the absence `--workflow-url` looking for `rust-release.yml` through `gh run list --branch rust-v<version>` and saves `resolved_head_sha`. Native binaries are placed in a temporary directory in `RUNNER_TEMP` (`npm-native-*`) team `install_native_deps.py`, after which `build_npm_package.py --pack-output` folds `<name>-npm-<version>.tgz` V `dist/npm`. The script prints a hint `should git checkout <sha>`, and the flag `--keep-staging-dirs` leaves staging for manual checking.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "node",
            "gh-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/scripts/stage_npm_packages.py",
              "sha256": "e9736faa43b77caf80f901bce66ce6aa016a28eae80fec843f049d30706311e8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-responses-proxy-npm-manifest",
          "sectionId": "section-cli-distribution",
          "slug": "responses-proxy-npm-manifest",
          "name": "Responses proxy npm manifest",
          "description": "`codex-rs/responses-api-proxy/npm/package.json` describes the package `@openai/codex-responses-api-proxy`: announces `bin/codex-responses-api-proxy.js`, limits `files` to `bin` And `vendor`, fixes `type: module` And `engines.node >=16`, A `repository.directory` points to a subfolder of the monorepo. This manifestation ensures that when publishing to npm, only the launcher and vendor proxy binaries remain.",
          "tags": [
            "distribution",
            "cli-packaging",
            "node"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/responses-api-proxy/npm/package.json",
              "sha256": "ee7e223fbd9d1142402a9c9326f27339e5f1081811fec707a58c12f1a2822362"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.52
        },
        {
          "id": "aspect-install-native-extract-archive",
          "sectionId": "section-cli-distribution",
          "slug": "install-native-extract-archive",
          "name": "Native deps archive extractor",
          "description": "`install_native_deps.py::extract_archive` unpacks artifacts for vendor: `zst` through `zstd -d`, `tar.gz` And `zip` require explicit `archive_member` and throw it away `RuntimeError`, if there is no record. Helper is used `_install_single_binary` And `_fetch_single_rg`, so one script installs Codex and ripgrep on all platforms and immediately crashes on crookedly collected archives.",
          "tags": [
            "distribution",
            "cli-packaging",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/install_native_deps.py",
              "sha256": "897c15f0e99aec2832fcc793a321a3132e8011e635fa011b587e193b1a768b3a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-build-npm-copy-native",
          "sectionId": "section-cli-distribution",
          "slug": "build-npm-copy-native",
          "name": "Copy native components into staging",
          "description": "`build_npm_package.py::copy_native_binaries` transfers pre-downloaded binaries: creates `vendor/<triple>` in staging, checks for the presence of the required directories (`codex`, `codex-responses-api-proxy`, `path` for rg) and clears old residues before `copytree`. If the component is missing, the script crashes, preventing the npm package from being published without the necessary native files.",
          "tags": [
            "distribution",
            "cli-packaging",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/build_npm_package.py",
              "sha256": "f2334ecbf7853a920ccc69fbc8e491c0984f0743571204b28f9858fd79d3f324"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-install-native-binary-component-map",
          "sectionId": "section-cli-distribution",
          "slug": "install-native-binary-component-map",
          "name": "BinaryComponent mapping for vendor tree",
          "description": "`codex-cli/scripts/install_native_deps.py` describes dataclass `BinaryComponent` (artifact_prefix, dest_dir, binary_basename) and dictionary `BINARY_COMPONENTS` For `codex` And `codex-responses-api-proxy`. `_archive_name_for_target` adds `.exe` for Windows targets, and `_install_single_binary` adds the binary to `vendor/<target>/<dest_dir>/<basename(.exe)>` and chmod 755 on Unix. This is how staging packages take GitHub Release artifacts with the correct names and paths in the vendor tree.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/install_native_deps.py",
              "sha256": "897c15f0e99aec2832fcc793a321a3132e8011e635fa011b587e193b1a768b3a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-install-native-rg-platform-map",
          "sectionId": "section-cli-distribution",
          "slug": "install-native-rg-platform-map",
          "name": "Ripgrep DotSlash platform map",
          "description": "`install_native_deps.py` holds `RG_TARGET_PLATFORM_PAIRS` and dictionary `RG_TARGET_TO_PLATFORM`to bind rust targets (`x86_64-unknown-linux-musl`, `aarch64-apple-darwin`, Windows) with DotSlash manifest keys `bin/rg`. `DEFAULT_RG_TARGETS` lists supported platforms, and `_fetch_single_rg` beret `providers[0].url`, unpacks the archive by `format`/`path` and puts `rg(.exe)` V `vendor/<target>/path`. This gives npm staging a ready-made ripgrep for all platforms without manual configuration.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/install_native_deps.py",
              "sha256": "897c15f0e99aec2832fcc793a321a3132e8011e635fa011b587e193b1a768b3a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-build-npm-prepare-staging",
          "sectionId": "section-cli-distribution",
          "slug": "build-npm-prepare-staging",
          "name": "Prepare staging dir for npm release",
          "description": "`codex-cli/scripts/build_npm_package.py::prepare_staging_dir` accepts `--staging-dir`: given the path, it is resolved, created (mkdir) and checked that the directory is empty. Otherwise the script creates a temporary folder `codex-npm-stage-*` and returns the flag `created_temp`. This pair of values allows `main()` after the build, remove temporary staging and ensure that the local release does not reuse the garbage directory.",
          "tags": [
            "cli",
            "cli-packaging",
            "distribution"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-cli/scripts/build_npm_package.py",
              "sha256": "f2334ecbf7853a920ccc69fbc8e491c0984f0743571204b28f9858fd79d3f324"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        }
      ]
    },
    {
      "id": "section-observability",
      "slug": "observability",
      "title": "Observability",
      "entries": [
        {
          "id": "aspect-observability-index",
          "sectionId": "section-observability",
          "slug": "observability-index",
          "name": "Observability index",
          "description": "`core/src/otel_init.rs` configured by the OTEL provider, and `tui/src/session_log.rs` writes the TUI JSONL log. The index links the configuration of telemetry and logging tools so that observability changes pass through consistent files.",
          "tags": [
            "configuration",
            "observability",
            "telemetry",
            "telemetry-core",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/otel_init.rs",
              "sha256": "0f4d133dff12dc2cc68104e897effb0f50f4cdf059a765b1c1f6ba3e7a730170"
            },
            {
              "path": "projects/Codex/codex-rs/tui/src/session_log.rs",
              "sha256": "3b36ce97b5d70a05fd4409efe2b700f9abcd4deea0e5e77160c2ff318aa48f52"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/session_log.rs",
              "sha256": "3b36ce97b5d70a05fd4409efe2b700f9abcd4deea0e5e77160c2ff318aa48f52"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-otel-runtime-bridge",
          "sectionId": "section-observability",
          "slug": "otel-runtime-bridge",
          "name": "OTEL runtime bridge to settings",
          "description": "`otel-config-overview` collects `OtelSettings`, A `core/src/otel_init.rs` applies them to the provider: populates CLI/TUI resources, connects OTLP endpoints and headers from the environment and decides whether to run gRPC or HTTP exporter. The entry records the connection between observability and configuration and the fact that all service metadata passes through a single init.",
          "tags": [
            "configuration",
            "observability",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/otel_init.rs",
              "sha256": "0f4d133dff12dc2cc68104e897effb0f50f4cdf059a765b1c1f6ba3e7a730170"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-codex-otel-event-manager",
          "sectionId": "section-observability",
          "slug": "otel-event-manager",
          "name": "OTEL event manager",
          "description": "`otel/src/traces/otel_manager.rs` centralizes telemetry: `conversation_starts`, `log_request`, and `log_sse_event` emit codex.* events with model/account metadata, while tool decisions and results are logged through `tool_decision` and `tool_result`. This is the core OTEL event surface used by the CLI/TUI.",
          "tags": [
            "configuration",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/traces/otel_manager.rs",
              "sha256": "75b9377b0f86512edd581d69088b695e180011c0b5a6ffc28801729518738a6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-codex-otel-provider",
          "sectionId": "section-observability",
          "slug": "otel-provider-resource",
          "name": "OtelProvider generates resource and exporter",
          "description": "`otel/src/otel_provider.rs` builds `SdkLoggerProvider`: `OtelProvider::from` fills `Resource` service attributes (name, version, env) and selects the exporter `OtlpGrpc` or `OtlpHttp` from settings. Collects for gRPC `MetadataMap` from custom headers, configures for HTTP `Protocol::HttpBinary/Json`. Method `shutdown` closes the batch exporter, and Drop repeats the call so as not to lose logs when Codex is completed.",
          "tags": [
            "configuration",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/otel_provider.rs",
              "sha256": "7f997b74749a0ab582b469a90af7794e505d0b6437d453422a8d4321658ea4d7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        },
        {
          "id": "aspect-codex-otel-settings",
          "sectionId": "section-observability",
          "slug": "otel-settings-schema",
          "name": "OtelSettings describes exporters and protocols",
          "description": "`otel/src/config.rs` sets the structure `OtelSettings`: stores environment/service_name/service_version and `codex_home`, and enum `OtelExporter` supports `None`, `OtlpGrpc` with endpoint+headers and `OtlpHttp` with Binary/Json protocols (`OtelHttpProtocol`). These types are serialized in config.toml and control provider selection in `otel_provider`, so any OTLP backend is included as a single field.",
          "tags": [
            "configuration",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/config.rs",
              "sha256": "cf18609b5b32b47d828abf1feed57ad7569cd11bc9207e59d55b4a77bb9a5640"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.38
        },
        {
          "id": "aspect-codex-terminal-user-agent",
          "sectionId": "section-observability",
          "slug": "terminal-user-agent-detect",
          "name": "Terminal user-agent detection",
          "description": "`core/src/terminal.rs` calculates the User-Agent string for telemetry: `detect_terminal` checks `TERM_PROGRAM` and version, fallback to WezTerm, kitty, Alacritty, Konsole, VTE and WindowsTerminal for specific variables, and then `TERM`. The result goes through `sanitize_header_value`, leaving only valid ASCII characters for HTTP headers, and is cached in `OnceLock`. This ensures that OTEL events receive the correct terminal field without leaking arbitrary environment data.",
          "tags": [
            "interface",
            "observability",
            "rust",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/terminal.rs",
              "sha256": "cc492cdb5e0aec3a11345d459efd86ea01017d8916b4eb46d22e27b9ec003a45"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-codex-observability-otel-init",
          "sectionId": "section-observability",
          "slug": "otel-provider-builder",
          "name": "otel_init builds the provider from Config",
          "description": "`project/Codex/codex-rs/core/src/otel_init.rs` transforms `Config` V `OtelProvider`: matches `OtelExporterKind` from configuration with `OtelExporter`, copies endpoint/headers, switches Binary/Json HTTP protocols and fills `OtelSettings` fields `service_name`/`service_version` through `originator()`. Helper `codex_export_filter` leaves only events `codex_otel`, so that OTEL logs do not contain noise from third-party targets.",
          "tags": [
            "configuration",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/otel_init.rs",
              "sha256": "0f4d133dff12dc2cc68104e897effb0f50f4cdf059a765b1c1f6ba3e7a730170"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-codex-observability-exec-layer",
          "sectionId": "section-observability",
          "slug": "exec-otel-layer",
          "name": "Exec CLI includes OTEL layer with filter",
          "description": "`project/Codex/codex-rs/exec/src/lib.rs` after loading the configuration calls `codex_core::otel_init::build_provider`; if there is a provider, creates `OpenTelemetryTracingBridge` and wraps it in `filter_fn(codex_export_filter)`, and then registers with the tty fmt layer. Errors and lack of settings lead to graceful degradation to stdout logs, so the CLI can enable/disable telemetry export without restarting.",
          "tags": [
            "exec",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/src/lib.rs",
              "sha256": "6179dc3017cca28aeb267752c2e1035d5360c32301f2d56cb4e0d5d155172cf2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "id": "aspect-codex-observability-tui-layer",
          "sectionId": "section-observability",
          "slug": "tui-otel-logging",
          "name": "TUI writes a log and forwards to OTEL",
          "description": "`project/Codex/codex-rs/tui/src/lib.rs` opens `codex-tui.log` through `non_blocking` writer, customizes `EnvFilter` according to RUST_LOG and builds a file layer with closing spans. Then it repeats the exec path: collects the OTEL provider, connects `OpenTelemetryTracingBridge` With `codex_export_filter` and logs it next to the file layer so that the interactive TUI writes both the local log and centralized telemetry.",
          "tags": [
            "rust",
            "telemetry",
            "telemetry-core",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/lib.rs",
              "sha256": "cd1e831b60ded137c43e257af6841effb25a04a9ccf2b87cc9eca6bdce514f91"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/lib.rs",
              "sha256": "72927e17cadb5115b046f638ed2e35b595b970647ffe89e5578aaeaf17a017b7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-default-client-originator",
          "sectionId": "section-observability",
          "slug": "default-client-originator",
          "name": "Originator and User-Agent for telemetry",
          "description": "`core/src/default_client.rs` stores `ORIGINATOR` And `USER_AGENT_SUFFIX`: `set_default_originator` validates the value as an HTTP header, `get_codex_user_agent` glues `originator/version (OS info; terminal)` and sanitizes invalid characters. `create_client` displays headers `originator`/`User-Agent`, disables proxy in sandbox and reuses Responses API. This ensures that all Codex network calls carry consistent log and OTEL identifiers.",
          "tags": [
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/default_client.rs",
              "sha256": "21dbdd8ae1406c4b3fa4b72fab541894bf0cda3dd2618cce5470bf8375a63fc1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-codex-otel-conversation",
          "sectionId": "section-observability",
          "slug": "conversation-otel-handshake",
          "name": "Conversation start OTEL handshake",
          "description": "`project/Codex/codex-rs/core/src/codex.rs` when creating a session builds `OtelEventManager::new` With `conversation_id`, model, family slug, account_id/mode and flag `log_user_prompt`, adding user agent via `terminal::user_agent()`. After the final `conversation_id` called `conversation_starts(...)`, where the provider, reasoning parameters, context window, auto_compact_limit, `approval_policy`, `sandbox_policy` and list of MCP servers/active profile. Thanks to this, the start of each dialogue goes into OTEL with a full context of politics and environment.",
          "tags": [
            "conversation",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/codex.rs",
              "sha256": "a437870065d9977bcb7d83e4d279104c6ed59ea34f05926c013fcef459c1aa30"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.66
        },
        {
          "id": "aspect-codex-sse-telemetry",
          "sectionId": "section-observability",
          "slug": "sse-otel-streaming",
          "name": "SSE streaming telemetry guard",
          "description": "`project/Codex/codex-rs/core/src/client.rs` V `run_sse` wraps `stream.next()` through `timeout`, measures `duration` and throws it in `otel_event_manager.log_sse_event`. On `response.completed` called `sse_event_completed(...)`to capture input/output/cached/reasoning tokens, and in case of early EOF or error - `see_event_completed_failed` with specific `CodexErr`. This is how the SSE stream from Responses receives a trace for delays and usage.",
          "tags": [
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.64
        },
        {
          "id": "aspect-chat-completions-otel",
          "sectionId": "section-observability",
          "slug": "chat-completions-otel",
          "name": "Chat Completions OTEL instrumentation",
          "description": "`core/src/client.rs` wraps Responses and Chat streams with `map_response_stream`, which uses `OtelManager` to record SSE lifecycle events and durations; `ApiTelemetry` records per-request metrics. This keeps telemetry consistent across Chat Completions and Responses.",
          "tags": [
            "integrations",
            "rust",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-tool-telemetry-preview-limits",
          "sectionId": "section-observability",
          "slug": "tool-telemetry-preview-limits",
          "name": "Telemetry preview truncation limits",
          "description": "`project/Codex/codex-rs/core/src/tools/mod.rs` sets constants `TELEMETRY_PREVIEW_MAX_BYTES = 2*1024`, `TELEMETRY_PREVIEW_MAX_LINES = 64` and marker `[... telemetry preview truncated ...]`, A `tools::context` uses `take_bytes_at_char_boundary` And `take_last_bytes_at_char_boundary`so as not to break UTF-8. These limits ensure that OTEL preview tools remain compact and within model budgets.",
          "tags": [
            "rust",
            "telemetry",
            "telemetry-core",
            "truncate"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/tools/mod.rs",
              "sha256": "395098987bd4340d36d1fde68ca463a7460066454d61df07fcec0a557f0666dd"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.58
        },
        {
          "id": "aspect-otel-test-suite",
          "sectionId": "section-observability",
          "slug": "otel-test-suite",
          "name": "Telemetry regression tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/otel.rs` contains e2e tests with `tracing_test::traced_test`: `responses_api_emits_api_request_event` checks `codex.api_request` And `codex.conversation_starts`, blocks `handle_response_item_records_tool_result*` catch `codex.tool_result`, A `tool_decision_assertion` scripts cover approvals and sandbox branches (`codex.tool_decision`). This is how the suite protects telemetry from regressions on Responses, tools and approvals events.",
          "tags": [
            "rust",
            "telemetry",
            "telemetry-core",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/otel.rs",
              "sha256": "8d9070d6f69bd74f8aac79a1225d4be3be12a2d6a3a60f02831c1e3aeb10d9a5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.57
        },
        {
          "id": "aspect-otel-api-request-logging",
          "sectionId": "section-observability",
          "slug": "otel-api-request-logging",
          "name": "OTEL events api_request",
          "description": "`otel/src/traces/otel_manager.rs::log_request` and `record_api_request` capture request attempts, HTTP status, and duration for `codex.api_request` events. This is the central path for API request telemetry.",
          "tags": [
            "observability",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/traces/otel_manager.rs",
              "sha256": "75b9377b0f86512edd581d69088b695e180011c0b5a6ffc28801729518738a6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-otel-user-prompt-redaction",
          "sectionId": "section-observability",
          "slug": "otel-user-prompt-redaction",
          "name": "Editing user_prompt in OTEL",
          "description": "`otel/src/traces/otel_manager.rs::user_prompt` concatenates `UserInput` text and logs `codex.user_prompt`; when `log_user_prompts` is false it replaces the content with `[REDACTED]` while still recording prompt length.",
          "tags": [
            "observability",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/traces/otel_manager.rs",
              "sha256": "75b9377b0f86512edd581d69088b695e180011c0b5a6ffc28801729518738a6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-otel-tool-result-telemetry",
          "sectionId": "section-observability",
          "slug": "otel-tool-result-telemetry",
          "name": "Tool results telemetry",
          "description": "`otel/src/traces/otel_manager.rs::log_tool_result` records duration and success for a tool call, emits `codex.tool_result`, and increments `codex.tool.call` metrics with success tags. Errors are logged via `log_tool_failed` with a short output preview.",
          "tags": [
            "observability",
            "telemetry",
            "telemetry-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/traces/otel_manager.rs",
              "sha256": "75b9377b0f86512edd581d69088b695e180011c0b5a6ffc28801729518738a6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-rmcp-logging-handler",
          "sectionId": "section-observability",
          "slug": "rmcp-logging-handler",
          "name": "MCP client notification logger",
          "description": "`rmcp-client/src/logging_client_handler.rs` implements `ClientHandler`: Decline responds to elicitation, logs cancel/progress/resource updates and routes `LoggingMessageNotification` V `tracing` with levels `error``debug`. The handler also reports tool/prompt list changed so that the developer can see server events directly in the Codex logs.",
          "tags": [
            "integrations",
            "mcp",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/logging_client_handler.rs",
              "sha256": "13fa6dd7b7dd220bf457a2257374dea46e2de5b4f43d35c2f0f4b4f959642848"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-otel-noop-provider",
          "sectionId": "section-observability",
          "slug": "otel-noop-provider-fallback",
          "name": "Stub provider without otel feature",
          "description": "`project/Codex/codex-rs/otel/src/lib.rs` contains `cfg(not(feature = \\\"otel\\\"))` implementation: `OtelProvider::from` always returns `None`, A `headers` gives back empty `HeaderMap`. This allows Codex to be built without OpenTelemetry dependencies and the rest of the code just checks `Option` and continues to work.",
          "tags": [
            "configuration",
            "observability",
            "telemetry",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/otel/src/lib.rs",
              "sha256": "516979c9bb8f83d8f288082641a25032d6ed0127fec8da0786206c14d3a172f2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-ansi-escape-logging",
          "sectionId": "section-observability",
          "slug": "ansi-escape-logging",
          "name": "ANSI parsing logs",
          "description": "IN `project/Codex/codex-rs/ansi-escape/src/lib.rs` `ansi_escape_line` logs a warning if there is more than one line, and `ansi_escape` writes `tracing::error!` For `NomError` And `Utf8Error` before `panic!`. These messages help you spot incorrect ANSI output in CLI/TUI transcripts.",
          "tags": [
            "interface",
            "observability",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/ansi-escape/src/lib.rs",
              "sha256": "722214c42c4c680324e5d8c49622c8ac0c53e46c786940bed703c7220cb2d8ee"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.45
        },
        {
          "id": "aspect-codex-history-file-logging",
          "sectionId": "section-observability",
          "slug": "history-file-logging-guards",
          "name": "Diagnostics history.jsonl",
          "description": "`project/Codex/codex-rs/core/src/message_history.rs` at `lookup` and reading history logs `tracing::warn!` on misses: opening, `stat`, reading strings, parsing JSON and getting shared lock. Together with `ensure_owner_only_permissions` (reduces the file to `0o600`) this gives transparent signals when the dialog history is unavailable or corrupted.",
          "tags": [
            "history",
            "observability",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/message_history.rs",
              "sha256": "1a27f93a7ef1d61da3e156ae45d2b2dd376dee142d81cca3f132d93edd30a13b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-codex-mcp-tool-logging",
          "sectionId": "section-observability",
          "slug": "mcp-tool-qualification-logging",
          "name": "Logging aggregation of MCP tools",
          "description": "`project/Codex/codex-rs/core/src/mcp_connection_manager.rs` V `qualify_tools` shortens long names (SHA-1) and logs `warn!`, if a duplicate occurs and the client manager through `info!/warn!` signals startup, timeouts and missed servers. These messages make it easier to debug MCP configuration and name collisions.",
          "tags": [
            "integrations",
            "mcp",
            "observability",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/mcp_connection_manager.rs",
              "sha256": "efb17c19ae3123b6092683a5a654e3d7dfc2707e8281b82bfd08c04153758d6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-utf8-byte-truncate",
          "sectionId": "section-observability",
          "slug": "utf8-byte-truncate",
          "name": "UTF-8 safe byte truncation helpers",
          "description": "`codex-rs/utils/string/src/lib.rs` provides `take_bytes_at_char_boundary` And `take_last_bytes_at_char_boundary`, passing `char_indices()` forward or backward to fit head/tail into the byte budget without cutting UTF-8. These helpers are used by telemetry and preview tools when you need to safely trim the output.",
          "tags": [
            "rust",
            "telemetry-core",
            "truncate"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/utils/string/src/lib.rs",
              "sha256": "8fe780aa50786426f569aff332f38ed303f639fd55e8d5b47a68f0dd057c0d75"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.5
        },
        {
          "id": "aspect-exec-jsonl-thread-events-tests",
          "sectionId": "section-observability",
          "slug": "exec-jsonl-thread-events-tests",
          "name": "JSONL event processor coverage",
          "description": "`project/Codex/codex-rs/exec/tests/event_processor_with_json_output.rs` drives away `EventProcessorWithJsonOutput`: `session_configured_produces_thread_started_event`, `plan_update_emits_todo_list_started_updated_and_completed` And `mcp_tool_call_success_is_tracked_as_item_completed` check the translation of kernel events into `ThreadEvent`, and the blocks around `patch_apply_success_produces_item_completed_patchapply_completed` And `task_complete_produces_turn_completed_with_usage` record statuses `PatchChangeKind` and accrual of tokens. Thanks to these tests, the JSONL output for `codex exec --json` remains synchronized with the kernel protocol.",
          "tags": [
            "exec",
            "observability",
            "rust",
            "telemetry-core",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/event_processor_with_json_output.rs",
              "sha256": "e6585e64410f2221c1eac51118036181727ca47548debb21665ec01f5f897c28"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-format-elapsed-time",
          "sectionId": "section-observability",
          "slug": "format-elapsed-time",
          "name": "Elapsed time formatter",
          "description": "`codex_common::elapsed` centralizes human-readable timers: `format_elapsed` And `format_duration` switch between milliseconds, two-decimal seconds, and format `Mm SS`. Tests check rounding `59_999ms -> 60.00s` and minutes/hours output, so TUI/CLI shows step durations without duplicating logic.",
          "tags": [
            "interface",
            "observability",
            "rust",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/common/src/elapsed.rs",
              "sha256": "14832f5230464286e8870a096f310db33206064ad73627fd00fc04d979d45c95"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.45
        },
        {
          "id": "aspect-user-agent-string",
          "sectionId": "section-observability",
          "slug": "user-agent-string",
          "name": "getUserAgent returns CLI signature",
          "description": "`app-server/tests/suite/user_agent.rs` causes `getUserAgent`, collects the expected string `codex_cli_rs/0.0.0 (...) terminal` through `os_info` And `codex_core::terminal::user_agent` and compares the answer. The test guarantees a stable User-Agent for telemetry and Analytics clients.",
          "tags": [
            "integrations",
            "observability",
            "telemetry-core",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/user_agent.rs",
              "sha256": "4f42fafcac7f528c74af002ac6c1b41decc2f17451e312c868b96c007319aaab"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-token-count-format",
          "sectionId": "section-observability",
          "slug": "token-count-format",
          "name": "Token count SI formatter",
          "description": "`codex_protocol::num_format` builds `DecimalFormatter` based on system locale (fallback - `en-US`) and provides `format_with_separators`/`format_si_suffix`, which output `1.20K`, `123M`, `1,234G`. Tests cover border values up to gigabytes, so usage and limits in the UI are displayed consistently across all regions.",
          "tags": [
            "interface",
            "observability",
            "rust",
            "telemetry-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/num_format.rs",
              "sha256": "b105866cf4466c95193e4f1b0cbaa3fa2f37b285bb0e065156f7e322369187b1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "id": "aspect-tui-session-log",
          "sectionId": "section-observability",
          "slug": "tui-session-log",
          "name": "TUI writes JSONL session log",
          "description": "`tui/src/session_log.rs` includes a JSONL recorder for `CODEX_TUI_RECORD_SESSION`: `maybe_init` creates a file (0600 on Unix) in `CODEX_HOME` or tmp, writes a header with cwd/model. `log_inbound_app_event` And `log_outbound_op` turn events into `ts/dir/kind/payload`, `log_session_end` closes the session. This way, developers can reproduce TUI dialogs without enabling global tracing.",
          "tags": [
            "observability",
            "rust",
            "telemetry-core",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/session_log.rs",
              "sha256": "3b36ce97b5d70a05fd4409efe2b700f9abcd4deea0e5e77160c2ff318aa48f52"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/session_log.rs",
              "sha256": "3b36ce97b5d70a05fd4409efe2b700f9abcd4deea0e5e77160c2ff318aa48f52"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        }
      ]
    },
    {
      "id": "section-dev-environment",
      "slug": "dev-environment",
      "title": "Developer Environment",
      "entries": [
        {
          "id": "aspect-dev-environment-index",
          "sectionId": "section-dev-environment",
          "slug": "dev-environment-index",
          "name": "Dev environment setup index",
          "description": "`devcontainer-config`, `vscode-rust-settings`, `clippy-color-guard`, `rmcp-stdio-smoke-server` And `rmcp-streamable-http-test-server` form a framework: devcontainer raises the ARM environment, VS Code settings synchronize formatting, lint policy protects TUI colors, and MCP stands provide sandbox-friendly tests. This entry links the devcontainer, editor tooling, linting, and sandbox-policy recipes.",
          "tags": [
            "devcontainer",
            "linting",
            "vscode",
            "repo-maintenance"
          ],
          "sources": [
            {
              "path": "projects/Codex/.devcontainer/devcontainer.json",
              "sha256": "780b2a44a56b277f03d6a339f27e91243d30ea6c83c38f6003e359e02d3fa823"
            },
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/bin/rmcp_test_server.rs",
              "sha256": "30bcec648bad5ef59198577e7b4733ab3405c65b02bc32108ccc6b41d74c7e3e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-devcontainer-config",
          "sectionId": "section-dev-environment",
          "slug": "devcontainer-config",
          "name": "Devcontainer locks arm64 workspace",
          "description": "`project/Codex/.devcontainer/devcontainer.json` anchors the VS Code container to `linux/arm64`, passes build context `..`, sets runArgs `--platform=linux/arm64`, and also exports `RUST_BACKTRACE=1` And `CARGO_TARGET_DIR=${containerWorkspaceFolder}/codex-rs/target-arm64`. The config starts a session under the user `ubuntu`, includes `bash` as the default terminal and recommends `rust-analyzer`/`even-better-toml`so that local builds and lint run in the same ARM sandbox as CI.",
          "tags": [
            "devcontainer",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/.devcontainer/devcontainer.json",
              "sha256": "780b2a44a56b277f03d6a339f27e91243d30ea6c83c38f6003e359e02d3fa823"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.42
        },
        {
          "id": "aspect-devcontainer-dockerfile",
          "sectionId": "section-dev-environment",
          "slug": "devcontainer-dockerfile",
          "name": "Devcontainer Dockerfile primes Rust toolchain",
          "description": "`project/Codex/.devcontainer/Dockerfile` builds an image from `ubuntu:24.04`, connects the repository `universe`, installs `build-essential`, `clang`, `musl-tools`, `libssl-dev` And `just`, then under the user `ubuntu` starts rustup with `--profile minimal`, adds a target `aarch64-unknown-linux-musl` and components `clippy`/`rustfmt`, updating `PATH` to `/home/ubuntu/.cargo/bin`. The image prepares devcontainer to build musl Codex artifacts without manually installing dependencies.",
          "tags": [
            "devcontainer",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/.devcontainer/Dockerfile",
              "sha256": "c44aba144a9cd410c4352d53e1f7b5ce7dad2a721ca18315dfc885c421cc6262"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-vscode-rust-settings",
          "sectionId": "section-dev-environment",
          "slug": "vscode-rust-settings",
          "name": "VS Code enforces Rust/TOML formatting",
          "description": "`project/Codex/.vscode/settings.json` includes `rust-analyzer.checkOnSave` And `cargo clippy --all-features --tests` saved, supports rustfmt with `imports_granularity=Item` and disables array reordering in `even-better-toml`. `launch.json` adds LLDB profiles (`Cargo launch`, `Attach to running codex CLI`), A `extensions.json` recommends `rust-analyzer`, `vscode-lldb`, `even-better-toml` and GitHub Actions plugin. Together they give VS Code developers a fully customized environment for Codex.",
          "tags": [
            "rust",
            "tools",
            "vscode",
            "repo-maintenance"
          ],
          "sources": [
            {
              "path": "projects/Codex/.vscode/settings.json",
              "sha256": "5d01e4850afc033c0d1db3e55f6bb7b159d9c2b0ee6d41461aaf50c9c7d4e9a1"
            },
            {
              "path": "projects/Codex/.vscode/launch.json",
              "sha256": "ac2ba039ac62fcc66e461afa4a7a5793d3be8a2e3039771c0a2e203f05c07b7a"
            },
            {
              "path": "projects/Codex/.vscode/extensions.json",
              "sha256": "eab70818a0f1bcc45f868d4c9f9d1a539ebf56cf2f343abcde22a1317258254d"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "sectionId": "section-dev-environment",
          "id": "aspect-rust-toolchain-pin",
          "slug": "rust-toolchain-pin",
          "name": "Rust toolchain pinned to 1.90.0",
          "description": "`codex-rs/rust-toolchain.toml` fixes Rust 1.90.0 and always installs `clippy`, `rustfmt` And `rust-src`so that devshell, CI and local builds use the same compiler with tools.",
          "tags": [
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rust-toolchain.toml",
              "sha256": "eb21ea5c20f4fc4d8a6d0abb863a5c4cf1038bab9217c36d1237721dae13d108"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.33
        },
        {
          "sectionId": "section-dev-environment",
          "id": "aspect-rustfmt-edition-2024",
          "slug": "rustfmt-edition-2024",
          "name": "Rustfmt fixes edition 2024",
          "description": "`codex-rs/rustfmt.toml` includes formatting in the 2024 edition and forces `imports_granularity = \"Item\"`, keeping the style in sync with clippy and allowing you to ignore the warnings described in the accompanying PR.",
          "tags": [
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rustfmt.toml",
              "sha256": "39f846d3c311803be8f24a052a1b070e9e0312a8afd71671aace1b7598279806"
            }
          ],
          "lastUpdated": "2025-10-12",
          "importance": 0.28
        },
        {
          "sectionId": "section-dev-environment",
          "id": "aspect-clippy-color-guard",
          "slug": "clippy-color-guard",
          "name": "Clippy prohibits TUI colors outside the palette",
          "description": "`codex-rs/clippy.toml` weakens checks only in tests (`expect`/`unwrap`), but prohibits `Color::Rgb`, `Color::Indexed` and styles `white`/`black`/`yellow`to make TUI use theme-agnostic colors; every entry in `disallowed-methods` provided with an explanation.",
          "tags": [
            "linting",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/clippy.toml",
              "sha256": "df04d37fc73293a605eaf13caf8a6c08035bef126b8d2ab198a777d28f3df869"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "sectionId": "section-dev-environment",
          "id": "aspect-justfile-workflows",
          "slug": "justfile-workflows",
          "name": "Justfile developer workflows",
          "description": "`projects/Codex/justfile` wraps common tasks (`codex`, `exec`, `file-search`, `app-server-test-client`, `fmt`, `clippy`, `test`, `bazel-*`, `mcp-server-run`, `write-config-schema`) so contributors can run build/test flows from a single entry point.",
          "tags": [
            "rust",
            "tools",
            "repo-maintenance"
          ],
          "sources": [
            {
              "path": "projects/Codex/justfile",
              "sha256": "c2eb3f32dfa13799b71a9d1196c9524d8a3479d355448ee32bee637da6776484"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.41
        },
        {
          "sectionId": "section-dev-environment",
          "id": "aspect-bazel-build-system",
          "slug": "bazel-build-system",
          "name": "Bazel build and remote execution setup",
          "description": "`MODULE.bazel` bootstraps Bazel with `rules_rust` toolchains and `rules_rs`, wiring `Cargo.lock` into the @crates repo for multi-target Rust builds. `defs.bzl` supplies the `codex_rust_crate` macro that mirrors Cargo layout (library, binaries, unit/integration tests) and exports `CARGO_BIN_EXE_*` for test tooling. `.bazelrc`, `BUILD.bazel`, and `rbe.bzl` configure local/remote platforms, caches, and BuildBuddy RBE images for reproducible builds.",
          "tags": [
            "tools",
            "repo-maintenance",
            "ci",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/MODULE.bazel",
              "sha256": "b0dba759f6d22d41bcf6fea4f981d73604ed6883a21d51fba4fc9c087b044e1c"
            },
            {
              "path": "projects/Codex/defs.bzl",
              "sha256": "7c894202e7ab721afe7d2de7ce690faadf8ad737a23cc87fbe94e255a999a987"
            },
            {
              "path": "projects/Codex/.bazelrc",
              "sha256": "34f78b828da2bbbeed58de4357807d4655854fe3d829397cac1182e832a6f4ef"
            },
            {
              "path": "projects/Codex/BUILD.bazel",
              "sha256": "8174b8789dda27715528b38dbc5d429ce15ef5ea7fd5e56260d9cfcdca2be7ac"
            },
            {
              "path": "projects/Codex/rbe.bzl",
              "sha256": "4fbb8a19e4efdf79009844228febe7ea9624764458612c3e4187d4aea17107d1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "sectionId": "section-dev-environment",
          "id": "aspect-nix-devshell-alias",
          "slug": "nix-devshell-alias",
          "name": "Nix devShell picks up alias codex",
          "description": "`codex-rs/default.nix` defines Nix devShell: sets `PKG_CONFIG_PATH` for OpenSSL, adds `cargo` and collected `codex` package, and shellHook declares alias `codex`, which enters `tui` and starts `cargo run` -- a convenient entry point for Nix developers.",
          "tags": [
            "rust",
            "tools",
            "repo-maintenance"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/default.nix",
              "sha256": "b18e98a1a6ce1b4bc05e557c50164138453cf310cd3b91f1a06f5af3097d97e4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.34
        },
        {
          "id": "aspect-codex-rs-default-nix",
          "sectionId": "section-dev-environment",
          "slug": "codex-rs-default-nix",
          "name": "default.nix for codex-rs",
          "description": "`codex-rs/default.nix` collects the package via `rustPlatform.buildRustPackage` With `pkg-config` And `openssl`, overrides `PKG_CONFIG_PATH`, and devShell adds `cargo`, the package itself and alias `codex` to start TUI. The config provides a reproducible Nix environment for rust binaries.",
          "tags": [
            "configuration",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/default.nix",
              "sha256": "b18e98a1a6ce1b4bc05e557c50164138453cf310cd3b91f1a06f5af3097d97e4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.38
        },
        {
          "id": "aspect-rmcp-find-codex-home",
          "sectionId": "section-dev-environment",
          "slug": "rmcp-find-codex-home",
          "name": "RMCP client respects CODEX_HOME",
          "description": "`rmcp-client/src/find_codex_home.rs` defines the RMCP working directory: when installed `CODEX_HOME` Canonicalizes the path and returns an error if it does not exist; otherwise it builds `~/.codex` through `dirs::home_dir`. This logic synchronizes the CLI and the RMCP client so that OAuth artifacts and caches are in the same directory.",
          "tags": [
            "configuration",
            "rust",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/find_codex_home.rs",
              "sha256": "c9daea3de7bff47c6c21af5ce0ec5482d13389cd042aa10ceda65d74c52c67af"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        }
      ]
    },
    {
      "id": "section-data-contracts",
      "slug": "data-contracts",
      "title": "Data contracts",
      "entries": [
        {
          "id": "aspect-data-contracts-index",
          "sectionId": "section-data-contracts",
          "slug": "data-contracts-index",
          "name": "Data contracts index",
          "description": "`protocol/src/protocol.rs` defines Responses API items/events, while `app-server-protocol/src/protocol/common.rs` plus `v1.rs` and `v2.rs` define JSON-RPC requests, responses, and notifications. This index points to the canonical data contracts that must be updated together when schema changes land.",
          "tags": [
            "data-contracts",
            "data-contracts-core",
            "schema",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/protocol.rs",
              "sha256": "b177fe47ab5e8bb18528049d8a4d96089f2678ea624ea49fd1894b0085108b4a"
            },
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/common.rs",
              "sha256": "e77676433444c4fe1ecb0ce2d11990401b3b383d7c68bfbda309967fce7d93a0"
            },
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v1.rs",
              "sha256": "e46d3b3d9e7ed2a738fd556f2544ed6d55aa31aba13246f76733d0b3387361c1"
            },
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v2.rs",
              "sha256": "20f05d1df52e83d18418e05d6e8ba8c6cae5da7c03f665b8c7e86ce364be91ca"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-collab-event-schema",
          "sectionId": "section-data-contracts",
          "slug": "collab-event-schema",
          "name": "Collab event payloads",
          "description": "`protocol/src/protocol.rs` defines the collab event types (`CollabAgentSpawnBegin/End`, `CollabAgentInteractionBegin/End`, `CollabWaitingBegin/End`, `CollabCloseBegin/End`): each carries `call_id`, sender/receiver `ThreadId`, prompts that can be empty to avoid CoT leaks, and `AgentStatus` where relevant. These types are serialized as `EventMsg` variants so UIs and SDKs can track multi-agent spawn, messaging, waits, and shutdowns consistently.",
          "tags": [
            "data-contracts",
            "schema",
            "notifications",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/protocol.rs",
              "sha256": "b177fe47ab5e8bb18528049d8a4d96089f2678ea624ea49fd1894b0085108b4a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-protocol-parse-command-schema",
          "sectionId": "section-data-contracts",
          "slug": "parsed-command-schema",
          "name": "ParsedCommand synchronizes parsing of CLI commands",
          "description": "`projects/Codex/codex-rs/protocol/src/parse_command.rs` sets `ParsedCommand` with options `read`, `list_files`, `search` And `unknown`, keeping the original string `cmd`, path and query parameters. Derive `Serialize`/`Deserialize` And `ts_rs::TS` provides identical types for Rust and VS Code/TUI so that Responses API and MCP responses receive a structured file reading plan without manual parsers.",
          "tags": [
            "schema",
            "integrations",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/parse_command.rs",
              "sha256": "5235f69f6d6b97c9fc127bf20c08a8a75aba3625f9c5033b64decf5dc69ebedb"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-protocol-history-entry",
          "sectionId": "section-data-contracts",
          "slug": "history-entry-schema",
          "name": "HistoryEntry aligns dialogue history",
          "description": "`projects/Codex/codex-rs/protocol/src/message_history.rs` describes `HistoryEntry` with margins `conversation_id`, `ts` And `text` and exports the type to TypeScript via `ts_rs::TS`. This contract is used by the Responses API and SDK to allow Codex clients to read and sync message history without format discrepancies.",
          "tags": [
            "schema",
            "history",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/message_history.rs",
              "sha256": "790f4ab26da56f545f1dd60618dc3c165ba4c40caaafbcc8be5a85bdde507eb0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-app-server-thread-history",
          "sectionId": "section-data-contracts",
          "slug": "app-server-thread-history",
          "name": "Thread history builder for rollouts",
          "description": "`app-server-protocol/src/protocol/thread_history.rs` converts persisted `EventMsg` items into `Turn` and `ThreadItem` sequences for resuming threads: `build_turns_from_event_msgs` groups user and agent messages, aggregates reasoning summaries and raw content, marks `TurnStatus::Interrupted` on `TurnAborted`, and truncates history on `ThreadRolledBack` while re-numbering synthetic turn/item ids. This keeps the v2 thread history payload consistent with the rollout stream.",
          "tags": [
            "data-contracts",
            "history",
            "sessions",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/thread_history.rs",
              "sha256": "9812d1e24e929d3212eb7b1806440202898131ef8cd6833984f72a87b5614b1a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-app-server-v2-thread-apis",
          "sectionId": "section-data-contracts",
          "slug": "app-server-v2-thread-apis",
          "name": "App-server v2 thread lifecycle APIs",
          "description": "`app-server-protocol/src/protocol/v2.rs` defines thread endpoints: `ThreadStartParams`/`ThreadResumeParams`/`ThreadForkParams` accept model/provider/cwd/approval/sandbox/config overrides plus base/developer instructions, with resume preferring history > path > thread_id and fork ignoring thread_id when a path is supplied. `ThreadArchiveParams` and `ThreadRollbackParams` drive archive/rollback operations, while `ThreadListParams` and `ThreadLoadedListParams` paginate stored threads and in-memory thread ids. The `Thread` payload includes id, preview, model_provider, created_at, path, cwd, cli_version, source, git_info, and only resume/rollback/fork responses populate `turns`.",
          "tags": [
            "data-contracts",
            "app-server",
            "threads",
            "sessions",
            "schema",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v2.rs",
              "sha256": "20f05d1df52e83d18418e05d6e8ba8c6cae5da7c03f665b8c7e86ce364be91ca"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        },
        {
          "id": "aspect-protocol-plan-tool-args",
          "sectionId": "section-data-contracts",
          "slug": "plan-tool-args",
          "name": "UpdatePlanArgs describes the TODO MCP plan",
          "description": "`projects/Codex/codex-rs/protocol/src/plan_tool.rs` enters `StepStatus`, `PlanItemArg` And `UpdatePlanArgs` With `serde(deny_unknown_fields)` And `ts_rs::TS`, so the Rust core and the codex-vscode extension exchange a JSON plan with explanations and step statuses. This ensures that the scheduling tool only accepts valid fields and does not break on uncontrolled keys.",
          "tags": [
            "schema",
            "plan",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/plan_tool.rs",
              "sha256": "32086edca639055e4ec78d4b6f0a82fc8ede2df5de43d29a064da9ad12ca9ab6"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-openapi-code-task-details",
          "sectionId": "section-data-contracts",
          "slug": "code-task-details-openapi",
          "name": "CodeTaskDetailsResponse captures the details of a cloud task",
          "description": "`projects/Codex/codex-rs/codex-backend-openapi-models/src/models/code_task_details_response.rs` (openapi generation) defines `CodeTaskDetailsResponse` with nested `TaskResponse` and optional turn blocks (`current_user_turn`, `current_assistant_turn`, `current_diff_task_turn`). The CLI and cloud-tasks client rely on this structure to retrieve diffs, messages and statuses when interacting with the backend Codex.",
          "tags": [
            "schema",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/models/code_task_details_response.rs",
              "sha256": "1e294aad04964bf87ee4cb4810bdf81422a82e28c4101947fb8d773291849184"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.58
        },
        {
          "id": "aspect-openapi-task-list-item",
          "sectionId": "section-data-contracts",
          "slug": "task-list-item-openapi",
          "name": "TaskListItem describes task cards in lists",
          "description": "`projects/Codex/codex-rs/codex-backend-openapi-models/src/models/task_list_item.rs` holds the task list contract: id, title, flags `archived`/`has_unread_turn`, timestamps and related `ExternalPullRequestResponse`. Drivers `CloudBackend` use a structure for stably serializable task cards to filter by environment and show the same fields on top of the mock data as the rest.",
          "tags": [
            "schema",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/models/task_list_item.rs",
              "sha256": "7182b46a49761c2bc70694fec97b0d994de7e89805bd8ddb2a46728570f078d4"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.5
        },
        {
          "id": "aspect-openapi-task-response",
          "sectionId": "section-data-contracts",
          "slug": "task-response-openapi",
          "name": "TaskResponse describes the basic fields of a task",
          "description": "`projects/Codex/codex-rs/codex-backend-openapi-models/src/models/task_response.rs` expands the task card with fields `denormalized_metadata`, `external_pull_requests` And `current_turn_id`,    backend Codex. This model underlies `CodeTaskDetailsResponse` and is needed by clients to display archiving, unread flags and links with PR.",
          "tags": [
            "schema",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/models/task_response.rs",
              "sha256": "5df210468f282ed022affa3bbb0e4a6eb93698416aa9e4eca64171bd34619bc6"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.48
        },
        {
          "id": "aspect-openapi-paginated-task-list",
          "sectionId": "section-data-contracts",
          "slug": "paginated-task-list",
          "name": "PaginatedListTaskListItem holds the paginated list cursor",
          "description": "`projects/Codex/codex-rs/codex-backend-openapi-models/src/models/paginated_list_task_list_item_.rs` defines a container with an array `TaskListItem` and optional `cursor`. Cloud-tasks clients use it to request subsequent task pages and display a list without manually parsing the cursor parameter.",
          "tags": [
            "schema",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/models/paginated_list_task_list_item_.rs",
              "sha256": "47409da128b14a00e9707903020208e0b9a17266568385da0fce011245056f16"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.42
        },
        {
          "id": "aspect-protocol-session-meta-line",
          "sectionId": "section-data-contracts",
          "slug": "session-meta-line",
          "name": "SessionMetaLine includes source and git context",
          "description": "`projects/Codex/codex-rs/protocol/src/protocol.rs` announces `SessionMeta` with margins `timestamp`, `cwd`, `originator`, `cli_version` And `instructions`, A `SessionSource` lists `cli`, `vscode`, `exec`, `mcp` and spare `unknown` via serde default. `SessionMetaLine` flatten this structure and optional `GitInfo` With `commit_hash`/`branch`/`repository_url`, preserving lowercase serialization for the Responses API. Thanks to this, the CLI, TUI and SDK read the same session token and know where the history came from.",
          "tags": [
            "schema",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/protocol.rs",
              "sha256": "b177fe47ab5e8bb18528049d8a4d96089f2678ea624ea49fd1894b0085108b4a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-protocol-turn-context-item",
          "sectionId": "section-data-contracts",
          "slug": "turn-context-item",
          "name": "TurnContextItem captures the turn environment",
          "description": "`projects/Codex/codex-rs/protocol/src/protocol.rs` stores `TurnContextItem` With `cwd`, `AskForApproval`, `SandboxPolicy`, selected `model`, and optional `ReasoningEffortConfig`/`ReasoningSummaryConfig`. The structure is serialized into the rollout JSONL and Responses API, so that resumes, forks and MCP clients receive the actual sandboxing and reasoning effort before starting the step.",
          "tags": [
            "schema",
            "configuration",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/protocol.rs",
              "sha256": "b177fe47ab5e8bb18528049d8a4d96089f2678ea624ea49fd1894b0085108b4a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-protocol-review-output-event",
          "sectionId": "section-data-contracts",
          "slug": "review-output-event",
          "name": "ReviewOutputEvent describes the structure of code review",
          "description": "`projects/Codex/codex-rs/protocol/src/protocol.rs` records the review results: `ReviewOutputEvent` carries `findings`, `overall_correctness`/`explanation` And `overall_confidence_score`, A `ReviewFinding` describes `title`, `body`, `confidence_score`, `priority` And `ReviewCodeLocation` with absolute path. Derivations `Serialize`/`TS` ensure that Responses API and CLI exchange the same fields during structured code review.",
          "tags": [
            "schema",
            "change-tracking",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/protocol/src/protocol.rs",
              "sha256": "b177fe47ab5e8bb18528049d8a4d96089f2678ea624ea49fd1894b0085108b4a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-mcp-client-capabilities",
          "sectionId": "section-data-contracts",
          "slug": "mcp-client-capabilities",
          "name": "ClientCapabilities announce client MCP capabilities",
          "description": "`projects/Codex/codex-rs/mcp-types/schema/2025-06-18/schema.json` defines `ClientCapabilities`: object declares support `elicitation`, `sampling`, flag `roots.listChanged` and arbitrary `experimental` opportunities. Codex MCP clients send these fields to initialize so the server understands whether approvals, environment listings, or experimental extensions can be requested.",
          "tags": [
            "schema",
            "mcp",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-types/schema/2025-06-18/schema.json",
              "sha256": "97e23898477088a892bb9021979820fd8071dcedce7d5b613674c30d3ba1c481"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-mcp-call-tool-result",
          "sectionId": "section-data-contracts",
          "slug": "mcp-call-tool-result",
          "name": "CallToolResult separates free and structured output",
          "description": "`projects/Codex/codex-rs/mcp-types/schema/2025-06-18/schema.json` describes `CallToolResult`: array `content` stores free output, and `structuredContent` gives a JSON response to the tool. Field `isError` separates business logic errors from protocol failures, so Codex can show the error to the user and still maintain a valid MCP session.",
          "tags": [
            "schema",
            "mcp",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-types/schema/2025-06-18/schema.json",
              "sha256": "97e23898477088a892bb9021979820fd8071dcedce7d5b613674c30d3ba1c481"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-user-saved-config-contract",
          "sectionId": "section-data-contracts",
          "slug": "user-saved-config-contract",
          "name": "UserSavedConfig contract",
          "description": "`app-server-protocol/src/protocol/v1.rs` defines `UserSavedConfig` to mirror persisted config.toml values: approval and sandbox settings, model and reasoning options, tool toggles, forced login/workspace, and profile selection plus the profiles map. Optional fields keep the JSON-RPC response sparse for `GetUserSavedConfig`.",
          "tags": [
            "data-contracts",
            "jsonrpc",
            "config"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v1.rs",
              "sha256": "e46d3b3d9e7ed2a738fd556f2544ed6d55aa31aba13246f76733d0b3387361c1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-codex-sandbox-settings-contract",
          "sectionId": "section-data-contracts",
          "slug": "sandbox-settings-contract",
          "name": "SandboxSettings schema",
          "description": "`app-server-protocol/src/protocol/v1.rs` defines `SandboxSettings` with `writable_roots`, `network_access`, and tmp-dir exclusion flags, and embeds it in user config and turn parameters. This keeps sandbox configuration consistent across the app-server API.",
          "tags": [
            "data-contracts",
            "sandbox",
            "jsonrpc"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v1.rs",
              "sha256": "e46d3b3d9e7ed2a738fd556f2544ed6d55aa31aba13246f76733d0b3387361c1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-codex-session-configured-notification",
          "sectionId": "section-data-contracts",
          "slug": "session-configured-notification",
          "name": "SessionConfigured payload",
          "description": "`app-server-protocol/src/protocol/v1.rs` defines `SessionConfiguredNotification` with `session_id`, model, reasoning effort, history counters, rollout_path, and optional initial `EventMsg` items. The UI can render resumed threads without reading JSONL first.",
          "tags": [
            "data-contracts",
            "jsonrpc",
            "notifications",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v1.rs",
              "sha256": "e46d3b3d9e7ed2a738fd556f2544ed6d55aa31aba13246f76733d0b3387361c1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        },
        {
          "id": "aspect-codex-input-item-wire-format",
          "sectionId": "section-data-contracts",
          "slug": "input-item-wire-format",
          "name": "InputItem wire variants",
          "description": "`app-server-protocol/src/protocol/v1.rs` defines `InputItem` as `Text`, `Image` (data URL), or `LocalImage` (PathBuf). It standardizes how user input and local images are encoded on the JSON-RPC wire.",
          "tags": [
            "data-contracts",
            "messages",
            "jsonrpc"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server-protocol/src/protocol/v1.rs",
              "sha256": "e46d3b3d9e7ed2a738fd556f2544ed6d55aa31aba13246f76733d0b3387361c1"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-external-pull-request-response",
          "sectionId": "section-data-contracts",
          "slug": "external-pull-request-response",
          "name": "ExternalPullRequestResponse binds PR to turn",
          "description": "`codex-rs/codex-backend-openapi-models/src/models/external_pull_request_response.rs` describes backend response: fields `id`, `assistant_turn_id` And `pull_request` (`GitPullRequest`) plus optional `codex_updated_sha`. The contract records which PRs are returned from the Responses API and which agent move to associate them with.",
          "tags": [
            "schema",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/models/external_pull_request_response.rs",
              "sha256": "a153ed0938409b55b44db9f07ed9dfe148b80b671f1f1264efc43ce8094e3b7b"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.42
        },
        {
          "id": "aspect-git-pull-request-model",
          "sectionId": "section-data-contracts",
          "slug": "git-pull-request-model",
          "name": "GitPullRequest model stores PR state",
          "description": "`codex-rs/codex-backend-openapi-models/src/models/git_pull_request.rs` holds the Git PR structure: required `number`, `url`, `state`, `merged`, `mergeable` and a set of optional fields (`draft`, `title`, `head_sha`, `diff`, `user`). Used in `ExternalPullRequestResponse`so that the front and CLI receive a uniform mirror of the Git provider data.",
          "tags": [
            "schema",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/codex-backend-openapi-models/src/models/git_pull_request.rs",
              "sha256": "e91a3a2638a64e9a29ab05cdf8921b537b4b77914d11ee115a0fa3ccff89372f"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.4
        }
      ]
    },
    {
      "id": "section-testing-security",
      "slug": "testing-security",
      "title": "Security testing",
      "entries": [
        {
          "id": "aspect-testing-security-index",
          "sectionId": "section-testing-security",
          "slug": "testing-security-index",
          "name": "Security testing index",
          "description": "`app-server/tests/suite/auth.rs`, `exec/tests/suite/sandbox.rs` And `login/tests/suite/device_code_login.rs` serve as basic security regression tests: the first ones check `getAuthStatus`/`loginChatGpt`/`logoutChatGpt`, the second reproduces Seatbelt/Landlock restrictions and timeouts, the third emulates device-code input and polling errors. The bundle covers auth, sandbox and headless login, so any policy changes must go through these scripts.",
          "tags": [
            "security",
            "security-tests",
            "testing",
            "auth",
            "sandbox"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/auth.rs",
              "sha256": "97258a408e4a49a526e28657393b449da18182f201ba78487c2691a362613e62"
            },
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/sandbox.rs",
              "sha256": "1ba2e7a9bd97810403ac59e76dc5ef756c7fe236ec3ae413dbe929f584dd2c2c"
            },
            {
              "path": "projects/Codex/codex-rs/login/tests/suite/device_code_login.rs",
              "sha256": "963251b43c0aee0187c76dc452ba047da65002f73a40cd06a85008ce3b205046"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-testing-skip-if-sandbox",
          "sectionId": "section-testing-security",
          "slug": "testing-skip-if-sandbox",
          "name": "Sandbox-aware test helpers",
          "description": "`core/tests/common/lib.rs` provides basic security utilities: `load_default_config_for_test` creates Config with a separate TempDir and on Linux substitutes `codex-linux-sandbox` through `cargo_bin`, and macros `skip_if_sandbox` And `skip_if_no_network` read environment variables and carefully mark tests as skipped. This allows security integrations to run both locally and in CI with hard sandboxes without breaking builds.",
          "tags": [
            "security-tests",
            "sandbox",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/common/lib.rs",
              "sha256": "e4d090dff5ede47169d9331ae949f9e9373d8bb1cf8c192958228e5cdd4f8a9c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-app-server-test-login",
          "sectionId": "section-testing-security",
          "slug": "app-server-login-test",
          "name": "ChatGPT login/logout integration tests",
          "description": "`app-server/tests/suite/login.rs` covers `logoutChatGpt` (deletes `auth.json` and returns empty `GetAuthStatusResponse`) And `loginChatGpt`+`cancelLoginChatGpt`, checking that the cancellation gracefully terminates the active login and, if necessary, issues a termination notification.",
          "tags": [
            "app-server",
            "auth",
            "interface",
            "security-tests",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/login.rs",
              "sha256": "e89e791f5461318f8a373df90243597c9c95d51edfc10f647585b0a69126a107"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "id": "aspect-exec-test-sandbox",
          "sectionId": "section-testing-security",
          "slug": "exec-sandbox-test",
          "name": "Sandbox behavior regression tests",
          "description": "`exec/tests/suite/sandbox.rs` reproduces extreme sandbox cases on macOS and Linux: `python_multiprocessing_lock_works_under_sandbox` checks shared lock, `sandbox_distinguishes_command_and_policy_cwds` separates working directories, and `allow_unix_socketpair_recvfrom` confirms availability of AF_UNIX `socketpair`.",
          "tags": [
            "rust",
            "sandbox",
            "security",
            "security-tests",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/sandbox.rs",
              "sha256": "1ba2e7a9bd97810403ac59e76dc5ef756c7fe236ec3ae413dbe929f584dd2c2c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.62
        },
        {
          "id": "aspect-login-server-e2e-tests",
          "sectionId": "section-testing-security",
          "slug": "login-server-e2e-tests",
          "name": "Browser login end-to-end tests",
          "description": "`project/Codex/codex-rs/login/tests/suite/login_server_e2e.rs` raises `run_login_server` versus mini-issuer on tiny_http. `end_to_end_login_flow_persists_auth_json` checks that callback `/auth/callback` overwrites `auth.json` c `access_token` And `chatgpt_account_id`, `creates_missing_codex_home_dir` guarantees the creation of a directory, and `cancels_previous_login_server_when_port_is_in_use` checks `cancel` and graceful shutdown of the previous server. This anchors the OAuth-flow CLI in headless environments.",
          "tags": [
            "auth",
            "rust",
            "security",
            "security-tests",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/tests/suite/login_server_e2e.rs",
              "sha256": "c7c061e33300178db6d9ddd79278c2d18aeb3c1ba2387732c0ab35c7125e93a4"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.67
        },
        {
          "id": "aspect-device-code-login-tests",
          "sectionId": "section-testing-security",
          "slug": "device-code-login-tests",
          "name": "Device-code login integration tests",
          "description": "`project/Codex/codex-rs/login/tests/suite/device_code_login.rs` emulates device-code stream: `device_code_login_integration_succeeds` checks happy-path with repeated polling `/deviceauth/token` and recording tokens without an API key, `device_code_login_integration_handles_usercode_http_failure` catches HTTP 503, and `device_code_login_integration_handles_error_payload` makes sure there are no errors `authorization_declined` don't create `auth.json`.  builder'  JWT  `make_jwt`, which protects headless authorization.",
          "tags": [
            "auth",
            "rust",
            "security",
            "security-tests",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/login/tests/suite/device_code_login.rs",
              "sha256": "963251b43c0aee0187c76dc452ba047da65002f73a40cd06a85008ce3b205046"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.65
        },
        {
          "id": "aspect-linux-landlock-sandbox-tests",
          "sectionId": "section-testing-security",
          "slug": "linux-landlock-sandbox-tests",
          "name": "Linux sandbox Landlock tests",
          "description": "`project/Codex/codex-rs/linux-sandbox/tests/suite/landlock.rs` launches `process_exec_tool_call` With `SandboxPolicy::WorkspaceWrite`: `test_root_read`/`test_root_write` check reading `/bin` and recording ban, `test_timeout` catches `Sandbox(Timeout`, A `sandbox_blocks_curl`/`wget`/`ping`/`ssh`/`nc`/`getent` And `/dev/tcp` confirm that seccomp/Landlock is blocking the network. The tests guarantee the workspace-write policy on Linux.",
          "tags": [
            "linux",
            "rust",
            "sandbox",
            "security",
            "security-tests",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/linux-sandbox/tests/suite/landlock.rs",
              "sha256": "dec24149adb0d1c29c18e219e95ad7632f35fb0be248649c8ae1e07cb4bdb958"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.68
        },
        {
          "id": "aspect-app-server-auth-status-tests",
          "sectionId": "section-testing-security",
          "slug": "app-server-auth-status-tests",
          "name": "Auth status API key scenarios",
          "description": "`app-server/tests/suite/auth.rs` drives away `getAuthStatus`: without tokens, after `loginApiKey`, with a custom provider where `requires_openai_auth=false`, and with `include_token=None`. Checks are tracked `AuthMode::ApiKey`, token masking and configuration `requires_openai_auth`so that the IDE server correctly reports the authorization status.",
          "tags": [
            "app-server",
            "auth",
            "security",
            "security-tests",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/auth.rs",
              "sha256": "97258a408e4a49a526e28657393b449da18182f201ba78487c2691a362613e62"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.6
        },
        {
          "sectionId": "section-testing-security",
          "id": "aspect-chatwidget-exec-approval-tests",
          "slug": "chatwidget-exec-approval-tests",
          "name": "Exec approval modal snapshot coverage",
          "description": "`codex-rs/tui/src/chatwidget/tests.rs` checks the command approval modal: `exec_approval_emits_proposed_command_and_decision_history` And `exec_approval_decision_truncates_multiline_and_long_commands` guarantee that the OnRequest policy shows a modal with a truncated payload and does not add history cells before the decision, and `approval_modal_exec_snapshot` fixes rendering via `assert_snapshot!`. The tests prevent regressions in the visual and behavioral defenses of dangerous commands.",
          "tags": [
            "security",
            "security-tests",
            "testing",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget/tests.rs",
              "sha256": "98f947798e8204d1a0ba6fb2637009f3d5fbe5cf78cc2cdd3eb5e46daef74680"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget/tests.rs",
              "sha256": "08ae91a98cf8b62b2f1018744f2e757e1d14c1cb13ce6065bdeda3af197a2ef2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "sectionId": "section-testing-security",
          "id": "aspect-chatwidget-patch-approval-tests",
          "slug": "chatwidget-patch-approval-tests",
          "name": "Patch approval modal enforces confirmation",
          "description": "`codex-rs/tui/src/chatwidget/tests.rs` scenarios `apply_patch_untrusted_shows_approval_modal` And `apply_patch_request_shows_diff_summary` pretend `ApplyPatchApprovalRequest` and make sure that the heading \"Would you like to make the following edits?\" and diff summary are visible only in the modal. This fixes that unsafe patches require manual confirmation and displays a preview of the changes.",
          "tags": [
            "security",
            "security-tests",
            "testing",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget/tests.rs",
              "sha256": "98f947798e8204d1a0ba6fb2637009f3d5fbe5cf78cc2cdd3eb5e46daef74680"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget/tests.rs",
              "sha256": "08ae91a98cf8b62b2f1018744f2e757e1d14c1cb13ce6065bdeda3af197a2ef2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "sectionId": "section-testing-security",
          "id": "aspect-chatwidget-approval-ops",
          "slug": "chatwidget-approval-ops",
          "name": "Approval decisions emit operations",
          "description": "IN `codex-rs/tui/src/chatwidget/tests.rs` test `apply_patch_approval_sends_op_with_submission_id` checks that when answering `ApplyPatchApprovalRequest` ChatWidget sends `Operation::SendApprovalDecision` With `submission_id`, and the event stream receives `ApplyPatchApprovalResult`. This way the confirmation modal is synchronized with the backend and does not lose application identifiers.",
          "tags": [
            "security",
            "security-tests",
            "testing",
            "tui"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/chatwidget/tests.rs",
              "sha256": "98f947798e8204d1a0ba6fb2637009f3d5fbe5cf78cc2cdd3eb5e46daef74680"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/chatwidget/tests.rs",
              "sha256": "08ae91a98cf8b62b2f1018744f2e757e1d14c1cb13ce6065bdeda3af197a2ef2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        },
        {
          "sectionId": "section-testing-security",
          "id": "aspect-resume-dangerous-bypass-test",
          "slug": "resume-dangerous-bypass-test",
          "name": "Resume CLI saves dangerous bypass flag",
          "description": "`codex-rs/cli/src/main.rs` test `resume_merges_dangerously_bypass_flag` via helper `finalize_from_args` checks that the subcommand `codex resume --dangerously-bypass-approvals-and-sandbox` moves the flag to interactive `Cli`. The test ensures that explicitly clearing sandbox/approval is not lost when resuming sessions and resume does not start TUI in weakened mode without the user's consent.",
          "tags": [
            "cli",
            "security",
            "security-tests",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/src/main.rs",
              "sha256": "8962d6c4ade2185972bc1182e608309b33262ee2ba221865cd2db82bda6fbde7"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        }
      ]
    },
    {
      "id": "section-testing",
      "slug": "testing",
      "title": "Testing core operations",
      "entries": [
        {
          "id": "aspect-core-exec-seatbelt-tests",
          "sectionId": "section-testing",
          "slug": "exec-seatbelt-tests",
          "name": "Integration tests exec under Seatbelt",
          "description": "`projects/Codex/codex-rs/core/tests/suite/exec.rs` launches `process_exec_tool_call` on macOS Seatbelt: scripts check for success of simple commands, stdout not being truncated, handling timeouts, skipping tests when `CODEX_SANDBOX=seatbelt` and errors in writing outside of allowed directories. These are regressions that confirm that the seatbelt sandbox leaves the CLI functional and correctly flags sandbox errors.",
          "tags": [
            "exec",
            "macos",
            "sandbox",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/exec.rs",
              "sha256": "a6f9d2c43623b1624256969b15eb8a9d50191e7e8be3ac8a726f843646dddc13"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-testing-sse-fixture",
          "sectionId": "section-testing",
          "slug": "sse-fixture-override",
          "name": "SSE fixture override for streaming tests",
          "description": "`codex-rs/core/src/flags.rs` announces `CODEX_RS_SSE_FIXTURE`, A `core/src/client.rs` V `ModelClient::stream_responses` checks the flag and calls `stream_from_fixture`, which reads a previously saved SSE file and pumps it through `process_sse`. This way, integration tests can play back a response stream without network requests, preserving the Responses API event format.",
          "tags": [
            "cli",
            "rust",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/flags.rs",
              "sha256": "7d1458f9b34ee2ec2e63513794147a9229d12e6f2ffb74b7ca00d284448e7379"
            },
            {
              "path": "projects/Codex/codex-rs/core/src/client.rs",
              "sha256": "3773a6fb4d34ce460f8954c3dcd9a2908cc0f6bad6fb7427b479fa22003a5e7e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-core-json-result-tests",
          "sectionId": "section-testing",
          "slug": "json-result-tests",
          "name": "JSON result schema for gpt-5 models",
          "description": "`projects/Codex/codex-rs/core/tests/suite/json_result.rs` picks up mock Responses SSE and sends `final_output_json_schema`, demanding `codex_output_schema` With `strict=true`. Tests for `gpt-5` And `gpt-5-codex` make sure that the final `AgentMessage` parses into an object with fields `explanation` And `final_answer`. This confirms that the CLI correctly forwards JSON schemas to the Responses API.",
          "tags": [
            "cli",
            "schema",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/json_result.rs",
              "sha256": "21b0b52a18a56357a20d304eeedcb173590fca10d08a81f2c3c372415cc93761"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-core-live-cli-tests",
          "sectionId": "section-testing",
          "slug": "live-cli-tests",
          "name": "Live CLI smoke tests with Responses API",
          "description": "`projects/Codex/codex-rs/core/tests/suite/live_cli.rs` (marked `#[ignore]`) launch `codex-rs` through `Command::cargo_bin`, stream stdout/stderr in real time and check file creation and output scripts `pwd`, demanding `OPENAI_API_KEY`. These tests serve as manual smoke for the Responses API and ensure that the CLI binary interacts correctly with the live service.",
          "tags": [
            "cli",
            "integrations",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/live_cli.rs",
              "sha256": "eb7807edb5e116b81e0c827bbc2d1674db6c86b8f7b2984d984e550acea0902b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-core-seatbelt-policy-tests",
          "sectionId": "section-testing",
          "slug": "seatbelt-policy-tests",
          "name": "Seatbelt checks git directories and lookups",
          "description": "`projects/Codex/codex-rs/core/tests/suite/seatbelt.rs` simulates workspace-write/readonly policies on macOS: scripts check for writing to `.git`, behavior when adding parent paths, mode `DangerFullAccess` and what `python3 getpwuid` works under seatbelt. This protects against regressions in the secure write policy and allowed syscalls for the macOS sandbox.",
          "tags": [
            "macos",
            "sandbox",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/seatbelt.rs",
              "sha256": "d32892b2321f5460c2c3a2734430f2d54c5a19c7b3a123a9ef39cef767622843"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "id": "aspect-core-client-resume-tests",
          "sectionId": "section-testing",
          "slug": "client-resume-tests",
          "name": "Client suite checks resume and notifications",
          "description": "`projects/Codex/codex-rs/core/tests/suite/client.rs` builds rollout files and mock Responses, checking that when `resume` the necessary roles go to the API, system instructions are saved, `Originator` and telemetry. The tests also validate the processing of web-search, reasoning blocks and shell/tool calls via `ModelClient`. This keeps Codex compatible with the Responses API when resuming sessions.",
          "tags": [
            "integrations",
            "sessions",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/client.rs",
              "sha256": "0c30ccfabf500827888fab2624a275cd6a390434c7932422cbf0a01406ed2ed8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-exec-auth-env-test",
          "sectionId": "section-testing",
          "slug": "exec-auth-env-test",
          "name": "Exec confirms the transfer of the Codex API token",
          "description": "`projects/Codex/codex-rs/exec/tests/suite/auth_env.rs` mounts SSE and makes sure that `codex exec` sends `Authorization: Bearer dummy`, getting the key from `CODEX_API_KEY`. Without the token, the request would not be matched by header. This ensures that headless exec picks up authentication just like TUI.",
          "tags": [
            "auth",
            "exec",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/auth_env.rs",
              "sha256": "d4a161d730b41776460dfb025c07db7cabfe5a75adec363a6b64cf14385ebdc6"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-cloud-tasks-env-filter-test",
          "sectionId": "section-testing",
          "slug": "cloud-tasks-env-filter-test",
          "name": "Mock CloudBackend filters tasks by environment",
          "description": "`projects/Codex/codex-rs/cloud-tasks/tests/env_filter.rs` uses `MockClient` and checks that `list_tasks` produces different sets of tasks for `env-A` And `env-B`, and the root list contains README tasks. This maintains the integrity of TUI mocks without a real backend and protects the UX of the environment selection.",
          "tags": [
            "cloud-tasks",
            "integrations",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cloud-tasks/tests/env_filter.rs",
              "sha256": "588b4dfa803281a57ab40f395306271997aaa6fe20d35a0b6b902dbcf6cf0e39"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.38
        },
        {
          "id": "aspect-core-chat-completions-payload-tests",
          "sectionId": "section-testing",
          "slug": "chat-completions-payload-tests",
          "name": "chat_completions_payload assigns reasoning to payload",
          "description": "`projects/Codex/codex-rs/core/tests/chat_completions_payload.rs` through `run_request` picks up Wiremock and checks the JSON body `POST /v1/chat/completions`: series `attaches_reasoning_*` glue reasoning to the last assistant, function_call and local shell, `drops_reasoning_when_last_role_is_user`/`ignores_reasoning_before_last_user` remove outdated blocks, and `suppresses_duplicate_assistant_messages` prevents duplicate text. The test ensures that Codex serializes the story strictly according to the Responses API contract.",
          "tags": [
            "integrations",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/chat_completions_payload.rs",
              "sha256": "8ba15ff89d59ae2dd4bc1d67d1b3648f184e334a0228adcb5a0985bf375983bf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        },
        {
          "id": "aspect-core-chat-completions-sse-tests",
          "sectionId": "section-testing",
          "slug": "chat-completions-sse-tests",
          "name": "chat_completions_sse checks streaming reasoning",
          "description": "`projects/Codex/codex-rs/core/tests/chat_completions_sse.rs` checks the stream `ModelClient::stream`: `streams_reasoning_*` collect reasoning deltas as strings and objects, `streams_reasoning_before_tool_call` makes sure that CoT comes before the tool call, and `chat_sse_emits_failed_on_parse_error` And `chat_sse_done_chunk_emits_event` catch telemetry with invalid chunks and [DONE]. This protects the SSE Responses API pipeline from regressions.",
          "tags": [
            "integrations",
            "observability",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/chat_completions_sse.rs",
              "sha256": "db05812854b85f3896134854bc7ec4b0575deff114833e01e574f0538bcd4adc"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        },
        {
          "id": "aspect-core-model-overrides-tests",
          "sectionId": "section-testing",
          "slug": "model-overrides-tests",
          "name": "OverrideTurnContext does not overwrite config.toml",
          "description": "`projects/Codex/codex-rs/core/tests/suite/model_overrides.rs` launches `Op::OverrideTurnContext` on temporary `config.toml`: the first script checks that even after `ReasoningEffort::High` the file remains unchanged, the second is that override does not create a config if it did not exist. This confirms that per-turn overrides do not break user settings.",
          "tags": [
            "configuration",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/model_overrides.rs",
              "sha256": "fc7854d46be15c436639db74b73c7e26a0aaf9fc1a28449fb083c5346d77b853"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-core-user-notify-tests",
          "sectionId": "section-testing",
          "slug": "user-notification-tests",
          "name": "Notify hook is confirmed end-to-end",
          "description": "`projects/Codex/codex-rs/core/tests/suite/user_notification.rs` configures Codex with `notify` script: the test creates a shell that writes payload to `notify.txt`, launches `Op::UserInput` and waits `EventMsg::TaskComplete`. The wait loop confirms that the hook runs asynchronously and writes a message, which means the CLI respects user notifications.",
          "tags": [
            "interface",
            "notifications",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/user_notification.rs",
              "sha256": "fffe397b49864640e24309a2ae7ae449dd7ac0524a81abd1598e6746916362c9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.49
        },
        {
          "id": "aspect-app-server-jsonrpc-flow-tests",
          "sectionId": "section-testing",
          "slug": "app-server-jsonrpc-flow-tests",
          "name": "App Server JSON-RPC flow holds approvals",
          "description": "`projects/Codex/codex-rs/app-server/tests/suite/codex_message_processor_flow.rs` raises `McpProcess` with the Chat Completions mock and runs JSON-RPC: `test_codex_jsonrpc_conversation_flow` checks the chain `newConversation`  listener  `sendUserMessage` with elicitation and `ExecCommandApproval`, `test_send_user_turn_changes_approval_policy_behavior` makes sure that `SendUserTurn` With `AskForApproval::Never` does not cause a repeated request, but `test_send_user_turn_updates_sandbox_and_cwd_between_turns` records the change of sandbox and cwd. The complex protects the IDE  Codex bridge from regressions.",
          "tags": [
            "app-server",
            "mcp",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/codex_message_processor_flow.rs",
              "sha256": "648fec01f6d89782c7ae336e88249098b799cef1da5f8845d935de720fabaaf5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-test-codex-builder",
          "sectionId": "section-testing",
          "slug": "test-codex-builder",
          "name": "TestCodex builder for integrations",
          "description": "`codex-rs/core/tests/common/test_codex.rs` provides `TestCodexBuilder`: `with_config` accumulates mutations `Config`, `build` creates temporary home/cwd, rewrites `model_provider.base_url` to mock /v1 and calls `ConversationManager::new_conversation`. Returnable `TestCodex` contains `CodexConversation`, `SessionConfiguredEvent` and directories, so Codex integration tests get a ready-made conversation without boilerplate code.",
          "tags": [
            "conversation",
            "rust",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/common/test_codex.rs",
              "sha256": "330fb3f942b49ade25a18266ac6405e0b910db16b274c5166c8de4c7346ddd27"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-test-codex-exec-builder",
          "sectionId": "section-testing",
          "slug": "test-codex-exec-builder",
          "name": "TestCodexExec builder for codex-exec",
          "description": "`codex-rs/core/tests/common/test_codex_exec.rs` describes `TestCodexExecBuilder`: The constructor creates temporary `CODEX_HOME` and working directory `cmd()` finds a binary `codex-exec` through `assert_cmd::cargo_bin` and exposes `CODEX_HOME` And `CODEX_API_KEY_ENV_VAR`, A `cmd_with_server` throws `OPENAI_BASE_URL` from Wiremock. This is a template for exec smoke tests without duplicating the environment.",
          "tags": [
            "exec",
            "rust",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/common/test_codex_exec.rs",
              "sha256": "0578a69241dc51091dfb1dfe96e6324c313a7b7730f5779bf4a367416d1af144"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-tui-vt100-backend",
          "sectionId": "section-testing",
          "slug": "tui-vt100-backend",
          "name": "VT100 backend for TUI tests",
          "description": "`codex-rs/tui/src/test_backend.rs` wraps `CrosstermBackend` V `VT100Backend`: writer is `vt100::Parser`, That's why `draw`, `scroll_region_*` And `append_lines` update the virtual screen without writing to stdout. Methods `size`/`window_size` read the sizes from the parser, and `Display` prints the contents of the terminal for snapshots. Thanks to this, tui integration tests work with a real ANSI stack in memory.",
          "tags": [
            "pty",
            "testing",
            "testing-cli",
            "tui",
            "tui-testing",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/test_backend.rs",
              "sha256": "544cb90423c98aba3eb665b040c8132746e1cf495c31a18bb072966652922baf"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/test_backend.rs",
              "sha256": "faebef472b5818099a2a65f7c5e8cfa0e6adba67fbae5be6972de103eef1d7eb"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-tui-status-indicator-ansi-test",
          "sectionId": "section-testing",
          "slug": "tui-status-indicator-ansi-test",
          "name": "ANSI clearing status is verified by test",
          "description": "`codex-rs/tui/tests/suite/status_indicator.rs` fixes the regression: `ansi_escape_line`      \u001b. The test collects content from `Line.spans` and checks that only printable characters remain `RED`, insuring `StatusIndicatorWidget` from leaking escape sequences into the buffer.",
          "tags": [
            "interface",
            "testing",
            "testing-cli",
            "tui",
            "tui-testing",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/tests/suite/status_indicator.rs",
              "sha256": "4ff541ca1765ec06b2135f7893a3c9d1caa2fea0bd4534fcaadac42d73f9d822"
            }
          ],
          "lastUpdated": "2025-10-14",
          "importance": 0.35
        },
        {
          "id": "aspect-tui-vt100-history-tests",
          "sectionId": "section-testing",
          "slug": "tui-vt100-history-tests",
          "name": "VT100 history covers hyphens and emoji",
          "description": "`codex-rs/tui/tests/suite/vt100_history.rs` builds `Terminal<VT100Backend>` with a given viewport and drives `insert_history_lines`: scripts check that long lines do not lose characters, emoji and CJK remain, `word_wrap_no_mid_word_split` eliminates breaks in the middle of a word, and `cursor_restoration` maintains position. This guarantees correct history output when the terminal is narrow.",
          "tags": [
            "interface",
            "testing",
            "testing-cli",
            "tui",
            "tui-testing",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/tests/suite/vt100_history.rs",
              "sha256": "36776fffe01cfbdc394e91d3104154e0709ec2c4edc4b55c9f36d8bab5563f73"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-tui-vt100-live-commit-test",
          "sectionId": "section-testing",
          "slug": "tui-vt100-live-commit-test",
          "name": "Live wrap commit preserves evicted lines",
          "description": "`codex-rs/tui/tests/suite/vt100_live_commit.rs` models `RowBuilder::drain_commit_ready`: five lines are committed, the first two are committed to history via `insert_history_lines`, the rest remain in the live ring. Asserts check that the words `one`/`two` are displayed above the viewport and are not lost - the test protects the live mode when the temporary buffer overflows.",
          "tags": [
            "interface",
            "testing",
            "testing-cli",
            "tui",
            "tui-testing",
            "vt100"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/tests/suite/vt100_live_commit.rs",
              "sha256": "4181ecea7f17df81f3cb0391ba27256bec93bd90e26f0b1f0672b015592ef5ff"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        },
        {
          "id": "aspect-tui-status-snapshot-tests",
          "sectionId": "section-testing",
          "slug": "tui-status-snapshot-tests",
          "name": "Status block snapshots fix quotas",
          "description": "`codex-rs/tui/src/status/tests.rs` renders `new_status_output`: tests check the output of Reasoning effort, sandbox policies and `RateLimitSnapshot` with date fixation, hide `cached_input_tokens` and guarantee truncation at a narrow terminal. Snapshots normalize the paths so that regressions of the TUI status block are caught by diff.",
          "tags": [
            "observability",
            "testing",
            "testing-cli",
            "tui",
            "tui-testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/status/tests.rs",
              "sha256": "357577520740ce975b29aae787a2ccebea2a8e61b9d25004d70c9b8c1323a930"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/status/tests.rs",
              "sha256": "50b8c292e1ced4f5841a1d8990c44b6d13b0dff398ec73a91eeebe150bc6b7b5"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-app-server-mock-model-server-test",
          "sectionId": "section-testing",
          "slug": "app-server-mock-model-server-test",
          "name": "Mock Chat Completions for App Server tests",
          "description": "`codex-rs/app-server/tests/common/mock_model_server.rs` picks up Wiremock: `SeqResponder` with an atomic counter sends blocks prepared by SSE `text/event-stream` at /v1/chat/completions. `expect(num_calls)` insures the number of requests. This is how the app server integration tests receive deterministic model responses.",
          "tags": [
            "app-server",
            "mcp",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/common/mock_model_server.rs",
              "sha256": "409ee33fccfbb8aa01d3c74858b083e35187fe4547b62c666678b0e8b578455c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-app-server-sse-responses-helper",
          "sectionId": "section-testing",
          "slug": "app-server-sse-responses-helper",
          "name": "SSE response generator for shell/apply_patch",
          "description": "`codex-rs/app-server/tests/common/responses.rs` builds SSE strings: `create_shell_sse_response` serializes shell tool arguments (command/workdir/timeout), `create_apply_patch_sse_response` designs heredoc for `apply_patch`, `create_final_assistant_message_sse_response` gives the delta of the final message. Helpers allow tests to construct sequences `tool_calls` without manual JSON layout.",
          "tags": [
            "app-server",
            "testing",
            "testing-cli",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/common/responses.rs",
              "sha256": "7183670fb9d4af2ef25f310bab2512f620761e89337c0e18a87c72a20f9d0a2e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-app-server-test-helpers",
          "sectionId": "section-testing",
          "slug": "app-server-test-helpers",
          "name": "General prelude for app-server tests",
          "description": "`codex-rs/app-server/tests/common/lib.rs` aggregates infrastructure: re-exports `McpProcess`, mock ChatGPT server and SSE generators, and `to_response<T>` translates `JSONRPCResponse.result` to the desired type via `serde_json`. JSON-RPC tests connect one module and get a full set of utilities.",
          "tags": [
            "app-server",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/common/lib.rs",
              "sha256": "df00c24140ede0355eb533314148dfdaefc0a8801a0330aa8e0f31972e365cdf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-tui-markdown-render-tests",
          "sectionId": "section-testing",
          "slug": "tui-markdown-render-tests",
          "name": "Markdown renderer is covered with unit tests",
          "description": "`codex-rs/tui/src/markdown_render_tests.rs` checks `render_markdown_text`: cases for headings, quotes with multi-level nesting, lists and soft breaks guarantee correct `Line`/`Span`, and snapshots for blocks eliminate regressions in styles. Coverage includes colors, lists, and alignment.",
          "tags": [
            "testing",
            "testing-cli",
            "tui",
            "tui-testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/tui/src/markdown_render_tests.rs",
              "sha256": "7d592f2c24eadf8e7d5cedc71bbded93e6fc1326bddedb8c8d5be34ae03e49b6"
            },
            {
              "path": "projects/Codex/codex-rs/tui2/src/markdown_render_tests.rs",
              "sha256": "6757f53886610046afd6f457e3d917d6b11e9b6da9bf1bcb73fc21f1b2e35ed2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        }
      ]
    },
    {
      "id": "section-testing-tools",
      "slug": "testing-tools",
      "title": "Testing: Tools & CLI",
      "entries": [
        {
          "id": "aspect-testing-tools-index",
          "sectionId": "section-testing-tools",
          "slug": "testing-tools-index",
          "name": "Testing tools coverage index",
          "description": "`core/tests/suite/tool_harness.rs` covers tool harness behavior and approvals, while `execpolicy/tests/basic.rs` covers policy parsing and evaluation. Use this index when adding new tool or policy tests.",
          "tags": [
            "sandbox-policy",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/tool_harness.rs",
              "sha256": "b7e84f996cc4656b5d444e115ec7baba3d0910cae4ef1dd956da2d3aa5bf3fe8"
            },
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-core-model-tools-tests",
          "sectionId": "section-testing-tools",
          "slug": "model-tools-tests",
          "name": "Tool selection tests by model",
          "description": "`projects/Codex/codex-rs/core/tests/suite/model_tools.rs` picks up a mock SSE and creates `Conversation` for different models (`codex-mini-latest`, `o3`, `gpt-5-codex`), checking the set of tool identifiers. The file disables plan/apply_patch if necessary and confirms that each model only includes supported tools so that the UI doesn't suggest impossible calls.",
          "tags": [
            "integrations",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/model_tools.rs",
              "sha256": "271a3ac2567c3e13aad139aae3d6b362638b827b4fef0e75b6d077855ce8b3a2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-core-tools-sse-tests",
          "sectionId": "section-testing-tools",
          "slug": "tools-sse-tests",
          "name": "Tools and SSE integration scenarios",
          "description": "`projects/Codex/codex-rs/core/tests/suite/tools.rs` covers the full tool flow: checks the handling of unknown custom tool calls, shell acceptance/rejection with escalated permissions, timeouts and stdout trimming, as well as fallback for spawn errors. Tests use `mount_sse_once` And `TestCodex`, to ensure correct Codex responses to the Responses API for shell/apply_patch and custom tools.",
          "tags": [
            "exec",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/tools.rs",
              "sha256": "4d0de1a4df32e4681fe41b4d05aa0ca27563b626099228166999a37f46814b0e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-core-test-tool-parallelism",
          "sectionId": "section-testing-tools",
          "slug": "core-tool-parallelism-test",
          "name": "Tool parallelism timing suite",
          "description": "`core/tests/suite/tool_parallelism.rs` measures tool parallelism: `read_file_tools_run_in_parallel` synchronizes `test_sync_tool` via barrier and waits <750ms, whereas shell tools in `non_parallel_tools_run_serially`/`mixed_tools_fall_back_to_serial` work sequentially (>=500 ms).",
          "tags": [
            "concurrency",
            "rust",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/tool_parallelism.rs",
              "sha256": "8c6982070aed2f7802bfa5eeb11574a89b5abc023f625c9d1e5151dde53f9b06"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        },
        {
          "id": "aspect-tool-harness-approval-tests",
          "sectionId": "section-testing-tools",
          "slug": "tool-harness-approval-tests",
          "name": "Tool harness approval tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/tool_harness.rs` checks that the built-in tool-harness correctly handles shell, plan and apply_patch. `shell_tool_executes_command_and_streams_output` pulls up the team `/bin/echo` and compares the JSON response `metadata.exit_code`, `update_plan_tool_emits_plan_update_event` monitors generation `PlanUpdate` with the necessary statuses, and `apply_patch_reports_parse_diagnostics` causes the tool to fail parsing and checks for the \"invalid hunk\" message and `success=false`. The test suite protects the UX of tool approvals and recording of results in the Responses API.",
          "tags": [
            "apply-patch",
            "rust",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/tool_harness.rs",
              "sha256": "b7e84f996cc4656b5d444e115ec7baba3d0910cae4ef1dd956da2d3aa5bf3fe8"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.63
        },
        {
          "id": "aspect-execpolicy-test-index",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-test-index",
          "name": "Execpolicy basic test suite",
          "description": "`execpolicy/tests/basic.rs` consolidates the execpolicy suite: prefix_rule parsing, pattern alternatives, match/not_match example validation, decision precedence, and heuristics fallback. This is the entry point for policy test coverage.",
          "tags": [
            "rust",
            "sandbox-policy",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-list-dir-tool-tests",
          "sectionId": "section-testing-tools",
          "slug": "list-dir-tool-tests",
          "name": "list_dir tool coverage",
          "description": "Although `list_dir` disabled for now, file `project/Codex/codex-rs/core/tests/suite/list_dir.rs` keeps tests with `#[ignore]`, confirming the output format: `list_dir_tool_returns_entries`, `list_dir_tool_depth_two_paginates` And `list_dir_tool_depth_three_includes_grandchildren` prepare subdirectories, check `offset`/`limit` and expect lines like `E1: [file] alpha.txt`. These presets allow you to quickly enable the tool without disrupting the UX of the enumeration.",
          "tags": [
            "filesystem",
            "rust",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/list_dir.rs",
              "sha256": "8f3224278d3f3728883e5fb2f9eac10099876de159c2679dd3b44cb5d726c211"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-grep-files-tool-tests",
          "sectionId": "section-testing-tools",
          "slug": "grep-files-tool-tests",
          "name": "grep_files tool regression tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/grep_files.rs` launches the tool on top of the real temporary directory. `grep_files_tool_collects_matches` checks filtering by `include` and collects filenames from the output, `grep_files_tool_reports_empty_results` validates the message \"No matches found.\" and flag `success=false`. Before running, tests check for the presence `rg`, and helper `mount_tool_sequence` guarantees correct Responses flow. This protects the grep tool and UX search.",
          "tags": [
            "rust",
            "search",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/grep_files.rs",
              "sha256": "c0380a7343a0654e1c81bf2e761077e4f4d30a226cdb0f40ce7b6bfdb59eb75b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-view-image-tool-tests",
          "sectionId": "section-testing-tools",
          "slug": "view-image-tool-tests",
          "name": "view_image tool attachment tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/view_image.rs` checks different tool branches `view_image`: `view_image_tool_attaches_local_image` creates PNG, waits `ViewImageToolCall` and checks base64 `input_image`, `view_image_tool_errors_when_directory` And `view_image_tool_errors_when_file_missing` make sure that the directory and missing path return clear messages and do not add images to `input`. Tests confirm the UX of attaching screenshots.",
          "tags": [
            "rust",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/view_image.rs",
              "sha256": "9a2fe299a80e65c9d29c29709c8b1f56f36ad2cf0b9f35f5daa9c54cda081c83"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-tool-read-file-test",
          "sectionId": "section-testing-tools",
          "slug": "read-file-tool-test",
          "name": "read_file tool returns selected lines",
          "description": "`projects/Codex/codex-rs/core/tests/suite/read_file.rs` (under Linux) includes a test that is ignored for now `read_file_tool_returns_requested_lines`: it creates a file, simulates SSE with a tool call `read_file`, then checks through `function_call_output`what the answer contains `call_id` and text `L2: second\\nL3: third`. The test captures the expected JSON even when the output comes as a string or object.",
          "tags": [
            "filesystem",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/read_file.rs",
              "sha256": "9a9d6c4ddf1fef653ef650846d38eee391823cec800bb41d8143c5eceee65278"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.47
        },
        {
          "id": "aspect-tool-shell-serialization-test",
          "sectionId": "section-testing-tools",
          "slug": "shell-serialization-test",
          "name": "Shell tool changes format from apply_patch",
          "description": "`projects/Codex/codex-rs/core/tests/suite/shell_serialization.rs` compares two shell tool modes: without `include_apply_patch_tool` the output is parsed as JSON and contains `metadata.exit_code`, with apply_patch enabled - remains a human-readable fragment. Helpers `submit_turn` And `find_function_call_output` check that Codex selects a format depending on the flag and saves delta logs.",
          "tags": [
            "apply-patch",
            "testing",
            "tooling-core",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/shell_serialization.rs",
              "sha256": "b2fe030821145f794a0ea141e1ead798ed83699f5064764132b0cce78967f1bf"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-apply-patch-cli-tests",
          "sectionId": "section-testing-tools",
          "slug": "apply-patch-cli-tests",
          "name": "`apply_patch` CLI covers stdin and arguments",
          "description": "`projects/Codex/codex-rs/apply-patch/tests/suite/cli.rs` drives binary `apply_patch`: `test_apply_patch_cli_add_and_update` passes patches as an argument, `test_apply_patch_cli_stdin_add_and_update` - via stdin. Both scripts check stdout (`A/M` strings) and file contents, securing the CLI contract for Codex and external integrations.",
          "tags": [
            "apply-patch",
            "cli",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/apply-patch/tests/suite/cli.rs",
              "sha256": "91afe7f737eace04830bd70ee28e2a048af907a82d1314c2416c143c547acfb6"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-execpolicy-cp-tests",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-cp-tests",
          "name": "Execpolicy prefix_rule alias expansion",
          "description": "`execpolicy/tests/basic.rs` test `only_first_token_alias_expands_to_multiple_rules` ensures pattern alternatives in the first token create separate rules (bash/sh), while tail alternatives remain as `PatternToken::Alts`.",
          "tags": [
            "exec",
            "sandbox",
            "sandbox-policy",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.49
        },
        {
          "id": "aspect-execpolicy-sed-parse-test",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-sed-parse-test",
          "name": "Execpolicy parser rejects invalid rules",
          "description": "`execpolicy/tests/basic.rs` covers parser errors such as empty justifications and empty prefixes (`InvalidRule`/`InvalidPattern`), ensuring malformed policies fail fast.",
          "tags": [
            "exec",
            "sandbox",
            "sandbox-policy",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-execpolicy-good-list-check",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-good-list-check",
          "name": "Execpolicy allow decision with justification",
          "description": "`execpolicy/tests/basic.rs` test `justification_can_be_used_with_allow_decision` ensures an allow prefix rule retains its justification and overrides the fallback decision callback.",
          "tags": [
            "sandbox",
            "sandbox-policy",
            "shell",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-execpolicy-bad-list-check",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-bad-list-check",
          "name": "Execpolicy forbidden decision with justification",
          "description": "`execpolicy/tests/basic.rs` test `justification_is_attached_to_forbidden_matches` verifies a forbidden prefix rule returns `Decision::Forbidden` with its justification.",
          "tags": [
            "sandbox",
            "sandbox-policy",
            "shell",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-execpolicy-ls-validation",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-ls-validation",
          "name": "Execpolicy add_prefix_rule matching",
          "description": "`execpolicy/tests/basic.rs` test `add_prefix_rule_extends_policy` adds an `ls -l` prefix rule and checks the rule snapshot plus evaluation output, validating the Rust API for building rules.",
          "tags": [
            "sandbox",
            "sandbox-policy",
            "shell",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-execpolicy-head-validation",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-head-validation",
          "name": "Execpolicy strictest decision wins",
          "description": "`execpolicy/tests/basic.rs` test `strictest_decision_wins_across_matches` shows that overlapping rules (git vs git commit) resolve to the strictest decision while reporting all matches.",
          "tags": [
            "sandbox",
            "sandbox-policy",
            "shell",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-execpolicy-literal-subcommand",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-literal-subcommand",
          "name": "Execpolicy tail alternatives stay atomic",
          "description": "`execpolicy/tests/basic.rs` test `tail_aliases_are_not_cartesian_expanded` verifies tail alternatives (npm install flags) are treated as alternates, not cartesian products, so rules do not multiply unexpectedly.",
          "tags": [
            "sandbox",
            "sandbox-policy",
            "shell",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.45
        },
        {
          "id": "aspect-execpolicy-pwd-flags",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-pwd-flags",
          "name": "Execpolicy strictest decision across commands",
          "description": "`execpolicy/tests/basic.rs` test `strictest_decision_across_multiple_commands` evaluates multiple commands at once and returns the strictest decision across them, guarding batch checks.",
          "tags": [
            "sandbox",
            "sandbox-policy",
            "shell",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.43
        },
        {
          "id": "aspect-execpolicy-sed-validation",
          "sectionId": "section-testing-tools",
          "slug": "execpolicy-sed-validation",
          "name": "Execpolicy match/not_match examples enforced",
          "description": "`execpolicy/tests/basic.rs` test `match_and_not_match_examples_are_enforced` confirms that match examples succeed while not_match examples fall back to heuristics, keeping policy examples truthful.",
          "tags": [
            "sandbox",
            "sandbox-policy",
            "shell",
            "testing",
            "tooling-core"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/execpolicy/tests/basic.rs",
              "sha256": "c3babc9fdaf55ccefbb3393d06a1e3f60876e18d8883e66e0ddacf15837347d9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-app-server-test-interrupt",
          "sectionId": "section-testing-tools",
          "slug": "app-server-interrupt-test",
          "name": "interruptConversation shell abort test",
          "description": "`app-server/tests/suite/interrupt.rs` emulates a long shell tool via `create_shell_sse_response`, then calls `interruptConversation` and claims that the answer contains `TurnAbortReason::Interrupted`, checking the Unix implementation of interrupts.",
          "tags": [
            "app-server",
            "execution",
            "interface",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/interrupt.rs",
              "sha256": "69b1d47a4403b2a7e0db66cc6dfdb82ae8734ec0b6d57c15141dbf20eb7075d2"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.55
        },
        {
          "id": "aspect-app-server-test-config",
          "sectionId": "section-testing-tools",
          "slug": "app-server-config-test",
          "name": "getUserSavedConfig parity tests",
          "description": "`app-server/tests/suite/config.rs` loads a rich config.toml and expects that `GetUserSavedConfigResponse` will return approval, sandbox settings, `Tools` And `Profile`; the second test without the file makes sure the response is complete `None` and empty collections.",
          "tags": [
            "app-server",
            "configuration",
            "interface",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/config.rs",
              "sha256": "534e16af6156c678fa408d1d08787e921972f265e2cdc873f3077e541ad01411"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-set-default-model-test",
          "sectionId": "section-testing-tools",
          "slug": "set-default-model-test",
          "name": "Set default model persistence test",
          "description": "`app-server/tests/suite/set_default_model.rs` launches `setDefaultModel` against temporary `config.toml`, then rereads the file and checks that the field `model` re-recorded to `gpt-4.1`, and the remaining settings are saved. The test ensures that the default IDE method actually writes overrides to the configuration.",
          "tags": [
            "configuration",
            "persistence",
            "testing",
            "testing-cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/set_default_model.rs",
              "sha256": "3531da4538144dd624403cfe6c640fc0d8581c74057709a5ca4decd9e1479b1a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.53
        }
      ]
    },
    {
      "id": "section-testing-mcp",
      "slug": "testing-mcp",
      "title": "Testing: MCP",
      "entries": [
        {
          "id": "aspect-testing-mcp-index",
          "sectionId": "section-testing-mcp",
          "slug": "testing-mcp-index",
          "name": "MCP testing index",
          "description": "`mcp-server/src/lib.rs` provides the MCP server implementation, while `core/tests/suite/rmcp_client.rs` runs round-trip tests with the rmcp client to verify tool calls and structured content. This marks the core files for MCP integration tests.",
          "tags": [
            "mcp",
            "mcp-flow",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/src/lib.rs",
              "sha256": "7e32698c6a9bbf0005426d1f1753993920b64c406d71af4a200ce131e16d1edd"
            },
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/rmcp_client.rs",
              "sha256": "8d468018752365ab493f3eb1fabb3273504c8fc7f7be8615b959923e231226af"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.46
        },
        {
          "id": "aspect-mcp-base-instructions-test",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-base-instructions-test",
          "name": "Passing base_instructions to Codex MCP",
          "description": "`codex_tool_passes_base_instructions()` raises `create_mock_chat_completions_server`, sends `send_codex_tool_call` With `base_instructions: Some(\"You are a helpful assistant.\")` and then compares the request body: the first message in `requests[0]` begins with development instructions. This ensures that MCP does not lose the developer prompt when proxying to the model.",
          "tags": [
            "testing",
            "mcp",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/tests/suite/codex_tool.rs",
              "sha256": "22f32bf51dfa7461c975cd35bea7d64733501e49ff2284e5171c7be31d2f0737"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-mcp-cli-add-command-url-error",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-add-command-url-error",
          "name": "CLI add prohibits mixing --url and command",
          "description": "`add_cant_add_command_and_url` launches `codex mcp add github --url ... --command -- echo hello`, catches the \"unexpected argument '--command'\" message and then makes sure the global configuration is empty. The CLI does not allow specifying a URL and a binary at the same time.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.3
        },
        {
          "id": "aspect-mcp-cli-add-env-order",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-add-env-order",
          "name": "CLI add preserves env order",
          "description": "`add_with_env_preserves_key_order_and_values` adds server `envy` through `--env FOO=bar --env ALPHA=beta` and checks `McpServerTransportConfig::Stdio`: The env map contains two entries in lossless original order. This protects the CLI from variable swaps during serialization.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.33
        },
        {
          "id": "aspect-mcp-cli-add-reject-legacy-flag",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-add-reject-legacy-flag",
          "name": "CLI add rejects deprecated bearer flag",
          "description": "`add_streamable_http_rejects_removed_flag` causes `codex mcp add ... --with-bearer-token`, awaits `.failure()` with a hint about the flag and then checks that `load_global_mcp_servers` returns an empty map. The CLI blocks the obsolete parameter and does not write the config.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.3
        },
        {
          "id": "aspect-mcp-cli-add-remove-test",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-add-remove-test",
          "name": "CLI add/remove updates the global configuration",
          "description": "`projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs` checks `codex mcp add docs -- echo hello`: `load_global_mcp_servers` returns `McpServerTransportConfig::Stdio` with the team `echo`, argument `hello` And `enabled = true`. Then `codex mcp remove docs` displays a confirmation, and the repeated deletion reports \"No MCP server named 'docs' found.\"",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        },
        {
          "id": "aspect-mcp-cli-add-streamable-http",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-add-streamable-http",
          "name": "CLI add streamable-http without token",
          "description": "`add_streamable_http_without_manual_token` causes `codex mcp add github --url https://example.com/mcp` and makes sure that the transport `StreamableHttp` saved without `bearer_token_env_var`, but do not appear in CODEX_HOME `.credentials.json` And `.env`. This means that the CLI does not create secrets by default.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.33
        },
        {
          "id": "aspect-mcp-cli-add-streamable-http-token-var",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-add-streamable-http-token-var",
          "name": "CLI add streamable-http with custom token",
          "description": "`add_streamable_http_with_custom_env_var` configures `--bearer-token-env-var GITHUB_TOKEN` and checks that the config stores the URL and variable name. The test confirms that the CLI correctly serializes the bearer token and leaves the server running.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_add_remove.rs",
              "sha256": "f59ae2b655d14bf338fd642afb548b6b14e70d0df7e372dc05a00285036ccd14"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.33
        },
        {
          "id": "aspect-mcp-cli-list-empty-state",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-list-empty-state",
          "name": "CLI list shows empty MCP status",
          "description": "`projects/Codex/codex-rs/cli/tests/mcp_list.rs` contains `list_shows_empty_state`: clean `CODEX_HOME` launches `codex mcp list`, checks `status.success()` and the presence of the line \"No MCP servers configured yet.\". This is a basic guard that the CLI correctly reports an empty configuration.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_list.rs",
              "sha256": "2d7b85c782121abdf8a92554a1469a93dbb0c1537fcf82544dc5db1951f79c6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.31
        },
        {
          "id": "aspect-mcp-cli-list-json-output",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-cli-list-json-output",
          "name": "CLI list/get generate JSON output",
          "description": "`list_and_get_render_expected_output` adds `codex mcp add docs --env TOKEN=secret -- docs-server --port 4000`, checks the table output `mcp list`, compares JSON `list --json` And `get --json` With `serde_json::json!`, as well as the output `codex mcp get docs`. This ensures correct parsing and serialization of flags `--json`.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/cli/tests/mcp_list.rs",
              "sha256": "2d7b85c782121abdf8a92554a1469a93dbb0c1537fcf82544dc5db1951f79c6c"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.34
        },
        {
          "id": "aspect-mcp-types-initialize-test",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-initialize-test",
          "name": "mcp-types checks initialize JSON-RPC",
          "description": "`projects/Codex/codex-rs/mcp-types/tests/suite/initialize.rs` deserializes `JSONRPCMessage` from raw string, converts to `ClientRequest::InitializeRequest` and compares with expected `InitializeRequestParams`. The test ensures that the generated MCP types correctly accept initialize, including clientInfo and protocolVersion.",
          "tags": [
            "testing",
            "mcp",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-types/tests/suite/initialize.rs",
              "sha256": "7ecc277a46a5c2bb5b956c8392cbae914efb645438cf4bc9b2ec819bf94e7a7d"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.39
        },
        {
          "id": "aspect-mcp-mock-model-server",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-mock-model-server",
          "name": "MockModelServer streams sequential SSE",
          "description": "`projects/Codex/codex-rs/mcp-server/tests/common/mock_model_server.rs` creates a Wiremock server that responds to `/v1/chat/completions` predefined SSE events using an atomic call counter. MCP tests depend on this helper to check the order of tool_calls without a real model.",
          "tags": [
            "testing",
            "mcp",
            "integrations"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/tests/common/mock_model_server.rs",
              "sha256": "e521e90331e17096d74427e0677fcbe803badc251e9a0a871b79b13921503dc0"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.37
        },
        {
          "id": "aspect-mcp-patch-elicitation-test",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-patch-elicitation-test",
          "name": "Patch approval elicitation",
          "description": "IN `codex_tool.rs` scenario `patch_approval_triggers_elicitation` creates diff, runs `create_apply_patch_sse_response` and is waiting for a response `read_stream_until_request_message`. The test checks the payload against `create_expected_patch_approval_elicitation_request`, sends `PatchApprovalResponse::Approved`, awaiting final `JSONRPCResponse` and makes sure the file is updated to \"modified content\\n\".",
          "tags": [
            "testing",
            "mcp",
            "apply-patch"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/tests/suite/codex_tool.rs",
              "sha256": "22f32bf51dfa7461c975cd35bea7d64733501e49ff2284e5171c7be31d2f0737"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.42
        },
        {
          "id": "aspect-mcp-process-harness",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-process-harness",
          "name": "McpProcess controls the startup of codex-mcp-server",
          "description": "`projects/Codex/codex-rs/mcp-server/tests/common/mcp_process.rs` wraps binary launch `codex-mcp-server`: Class `McpProcess` configures env (`CODEX_HOME`, `RUST_LOG`), manages stdin/stdout via Tokio and implements `initialize`, `send_codex_tool_call`, `read_jsonrpc_message`. The helper allows e2e MCP tests to perform full JSON-RPC exchange with the server.",
          "tags": [
            "testing",
            "mcp",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/tests/common/mcp_process.rs",
              "sha256": "85891a17b34d6333acd89dd19e1e8147ee0a720fb0dc7bcb3490326bc104871b"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.48
        },
        {
          "id": "aspect-mcp-types-progress-test",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-progress-notification-test",
          "name": "mcp-types validates notifications/progress",
          "description": "`projects/Codex/codex-rs/mcp-types/tests/suite/progress_notification.rs` parses JSONRPC notification `notifications/progress`, converts to `ServerNotification::ProgressNotification` and checks the fields `message`, `progress_token`, `total`. This confirms that the SDK understands MCP progress and is serializing tokens correctly.",
          "tags": [
            "testing",
            "mcp",
            "schema"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-types/tests/suite/progress_notification.rs",
              "sha256": "443df2d533f83116f95b19eef96ed7d8539990446662fa202e69b8fa80e74b1b"
            }
          ],
          "lastUpdated": "2025-10-13",
          "importance": 0.36
        },
        {
          "id": "aspect-mcp-responses-builders",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-responses-builders",
          "name": "SSE helpers for shell and apply_patch",
          "description": "`projects/Codex/codex-rs/mcp-server/tests/common/responses.rs` builds auxiliary SSE lines: generators of shell call, final assistant message and apply_patch. They serialize the payload via `serde_json::json`so that MCP tests can easily collect correct tool_calls without manual formatting.",
          "tags": [
            "testing",
            "mcp",
            "tools"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/tests/common/responses.rs",
              "sha256": "50ccac256a7fe50506ced92a7712a147dd8e956b7ac30cb7536870476440b614"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        },
        {
          "id": "aspect-mcp-shell-elicitation-test",
          "sectionId": "section-testing-mcp",
          "slug": "mcp-shell-elicitation-test",
          "name": "Exec tool elicitation end-to-end",
          "description": "`projects/Codex/codex-rs/mcp-server/tests/suite/codex_tool.rs` confirms exec-elicitation: `test_shell_command_approval_triggers_elicitation` unfolds `McpProcess` With `create_shell_sse_response`, waiting for a request via `read_stream_until_request_message` and compares JSONRPC with `create_expected_elicitation_request`. After answer `ExecApprovalResponse::Approved` the test catches `legacy_task_complete`, checks that the tool call returned \"File created!\", and confirms that the file appears in TempDir.",
          "tags": [
            "testing",
            "mcp",
            "exec"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/mcp-server/tests/suite/codex_tool.rs",
              "sha256": "22f32bf51dfa7461c975cd35bea7d64733501e49ff2284e5171c7be31d2f0737"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.43
        },
        {
          "id": "aspect-rmcp-stdio-smoke-server",
          "sectionId": "section-testing-mcp",
          "slug": "rmcp-stdio-smoke-server",
          "name": "STDIO MCP smoke test server",
          "description": "`rmcp-client/src/bin/rmcp_test_server.rs` provides a minimal STDIO server: `TestToolServer` publishes echo tool with JSON Schema, `serve(stdio())` waits for the client to complete and resets background tasks. Binary is used for smoke tests `codex mcp` in a dev environment without network dependencies.",
          "tags": [
            "mcp",
            "mcp-testing",
            "sandbox-policy",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/bin/rmcp_test_server.rs",
              "sha256": "30bcec648bad5ef59198577e7b4733ab3405c65b02bc32108ccc6b41d74c7e3e"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.38
        },
        {
          "id": "aspect-rmcp-stdio-test-server",
          "sectionId": "section-testing-mcp",
          "slug": "rmcp-stdio-test-server",
          "name": "RMCP stdio echo server for integration tests",
          "description": "`codex-rs/rmcp-client/src/bin/test_stdio_server.rs` raises `TestToolServer`, registers echo-tool with strict JSON Schema and serves MCP via standard streams (`serve(stdio())`). `call_tool` deserializes arguments, requests `MCP_TEST_VALUE` from the environment and returns `structured_content` with a message and env snapshot, after which `running.waiting().await` waits for the client to complete and drains background tasks. Binary uses rmcp client integration tests to test stdio transport without a real MCP server.",
          "tags": [
            "testing",
            "mcp",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/bin/test_stdio_server.rs",
              "sha256": "508aa6ae13ea52cb238b1bc88256b50cc7684cce5f2b5f52242d7788bb5e8ba0"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-rmcp-streamable-http-test-server",
          "sectionId": "section-testing-mcp",
          "slug": "rmcp-streamable-http-test-server",
          "name": "Streamable HTTP MCP test server",
          "description": "`rmcp-client/src/bin/test_streamable_http_server.rs` raises `axum` service `/mcp` With `StreamableHttpService` And `LocalSessionManager`. By variable `MCP_EXPECT_BEARER` middleware is enabled that checks Authorization. The server emulates the echo tool and prints the bind address so that the developer can locally run integration tests of the streamable HTTP transport.",
          "tags": [
            "integrations",
            "mcp",
            "mcp-testing",
            "sandbox-policy",
            "testing"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/rmcp-client/src/bin/test_streamable_http_server.rs",
              "sha256": "b0ec6bac12a803fdcd8b546d0c6ff7b89807cceae428a5ca7665260afa9a82c6"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.4
        }
      ]
    },
    {
      "id": "section-testing-change-tracking",
      "slug": "testing-change-tracking",
      "title": "Testing: Change Tracking & Rollouts",
      "entries": [
        {
          "id": "aspect-chatgpt-apply-command-e2e-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "chatgpt-apply-command-e2e-test",
          "name": "E2E tests chatgpt apply diff",
          "description": "`projects/Codex/codex-rs/chatgpt/tests/suite/apply_command_e2e.rs` brings up a temporary git repository, downloads the fixture `task_turn_fixture.json` and checks two scenarios: successful creation `scripts/fibonacci.js` and failure if there is an intentional conflict with merge markers. Tests make sure that `apply_diff_from_task` calculates env and reports errors to the user.",
          "tags": [
            "testing",
            "change-tracking",
            "git"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/chatgpt/tests/suite/apply_command_e2e.rs",
              "sha256": "286c24bc9842a5db6533a8cd5d617ba2530a9e2a8a12c5edddc14081c6713877"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.44
        },
        {
          "id": "aspect-rollout-pagination-tests",
          "sectionId": "section-testing-change-tracking",
          "slug": "rollout-pagination-tests",
          "name": "Rollout pagination and tail tests",
          "description": "`core/src/rollout/tests.rs` generates directories `sessions/YYYY/MM/DD` through `write_session_file` and checks `get_conversations`/`get_conversation`: `test_list_conversations_latest_first` And `test_pagination_cursor` fix the order and cursors, `test_get_conversation_contents` checks JSONL entirely, `test_tail_includes_last_response_items` And `test_tail_skips_trailing_non_responses` collect the tail from `ResponseItem::Message`. `test_stable_ordering_same_second_pagination` maintains stability at the same timestamp so that resumes and reviews do not drift.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions",
            "persistence"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/src/rollout/tests.rs",
              "sha256": "8a68527d1a3cadc984ef257aa5080323f8ec7e0c3b9d6f63289408e4d940268a"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.5
        },
        {
          "id": "aspect-exec-test-apply-patch",
          "sectionId": "section-testing-change-tracking",
          "slug": "exec-apply-patch-test",
          "name": "codex-exec apply_patch regression tests",
          "description": "`exec/tests/suite/apply_patch.rs` maintains compatibility `codex-exec` With `apply_patch`: the first test calls the binary with `CODEX_APPLY_PATCH_ARG1`, the remaining scripts mount SSE with `ev_apply_patch_custom_tool_call` And `ev_apply_patch_function_call`, checking that files are updated as expected.",
          "tags": [
            "testing",
            "change-tracking",
            "apply-patch",
            "cli"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/exec/tests/suite/apply_patch.rs",
              "sha256": "b8e248d5e4e12c2ee86660dcc3f02ba5f849371f173372c1a33eb3010e54fe90"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.56
        },
        {
          "id": "aspect-review-mode-integration-tests",
          "sectionId": "section-testing-change-tracking",
          "slug": "review-mode-integration-tests",
          "name": "Review mode integration tests",
          "description": "`project/Codex/codex-rs/core/tests/suite/review.rs` emulates Responses API to test `Op::Review`: `review_op_emits_lifecycle_and_review_output` expects sequence `EnteredReviewMode`  `ExitedReviewMode(Some)`  `TaskComplete` and checks `ReviewOutputEvent` with the standard. `review_op_with_plain_text_emits_review_fallback`, `review_history_does_not_leak_into_parent_session` And `review_input_isolated_from_parent_history` fix fallback for unstructured output and no leakage of review messages to the parent session. The file also checks the findings entry in JSONL rollout, protecting the code review pipeline from regressions.",
          "tags": [
            "change-tracking",
            "testing",
            "rust"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/review.rs",
              "sha256": "a8bd06d19003b8fa10da7b2f6b8b436fe4ac15f1e373f077dc0ca60cd8367b01"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.61
        },
        {
          "id": "aspect-rollout-find-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "rollout-find-test",
          "name": "Rollout search integration test",
          "description": "`core/tests/suite/rollout_list_find.rs` creates a directory `sessions/YYYY/MM/DD`, writes minimal `rollout-...jsonl` With `session_meta.id` and checks that `find_conversation_path_by_id_str` returns the path. The test insures search by UUID and directory structure so that resume/backtrack find the required rollout.",
          "tags": [
            "change-tracking",
            "testing",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/rollout_list_find.rs",
              "sha256": "301fd3d5b8a87b8c1efe8f5e25a6e631c64a4e0f27da838b25a7858426badf88"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.52
        },
        {
          "id": "aspect-archive-rollout-move",
          "sectionId": "section-testing-change-tracking",
          "slug": "archive-rollout-move",
          "name": "Archive conversation moves rollout",
          "description": "`app-server/tests/suite/archive_thread.rs` creates a conversation, invokes `ArchiveConversation`, and asserts the rollout JSONL is moved into `ARCHIVED_SESSIONS_SUBDIR`. This validates archive behavior in the app-server API.",
          "tags": [
            "change-tracking",
            "testing",
            "persistence"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/app-server/tests/suite/archive_thread.rs",
              "sha256": "e4a3caff394b521726606fc434068cc0b1805477d407fcfa8f80056b664a2827"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.54
        },
        {
          "id": "aspect-compact-manual-three-requests-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-manual-three-requests-test",
          "name": "Manual compact generates three requests",
          "description": "`codex-rs/core/tests/suite/compact.rs` scenario `summarize_context_three_requests_and_instructions` drives away user turn -> `Op::Compact` -> next turn. Wiremock captures three requests: the second contains `SUMMARIZATION_PROMPT`, the third is a bridged user message without a trigger and a new input. After `Op::Shutdown` the test parses rollout and confirms the presence of three `RolloutItem::TurnContext` And `Compacted` With `SUMMARY_TEXT`.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact.rs",
              "sha256": "bde9c482ee7cc3e3c82a8429a982302d527619b7c6370ef620f5ae70ee753789"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.39
        },
        {
          "id": "aspect-compact-auto-token-limit-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-auto-token-limit-test",
          "name": "Auto-compact triggers after token limit",
          "description": "`auto_compact_runs_after_token_limit_hit` mounts three SSEs and starts two user turns. Checks show that exactly one request contains `SUMMARIZATION_PROMPT`, he is third in order, and `instructions` coincide with the basic ones from the first appeal. This fixes automatic compaction when the history goes beyond `model_auto_compact_token_limit`.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact.rs",
              "sha256": "bde9c482ee7cc3e3c82a8429a982302d527619b7c6370ef620f5ae70ee753789"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        },
        {
          "id": "aspect-compact-rollout-turn-context-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-rollout-turn-context-test",
          "name": "Auto-compact saves TurnContext to rollout",
          "description": "`auto_compact_persists_rollout_entries` after two user turn calls `Op::Shutdown` and parses the rollout file: the loop counts the number `RolloutItem::TurnContext` and makes sure that there are at least two of them. This confirms that automatic compaction does not lose records of API moves in the logs.",
          "tags": [
            "testing",
            "change-tracking",
            "persistence"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact.rs",
              "sha256": "bde9c482ee7cc3e3c82a8429a982302d527619b7c6370ef620f5ae70ee753789"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.34
        },
        {
          "id": "aspect-compact-failed-attempt-stops-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-failed-attempt-stops-test",
          "name": "Auto-compact doesn't get stuck on error",
          "description": "`auto_compact_stops_after_failed_attempt` simulates context exceeding: in response to the first auto-compact an error is received, then a normal response. The test catches `EventMsg::Error` with the word \"limit\", checks that there are only three requests and the last JSON no longer contains `SUMMARIZATION_PROMPT`, that is, the system returns to the normal turn without repetitions.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact.rs",
              "sha256": "bde9c482ee7cc3e3c82a8429a982302d527619b7c6370ef620f5ae70ee753789"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-compact-manual-retry-trims-history",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-manual-retry-trims-history",
          "name": "Manual compact trims history when retracing",
          "description": "`manual_compact_retries_after_context_window_error` causes the first compact to fall off `context_length_exceeded`, then repeats the request. The test catches `BackgroundEvent` with the message \"Trimmed 1 older conversation item\" and compares `input` two requests: retry is shorter by one element, but completes `SUMMARIZATION_PROMPT`, which confirms the correct history truncation.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact.rs",
              "sha256": "bde9c482ee7cc3e3c82a8429a982302d527619b7c6370ef620f5ae70ee753789"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.37
        },
        {
          "id": "aspect-compact-auto-interleaved-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-auto-interleaved-test",
          "name": "Auto-compact without unnecessary Task events",
          "description": "`auto_compact_allows_multiple_attempts_when_interleaved_with_other_turn_events` plays six SSEs (responses, summaries, function call). The test makes sure that `auto_compact_lifecycle_events` is empty (there are no extra TaskStarted/TaskComplete), and out of six requests the second and fifth contain `SUMMARIZATION_PROMPT`, fourth - a message about `unsupported tool call`, which confirms the stability of the auto-compact in a saturated event queue.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact.rs",
              "sha256": "bde9c482ee7cc3e3c82a8429a982302d527619b7c6370ef620f5ae70ee753789"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.35
        },
        {
          "id": "aspect-compact-resume-fork-history-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-resume-fork-history-test",
          "name": "Compact -> resume -> fork saves history",
          "description": "`codex-rs/core/tests/suite/compact_resume_fork.rs` scenario `compact_resume_and_fork_preserve_model_history_view` builds JSON expectations with `normalize_line_endings` and compares with `gather_request_bodies`. The check demonstrates that requests after resume and fork contain the same message prefix as after compact, including summary and reuse prompt_cache_key.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact_resume_fork.rs",
              "sha256": "2691cd60dea4628204258d74980c1870030d65f35a6aecf892942f89cb55e6b9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.38
        },
        {
          "id": "aspect-compact-second-resume-history-test",
          "sectionId": "section-testing-change-tracking",
          "slug": "compact-second-resume-history-test",
          "name": "Repeated compact+resume preserves the history prefix",
          "description": "`compact_resume_after_second_compaction_preserves_history` adds a second compaction on the branch after fork, mounts `mount_second_compact_flow` and again summarizes the conversation. Test compares `compact_input_array` And `resume_input_array`: input after resume begins with the same elements (including bridge on `AFTER_FORK`), as after compact, and Wiremock confirms the passage through `AFTER_COMPACT_2` and the final turn.",
          "tags": [
            "testing",
            "change-tracking",
            "sessions"
          ],
          "sources": [
            {
              "path": "projects/Codex/codex-rs/core/tests/suite/compact_resume_fork.rs",
              "sha256": "2691cd60dea4628204258d74980c1870030d65f35a6aecf892942f89cb55e6b9"
            }
          ],
          "lastUpdated": "2026-01-16",
          "importance": 0.36
        }
      ]
    }
  ]
}
